{"version":3,"file":"AdminRewards-D-Nz5zNb.js","sources":["../../src/pages/AdminRewards.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { AdminGuard } from \"@/components/AdminGuard\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Gift, Plus, Edit, Trash2, TrendingUp, Users, Award } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface Reward {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  points_cost: number;\r\n  reward_type: string;\r\n  reward_value: any;\r\n  is_active: boolean;\r\n}\r\n\r\ninterface RedemptionStats {\r\n  total_redemptions: number;\r\n  total_points_spent: number;\r\n  active_redemptions: number;\r\n}\r\n\r\nconst AdminRewards = () => {\r\n  const { toast } = useToast();\r\n  const [rewards, setRewards] = useState<Reward[]>([]);\r\n  const [redemptions, setRedemptions] = useState<any[]>([]);\r\n  const [stats, setStats] = useState<RedemptionStats>({ total_redemptions: 0, total_points_spent: 0, active_redemptions: 0 });\r\n  const [editingReward, setEditingReward] = useState<Reward | null>(null);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    points_cost: \"\",\r\n    reward_type: \"extra_products\",\r\n    reward_value_amount: \"\",\r\n    is_active: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    await Promise.all([fetchRewards(), fetchRedemptions(), fetchStats()]);\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchRewards = async () => {\r\n    const { data, error } = await supabase\r\n      .from('rewards_catalog')\r\n      .select('*')\r\n      .order('points_cost', { ascending: true });\r\n\r\n    if (!error && data) {\r\n      setRewards(data);\r\n    }\r\n  };\r\n\r\n  const fetchRedemptions = async () => {\r\n    const { data, error } = await supabase\r\n      .from('redemptions')\r\n      .select('*')\r\n      .order('redeemed_at', { ascending: false })\r\n      .limit(50);\r\n\r\n    if (!error && data) {\r\n      setRedemptions(data);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    const { data, error } = await supabase\r\n      .from('redemptions')\r\n      .select('points_spent, status');\r\n\r\n    if (!error && data) {\r\n      const total_redemptions = data.length;\r\n      const total_points_spent = data.reduce((sum, r) => sum + r.points_spent, 0);\r\n      const active_redemptions = data.filter(r => r.status === 'applied').length;\r\n      setStats({ total_redemptions, total_points_spent, active_redemptions });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const rewardValue: any = {\r\n      amount: parseInt(formData.reward_value_amount) || 0,\r\n    };\r\n\r\n    if (formData.reward_type === 'premium_support') {\r\n      rewardValue.duration_days = parseInt(formData.reward_value_amount) || 30;\r\n      delete rewardValue.amount;\r\n    }\r\n\r\n    const rewardData = {\r\n      name: formData.name,\r\n      description: formData.description,\r\n      points_cost: parseInt(formData.points_cost),\r\n      reward_type: formData.reward_type,\r\n      reward_value: rewardValue,\r\n      is_active: formData.is_active,\r\n    };\r\n\r\n    if (editingReward) {\r\n      const { error } = await supabase\r\n        .from('rewards_catalog')\r\n        .update(rewardData)\r\n        .eq('id', editingReward.id);\r\n\r\n      if (error) {\r\n        toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\r\n      } else {\r\n        toast({ title: \"Success\", description: \"Reward updated successfully\" });\r\n        setIsDialogOpen(false);\r\n        fetchRewards();\r\n        resetForm();\r\n      }\r\n    } else {\r\n      const { error } = await supabase\r\n        .from('rewards_catalog')\r\n        .insert([rewardData]);\r\n\r\n      if (error) {\r\n        toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\r\n      } else {\r\n        toast({ title: \"Success\", description: \"Reward created successfully\" });\r\n        setIsDialogOpen(false);\r\n        fetchRewards();\r\n        resetForm();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (reward: Reward) => {\r\n    setEditingReward(reward);\r\n    setFormData({\r\n      name: reward.name,\r\n      description: reward.description || \"\",\r\n      points_cost: reward.points_cost.toString(),\r\n      reward_type: reward.reward_type,\r\n      reward_value_amount: (reward.reward_value.amount || reward.reward_value.duration_days || \"\").toString(),\r\n      is_active: reward.is_active,\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm(\"Are you sure you want to delete this reward?\")) return;\r\n\r\n    const { error } = await supabase\r\n      .from('rewards_catalog')\r\n      .delete()\r\n      .eq('id', id);\r\n\r\n    if (error) {\r\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\r\n    } else {\r\n      toast({ title: \"Success\", description: \"Reward deleted successfully\" });\r\n      fetchRewards();\r\n    }\r\n  };\r\n\r\n  const toggleActive = async (reward: Reward) => {\r\n    const { error } = await supabase\r\n      .from('rewards_catalog')\r\n      .update({ is_active: !reward.is_active })\r\n      .eq('id', reward.id);\r\n\r\n    if (error) {\r\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\r\n    } else {\r\n      fetchRewards();\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: \"\",\r\n      description: \"\",\r\n      points_cost: \"\",\r\n      reward_type: \"extra_products\",\r\n      reward_value_amount: \"\",\r\n      is_active: true,\r\n    });\r\n    setEditingReward(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <AdminGuard>\r\n        <div className=\"container mx-auto p-6\">\r\n          <div className=\"animate-pulse space-y-6\">\r\n            <div className=\"h-10 bg-muted rounded w-1/4\"></div>\r\n            <div className=\"grid md:grid-cols-3 gap-4\">\r\n              {[1, 2, 3].map(i => <div key={i} className=\"h-32 bg-muted rounded\"></div>)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </AdminGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminGuard>\r\n      <div className=\"container mx-auto p-6 space-y-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">Rewards Management</h1>\r\n            <p className=\"text-muted-foreground\">Manage reward catalog and view redemption analytics</p>\r\n          </div>\r\n          <Dialog open={isDialogOpen} onOpenChange={(open) => { setIsDialogOpen(open); if (!open) resetForm(); }}>\r\n            <DialogTrigger asChild>\r\n              <Button>\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Add Reward\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-md\">\r\n              <DialogHeader>\r\n                <DialogTitle>{editingReward ? \"Edit Reward\" : \"Add New Reward\"}</DialogTitle>\r\n                <DialogDescription>Create or update a reward in the catalog</DialogDescription>\r\n              </DialogHeader>\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                  <Label htmlFor=\"name\">Reward Name</Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"description\">Description</Label>\r\n                  <Textarea\r\n                    id=\"description\"\r\n                    value={formData.description}\r\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"points_cost\">Points Cost</Label>\r\n                  <Input\r\n                    id=\"points_cost\"\r\n                    type=\"number\"\r\n                    value={formData.points_cost}\r\n                    onChange={(e) => setFormData({ ...formData, points_cost: e.target.value })}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"reward_type\">Reward Type</Label>\r\n                  <Select value={formData.reward_type} onValueChange={(value) => setFormData({ ...formData, reward_type: value })}>\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"extra_products\">Extra Products</SelectItem>\r\n                      <SelectItem value=\"extra_share_links\">Extra Share Links</SelectItem>\r\n                      <SelectItem value=\"premium_support\">Premium Support</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"reward_value_amount\">\r\n                    {formData.reward_type === 'premium_support' ? 'Duration (days)' : 'Amount'}\r\n                  </Label>\r\n                  <Input\r\n                    id=\"reward_value_amount\"\r\n                    type=\"number\"\r\n                    value={formData.reward_value_amount}\r\n                    onChange={(e) => setFormData({ ...formData, reward_value_amount: e.target.value })}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_active\"\r\n                    checked={formData.is_active}\r\n                    onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\r\n                  />\r\n                  <Label htmlFor=\"is_active\">Active</Label>\r\n                </div>\r\n                <Button type=\"submit\" className=\"w-full\">\r\n                  {editingReward ? \"Update Reward\" : \"Create Reward\"}\r\n                </Button>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid md:grid-cols-3 gap-4\">\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Redemptions</CardTitle>\r\n              <Award className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.total_redemptions}</div>\r\n            </CardContent>\r\n          </Card>\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Points Spent</CardTitle>\r\n              <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.total_points_spent.toLocaleString()}</div>\r\n            </CardContent>\r\n          </Card>\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Active Rewards</CardTitle>\r\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.active_redemptions}</div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Rewards Table */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Rewards Catalog</CardTitle>\r\n            <CardDescription>Manage available rewards</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Reward</TableHead>\r\n                  <TableHead>Type</TableHead>\r\n                  <TableHead>Cost</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {rewards.map((reward) => (\r\n                  <TableRow key={reward.id}>\r\n                    <TableCell>\r\n                      <div>\r\n                        <div className=\"font-medium\">{reward.name}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">{reward.description}</div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Badge variant=\"outline\">{reward.reward_type.replace(/_/g, ' ')}</Badge>\r\n                    </TableCell>\r\n                    <TableCell>{reward.points_cost} pts</TableCell>\r\n                    <TableCell>\r\n                      <Badge variant={reward.is_active ? \"default\" : \"secondary\"}>\r\n                        {reward.is_active ? \"Active\" : \"Inactive\"}\r\n                      </Badge>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(reward)}>\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button size=\"sm\" variant=\"ghost\" onClick={() => toggleActive(reward)}>\r\n                          {reward.is_active ? \"Disable\" : \"Enable\"}\r\n                        </Button>\r\n                        <Button size=\"sm\" variant=\"ghost\" onClick={() => handleDelete(reward.id)}>\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Recent Redemptions */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Recent Redemptions</CardTitle>\r\n            <CardDescription>Latest reward redemptions by vendors</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>User ID</TableHead>\r\n                  <TableHead>Points Spent</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Date</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {redemptions.slice(0, 10).map((redemption) => (\r\n                  <TableRow key={redemption.id}>\r\n                    <TableCell className=\"font-mono text-xs\">{redemption.user_id.substring(0, 8)}...</TableCell>\r\n                    <TableCell>{redemption.points_spent} pts</TableCell>\r\n                    <TableCell>\r\n                      <Badge variant={redemption.status === 'applied' ? \"default\" : \"secondary\"}>\r\n                        {redemption.status}\r\n                      </Badge>\r\n                    </TableCell>\r\n                    <TableCell>{format(new Date(redemption.redeemed_at), 'MMM d, yyyy')}</TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </AdminGuard>\r\n  );\r\n};\r\n\r\nexport default AdminRewards;"],"names":["AdminRewards","toast","useToast","rewards","setRewards","useState","redemptions","setRedemptions","stats","setStats","editingReward","setEditingReward","isDialogOpen","setIsDialogOpen","loading","setLoading","formData","setFormData","useEffect","fetchData","fetchRewards","fetchRedemptions","fetchStats","data","error","supabase","total_redemptions","total_points_spent","sum","r","active_redemptions","handleSubmit","e","rewardValue","rewardData","resetForm","handleEdit","reward","handleDelete","id","toggleActive","jsx","AdminGuard","jsxs","i","Dialog","open","DialogTrigger","Button","Plus","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Input","Textarea","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Card","CardHeader","CardTitle","Award","CardContent","TrendingUp","Users","CardDescription","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Badge","Edit","Trash2","redemption","format"],"mappings":"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"}