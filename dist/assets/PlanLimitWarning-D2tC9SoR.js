import{j as s}from"./query-vendor-BLxHmmGk.js";import{u as j,r as o}from"./react-vendor-BeR0k5Z3.js";import{F as c,B as L}from"./index-DGlTgSKx.js";import{A,b as N,a as E}from"./alert-B0m9J_BT.js";import{T as P,d as U}from"./ui-vendor-CN4tOqpp.js";const B=()=>{const x=j(),[e,g]=o.useState(null),[a,_]=o.useState(null),[f,m]=o.useState(!0);o.useEffect(()=>{k()},[]);const k=async()=>{try{const{data:{user:r}}=await c.auth.getUser();if(!r){m(!1);return}const[l,b,v]=await Promise.all([c.from("vendor_permissions").select("subscription_plan, max_products, max_share_links, max_team_members, max_product_images").eq("user_id",r.id).single(),c.from("products").select("id",{count:"exact",head:!0}).eq("user_id",r.id).is("deleted_at",null),c.from("share_links").select("id",{count:"exact",head:!0}).eq("user_id",r.id)]);if(l.error)throw l.error;g(l.data),_({products_count:b.count||0,share_links_count:v.count||0})}catch(r){console.error("Error fetching limits:",r)}finally{m(!1)}};if(f||!e||!a)return null;const n=a.products_count/e.max_products*100,i=a.share_links_count/e.max_share_links*100,d=n>=100&&e.max_products!==999999,u=i>=100&&e.max_share_links!==999999,p=n>=80&&n<100&&e.max_products!==999999,h=i>=80&&i<100&&e.max_share_links!==999999,t=d||u;return!t&&!(p||h)?null:s.jsxs(A,{className:t?"border-destructive bg-destructive/10 dark:bg-destructive/20":"border-orange-500 bg-orange-50 dark:bg-orange-950/20",children:[s.jsx(P,{className:t?"h-4 w-4 text-destructive":"h-4 w-4 text-orange-600"}),s.jsx(N,{className:t?"text-destructive dark:text-destructive":"text-orange-900 dark:text-orange-100",children:t?"Plan Limits Exhausted":"Approaching Plan Limits"}),s.jsxs(E,{className:t?"text-destructive/90 dark:text-destructive/90 space-y-2":"text-orange-800 dark:text-orange-200 space-y-2",children:[(d||p)&&s.jsxs("p",{children:["ðŸ“¦ Products: ",s.jsxs("strong",{children:[a.products_count,"/",e.max_products]})," used (",Math.round(n),"%)",d&&s.jsx("span",{className:"ml-2 font-semibold",children:"- Limit Reached!"})]}),(u||h)&&s.jsxs("p",{children:["ðŸ”— Share Links: ",s.jsxs("strong",{children:[a.share_links_count,"/",e.max_share_links]})," used (",Math.round(i),"%)",u&&s.jsx("span",{className:"ml-2 font-semibold",children:"- Limit Reached!"})]}),t&&s.jsx("p",{className:"font-medium mt-2",children:"You've reached your plan limit. Upgrade now to continue using this feature."}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsxs(L,{size:"sm",onClick:()=>x("/pricing"),className:t?"bg-destructive hover:bg-destructive/90":"bg-orange-600 hover:bg-orange-700",children:[s.jsx(U,{className:"mr-2 h-4 w-4"}),"Upgrade to ",e.subscription_plan==="starter"?"Professional":"Enterprise"]})})]})]})};export{B as P};
//# sourceMappingURL=PlanLimitWarning-D2tC9SoR.js.map
