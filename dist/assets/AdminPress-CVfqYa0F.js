import{b as D,u as S,c as h,j as e}from"./query-vendor-BLxHmmGk.js";import{r as g}from"./react-vendor-BeR0k5Z3.js";import{B as o,C as F,G as P,H as q,D as E,F as u}from"./index-DGlTgSKx.js";import{A as k}from"./AdminLayout-B_TMsqTg.js";import{I as d}from"./input-CEHl5GoJ.js";import{T as L}from"./textarea-DU5hu0UG.js";import{B as R}from"./badge-DknkzE8c.js";import{S as A}from"./switch-CO0K2nGH.js";import{L as i}from"./label-ClRcubO_.js";import{ak as T,N as M,K as I,a_ as K,ay as O,u as l}from"./ui-vendor-CN4tOqpp.js";import{D as Q,a as B,b as U,c as z,d as H}from"./dialog-CRWggOUB.js";import{M as G}from"./MediaUpload-CGFYzLcf.js";import{A as $}from"./AdminLoadingSkeleton-CaIP2hSP.js";import{A as J}from"./AdminEmptyState-Deo2yDvW.js";import"./supabase-vendor-VSDMYZ1k.js";import"./separator-C73YyUTd.js";import"./sheet-Cln3_CyD.js";import"./index-CVwUD2ep.js";import"./index-aqCwQlp3.js";import"./NavLink-Br6M-CFW.js";import"./index-BC78nHQ6.js";import"./index-XJCymQHf.js";import"./index-DjQc2W_p.js";function je(){const m=D(),[b,n]=g.useState(!1),[c,f]=g.useState(null),[t,r]=g.useState({title:"",subtitle:"",content:"",publication:"",publication_logo:"",external_url:"",published_date:new Date().toISOString().split("T")[0],featured:!1}),{data:p,isLoading:v}=S({queryKey:["admin-press"],queryFn:async()=>{const{data:s,error:a}=await u.from("press_releases").select("*").order("published_date",{ascending:!1});if(a)throw a;return s}}),y=h({mutationFn:async s=>{const{error:a}=await u.from("press_releases").insert(s);if(a)throw a},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release created successfully"),n(!1),x()},onError:()=>l.error("Failed to create press release")}),N=h({mutationFn:async({id:s,data:a})=>{const{error:j}=await u.from("press_releases").update(a).eq("id",s);if(j)throw j},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release updated successfully"),n(!1),x()},onError:()=>l.error("Failed to update press release")}),w=h({mutationFn:async s=>{const{error:a}=await u.from("press_releases").delete().eq("id",s);if(a)throw a},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release deleted successfully")},onError:()=>l.error("Failed to delete press release")}),x=()=>{r({title:"",subtitle:"",content:"",publication:"",publication_logo:"",external_url:"",published_date:new Date().toISOString().split("T")[0],featured:!1}),f(null)},C=s=>{f(s),r({title:s.title,subtitle:s.subtitle||"",content:s.content,publication:s.publication||"",publication_logo:s.publication_logo||"",external_url:s.external_url||"",published_date:s.published_date,featured:s.featured||!1}),n(!0)},_=s=>{s.preventDefault(),c?N.mutate({id:c.id,data:t}):y.mutate(t)};return e.jsx(k,{children:e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Press Releases"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage press coverage and media mentions"})]}),e.jsxs(Q,{open:b,onOpenChange:n,children:[e.jsx(B,{asChild:!0,children:e.jsxs(o,{onClick:x,className:"shadow-md hover:shadow-lg transition-all",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"New Release"]})}),e.jsxs(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(z,{children:e.jsx(H,{children:c?"Edit Press Release":"Create Press Release"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Title"}),e.jsx(d,{value:t.title,onChange:s=>r({...t,title:s.target.value}),required:!0,className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Subtitle"}),e.jsx(d,{value:t.subtitle,onChange:s=>r({...t,subtitle:s.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Content"}),e.jsx(L,{value:t.content,onChange:s=>r({...t,content:s.target.value}),rows:8,required:!0,className:"mt-1.5"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Publication"}),e.jsx(d,{value:t.publication,onChange:s=>r({...t,publication:s.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Published Date"}),e.jsx(d,{type:"date",value:t.published_date,onChange:s=>r({...t,published_date:s.target.value}),required:!0,className:"mt-1.5"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Publication Logo"}),e.jsx("div",{className:"mt-1.5",children:e.jsx(G,{bucket:"press-media",onUploadComplete:s=>r({...t,publication_logo:s}),currentImage:t.publication_logo})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"External URL"}),e.jsx(d,{type:"url",value:t.external_url,onChange:s=>r({...t,external_url:s.target.value}),placeholder:"https://...",className:"mt-1.5"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(A,{checked:t.featured,onCheckedChange:s=>r({...t,featured:s})}),e.jsx(i,{children:"Featured"})]}),e.jsxs(o,{type:"submit",className:"w-full",children:[c?"Update":"Create"," Release"]})]})]})]})]}),v?e.jsx($,{}):!p||p.length===0?e.jsx(J,{icon:M,title:"No press releases yet",description:"Add press releases to showcase your media coverage and announcements",actionLabel:"Create First Release",onAction:()=>n(!0)}):e.jsx("div",{className:"grid gap-4",children:p.map((s,a)=>e.jsxs(F,{className:"bg-gradient-card border-border/50 shadow-md hover:shadow-lg transition-all duration-300 animate-fade-in",style:{animationDelay:`${a*50}ms`},children:[e.jsx(P,{children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(q,{className:"text-xl",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center text-sm",children:[s.publication&&e.jsx("span",{className:"font-medium text-foreground",children:s.publication}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.published_date).toLocaleDateString()}),s.featured&&e.jsx(R,{className:"bg-gradient-primary",children:"Featured"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.external_url&&e.jsx(o,{size:"sm",variant:"outline",asChild:!0,className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx("a",{href:s.external_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>C(s),className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>w.mutate(s.id),children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsxs(E,{className:"space-y-3",children:[s.subtitle&&e.jsx("p",{className:"text-sm font-medium text-foreground/80",children:s.subtitle}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 leading-relaxed",children:s.content})]})]},s.id))})]})})}export{je as default};
//# sourceMappingURL=AdminPress-CVfqYa0F.js.map
