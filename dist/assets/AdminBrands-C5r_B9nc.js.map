{"version":3,"file":"AdminBrands-C5r_B9nc.js","sources":["../../src/pages/AdminBrands.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { AdminLayout } from \"@/components/AdminLayout\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { toast } from \"sonner\";\r\nimport { Plus, Pencil, Trash2, Image } from \"lucide-react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { MediaUpload } from \"@/components/MediaUpload\";\r\nimport { AdminLoadingSkeleton } from \"@/components/admin/AdminLoadingSkeleton\";\r\nimport { AdminEmptyState } from \"@/components/admin/AdminEmptyState\";\r\n\r\ninterface Brand {\r\n  id: string;\r\n  name: string;\r\n  logo_url: string;\r\n  display_order: number;\r\n  active: boolean;\r\n}\r\n\r\nexport default function AdminBrands() {\r\n  const queryClient = useQueryClient();\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingBrand, setEditingBrand] = useState<Brand | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    logo_url: \"\",\r\n    display_order: 0,\r\n    active: true,\r\n  });\r\n\r\n  const { data: brands, isLoading } = useQuery({\r\n    queryKey: [\"admin-brands\"],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"brands\")\r\n        .select(\"*\")\r\n        .order(\"display_order\", { ascending: true });\r\n      if (error) throw error;\r\n      return data as Brand[];\r\n    },\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: async (data: typeof formData) => {\r\n      const { error } = await supabase.from(\"brands\").insert(data);\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-brands\"] });\r\n      toast.success(\"Brand created successfully\");\r\n      setIsDialogOpen(false);\r\n      resetForm();\r\n    },\r\n    onError: () => toast.error(\"Failed to create brand\"),\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: async ({ id, data }: { id: string; data: typeof formData }) => {\r\n      const { error } = await supabase\r\n        .from(\"brands\")\r\n        .update(data)\r\n        .eq(\"id\", id);\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-brands\"] });\r\n      toast.success(\"Brand updated successfully\");\r\n      setIsDialogOpen(false);\r\n      resetForm();\r\n    },\r\n    onError: () => toast.error(\"Failed to update brand\"),\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const { error } = await supabase.from(\"brands\").delete().eq(\"id\", id);\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-brands\"] });\r\n      toast.success(\"Brand deleted successfully\");\r\n    },\r\n    onError: () => toast.error(\"Failed to delete brand\"),\r\n  });\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: \"\",\r\n      logo_url: \"\",\r\n      display_order: 0,\r\n      active: true,\r\n    });\r\n    setEditingBrand(null);\r\n  };\r\n\r\n  const handleEdit = (brand: Brand) => {\r\n    setEditingBrand(brand);\r\n    setFormData({\r\n      name: brand.name,\r\n      logo_url: brand.logo_url,\r\n      display_order: brand.display_order,\r\n      active: brand.active,\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (editingBrand) {\r\n      updateMutation.mutate({ id: editingBrand.id, data: formData });\r\n    } else {\r\n      createMutation.mutate(formData);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AdminLayout>\r\n      <div className=\"p-6 space-y-6 animate-fade-in\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent\">\r\n              Brand Logos\r\n            </h1>\r\n            <p className=\"text-muted-foreground mt-1\">Manage brand logos displayed on your site</p>\r\n          </div>\r\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button onClick={resetForm} className=\"shadow-md hover:shadow-lg transition-all\">\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                New Brand\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>\r\n                  {editingBrand ? \"Edit Brand\" : \"Create Brand\"}\r\n                </DialogTitle>\r\n              </DialogHeader>\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                  <Label>Brand Name</Label>\r\n                  <Input\r\n                    value={formData.name}\r\n                    onChange={(e) =>\r\n                      setFormData({ ...formData, name: e.target.value })\r\n                    }\r\n                    required\r\n                    className=\"mt-1.5\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label>Logo</Label>\r\n                  <div className=\"mt-1.5\">\r\n                    <MediaUpload\r\n                      bucket=\"brand-logos\"\r\n                      onUploadComplete={(url) =>\r\n                        setFormData({ ...formData, logo_url: url })\r\n                      }\r\n                      currentImage={formData.logo_url}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <Label>Display Order</Label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={formData.display_order}\r\n                    onChange={(e) =>\r\n                      setFormData({\r\n                        ...formData,\r\n                        display_order: parseInt(e.target.value),\r\n                      })\r\n                    }\r\n                    className=\"mt-1.5\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 pt-2\">\r\n                  <Switch\r\n                    checked={formData.active}\r\n                    onCheckedChange={(checked) =>\r\n                      setFormData({ ...formData, active: checked })\r\n                    }\r\n                  />\r\n                  <Label>Active</Label>\r\n                </div>\r\n                <Button type=\"submit\" className=\"w-full\">\r\n                  {editingBrand ? \"Update\" : \"Create\"} Brand\r\n                </Button>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <AdminLoadingSkeleton />\r\n        ) : !brands || brands.length === 0 ? (\r\n          <AdminEmptyState\r\n            icon={Image}\r\n            title=\"No brands yet\"\r\n            description=\"Add brand logos to showcase your partners and collaborations\"\r\n            actionLabel=\"Add First Brand\"\r\n            onAction={() => setIsDialogOpen(true)}\r\n          />\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {brands.map((brand, index) => (\r\n              <Card\r\n                key={brand.id}\r\n                className=\"bg-gradient-card border-border/50 shadow-md hover:shadow-lg transition-all duration-300 animate-fade-in group\"\r\n                style={{ animationDelay: `${index * 50}ms` }}\r\n              >\r\n                <CardHeader>\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div className=\"flex-1\">\r\n                      <CardTitle className=\"text-lg\">{brand.name}</CardTitle>\r\n                      <div className=\"flex gap-2 mt-2\">\r\n                        <Badge variant={brand.active ? \"default\" : \"secondary\"} className={brand.active ? \"bg-success text-success-foreground\" : \"\"}>\r\n                          {brand.active ? \"Active\" : \"Inactive\"}\r\n                        </Badge>\r\n                        <Badge variant=\"outline\" className=\"text-xs\">\r\n                          Order: {brand.display_order}\r\n                        </Badge>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => handleEdit(brand)}\r\n                        className=\"hover:bg-primary/10 hover:border-primary transition-colors\"\r\n                      >\r\n                        <Pencil className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"destructive\"\r\n                        onClick={() => deleteMutation.mutate(brand.id)}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"relative aspect-video bg-muted/50 rounded-lg overflow-hidden border border-border/50\">\r\n                    <img\r\n                      src={brand.logo_url}\r\n                      alt={brand.name}\r\n                      className=\"w-full h-full object-contain p-4 transition-transform group-hover:scale-105\"\r\n                    />\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </AdminLayout>\r\n  );\r\n}\r\n"],"names":["AdminBrands","queryClient","useQueryClient","isDialogOpen","setIsDialogOpen","useState","editingBrand","setEditingBrand","formData","setFormData","brands","isLoading","useQuery","data","error","supabase","createMutation","useMutation","toast","resetForm","updateMutation","id","deleteMutation","handleEdit","brand","handleSubmit","e","jsx","AdminLayout","jsxs","Dialog","DialogTrigger","Button","Plus","DialogContent","DialogHeader","DialogTitle","Label","Input","MediaUpload","url","Switch","checked","AdminLoadingSkeleton","AdminEmptyState","Image","index","Card","CardHeader","CardTitle","Badge","Pencil","Trash2","CardContent"],"mappings":"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"}