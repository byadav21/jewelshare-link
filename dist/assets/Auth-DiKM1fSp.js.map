{"version":3,"file":"Auth-DiKM1fSp.js","sources":["../../src/components/PasswordStrength.tsx","../../src/pages/Auth.tsx"],"sourcesContent":["import { Progress } from \"@/components/ui/progress\";\r\nimport { CheckCircle2, XCircle, AlertCircle } from \"lucide-react\";\r\n\r\ninterface PasswordStrengthProps {\r\n  password: string;\r\n}\r\n\r\nexport const PasswordStrength = ({ password }: PasswordStrengthProps) => {\r\n  const calculateStrength = (): {\r\n    score: number;\r\n    label: string;\r\n    color: string;\r\n    requirements: {\r\n      minLength: boolean;\r\n      hasUpperCase: boolean;\r\n      hasLowerCase: boolean;\r\n      hasNumber: boolean;\r\n      hasSpecial: boolean;\r\n    };\r\n  } => {\r\n    const requirements = {\r\n      minLength: password.length >= 8,\r\n      hasUpperCase: /[A-Z]/.test(password),\r\n      hasLowerCase: /[a-z]/.test(password),\r\n      hasNumber: /[0-9]/.test(password),\r\n      hasSpecial: /[!@#$%^&*(),.?\":{}|<>]/.test(password),\r\n    };\r\n\r\n    const score = Object.values(requirements).filter(Boolean).length;\r\n\r\n    let label = \"Weak\";\r\n    let color = \"destructive\";\r\n\r\n    if (score === 5) {\r\n      label = \"Strong\";\r\n      color = \"success\";\r\n    } else if (score >= 3) {\r\n      label = \"Medium\";\r\n      color = \"warning\";\r\n    }\r\n\r\n    return { score, label, color, requirements };\r\n  };\r\n\r\n  if (!password) return null;\r\n\r\n  const { score, label, color, requirements } = calculateStrength();\r\n  const percentage = (score / 5) * 100;\r\n\r\n  const getProgressColor = () => {\r\n    if (percentage >= 80) return \"bg-green-500\";\r\n    if (percentage >= 60) return \"bg-yellow-500\";\r\n    return \"bg-red-500\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3 mt-2\">\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex items-center justify-between text-sm\">\r\n          <span className=\"text-muted-foreground\">Password Strength:</span>\r\n          <span\r\n            className={`font-medium ${\r\n              color === \"success\"\r\n                ? \"text-green-600\"\r\n                : color === \"warning\"\r\n                ? \"text-yellow-600\"\r\n                : \"text-red-600\"\r\n            }`}\r\n          >\r\n            {label}\r\n          </span>\r\n        </div>\r\n        <Progress value={percentage} className=\"h-2\">\r\n          <div\r\n            className={`h-full transition-all rounded-full ${getProgressColor()}`}\r\n            style={{ width: `${percentage}%` }}\r\n          />\r\n        </Progress>\r\n      </div>\r\n\r\n      <div className=\"space-y-1.5 text-xs\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {requirements.minLength ? (\r\n            <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\r\n          ) : (\r\n            <XCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          )}\r\n          <span className={requirements.minLength ? \"text-green-600\" : \"text-muted-foreground\"}>\r\n            At least 8 characters\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {requirements.hasUpperCase ? (\r\n            <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\r\n          ) : (\r\n            <XCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          )}\r\n          <span className={requirements.hasUpperCase ? \"text-green-600\" : \"text-muted-foreground\"}>\r\n            One uppercase letter\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {requirements.hasLowerCase ? (\r\n            <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\r\n          ) : (\r\n            <XCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          )}\r\n          <span className={requirements.hasLowerCase ? \"text-green-600\" : \"text-muted-foreground\"}>\r\n            One lowercase letter\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {requirements.hasNumber ? (\r\n            <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\r\n          ) : (\r\n            <XCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          )}\r\n          <span className={requirements.hasNumber ? \"text-green-600\" : \"text-muted-foreground\"}>\r\n            One number\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {requirements.hasSpecial ? (\r\n            <CheckCircle2 className=\"h-3.5 w-3.5 text-green-600\" />\r\n          ) : (\r\n            <XCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          )}\r\n          <span className={requirements.hasSpecial ? \"text-green-600\" : \"text-muted-foreground\"}>\r\n            One special character (!@#$%^&*)\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const validatePasswordStrength = (password: string): boolean => {\r\n  return (\r\n    password.length >= 8 &&\r\n    /[A-Z]/.test(password) &&\r\n    /[a-z]/.test(password) &&\r\n    /[0-9]/.test(password) &&\r\n    /[!@#$%^&*(),.?\":{}|<>]/.test(password)\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { toast } from \"sonner\";\r\nimport { Gem, Calculator, CheckCircle2, Sparkles } from \"lucide-react\";\r\nimport { PasswordStrength, validatePasswordStrength } from \"@/components/PasswordStrength\";\r\nimport { BackToHomeButton } from \"@/components/BackToHomeButton\";\r\nimport { z } from \"zod\";\r\n\r\n\r\n// Validation schemas\r\nconst emailSchema = z.string().trim().email({ message: \"Invalid email address\" }).max(255);\r\nconst passwordSchema = z.string().min(8, { message: \"Password must be at least 8 characters\" });\r\nconst phoneSchema = z.string().trim().min(10, { message: \"Phone number must be at least 10 digits\" }).max(15);\r\n\r\nconst Auth = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isSignUp, setIsSignUp] = useState(false);\r\n  const [isForgotPassword, setIsForgotPassword] = useState(false);\r\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([\"Jewellery\"]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [rememberMe, setRememberMe] = useState(true);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [businessName, setBusinessName] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const isEssentialsPlan = searchParams.get(\"plan\") === \"essentials\";\r\n\r\n  useEffect(() => {\r\n    const checkSession = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      if (session) {\r\n        const { data: approvalData } = await supabase\r\n          .from(\"user_approval_status\")\r\n          .select(\"status\")\r\n          .eq(\"user_id\", session.user.id)\r\n          .maybeSingle();\r\n        \r\n        if (approvalData?.status === \"approved\") {\r\n          // Check if user is admin\r\n          const { data: roleData } = await supabase\r\n            .from(\"user_roles\")\r\n            .select(\"role\")\r\n            .eq(\"user_id\", session.user.id)\r\n            .maybeSingle();\r\n          \r\n          if (roleData?.role === \"admin\") {\r\n            navigate(\"/admin\", { replace: true });\r\n          } else {\r\n            // Check if user has Essentials plan\r\n            const { data: permissions } = await supabase\r\n              .from(\"vendor_permissions\")\r\n              .select(\"subscription_plan\")\r\n              .eq(\"user_id\", session.user.id)\r\n              .maybeSingle();\r\n            \r\n            if (permissions?.subscription_plan === \"essentials\") {\r\n              navigate(\"/calculators\", { replace: true });\r\n            } else {\r\n              navigate(\"/catalog\", { replace: true });\r\n            }\r\n          }\r\n        } else {\r\n          navigate(\"/pending-approval\", { replace: true });\r\n        }\r\n      }\r\n    };\r\n\r\n    checkSession();\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\r\n      // Only redirect on SIGNED_IN event to avoid race conditions\r\n      if (event === 'SIGNED_IN' && session) {\r\n        setTimeout(async () => {\r\n          const { data: approvalData } = await supabase\r\n            .from(\"user_approval_status\")\r\n            .select(\"status\")\r\n            .eq(\"user_id\", session.user.id)\r\n            .maybeSingle();\r\n          \r\n          if (approvalData?.status === \"approved\") {\r\n            // Check if user is admin\r\n            const { data: roleData } = await supabase\r\n              .from(\"user_roles\")\r\n              .select(\"role\")\r\n              .eq(\"user_id\", session.user.id)\r\n              .maybeSingle();\r\n            \r\n            if (roleData?.role === \"admin\") {\r\n              navigate(\"/admin\", { replace: true });\r\n            } else {\r\n              // Check if user has Essentials plan\r\n              const { data: permissions } = await supabase\r\n                .from(\"vendor_permissions\")\r\n                .select(\"subscription_plan\")\r\n                .eq(\"user_id\", session.user.id)\r\n                .maybeSingle();\r\n              \r\n              if (permissions?.subscription_plan === \"essentials\") {\r\n                navigate(\"/calculators\", { replace: true });\r\n              } else {\r\n                navigate(\"/catalog\", { replace: true });\r\n              }\r\n            }\r\n          } else {\r\n            navigate(\"/pending-approval\", { replace: true });\r\n          }\r\n        }, 100);\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [navigate]);\r\n\r\n  const handleForgotPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n        redirectTo: `${window.location.origin}/reset-password`,\r\n      });\r\n      \r\n      if (error) throw error;\r\n      \r\n      toast.success(\"Password reset link sent to your email!\");\r\n      setIsForgotPassword(false);\r\n      setEmail(\"\");\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Failed to send reset email\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAuth = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Validate email\r\n      const emailValidation = emailSchema.safeParse(email);\r\n      if (!emailValidation.success) {\r\n        toast.error(emailValidation.error.issues[0].message);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Validate password\r\n      const passwordValidation = passwordSchema.safeParse(password);\r\n      if (!passwordValidation.success) {\r\n        toast.error(passwordValidation.error.issues[0].message);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (isSignUp) {\r\n        // Additional validation for signup - check password strength\r\n        if (!validatePasswordStrength(password)) {\r\n          toast.error(\"Password must include uppercase, lowercase, number, and special character\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Validate phone number for Essentials plan\r\n        if (isEssentialsPlan) {\r\n          const phoneValidation = phoneSchema.safeParse(phoneNumber);\r\n          if (!phoneValidation.success) {\r\n            toast.error(phoneValidation.error.issues[0].message);\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n\r\n        const { data, error } = await supabase.auth.signUp({\r\n          email: emailValidation.data,\r\n          password,\r\n          options: {\r\n            emailRedirectTo: `${window.location.origin}/`,\r\n          },\r\n        });\r\n        if (error) throw error;\r\n        \r\n        // Create approval status entry with email\r\n        if (data.user) {\r\n          const approvalStatus = isEssentialsPlan ? \"approved\" : \"pending\";\r\n          \r\n          const { error: approvalError } = await supabase\r\n            .from(\"user_approval_status\")\r\n            .insert({\r\n              user_id: data.user.id,\r\n              status: approvalStatus,\r\n              email: email,\r\n              phone: isEssentialsPlan ? phoneNumber : null,\r\n              business_name: isEssentialsPlan ? businessName : null,\r\n            });\r\n          \r\n          if (approvalError) {\r\n            console.error(\"Error creating approval status:\", approvalError);\r\n          }\r\n\r\n          // Create vendor profile with selected categories\r\n          const { error: profileError } = await supabase\r\n            .from(\"vendor_profiles\")\r\n            .insert({\r\n              user_id: data.user.id,\r\n              seller_categories: isEssentialsPlan ? [\"Jewellery\"] : selectedCategories,\r\n              business_name: isEssentialsPlan ? businessName : null,\r\n              phone: isEssentialsPlan ? phoneNumber : null,\r\n            });\r\n\r\n          if (profileError) {\r\n            console.error(\"Error creating vendor profile:\", profileError);\r\n          }\r\n\r\n          // Set plan to essentials if applicable\r\n          if (isEssentialsPlan) {\r\n            const { error: permissionsError } = await supabase\r\n              .from(\"vendor_permissions\")\r\n              .insert({\r\n                user_id: data.user.id,\r\n                subscription_plan: \"essentials\",\r\n              });\r\n\r\n            if (permissionsError) {\r\n              console.error(\"Error setting essentials plan:\", permissionsError);\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (isEssentialsPlan) {\r\n          toast.success(\"Welcome! Your 30-day free calculator trial has started. You now have unlimited access to our professional calculators!\");\r\n          // Redirect to calculators page for Essentials users\r\n          setTimeout(() => {\r\n            navigate(\"/calculators\");\r\n          }, 2000);\r\n        } else {\r\n          toast.success(\"Account created! Your request is pending admin approval.\");\r\n        }\r\n      } else {\r\n        const { data, error } = await supabase.auth.signInWithPassword({\r\n          email: emailValidation.data,\r\n          password,\r\n        });\r\n        if (error) throw error;\r\n\r\n        // Update session persistence based on remember me\r\n        if (!rememberMe && data.session) {\r\n          // If remember me is off, update to use sessionStorage instead of localStorage\r\n          await supabase.auth.setSession(data.session);\r\n        }\r\n        \r\n        // Register device session\r\n        if (data.session) {\r\n          try {\r\n            const deviceInfo = navigator.userAgent;\r\n            await supabase.functions.invoke(\"manage-session\", {\r\n              body: {\r\n                action: \"register\",\r\n                sessionId: data.session.access_token,\r\n                deviceInfo,\r\n                ipAddress: \"client\",\r\n              },\r\n            });\r\n          } catch (sessionError) {\r\n            console.error(\"Session registration error:\", sessionError);\r\n          }\r\n        }\r\n        \r\n        // Check approval status\r\n        if (data.user) {\r\n          const { data: approvalData } = await supabase\r\n            .from(\"user_approval_status\")\r\n            .select(\"status\")\r\n            .eq(\"user_id\", data.user.id)\r\n            .maybeSingle();\r\n          \r\n          if (approvalData?.status === \"approved\") {\r\n            toast.success(\"Welcome back!\");\r\n          } else if (approvalData?.status === \"pending\") {\r\n            toast.info(\"Your account is pending approval.\");\r\n          } else if (approvalData?.status === \"rejected\") {\r\n            toast.error(\"Your account was not approved.\");\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Authentication failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\r\n      <div className=\"absolute top-4 left-4\">\r\n        <BackToHomeButton variant=\"ghost\" />\r\n      </div>\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center\">\r\n          <div className=\"flex justify-center mb-4\">\r\n            {isEssentialsPlan ? (\r\n              <div className=\"relative\">\r\n                <Calculator className=\"h-12 w-12 text-gemstone-from\" />\r\n                <Sparkles className=\"h-5 w-5 text-gemstone-to absolute -top-1 -right-1 animate-pulse\" />\r\n              </div>\r\n            ) : (\r\n              <Gem className=\"h-12 w-12 text-primary\" />\r\n            )}\r\n          </div>\r\n          {isEssentialsPlan && isSignUp && (\r\n            <Badge className=\"mb-3 bg-gradient-to-r from-gemstone-from to-gemstone-to\">\r\n              Free 30-Day Trial\r\n            </Badge>\r\n          )}\r\n          <CardTitle className=\"text-3xl font-serif\">\r\n            {isEssentialsPlan && isSignUp ? \"Start Your Free Calculator Trial\" : \"Jewelry Catalog\"}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {isForgotPassword \r\n              ? \"Enter your email to reset your password\" \r\n              : isSignUp \r\n              ? isEssentialsPlan\r\n                ? \"Get unlimited access to professional jewelry calculators\"\r\n                : \"Create an account to manage your inventory\"\r\n              : \"Sign in to your account\"}\r\n          </CardDescription>\r\n          {isEssentialsPlan && isSignUp && (\r\n            <div className=\"mt-4 space-y-2 text-left\">\r\n              <div className=\"flex items-start gap-2 text-sm\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-gemstone-from shrink-0 mt-0.5\" />\r\n                <span>Unlimited Diamond Calculator access with comparison tool</span>\r\n              </div>\r\n              <div className=\"flex items-start gap-2 text-sm\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-gemstone-from shrink-0 mt-0.5\" />\r\n                <span>Full Manufacturing Cost Estimator for accurate pricing</span>\r\n              </div>\r\n              <div className=\"flex items-start gap-2 text-sm\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-gemstone-from shrink-0 mt-0.5\" />\r\n                <span>Read-only catalog browsing to explore features</span>\r\n              </div>\r\n              <div className=\"flex items-start gap-2 text-sm\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-gemstone-from shrink-0 mt-0.5\" />\r\n                <span>Upgrade anytime to full catalog & sharing features</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardHeader>\r\n        <CardContent>\r\n          {isForgotPassword ? (\r\n            <form onSubmit={handleForgotPassword} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  required\r\n                  placeholder=\"you@example.com\"\r\n                />\r\n              </div>\r\n              <Button type=\"submit\" className=\"w-full\" disabled={loading}>\r\n                {loading ? \"Sending...\" : \"Send Reset Link\"}\r\n              </Button>\r\n            </form>\r\n          ) : (\r\n            <form onSubmit={handleAuth} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  required\r\n                  placeholder=\"you@example.com\"\r\n                />\r\n              </div>\r\n              {!isSignUp && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <Input\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                    placeholder=\"••••••••\"\r\n                    minLength={6}\r\n                  />\r\n                </div>\r\n              )}\r\n              {isSignUp && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <Input\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                    placeholder=\"••••••••\"\r\n                    minLength={8}\r\n                  />\r\n                  <PasswordStrength password={password} />\r\n                </div>\r\n              )}\r\n\r\n              {isSignUp && isEssentialsPlan && (\r\n                <>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"businessName\">Business Name (Optional)</Label>\r\n                    <Input\r\n                      id=\"businessName\"\r\n                      type=\"text\"\r\n                      value={businessName}\r\n                      onChange={(e) => setBusinessName(e.target.value)}\r\n                      placeholder=\"Your Jewelry Business\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"phoneNumber\">Phone Number *</Label>\r\n                    <Input\r\n                      id=\"phoneNumber\"\r\n                      type=\"tel\"\r\n                      value={phoneNumber}\r\n                      onChange={(e) => setPhoneNumber(e.target.value)}\r\n                      required\r\n                      placeholder=\"+1 (555) 123-4567\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">Required to activate your free trial</p>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {isSignUp && !isEssentialsPlan && (\r\n                <div className=\"space-y-2\">\r\n                  <Label>Select Product Categories</Label>\r\n                  <div className=\"space-y-2\">\r\n                    {[\"Jewellery\", \"Gemstones\", \"Loose Diamonds\"].map((category) => (\r\n                      <div key={category} className=\"flex items-center space-x-2\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id={category}\r\n                          checked={selectedCategories.includes(category)}\r\n                          onChange={(e) => {\r\n                            if (e.target.checked) {\r\n                              setSelectedCategories([...selectedCategories, category]);\r\n                            } else {\r\n                              setSelectedCategories(selectedCategories.filter(c => c !== category));\r\n                            }\r\n                          }}\r\n                          className=\"w-4 h-4\"\r\n                        />\r\n                        <Label htmlFor={category} className=\"font-normal cursor-pointer\">\r\n                          {category}\r\n                        </Label>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  {selectedCategories.length === 0 && (\r\n                    <p className=\"text-sm text-red-500\">Please select at least one category</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {!isSignUp && (\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Checkbox\r\n                    id=\"rememberMe\"\r\n                    checked={rememberMe}\r\n                    onCheckedChange={(checked) => setRememberMe(checked as boolean)}\r\n                  />\r\n                  <Label\r\n                    htmlFor=\"rememberMe\"\r\n                    className=\"text-sm font-normal cursor-pointer\"\r\n                  >\r\n                    Remember me for 30 days\r\n                  </Label>\r\n                </div>\r\n              )}\r\n\r\n              <Button \r\n                type=\"submit\" \r\n                className={`w-full ${isEssentialsPlan && isSignUp ? 'bg-gradient-to-r from-gemstone-from to-gemstone-to' : ''}`}\r\n                disabled={loading || (isSignUp && !isEssentialsPlan && (selectedCategories.length === 0 || !validatePasswordStrength(password))) || (isSignUp && isEssentialsPlan && (!phoneNumber || !validatePasswordStrength(password)))}\r\n              >\r\n                {loading ? \"Loading...\" : isSignUp ? isEssentialsPlan ? \"Start Free Trial\" : \"Create Account\" : \"Sign In\"}\r\n              </Button>\r\n            </form>\r\n          )}\r\n          <div className=\"mt-4 text-center space-y-2\">\r\n            {!isForgotPassword && !isSignUp && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setIsForgotPassword(true)}\r\n                className=\"block w-full text-sm text-primary hover:underline\"\r\n              >\r\n                Forgot password?\r\n              </button>\r\n            )}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setIsForgotPassword(false);\r\n                setIsSignUp(!isSignUp);\r\n              }}\r\n              className=\"text-sm text-primary hover:underline\"\r\n            >\r\n              {isForgotPassword \r\n                ? \"Back to sign in\" \r\n                : isSignUp \r\n                ? isEssentialsPlan \r\n                  ? \"Already have a calculator trial account? Sign in\"\r\n                  : \"Already have an account? Sign in\"\r\n                : isEssentialsPlan\r\n                ? \"Want to try calculators? Start free trial\"\r\n                : \"Don't have an account? Sign up\"}\r\n            </button>\r\n            {!isEssentialsPlan && !isSignUp && !isForgotPassword && (\r\n              <div className=\"pt-3 border-t\">\r\n                <p className=\"text-xs text-muted-foreground mb-2\">Just want to try our calculators?</p>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  size=\"sm\"\r\n                  onClick={() => navigate(\"/auth?plan=essentials\")}\r\n                  className=\"w-full text-gemstone-from border-gemstone-from/30 hover:bg-gemstone-from/10\"\r\n                >\r\n                  <Calculator className=\"mr-2 h-4 w-4\" />\r\n                  Start 30-Day Free Calculator Trial\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;"],"names":["PasswordStrength","password","calculateStrength","requirements","score","label","color","percentage","getProgressColor","jsxs","jsx","Progress","CheckCircle2","XCircle","validatePasswordStrength","emailSchema","z","passwordSchema","phoneSchema","Auth","email","setEmail","useState","setPassword","isSignUp","setIsSignUp","isForgotPassword","setIsForgotPassword","selectedCategories","setSelectedCategories","loading","setLoading","rememberMe","setRememberMe","phoneNumber","setPhoneNumber","businessName","setBusinessName","navigate","useNavigate","searchParams","useSearchParams","isEssentialsPlan","useEffect","session","supabase","approvalData","roleData","permissions","subscription","event","handleForgotPassword","e","error","toast","handleAuth","emailValidation","passwordValidation","phoneValidation","data","approvalStatus","approvalError","profileError","permissionsError","deviceInfo","sessionError","BackToHomeButton","Card","CardHeader","Calculator","Sparkles","Gem","Badge","CardTitle","CardDescription","CardContent","Label","Input","Button","Fragment","category","c","Checkbox","checked"],"mappings":"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"}