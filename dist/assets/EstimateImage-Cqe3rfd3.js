import{j as s}from"./query-vendor-CIvqgC9B.js";import{r as o}from"./react-vendor-BCzWReGx.js";import{l as m}from"./index-DBHw7ps1.js";import{ak as g}from"./ui-vendor-B3Ur81tx.js";const f=async(e,n,r=3600)=>{try{const{data:t,error:a}=await m.storage.from(e).createSignedUrl(n,r);return a?(console.error("Error generating signed URL:",a),null):t.signedUrl}catch(t){return console.error("Failed to generate signed URL:",t),null}},x=(e,n)=>{try{const t=new URL(e).pathname.split(`/${n}/`);return t.length>1?t[1]:e}catch{return e}},p=async(e,n=3600)=>{if(!e)return e;const r=x(e,"manufacturing-estimates");return await f("manufacturing-estimates",r,n)||e},S=({src:e,alt:n,className:r=""})=>{const[t,a]=o.useState(""),[u,i]=o.useState(!0),[d,l]=o.useState(!1);return o.useEffect(()=>{(async()=>{if(!e){i(!1);return}try{i(!0),l(!1);const c=await p(e);a(c)}catch(c){console.error("Failed to load image:",c),l(!0)}finally{i(!1)}})()},[e]),e?u?s.jsx("div",{className:`flex items-center justify-center bg-muted ${r}`,children:s.jsx(g,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):d||!t?s.jsx("div",{className:`flex items-center justify-center bg-muted ${r}`,children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Failed to load image"})}):s.jsx("img",{src:t,alt:n,className:r,onError:()=>l(!0)}):null};export{S as E};
//# sourceMappingURL=EstimateImage-Cqe3rfd3.js.map
