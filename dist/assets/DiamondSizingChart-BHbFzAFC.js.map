{"version":3,"mappings":"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","names":["DiamondShapeSVG","shape","size","className","fillColor","strokeColor","useGradient","fill","stroke","opacity","renderShape","jsxs","Fragment","jsx","DIAMOND_SHAPES","SHAPE_COLORS","RING_SIZES","parseMM","mmString","cleaned","parts","val","getVisualScale","carat","scale","calculateFaceUpArea","parsed","useDiamondComparison","mmInput","mmWidthInput","useMemo","searchLength","searchWidth","results","shapeInfo","lengthDiff","widthDiff","matchScore","a","b","Diamond3DViewer","lazy","DiamondSizingChart","selectedShape","setSelectedShape","useState","selectedCaratIndex","setSelectedCaratIndex","compareMode","setCompareMode","compareShape","setCompareShape","setMmInput","setMmWidthInput","selectedRingSize","setSelectedRingSize","showRingOverlay","setShowRingOverlay","multiOverlayMode","setMultiOverlayMode","selectedShapesForOverlay","setSelectedShapesForOverlay","overlayCaratIndex","setOverlayCaratIndex","autoRotate3D","setAutoRotate3D","mmToCaratResults","shapeData","compareShapeData","selectedSize","compareSize","overlayCaratWeight","_a","toggleShapeForOverlay","useCallback","prev","s","getRingDiameter","ringSize","ring","r","ringScale","shapeKeys","toolSchema","faqSchema","breadcrumbSchema","SEOHead","StructuredData","Header","BreadcrumbNav","ScrollReveal","Diamond","Card","CardHeader","CardTitle","Sparkles","CardDescription","CardContent","motion","cn","ZoomIn","Button","Badge","AnimatePresence","Scale","Slider","value","Ruler","Hand","index","Info","Box","Switch","Label","Suspense","Layers","CircleDot","Search","Input","e","result","idx","isSelected","sizeData","width","height","oneCaratSize","Footer","ThemeSwitcher"],"ignoreList":[],"sources":["../../src/components/diamond/DiamondShapeSVG.tsx","../../src/constants/diamondData.ts","../../src/utils/diamondCalculations.ts","../../src/hooks/useDiamondComparison.ts","../../src/pages/DiamondSizingChart.tsx"],"sourcesContent":["import { ShapeKey } from \"@/constants/diamondData\";\r\n\r\ninterface DiamondShapeSVGProps {\r\n  shape: ShapeKey;\r\n  size?: number;\r\n  className?: string;\r\n  fillColor?: string;\r\n  strokeColor?: string;\r\n  useGradient?: boolean;\r\n}\r\n\r\nexport const DiamondShapeSVG = ({ \r\n  shape, \r\n  size = 100, \r\n  className,\r\n  fillColor,\r\n  strokeColor,\r\n  useGradient = true\r\n}: DiamondShapeSVGProps) => {\r\n  const fill = fillColor || (useGradient ? \"url(#diamondGradient)\" : \"currentColor\");\r\n  const stroke = strokeColor || (useGradient ? \"url(#diamondGradient)\" : \"currentColor\");\r\n  const opacity = fillColor ? 1 : 0.3;\r\n\r\n  const renderShape = () => {\r\n    switch (shape) {\r\n      case \"round\":\r\n        return (\r\n          <>\r\n            <circle cx=\"50\" cy=\"50\" r=\"45\" fill={fill} opacity={opacity} />\r\n            <circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <circle cx=\"50\" cy=\"50\" r=\"35\" fill=\"none\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"princess\":\r\n        return (\r\n          <>\r\n            <rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill={fill} opacity={opacity} />\r\n            <rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <line x1=\"10\" y1=\"10\" x2=\"90\" y2=\"90\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n            <line x1=\"90\" y1=\"10\" x2=\"10\" y2=\"90\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"oval\":\r\n        return (\r\n          <>\r\n            <ellipse cx=\"50\" cy=\"50\" rx=\"40\" ry=\"28\" fill={fill} opacity={opacity} />\r\n            <ellipse cx=\"50\" cy=\"50\" rx=\"40\" ry=\"28\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <ellipse cx=\"50\" cy=\"50\" rx=\"30\" ry=\"20\" fill=\"none\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"cushion\":\r\n        return (\r\n          <>\r\n            <rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" rx=\"15\" fill={fill} opacity={opacity} />\r\n            <rect x=\"10\" y=\"10\" width=\"80\" height=\"80\" rx=\"15\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <rect x=\"20\" y=\"20\" width=\"60\" height=\"60\" rx=\"10\" fill=\"none\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"emerald\":\r\n        return (\r\n          <>\r\n            <polygon points=\"15,20 85,20 90,80 10,80\" fill={fill} opacity={opacity} />\r\n            <polygon points=\"15,20 85,20 90,80 10,80\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <line x1=\"25\" y1=\"35\" x2=\"75\" y2=\"35\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n            <line x1=\"20\" y1=\"50\" x2=\"80\" y2=\"50\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n            <line x1=\"18\" y1=\"65\" x2=\"82\" y2=\"65\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"pear\":\r\n        return (\r\n          <>\r\n            <path d=\"M50 10 C20 40, 15 65, 50 95 C85 65, 80 40, 50 10\" fill={fill} opacity={opacity} />\r\n            <path d=\"M50 10 C20 40, 15 65, 50 95 C85 65, 80 40, 50 10\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n          </>\r\n        );\r\n      \r\n      case \"marquise\":\r\n        return (\r\n          <>\r\n            <ellipse cx=\"50\" cy=\"50\" rx=\"45\" ry=\"25\" fill={fill} opacity={opacity} />\r\n            <ellipse cx=\"50\" cy=\"50\" rx=\"45\" ry=\"25\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <line x1=\"5\" y1=\"50\" x2=\"95\" y2=\"50\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      case \"heart\":\r\n        return (\r\n          <>\r\n            <path d=\"M50 88 C20 60, 5 40, 25 20 C40 8, 50 20, 50 30 C50 20, 60 8, 75 20 C95 40, 80 60, 50 88\" fill={fill} opacity={opacity} />\r\n            <path d=\"M50 88 C20 60, 5 40, 25 20 C40 8, 50 20, 50 30 C50 20, 60 8, 75 20 C95 40, 80 60, 50 88\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n          </>\r\n        );\r\n      \r\n      case \"radiant\":\r\n        return (\r\n          <>\r\n            <polygon points=\"20,10 80,10 95,50 80,90 20,90 5,50\" fill={fill} opacity={opacity} />\r\n            <polygon points=\"20,10 80,10 95,50 80,90 20,90 5,50\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n          </>\r\n        );\r\n      \r\n      case \"asscher\":\r\n        return (\r\n          <>\r\n            <polygon points=\"20,5 80,5 95,20 95,80 80,95 20,95 5,80 5,20\" fill={fill} opacity={opacity} />\r\n            <polygon points=\"20,5 80,5 95,20 95,80 80,95 20,95 5,80 5,20\" fill=\"none\" stroke={stroke} strokeWidth=\"2\" />\r\n            <polygon points=\"30,15 70,15 85,30 85,70 70,85 30,85 15,70 15,30\" fill=\"none\" stroke={stroke} strokeWidth=\"1\" opacity=\"0.5\" />\r\n          </>\r\n        );\r\n      \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <svg viewBox=\"0 0 100 100\" className={className} style={{ width: size, height: size }}>\r\n      {useGradient && (\r\n        <defs>\r\n          <linearGradient id=\"diamondGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n            <stop offset=\"0%\" stopColor=\"hsl(var(--diamond-from))\" />\r\n            <stop offset=\"100%\" stopColor=\"hsl(var(--diamond-to))\" />\r\n          </linearGradient>\r\n        </defs>\r\n      )}\r\n      {renderShape()}\r\n    </svg>\r\n  );\r\n};\r\n","// Diamond shape data with mm sizes for different carat weights\r\nexport const DIAMOND_SHAPES = {\r\n  round: {\r\n    name: \"Round Brilliant\",\r\n    description: \"The most popular and brilliant diamond shape\",\r\n    icon: \"●\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"4.1\", depth: \"2.5\" },\r\n      { carat: 0.50, mm: \"5.2\", depth: \"3.1\" },\r\n      { carat: 0.75, mm: \"5.8\", depth: \"3.5\" },\r\n      { carat: 1.00, mm: \"6.5\", depth: \"3.9\" },\r\n      { carat: 1.25, mm: \"6.9\", depth: \"4.2\" },\r\n      { carat: 1.50, mm: \"7.4\", depth: \"4.5\" },\r\n      { carat: 1.75, mm: \"7.8\", depth: \"4.7\" },\r\n      { carat: 2.00, mm: \"8.2\", depth: \"4.9\" },\r\n      { carat: 2.50, mm: \"8.8\", depth: \"5.3\" },\r\n      { carat: 3.00, mm: \"9.3\", depth: \"5.6\" },\r\n      { carat: 4.00, mm: \"10.2\", depth: \"6.1\" },\r\n      { carat: 5.00, mm: \"11.0\", depth: \"6.6\" },\r\n    ],\r\n  },\r\n  princess: {\r\n    name: \"Princess Cut\",\r\n    description: \"Square shape with brilliant faceting\",\r\n    icon: \"◆\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"3.3 x 3.3\", depth: \"2.4\" },\r\n      { carat: 0.50, mm: \"4.2 x 4.2\", depth: \"3.0\" },\r\n      { carat: 0.75, mm: \"4.8 x 4.8\", depth: \"3.4\" },\r\n      { carat: 1.00, mm: \"5.5 x 5.5\", depth: \"3.9\" },\r\n      { carat: 1.25, mm: \"5.9 x 5.9\", depth: \"4.2\" },\r\n      { carat: 1.50, mm: \"6.2 x 6.2\", depth: \"4.5\" },\r\n      { carat: 1.75, mm: \"6.5 x 6.5\", depth: \"4.7\" },\r\n      { carat: 2.00, mm: \"7.0 x 7.0\", depth: \"5.0\" },\r\n      { carat: 2.50, mm: \"7.5 x 7.5\", depth: \"5.4\" },\r\n      { carat: 3.00, mm: \"8.0 x 8.0\", depth: \"5.7\" },\r\n      { carat: 4.00, mm: \"8.8 x 8.8\", depth: \"6.3\" },\r\n      { carat: 5.00, mm: \"9.5 x 9.5\", depth: \"6.8\" },\r\n    ],\r\n  },\r\n  oval: {\r\n    name: \"Oval\",\r\n    description: \"Elongated shape with brilliant sparkle\",\r\n    icon: \"⬭\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"5.0 x 3.5\", depth: \"2.2\" },\r\n      { carat: 0.50, mm: \"6.0 x 4.0\", depth: \"2.6\" },\r\n      { carat: 0.75, mm: \"7.0 x 5.0\", depth: \"3.0\" },\r\n      { carat: 1.00, mm: \"8.0 x 5.5\", depth: \"3.4\" },\r\n      { carat: 1.25, mm: \"8.5 x 5.8\", depth: \"3.6\" },\r\n      { carat: 1.50, mm: \"9.0 x 6.0\", depth: \"3.8\" },\r\n      { carat: 1.75, mm: \"9.5 x 6.3\", depth: \"4.0\" },\r\n      { carat: 2.00, mm: \"10.0 x 6.5\", depth: \"4.2\" },\r\n      { carat: 2.50, mm: \"10.5 x 7.0\", depth: \"4.5\" },\r\n      { carat: 3.00, mm: \"11.0 x 7.5\", depth: \"4.8\" },\r\n      { carat: 4.00, mm: \"12.0 x 8.0\", depth: \"5.2\" },\r\n      { carat: 5.00, mm: \"13.0 x 8.5\", depth: \"5.6\" },\r\n    ],\r\n  },\r\n  cushion: {\r\n    name: \"Cushion Cut\",\r\n    description: \"Soft square with rounded corners\",\r\n    icon: \"▢\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"3.5 x 3.5\", depth: \"2.3\" },\r\n      { carat: 0.50, mm: \"4.5 x 4.5\", depth: \"2.9\" },\r\n      { carat: 0.75, mm: \"5.0 x 5.0\", depth: \"3.3\" },\r\n      { carat: 1.00, mm: \"5.5 x 5.5\", depth: \"3.6\" },\r\n      { carat: 1.25, mm: \"6.0 x 6.0\", depth: \"3.9\" },\r\n      { carat: 1.50, mm: \"6.5 x 6.5\", depth: \"4.2\" },\r\n      { carat: 1.75, mm: \"6.8 x 6.8\", depth: \"4.5\" },\r\n      { carat: 2.00, mm: \"7.0 x 7.0\", depth: \"4.6\" },\r\n      { carat: 2.50, mm: \"7.5 x 7.5\", depth: \"5.0\" },\r\n      { carat: 3.00, mm: \"8.0 x 8.0\", depth: \"5.3\" },\r\n      { carat: 4.00, mm: \"8.8 x 8.8\", depth: \"5.8\" },\r\n      { carat: 5.00, mm: \"9.5 x 9.5\", depth: \"6.2\" },\r\n    ],\r\n  },\r\n  emerald: {\r\n    name: \"Emerald Cut\",\r\n    description: \"Elegant rectangular step-cut\",\r\n    icon: \"▭\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"4.5 x 3.0\", depth: \"2.0\" },\r\n      { carat: 0.50, mm: \"5.5 x 4.0\", depth: \"2.6\" },\r\n      { carat: 0.75, mm: \"6.0 x 4.5\", depth: \"2.9\" },\r\n      { carat: 1.00, mm: \"7.0 x 5.0\", depth: \"3.2\" },\r\n      { carat: 1.25, mm: \"7.5 x 5.3\", depth: \"3.5\" },\r\n      { carat: 1.50, mm: \"8.0 x 5.5\", depth: \"3.7\" },\r\n      { carat: 1.75, mm: \"8.3 x 5.8\", depth: \"3.9\" },\r\n      { carat: 2.00, mm: \"8.5 x 6.0\", depth: \"4.0\" },\r\n      { carat: 2.50, mm: \"9.0 x 6.5\", depth: \"4.3\" },\r\n      { carat: 3.00, mm: \"9.5 x 7.0\", depth: \"4.6\" },\r\n      { carat: 4.00, mm: \"10.5 x 7.5\", depth: \"5.0\" },\r\n      { carat: 5.00, mm: \"11.5 x 8.0\", depth: \"5.4\" },\r\n    ],\r\n  },\r\n  pear: {\r\n    name: \"Pear Shape\",\r\n    description: \"Teardrop shape combining round and marquise\",\r\n    icon: \"◇\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"5.0 x 3.5\", depth: \"2.1\" },\r\n      { carat: 0.50, mm: \"6.5 x 4.5\", depth: \"2.7\" },\r\n      { carat: 0.75, mm: \"7.5 x 5.0\", depth: \"3.1\" },\r\n      { carat: 1.00, mm: \"8.5 x 5.5\", depth: \"3.4\" },\r\n      { carat: 1.25, mm: \"9.0 x 5.8\", depth: \"3.6\" },\r\n      { carat: 1.50, mm: \"9.5 x 6.0\", depth: \"3.8\" },\r\n      { carat: 1.75, mm: \"10.0 x 6.3\", depth: \"4.0\" },\r\n      { carat: 2.00, mm: \"10.5 x 6.5\", depth: \"4.2\" },\r\n      { carat: 2.50, mm: \"11.0 x 7.0\", depth: \"4.5\" },\r\n      { carat: 3.00, mm: \"12.0 x 7.5\", depth: \"4.8\" },\r\n      { carat: 4.00, mm: \"13.0 x 8.0\", depth: \"5.2\" },\r\n      { carat: 5.00, mm: \"14.0 x 8.5\", depth: \"5.6\" },\r\n    ],\r\n  },\r\n  marquise: {\r\n    name: \"Marquise\",\r\n    description: \"Football-shaped with pointed ends\",\r\n    icon: \"◇\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"6.0 x 3.0\", depth: \"1.9\" },\r\n      { carat: 0.50, mm: \"8.0 x 4.0\", depth: \"2.5\" },\r\n      { carat: 0.75, mm: \"9.0 x 4.5\", depth: \"2.8\" },\r\n      { carat: 1.00, mm: \"10.0 x 5.0\", depth: \"3.1\" },\r\n      { carat: 1.25, mm: \"10.5 x 5.3\", depth: \"3.3\" },\r\n      { carat: 1.50, mm: \"11.0 x 5.5\", depth: \"3.5\" },\r\n      { carat: 1.75, mm: \"11.5 x 5.8\", depth: \"3.7\" },\r\n      { carat: 2.00, mm: \"12.0 x 6.0\", depth: \"3.8\" },\r\n      { carat: 2.50, mm: \"13.0 x 6.5\", depth: \"4.1\" },\r\n      { carat: 3.00, mm: \"14.0 x 7.0\", depth: \"4.4\" },\r\n      { carat: 4.00, mm: \"15.0 x 7.5\", depth: \"4.8\" },\r\n      { carat: 5.00, mm: \"16.0 x 8.0\", depth: \"5.1\" },\r\n    ],\r\n  },\r\n  heart: {\r\n    name: \"Heart Shape\",\r\n    description: \"Romantic symbol of love\",\r\n    icon: \"♥\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"4.0 x 4.0\", depth: \"2.4\" },\r\n      { carat: 0.50, mm: \"5.0 x 5.0\", depth: \"3.0\" },\r\n      { carat: 0.75, mm: \"5.5 x 5.5\", depth: \"3.4\" },\r\n      { carat: 1.00, mm: \"6.5 x 6.5\", depth: \"3.9\" },\r\n      { carat: 1.25, mm: \"7.0 x 7.0\", depth: \"4.2\" },\r\n      { carat: 1.50, mm: \"7.5 x 7.5\", depth: \"4.5\" },\r\n      { carat: 1.75, mm: \"7.8 x 7.8\", depth: \"4.7\" },\r\n      { carat: 2.00, mm: \"8.0 x 8.0\", depth: \"4.8\" },\r\n      { carat: 2.50, mm: \"8.5 x 8.5\", depth: \"5.2\" },\r\n      { carat: 3.00, mm: \"9.0 x 9.0\", depth: \"5.5\" },\r\n      { carat: 4.00, mm: \"10.0 x 10.0\", depth: \"6.0\" },\r\n      { carat: 5.00, mm: \"11.0 x 11.0\", depth: \"6.5\" },\r\n    ],\r\n  },\r\n  radiant: {\r\n    name: \"Radiant Cut\",\r\n    description: \"Trimmed corners with brilliant facets\",\r\n    icon: \"◈\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"3.5 x 3.0\", depth: \"2.2\" },\r\n      { carat: 0.50, mm: \"4.5 x 4.0\", depth: \"2.8\" },\r\n      { carat: 0.75, mm: \"5.0 x 4.5\", depth: \"3.2\" },\r\n      { carat: 1.00, mm: \"5.5 x 5.0\", depth: \"3.5\" },\r\n      { carat: 1.25, mm: \"6.0 x 5.5\", depth: \"3.8\" },\r\n      { carat: 1.50, mm: \"6.5 x 5.8\", depth: \"4.0\" },\r\n      { carat: 1.75, mm: \"7.0 x 6.0\", depth: \"4.2\" },\r\n      { carat: 2.00, mm: \"7.3 x 6.5\", depth: \"4.5\" },\r\n      { carat: 2.50, mm: \"7.8 x 7.0\", depth: \"4.8\" },\r\n      { carat: 3.00, mm: \"8.3 x 7.5\", depth: \"5.1\" },\r\n      { carat: 4.00, mm: \"9.0 x 8.0\", depth: \"5.5\" },\r\n      { carat: 5.00, mm: \"9.8 x 8.5\", depth: \"5.9\" },\r\n    ],\r\n  },\r\n  asscher: {\r\n    name: \"Asscher Cut\",\r\n    description: \"Square step-cut with cropped corners\",\r\n    icon: \"◇\",\r\n    sizes: [\r\n      { carat: 0.25, mm: \"3.3 x 3.3\", depth: \"2.3\" },\r\n      { carat: 0.50, mm: \"4.2 x 4.2\", depth: \"2.9\" },\r\n      { carat: 0.75, mm: \"4.8 x 4.8\", depth: \"3.3\" },\r\n      { carat: 1.00, mm: \"5.5 x 5.5\", depth: \"3.8\" },\r\n      { carat: 1.25, mm: \"5.9 x 5.9\", depth: \"4.1\" },\r\n      { carat: 1.50, mm: \"6.2 x 6.2\", depth: \"4.3\" },\r\n      { carat: 1.75, mm: \"6.5 x 6.5\", depth: \"4.5\" },\r\n      { carat: 2.00, mm: \"7.0 x 7.0\", depth: \"4.8\" },\r\n      { carat: 2.50, mm: \"7.5 x 7.5\", depth: \"5.2\" },\r\n      { carat: 3.00, mm: \"8.0 x 8.0\", depth: \"5.5\" },\r\n      { carat: 4.00, mm: \"8.8 x 8.8\", depth: \"6.0\" },\r\n      { carat: 5.00, mm: \"9.5 x 9.5\", depth: \"6.5\" },\r\n    ],\r\n  },\r\n} as const;\r\n\r\nexport type ShapeKey = keyof typeof DIAMOND_SHAPES;\r\n\r\n// Shape colors for multi-overlay comparison\r\nexport const SHAPE_COLORS: Record<ShapeKey, string> = {\r\n  round: \"hsl(var(--primary))\",\r\n  princess: \"hsl(280, 70%, 50%)\",\r\n  oval: \"hsl(200, 70%, 50%)\",\r\n  cushion: \"hsl(340, 70%, 50%)\",\r\n  emerald: \"hsl(160, 70%, 50%)\",\r\n  pear: \"hsl(30, 70%, 50%)\",\r\n  marquise: \"hsl(60, 70%, 50%)\",\r\n  heart: \"hsl(0, 70%, 50%)\",\r\n  radiant: \"hsl(220, 70%, 50%)\",\r\n  asscher: \"hsl(120, 70%, 50%)\",\r\n};\r\n\r\n// Ring size data with inner diameter in mm\r\nexport const RING_SIZES = [\r\n  { size: 4, diameterMM: 14.9, circumference: 46.8 },\r\n  { size: 5, diameterMM: 15.7, circumference: 49.3 },\r\n  { size: 6, diameterMM: 16.5, circumference: 51.9 },\r\n  { size: 7, diameterMM: 17.3, circumference: 54.4 },\r\n  { size: 8, diameterMM: 18.1, circumference: 56.9 },\r\n  { size: 9, diameterMM: 19.0, circumference: 59.5 },\r\n  { size: 10, diameterMM: 19.8, circumference: 62.1 },\r\n] as const;\r\n","/**\r\n * Diamond Calculation Utilities\r\n * \r\n * @description Provides functions for parsing diamond measurements,\r\n * calculating visual scales, and computing face-up areas for diamond\r\n * sizing and comparison features.\r\n * \r\n * @module diamondCalculations\r\n */\r\n\r\n/**\r\n * Parsed millimeter dimensions\r\n */\r\nexport interface ParsedDimensions {\r\n  /** Length dimension in millimeters */\r\n  length: number;\r\n  /** Width dimension in millimeters */\r\n  width: number;\r\n}\r\n\r\n/**\r\n * Parse millimeter value from string format\r\n * \r\n * @description Handles various mm string formats including:\r\n * - \"x.x x x.x\" format (with spaces)\r\n * - \"lengthxwidth\" format\r\n * - Single value (creates square dimensions)\r\n * \r\n * @param mmString - The measurement string to parse (e.g., \"5.5x4.2\" or \"6.0\")\r\n * @returns Parsed dimensions object or null if parsing fails\r\n * \r\n * @example\r\n * ```ts\r\n * parseMM(\"5.5x4.2\"); // { length: 5.5, width: 4.2 }\r\n * parseMM(\"6.0\");     // { length: 6.0, width: 6.0 }\r\n * parseMM(\"invalid\"); // null\r\n * ```\r\n */\r\nexport const parseMM = (mmString: string): ParsedDimensions | null => {\r\n  // Remove all whitespace for consistent parsing\r\n  const cleaned = mmString.replace(/\\s+/g, \"\");\r\n  \r\n  // Handle \"lengthxwidth\" format\r\n  if (cleaned.includes(\"x\")) {\r\n    const parts = cleaned.split(\"x\").map(p => parseFloat(p));\r\n    if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {\r\n      return { length: parts[0], width: parts[1] };\r\n    }\r\n  } else {\r\n    // Handle single value (square dimensions)\r\n    const val = parseFloat(cleaned);\r\n    if (!isNaN(val)) {\r\n      return { length: val, width: val };\r\n    }\r\n  }\r\n  \r\n  return null;\r\n};\r\n\r\n/**\r\n * Calculate visual scale factor based on carat weight\r\n * \r\n * @description Converts carat weight to a pixel scale value for\r\n * rendering diamond visualizations. Uses a linear scale with\r\n * capping to prevent oversized renders.\r\n * \r\n * @param carat - The diamond's carat weight\r\n * @returns Scale value in pixels (60-200 range)\r\n * \r\n * @example\r\n * ```ts\r\n * getVisualScale(0.5);  // 75\r\n * getVisualScale(1.0);  // 90\r\n * getVisualScale(5.0);  // 200 (capped)\r\n * ```\r\n */\r\nexport const getVisualScale = (carat: number): number => {\r\n  const baseScale = 60;\r\n  const scale = baseScale + (carat * 30);\r\n  return Math.min(scale, 200);\r\n};\r\n\r\n/**\r\n * Get overlay scale for diamond comparison views\r\n * \r\n * @description Calculates a consistent scale factor for overlaying\r\n * multiple diamonds in comparison mode. Uses the larger dimension\r\n * to ensure proper fit.\r\n * \r\n * @param mmString - The measurement string to parse\r\n * @returns Scale value in pixels (10 pixels per mm, default 80 if parse fails)\r\n * \r\n * @example\r\n * ```ts\r\n * getOverlayScale(\"5.5x4.2\"); // 55 (5.5 * 10)\r\n * getOverlayScale(\"8.0\");     // 80 (8.0 * 10)\r\n * getOverlayScale(\"invalid\"); // 80 (default)\r\n * ```\r\n */\r\nexport const getOverlayScale = (mmString: string): number => {\r\n  const parsed = parseMM(mmString);\r\n  if (!parsed) return 80;\r\n  \r\n  // Use larger dimension for scaling\r\n  const maxDim = Math.max(parsed.length, parsed.width);\r\n  return maxDim * 10; // 10 pixels per mm\r\n};\r\n\r\n/**\r\n * Calculate face-up area for a diamond\r\n * \r\n * @description Computes the approximate visible area when viewing\r\n * a diamond from above. Uses the ellipse area formula with a\r\n * correction factor (0.785) for typical diamond shapes.\r\n * \r\n * Formula: length × width × 0.785 (approximates circular/oval area)\r\n * \r\n * @param mmString - The measurement string to parse\r\n * @returns Formatted area string with one decimal place, or \"N/A\" if parse fails\r\n * \r\n * @example\r\n * ```ts\r\n * calculateFaceUpArea(\"5.5x4.2\"); // \"18.1\"\r\n * calculateFaceUpArea(\"6.0\");     // \"28.3\"\r\n * calculateFaceUpArea(\"invalid\"); // \"N/A\"\r\n * ```\r\n */\r\nexport const calculateFaceUpArea = (mmString: string): string => {\r\n  const parsed = parseMM(mmString);\r\n  if (!parsed) return \"N/A\";\r\n  \r\n  // Area calculation with correction factor for diamond shapes\r\n  const area = parsed.length * parsed.width * 0.785;\r\n  return area.toFixed(1);\r\n};\r\n\r\n/**\r\n * Convert carat weight to approximate millimeter dimensions\r\n * \r\n * @description Estimates diamond dimensions based on carat weight\r\n * using industry-standard conversion factors. Useful for initial\r\n * sizing estimates when exact measurements aren't available.\r\n * \r\n * @param carat - The diamond's carat weight\r\n * @param shape - The diamond shape (affects conversion ratio)\r\n * @returns Estimated dimensions in mm format \"lengthxwidth\"\r\n * \r\n * @example\r\n * ```ts\r\n * caratToMM(1.0, \"round\");   // \"6.5x6.5\"\r\n * caratToMM(1.0, \"oval\");    // \"7.7x5.2\"\r\n * caratToMM(1.0, \"cushion\"); // \"6.0x6.0\"\r\n * ```\r\n */\r\nexport const caratToMM = (carat: number, shape: string = \"round\"): string => {\r\n  // Base conversion factors (approximate, varies by cut quality)\r\n  const conversionFactors: Record<string, { lengthRatio: number; widthRatio: number }> = {\r\n    round: { lengthRatio: 6.5, widthRatio: 6.5 },\r\n    oval: { lengthRatio: 7.7, widthRatio: 5.2 },\r\n    princess: { lengthRatio: 5.5, widthRatio: 5.5 },\r\n    cushion: { lengthRatio: 6.0, widthRatio: 6.0 },\r\n    emerald: { lengthRatio: 7.0, widthRatio: 5.0 },\r\n    pear: { lengthRatio: 9.0, widthRatio: 5.5 },\r\n    marquise: { lengthRatio: 11.0, widthRatio: 5.0 },\r\n    radiant: { lengthRatio: 5.8, widthRatio: 5.8 },\r\n    asscher: { lengthRatio: 5.5, widthRatio: 5.5 },\r\n    heart: { lengthRatio: 6.5, widthRatio: 6.5 }\r\n  };\r\n\r\n  const factors = conversionFactors[shape.toLowerCase()] || conversionFactors.round;\r\n  \r\n  // Scale dimensions by cube root of carat (volume to linear dimension)\r\n  const scaleFactor = Math.pow(carat, 1 / 3);\r\n  const length = (factors.lengthRatio * scaleFactor).toFixed(1);\r\n  const width = (factors.widthRatio * scaleFactor).toFixed(1);\r\n  \r\n  return `${length}x${width}`;\r\n};\r\n\r\n/**\r\n * Calculate price per carat\r\n * \r\n * @description Computes the price per carat for a diamond,\r\n * which is a standard industry metric for comparing diamond values.\r\n * \r\n * @param totalPrice - The total price of the diamond\r\n * @param carat - The diamond's carat weight\r\n * @returns Price per carat, or 0 if carat is 0 or invalid\r\n * \r\n * @example\r\n * ```ts\r\n * calculatePricePerCarat(5000, 1.0);  // 5000\r\n * calculatePricePerCarat(7500, 1.5);  // 5000\r\n * calculatePricePerCarat(1000, 0);    // 0\r\n * ```\r\n */\r\nexport const calculatePricePerCarat = (totalPrice: number, carat: number): number => {\r\n  if (!carat || carat <= 0) return 0;\r\n  return Math.round(totalPrice / carat);\r\n};\r\n","import { useMemo } from \"react\";\r\nimport { DIAMOND_SHAPES, ShapeKey } from \"@/constants/diamondData\";\r\nimport { parseMM } from \"@/utils/diamondCalculations\";\r\n\r\ninterface MMToCaratResult {\r\n  shape: ShapeKey;\r\n  shapeName: string;\r\n  carat: number;\r\n  mm: string;\r\n  matchScore: number;\r\n}\r\n\r\nexport const useDiamondComparison = (mmInput: string, mmWidthInput?: string) => {\r\n  const mmToCaratResults = useMemo((): MMToCaratResult[] => {\r\n    const searchLength = parseFloat(mmInput);\r\n    const searchWidth = mmWidthInput ? parseFloat(mmWidthInput) : searchLength;\r\n    \r\n    if (isNaN(searchLength) || searchLength <= 0) return [];\r\n    \r\n    const results: MMToCaratResult[] = [];\r\n    \r\n    (Object.keys(DIAMOND_SHAPES) as ShapeKey[]).forEach(shape => {\r\n      const shapeInfo = DIAMOND_SHAPES[shape];\r\n      \r\n      shapeInfo.sizes.forEach(size => {\r\n        const parsed = parseMM(size.mm);\r\n        if (!parsed) return;\r\n        \r\n        // Calculate match score (lower is better)\r\n        const lengthDiff = Math.abs(parsed.length - searchLength);\r\n        const widthDiff = Math.abs(parsed.width - searchWidth);\r\n        const matchScore = lengthDiff + widthDiff;\r\n        \r\n        // Only include if reasonably close (within 2mm)\r\n        if (matchScore <= 4) {\r\n          results.push({\r\n            shape,\r\n            shapeName: shapeInfo.name,\r\n            carat: size.carat,\r\n            mm: size.mm,\r\n            matchScore\r\n          });\r\n        }\r\n      });\r\n    });\r\n    \r\n    // Sort by match score\r\n    return results.sort((a, b) => a.matchScore - b.matchScore).slice(0, 10);\r\n  }, [mmInput, mmWidthInput]);\r\n\r\n  return { mmToCaratResults };\r\n};\r\n","import { useState, lazy, Suspense, useCallback } from \"react\";\r\nimport { Header } from \"@/components/Header\";\r\nimport { Footer } from \"@/components/Footer\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Slider } from \"@/components/ui/slider\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { ScrollReveal } from \"@/components/ScrollReveal\";\r\nimport { ThemeSwitcher } from \"@/components/ThemeSwitcher\";\r\nimport { DiamondShapeSVG } from \"@/components/diamond/DiamondShapeSVG\";\r\nimport { DIAMOND_SHAPES, SHAPE_COLORS, RING_SIZES, ShapeKey } from \"@/constants/diamondData\";\r\nimport { useDiamondComparison } from \"@/hooks/useDiamondComparison\";\r\nimport { parseMM, getVisualScale, calculateFaceUpArea } from \"@/utils/diamondCalculations\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SEOHead } from \"@/components/SEOHead\";\r\nimport { StructuredData } from \"@/components/StructuredData\";\r\nimport { BreadcrumbNav } from \"@/components/BreadcrumbNav\";\r\nimport { \r\n  Diamond, Ruler, Scale, Sparkles, Info, ZoomIn, Hand, Search,\r\n  CircleDot, Layers, Box\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nconst Diamond3DViewer = lazy(() => import(\"@/components/Diamond3DViewer\"));\r\n\r\nconst DiamondSizingChart = () => {\r\n  const [selectedShape, setSelectedShape] = useState<ShapeKey>(\"round\");\r\n  const [selectedCaratIndex, setSelectedCaratIndex] = useState(3);\r\n  const [compareMode, setCompareMode] = useState(false);\r\n  const [compareShape, setCompareShape] = useState<ShapeKey>(\"princess\");\r\n  const [mmInput, setMmInput] = useState(\"\");\r\n  const [mmWidthInput, setMmWidthInput] = useState(\"\");\r\n  const [selectedRingSize, setSelectedRingSize] = useState(6);\r\n  const [showRingOverlay, setShowRingOverlay] = useState(false);\r\n  const [multiOverlayMode, setMultiOverlayMode] = useState(false);\r\n  const [selectedShapesForOverlay, setSelectedShapesForOverlay] = useState<ShapeKey[]>([\"round\", \"oval\", \"princess\"]);\r\n  const [overlayCaratIndex, setOverlayCaratIndex] = useState(3);\r\n  const [autoRotate3D, setAutoRotate3D] = useState(true);\r\n\r\n  const { mmToCaratResults } = useDiamondComparison(mmInput, mmWidthInput);\r\n\r\n  const shapeData = DIAMOND_SHAPES[selectedShape];\r\n  const compareShapeData = DIAMOND_SHAPES[compareShape];\r\n  const selectedSize = shapeData.sizes[selectedCaratIndex];\r\n  const compareSize = compareShapeData.sizes[selectedCaratIndex];\r\n  const overlayCaratWeight = DIAMOND_SHAPES.round.sizes[overlayCaratIndex]?.carat || 1;\r\n\r\n  const toggleShapeForOverlay = useCallback((shape: ShapeKey) => {\r\n    setSelectedShapesForOverlay(prev => {\r\n      if (prev.includes(shape)) {\r\n        if (prev.length <= 2) return prev;\r\n        return prev.filter(s => s !== shape);\r\n      }\r\n      if (prev.length >= 5) return prev;\r\n      return [...prev, shape];\r\n    });\r\n  }, []);\r\n\r\n  const getRingDiameter = (ringSize: number) => {\r\n    const ring = RING_SIZES.find(r => r.size === ringSize);\r\n    return ring?.diameterMM || 16.5;\r\n  };\r\n\r\n  const ringScale = 8;\r\n  const shapeKeys = Object.keys(DIAMOND_SHAPES) as ShapeKey[];\r\n\r\n  // Structured data for SEO\r\n  const toolSchema = {\r\n    type: \"SoftwareApplication\" as const,\r\n    name: \"Diamond Sizing Chart\",\r\n    description: \"Interactive diamond sizing chart to compare carat weights, millimeter sizes, and visualize diamond shapes. Features 3D viewing, ring finger overlay, and multi-shape comparison.\",\r\n    applicationCategory: \"UtilityApplication\",\r\n    operatingSystem: \"Web Browser\",\r\n    offers: { price: \"0\", priceCurrency: \"USD\" }\r\n  };\r\n\r\n  const faqSchema = {\r\n    type: \"FAQPage\" as const,\r\n    questions: [\r\n      { question: \"How do diamond sizes compare across different shapes?\", answer: \"Different diamond shapes have varying face-up areas at the same carat weight. Elongated shapes like oval and marquise appear larger than round diamonds of the same weight due to their greater spread.\" },\r\n      { question: \"What is the relationship between carat weight and millimeter size?\", answer: \"Carat weight measures mass while millimeter size measures physical dimensions. A 1 carat round diamond is approximately 6.5mm, but this varies by shape and cut quality.\" },\r\n      { question: \"How do I know what diamond size will fit my ring?\", answer: \"Use our ring finger overlay feature to see how different carat weights look on various ring sizes. The 3D viewer helps visualize the diamond's presence on your finger.\" }\r\n    ]\r\n  };\r\n\r\n  const breadcrumbSchema = {\r\n    type: \"BreadcrumbList\" as const,\r\n    items: [\r\n      { name: \"Home\", url: \"https://cataleon.io/\" },\r\n      { name: \"Calculators\", url: \"https://cataleon.io/calculators\" },\r\n      { name: \"Diamond Sizing Chart\", url: \"https://cataleon.io/diamond-sizing-chart\" }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* SEO Meta Tags */}\r\n      <SEOHead\r\n        title=\"Diamond Sizing Chart - Compare Carat Weights & MM Sizes | Cataleon\"\r\n        description=\"Interactive diamond sizing chart to compare carat weights and millimeter dimensions across all diamond shapes. Features 3D viewing, ring finger overlay preview, and side-by-side shape comparison. Free online tool.\"\r\n        keywords=\"diamond size chart, carat to mm conversion, diamond dimensions, diamond shape comparison, carat weight visualization, diamond sizing guide, 3D diamond viewer\"\r\n        canonicalUrl=\"/diamond-sizing-chart\"\r\n      />\r\n      \r\n      {/* Structured Data */}\r\n      <StructuredData data={[toolSchema, faqSchema, breadcrumbSchema]} />\r\n\r\n      <Header />\r\n      \r\n      {/* Breadcrumb Navigation */}\r\n      <div className=\"container mx-auto px-4 pt-4\">\r\n        <BreadcrumbNav />\r\n      </div>\r\n      \r\n      {/* Hero Section - Clean & Clear */}\r\n      <section className=\"relative border-b bg-gradient-to-b from-primary/5 via-background to-background py-12 md:py-16\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <ScrollReveal>\r\n            <div className=\"text-center max-w-3xl mx-auto\">\r\n              <div className=\"inline-flex items-center gap-2 rounded-full border border-primary/30 bg-primary/10 px-4 py-2 text-sm mb-6\">\r\n                <Diamond className=\"h-4 w-4 text-primary\" />\r\n                <span className=\"text-primary font-medium\">Interactive Size Guide</span>\r\n              </div>\r\n              <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-foreground\">\r\n                Diamond Sizing Chart\r\n              </h1>\r\n              <p className=\"text-base md:text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                Explore diamond dimensions across all shapes. Compare carat weights, \r\n                millimeter sizes, and visualize how each shape looks at different sizes.\r\n              </p>\r\n            </div>\r\n          </ScrollReveal>\r\n        </div>\r\n      </section>\r\n\r\n      <main className=\"container mx-auto px-4 py-8 md:py-12\">\r\n        {/* Shape Selector - Clear Grid */}\r\n        <ScrollReveal>\r\n          <Card className=\"mb-8 overflow-hidden\">\r\n            <CardHeader className=\"bg-muted/30 border-b\">\r\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                Step 1: Select Diamond Shape\r\n              </CardTitle>\r\n              <CardDescription>Choose a shape to see its size specifications</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"p-4 md:p-6\">\r\n              <div className=\"grid grid-cols-5 sm:grid-cols-5 md:grid-cols-10 gap-2 md:gap-3\">\r\n                {shapeKeys.map((shape) => (\r\n                  <motion.button\r\n                    key={shape}\r\n                    onClick={() => setSelectedShape(shape)}\r\n                    className={cn(\r\n                      \"relative p-3 md:p-4 rounded-xl border-2 transition-all duration-200 bg-card\",\r\n                      selectedShape === shape\r\n                        ? \"border-primary bg-primary/10 shadow-md ring-2 ring-primary/20\"\r\n                        : \"border-border hover:border-primary/50 hover:bg-muted/50\"\r\n                    )}\r\n                    whileHover={{ scale: 1.03 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    <DiamondShapeSVG shape={shape} size={32} className=\"mx-auto mb-1.5\" />\r\n                    <span className=\"text-[10px] md:text-xs font-medium block text-center text-foreground\">\r\n                      {DIAMOND_SHAPES[shape].name.split(\" \")[0]}\r\n                    </span>\r\n                    {selectedShape === shape && (\r\n                      <motion.div\r\n                        layoutId=\"shapeIndicator\"\r\n                        className=\"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full border-2 border-background\"\r\n                        initial={false}\r\n                      />\r\n                    )}\r\n                  </motion.button>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </ScrollReveal>\r\n\r\n        {/* Step 2: Size Selection */}\r\n        <div className=\"grid lg:grid-cols-2 gap-6 md:gap-8\">\r\n          {/* Visual Preview */}\r\n          <ScrollReveal delay={0.1}>\r\n            <Card className=\"overflow-hidden\">\r\n              <CardHeader className=\"bg-muted/30 border-b\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                      <ZoomIn className=\"h-5 w-5 text-primary\" />\r\n                      Step 2: {shapeData.name} Preview\r\n                    </CardTitle>\r\n                    <CardDescription>Visual comparison of carat sizes</CardDescription>\r\n                  </div>\r\n                  <Button\r\n                    variant={compareMode ? \"default\" : \"outline\"}\r\n                    size=\"sm\"\r\n                    onClick={() => setCompareMode(!compareMode)}\r\n                  >\r\n                    Compare\r\n                  </Button>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"p-4 md:p-6\">\r\n                {/* Size Preview - Cleaner Background */}\r\n                <div className=\"relative h-56 md:h-64 flex items-center justify-center bg-gradient-to-br from-muted/50 via-muted/30 to-muted/50 rounded-xl mb-6 border border-border/50\">\r\n                  {/* Grid Lines */}\r\n                  <div className=\"absolute inset-4 flex items-center justify-center opacity-40\">\r\n                    <div className=\"w-full h-px border-t border-dashed border-muted-foreground/50\" />\r\n                    <div className=\"absolute h-full w-px border-l border-dashed border-muted-foreground/50\" />\r\n                  </div>\r\n                  \r\n                  <div className={cn(\"flex items-center gap-8\", compareMode && \"gap-16\")}>\r\n                    <motion.div\r\n                      key={`${selectedShape}-${selectedCaratIndex}`}\r\n                      initial={{ scale: 0, opacity: 0 }}\r\n                      animate={{ scale: 1, opacity: 1 }}\r\n                      transition={{ type: \"spring\", stiffness: 200, damping: 20 }}\r\n                      className=\"flex flex-col items-center\"\r\n                    >\r\n                      <DiamondShapeSVG shape={selectedShape} size={getVisualScale(selectedSize.carat)} />\r\n                      <Badge variant=\"secondary\" className=\"mt-3\">{selectedSize.carat} ct</Badge>\r\n                    </motion.div>\r\n\r\n                    <AnimatePresence>\r\n                      {compareMode && (\r\n                        <motion.div\r\n                          initial={{ scale: 0, opacity: 0, x: -20 }}\r\n                          animate={{ scale: 1, opacity: 1, x: 0 }}\r\n                          exit={{ scale: 0, opacity: 0, x: -20 }}\r\n                          className=\"flex flex-col items-center\"\r\n                        >\r\n                          <DiamondShapeSVG shape={compareShape} size={getVisualScale(compareSize.carat)} />\r\n                          <Badge variant=\"outline\" className=\"mt-3\">{compareSize.carat} ct</Badge>\r\n                        </motion.div>\r\n                      )}\r\n                    </AnimatePresence>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Compare Shape Selector */}\r\n                <AnimatePresence>\r\n                  {compareMode && (\r\n                    <motion.div\r\n                      initial={{ height: 0, opacity: 0 }}\r\n                      animate={{ height: \"auto\", opacity: 1 }}\r\n                      exit={{ height: 0, opacity: 0 }}\r\n                      className=\"mb-6 overflow-hidden\"\r\n                    >\r\n                      <p className=\"text-sm text-muted-foreground mb-3\">Compare with:</p>\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        {shapeKeys.filter((s) => s !== selectedShape).map((shape) => (\r\n                          <Button\r\n                            key={shape}\r\n                            variant={compareShape === shape ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setCompareShape(shape)}\r\n                            className=\"gap-2\"\r\n                          >\r\n                            <DiamondShapeSVG shape={shape} size={16} />\r\n                            {DIAMOND_SHAPES[shape].name.split(\" \")[0]}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n\r\n                {/* Carat Slider */}\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium flex items-center gap-2\">\r\n                      <Scale className=\"h-4 w-4\" />\r\n                      Carat Weight\r\n                    </span>\r\n                    <span className=\"text-2xl font-bold text-primary\">{selectedSize.carat} ct</span>\r\n                  </div>\r\n                  <Slider\r\n                    value={[selectedCaratIndex]}\r\n                    onValueChange={(value) => setSelectedCaratIndex(value[0])}\r\n                    max={shapeData.sizes.length - 1}\r\n                    step={1}\r\n                    className=\"py-4\"\r\n                  />\r\n                  <div className=\"flex justify-between text-xs text-muted-foreground\">\r\n                    <span>{shapeData.sizes[0].carat} ct</span>\r\n                    <span>{shapeData.sizes[shapeData.sizes.length - 1].carat} ct</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Size Details */}\r\n                <div className=\"grid grid-cols-2 gap-4 mt-6\">\r\n                  <div className=\"p-4 rounded-lg bg-muted/50 text-center\">\r\n                    <Ruler className=\"h-5 w-5 mx-auto mb-2 text-primary\" />\r\n                    <p className=\"text-sm text-muted-foreground\">Dimensions</p>\r\n                    <p className=\"text-lg font-semibold\">{selectedSize.mm} mm</p>\r\n                  </div>\r\n                  <div className=\"p-4 rounded-lg bg-muted/50 text-center\">\r\n                    <Diamond className=\"h-5 w-5 mx-auto mb-2 text-primary\" />\r\n                    <p className=\"text-sm text-muted-foreground\">Depth</p>\r\n                    <p className=\"text-lg font-semibold\">{selectedSize.depth} mm</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Finger Reference */}\r\n                <div className=\"mt-6 p-4 rounded-lg border border-primary/20 bg-primary/5\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Hand className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                    <div>\r\n                      <p className=\"font-medium text-sm\">On-Finger Reference</p>\r\n                      <p className=\"text-xs text-muted-foreground mt-1\">\r\n                        A {selectedSize.carat} carat {shapeData.name.toLowerCase()} measures approximately {selectedSize.mm} mm, \r\n                        which appears {selectedSize.carat >= 1.5 ? \"substantial\" : selectedSize.carat >= 1 ? \"elegant\" : \"delicate\"} on an average ring finger.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </ScrollReveal>\r\n\r\n          {/* Size Table */}\r\n          <ScrollReveal delay={0.2}>\r\n            <Card>\r\n              <CardHeader className=\"bg-muted/30 border-b\">\r\n                <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                  <Ruler className=\"h-5 w-5 text-primary\" />\r\n                  Size Reference Table\r\n                </CardTitle>\r\n                <CardDescription>Click any row to select that size • Measurements may vary by cut quality</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"rounded-lg border overflow-hidden\">\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead>\r\n                        <tr className=\"bg-muted/50\">\r\n                          <th className=\"px-4 py-3 text-left text-sm font-semibold\">Carat</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-semibold\">Dimensions (mm)</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-semibold\">Depth (mm)</th>\r\n                          <th className=\"px-4 py-3 text-center text-sm font-semibold\">Visual</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {shapeData.sizes.map((size, index) => (\r\n                          <tr\r\n                            key={size.carat}\r\n                            className={cn(\r\n                              \"border-t transition-colors cursor-pointer\",\r\n                              index === selectedCaratIndex ? \"bg-primary/10\" : \"hover:bg-muted/30\"\r\n                            )}\r\n                            onClick={() => setSelectedCaratIndex(index)}\r\n                          >\r\n                            <td className=\"px-4 py-3\">\r\n                              <Badge variant={index === selectedCaratIndex ? \"default\" : \"outline\"} className=\"font-mono\">\r\n                                {size.carat} ct\r\n                              </Badge>\r\n                            </td>\r\n                            <td className=\"px-4 py-3 font-medium\">{size.mm}</td>\r\n                            <td className=\"px-4 py-3 text-muted-foreground\">{size.depth}</td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <div className=\"flex justify-center\">\r\n                                <div \r\n                                  className=\"rounded-full bg-gradient-to-br from-diamond-from to-diamond-to opacity-60\"\r\n                                  style={{ width: Math.max(8, size.carat * 12), height: Math.max(8, size.carat * 12) }}\r\n                                />\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 p-4 rounded-lg bg-muted/30 border\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Info className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      <p className=\"font-medium text-foreground mb-1\">Important Notes:</p>\r\n                      <ul className=\"list-disc list-inside space-y-1\">\r\n                        <li>Dimensions vary based on cut depth and proportions</li>\r\n                        <li>Fancy shapes may appear larger than rounds at same carat weight</li>\r\n                        <li>Length-to-width ratios affect perceived size</li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </ScrollReveal>\r\n        </div>\r\n\r\n        {/* 3D Diamond Viewer - Much Cleaner */}\r\n        <ScrollReveal delay={0.25}>\r\n          <Card className=\"mt-8 overflow-hidden border-2 border-primary/10\">\r\n            <CardHeader className=\"bg-gradient-to-r from-muted/50 to-muted/30 border-b\">\r\n              <div className=\"flex items-center justify-between flex-wrap gap-4\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                    <Box className=\"h-5 w-5 text-primary\" />\r\n                    Step 3: Interactive 3D View\r\n                  </CardTitle>\r\n                  <CardDescription>Drag to rotate, scroll to zoom - see your diamond in 3D</CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-background border\">\r\n                    <Switch id=\"auto-rotate\" checked={autoRotate3D} onCheckedChange={setAutoRotate3D} />\r\n                    <Label htmlFor=\"auto-rotate\" className=\"text-sm font-medium cursor-pointer\">Auto-rotate</Label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0\">\r\n              <div className=\"grid lg:grid-cols-5\">\r\n                {/* 3D Viewer */}\r\n                <div className=\"lg:col-span-3 relative bg-slate-900\">\r\n                  <div className=\"h-[380px] md:h-[420px]\">\r\n                    <Suspense fallback={\r\n                      <div className=\"h-full bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center\">\r\n                        <div className=\"flex flex-col items-center gap-3\">\r\n                          <div className=\"relative w-12 h-12\">\r\n                            <div className=\"absolute inset-0 border-4 border-primary/20 rounded-full\" />\r\n                            <div className=\"absolute inset-0 border-4 border-transparent border-t-primary rounded-full animate-spin\" />\r\n                          </div>\r\n                          <span className=\"text-sm text-white/70\">Loading 3D Diamond...</span>\r\n                        </div>\r\n                      </div>\r\n                    }>\r\n                      <Diamond3DViewer \r\n                        shape={selectedShape} \r\n                        autoRotate={autoRotate3D} \r\n                        showFire \r\n                        caratSize={selectedSize.carat}\r\n                      />\r\n                    </Suspense>\r\n                  </div>\r\n                  \r\n                  {/* Shape & Size Badges */}\r\n                  <div className=\"absolute top-4 left-4 flex gap-2\">\r\n                    <Badge className=\"bg-primary text-primary-foreground shadow-lg\">\r\n                      <Sparkles className=\"h-3 w-3 mr-1\" />\r\n                      {shapeData.name}\r\n                    </Badge>\r\n                    <Badge variant=\"secondary\" className=\"bg-white/90 text-slate-900 shadow-lg\">\r\n                      {selectedSize.carat} ct\r\n                    </Badge>\r\n                  </div>\r\n                  \r\n                  {/* Controls Hint */}\r\n                  <div className=\"absolute bottom-4 left-0 right-0\">\r\n                    <div className=\"flex items-center justify-center gap-6 text-xs\">\r\n                      <span className=\"flex items-center gap-1.5 bg-black/60 text-white/90 px-3 py-1.5 rounded-full backdrop-blur-sm\">\r\n                        <Hand className=\"h-3 w-3\" /> Drag to rotate\r\n                      </span>\r\n                      <span className=\"flex items-center gap-1.5 bg-black/60 text-white/90 px-3 py-1.5 rounded-full backdrop-blur-sm\">\r\n                        <ZoomIn className=\"h-3 w-3\" /> Scroll to zoom\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Info Panel - Clear Hierarchy */}\r\n                <div className=\"lg:col-span-2 p-5 md:p-6 bg-muted/20 lg:border-l flex flex-col justify-center space-y-4\">\r\n                  <div className=\"pb-4 border-b\">\r\n                    <h3 className=\"text-xl md:text-2xl font-bold text-foreground mb-2\">{shapeData.name}</h3>\r\n                    <p className=\"text-sm text-muted-foreground leading-relaxed\">{shapeData.description}</p>\r\n                  </div>\r\n                  \r\n                  {/* Key Metrics */}\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"p-4 rounded-xl bg-primary/5 border border-primary/20\">\r\n                      <Scale className=\"h-5 w-5 text-primary mb-2\" />\r\n                      <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Carat Weight</p>\r\n                      <p className=\"text-2xl font-bold text-primary\">{selectedSize.carat} ct</p>\r\n                    </div>\r\n                    <div className=\"p-4 rounded-xl bg-violet-500/5 border border-violet-500/20\">\r\n                      <Ruler className=\"h-5 w-5 text-violet-500 mb-2\" />\r\n                      <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Dimensions</p>\r\n                      <p className=\"text-2xl font-bold text-violet-500\">{selectedSize.mm}</p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 rounded-xl bg-muted/50 border\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <Layers className=\"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\r\n                      <div>\r\n                        <p className=\"font-medium text-sm text-foreground\">Depth: {selectedSize.depth} mm</p>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          Total height from table facet to culet point\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 rounded-xl bg-amber-500/5 border border-amber-500/20\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <CircleDot className=\"h-5 w-5 text-amber-500 mt-0.5 flex-shrink-0\" />\r\n                      <div>\r\n                        <p className=\"font-medium text-sm text-amber-600 dark:text-amber-400\">On-Finger Appearance</p>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          {selectedShape === \"round\" \r\n                            ? `This ${selectedSize.carat}ct round appears ${selectedSize.carat >= 1.5 ? \"substantial\" : selectedSize.carat >= 1 ? \"elegant\" : \"delicate\"} when set`\r\n                            : `${shapeData.name} shapes often appear larger than rounds at the same carat weight`\r\n                          }\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </ScrollReveal>\r\n\r\n        {/* MM to Carat Lookup */}\r\n        <ScrollReveal delay={0.3}>\r\n          <Card className=\"mt-8\">\r\n            <CardHeader className=\"bg-gradient-to-r from-gemstone-from/10 to-diamond-from/10\">\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Search className=\"h-5 w-5\" />\r\n                MM to Carat Lookup\r\n              </CardTitle>\r\n              <CardDescription>Enter millimeter dimensions to find approximate carat weights</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"grid md:grid-cols-2 gap-8\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"mm-length\" className=\"text-sm font-medium\">Length (mm)</Label>\r\n                      <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                          id=\"mm-length\"\r\n                          type=\"number\"\r\n                          step=\"0.1\"\r\n                          min=\"0\"\r\n                          placeholder=\"e.g., 6.5\"\r\n                          value={mmInput}\r\n                          onChange={(e) => setMmInput(e.target.value)}\r\n                          className=\"pl-9\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"mm-width\" className=\"text-sm font-medium\">\r\n                        Width (mm) <span className=\"text-muted-foreground text-xs\">(optional)</span>\r\n                      </Label>\r\n                      <Input\r\n                        id=\"mm-width\"\r\n                        type=\"number\"\r\n                        step=\"0.1\"\r\n                        min=\"0\"\r\n                        placeholder=\"Same as length\"\r\n                        value={mmWidthInput}\r\n                        onChange={(e) => setMmWidthInput(e.target.value)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Enter length for round diamonds, or both length and width for fancy shapes\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <p className=\"text-sm font-medium\">Matching Results</p>\r\n                  {mmToCaratResults.length > 0 ? (\r\n                    <div className=\"space-y-2 max-h-[200px] overflow-y-auto pr-2\">\r\n                      {mmToCaratResults.map((result, index) => (\r\n                        <motion.div\r\n                          key={`${result.shape}-${result.carat}`}\r\n                          initial={{ opacity: 0, x: -10 }}\r\n                          animate={{ opacity: 1, x: 0 }}\r\n                          transition={{ delay: index * 0.05 }}\r\n                          className={cn(\r\n                            \"flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all\",\r\n                            result.matchScore < 0.5 ? \"bg-primary/10 border-primary/30\" : \"bg-muted/30 hover:bg-muted/50\"\r\n                          )}\r\n                          onClick={() => {\r\n                            setSelectedShape(result.shape);\r\n                            const idx = DIAMOND_SHAPES[result.shape].sizes.findIndex(s => s.carat === result.carat);\r\n                            if (idx !== -1) setSelectedCaratIndex(idx);\r\n                          }}\r\n                        >\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <DiamondShapeSVG shape={result.shape} size={24} />\r\n                            <div>\r\n                              <p className=\"font-medium text-sm\">{result.shapeName}</p>\r\n                              <p className=\"text-xs text-muted-foreground\">{result.mm} mm</p>\r\n                            </div>\r\n                          </div>\r\n                          <Badge variant={result.matchScore < 0.5 ? \"default\" : \"secondary\"}>~{result.carat} ct</Badge>\r\n                        </motion.div>\r\n                      ))}\r\n                    </div>\r\n                  ) : mmInput ? (\r\n                    <div className=\"p-4 rounded-lg bg-muted/30 text-center text-muted-foreground\">\r\n                      <Search className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                      <p className=\"text-sm\">No matching sizes found</p>\r\n                      <p className=\"text-xs mt-1\">Try adjusting your measurements</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"p-4 rounded-lg bg-muted/30 text-center text-muted-foreground\">\r\n                      <Ruler className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                      <p className=\"text-sm\">Enter dimensions to search</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </ScrollReveal>\r\n\r\n        {/* Ring Size Overlay */}\r\n        <ScrollReveal delay={0.4}>\r\n          <Card className=\"mt-8\">\r\n            <CardHeader className=\"bg-gradient-to-r from-primary/10 to-gemstone-from/10\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <CircleDot className=\"h-5 w-5\" />\r\n                    Ring Size Overlay\r\n                  </CardTitle>\r\n                  <CardDescription>See how diamonds look on different finger sizes</CardDescription>\r\n                </div>\r\n                <Button\r\n                  variant={showRingOverlay ? \"default\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setShowRingOverlay(!showRingOverlay)}\r\n                >\r\n                  {showRingOverlay ? \"Hide Overlay\" : \"Show Overlay\"}\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"p-6\">\r\n              <AnimatePresence mode=\"wait\">\r\n                {showRingOverlay ? (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: \"auto\" }}\r\n                    exit={{ opacity: 0, height: 0 }}\r\n                    className=\"space-y-6\"\r\n                  >\r\n                    <div className=\"flex flex-wrap gap-2 justify-center\">\r\n                      {RING_SIZES.map((ring) => (\r\n                        <Button\r\n                          key={ring.size}\r\n                          variant={selectedRingSize === ring.size ? \"default\" : \"outline\"}\r\n                          size=\"sm\"\r\n                          onClick={() => setSelectedRingSize(ring.size)}\r\n                          className=\"min-w-[60px]\"\r\n                        >\r\n                          Size {ring.size}\r\n                        </Button>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <div className=\"relative flex items-center justify-center py-8\">\r\n                      <div className=\"relative\">\r\n                        <motion.div\r\n                          className=\"relative bg-gradient-to-b from-amber-200/60 to-amber-300/60 dark:from-amber-800/40 dark:to-amber-900/40 rounded-t-full\"\r\n                          style={{ width: getRingDiameter(selectedRingSize) * ringScale + 20, height: 200 }}\r\n                          initial={{ scale: 0.9 }}\r\n                          animate={{ scale: 1 }}\r\n                          transition={{ type: \"spring\" }}\r\n                        >\r\n                          <div \r\n                            className=\"absolute top-8 left-1/2 -translate-x-1/2 rounded-full border-4 border-yellow-500/80 dark:border-yellow-400/60\"\r\n                            style={{ width: getRingDiameter(selectedRingSize) * ringScale + 16, height: 24 }}\r\n                          />\r\n                          <motion.div\r\n                            className=\"absolute left-1/2 -translate-x-1/2\"\r\n                            style={{ top: -10 }}\r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            transition={{ delay: 0.2, type: \"spring\" }}\r\n                          >\r\n                            <DiamondShapeSVG \r\n                              shape={selectedShape} \r\n                              size={parseFloat(selectedSize.mm.split(\"x\")[0] || selectedSize.mm) * ringScale}\r\n                            />\r\n                          </motion.div>\r\n                        </motion.div>\r\n\r\n                        <div className=\"absolute -right-32 top-1/2 -translate-y-1/2 text-sm space-y-1 hidden md:block\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-3 h-3 rounded-full bg-primary/60\" />\r\n                            <span className=\"text-muted-foreground\">Ring Size {selectedRingSize}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-3 h-3 rounded-full bg-yellow-500/60\" />\r\n                            <span className=\"text-muted-foreground\">{getRingDiameter(selectedRingSize)} mm</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-3\">\r\n                      {RING_SIZES.map((ring) => (\r\n                        <div\r\n                          key={ring.size}\r\n                          className={cn(\r\n                            \"p-3 rounded-lg text-center border transition-all cursor-pointer\",\r\n                            selectedRingSize === ring.size ? \"bg-primary/10 border-primary\" : \"bg-muted/30 hover:bg-muted/50\"\r\n                          )}\r\n                          onClick={() => setSelectedRingSize(ring.size)}\r\n                        >\r\n                          <p className=\"font-semibold\">Size {ring.size}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{ring.diameterMM} mm</p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <div className=\"p-4 rounded-lg bg-muted/30 border\">\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <Hand className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                        <div className=\"text-sm\">\r\n                          <p className=\"font-medium mb-1\">\r\n                            {selectedSize.carat} ct {shapeData.name} on Size {selectedRingSize} Finger\r\n                          </p>\r\n                          <p className=\"text-muted-foreground\">\r\n                            Diamond measures {selectedSize.mm} mm on a finger with {getRingDiameter(selectedRingSize)} mm diameter.\r\n                            {\" \"}\r\n                            {parseFloat(selectedSize.mm.split(\"x\")[0] || selectedSize.mm) / getRingDiameter(selectedRingSize) > 0.45\r\n                              ? \"The diamond will appear substantial and eye-catching.\"\r\n                              : parseFloat(selectedSize.mm.split(\"x\")[0] || selectedSize.mm) / getRingDiameter(selectedRingSize) > 0.35\r\n                              ? \"The diamond will have a balanced, elegant appearance.\"\r\n                              : \"The diamond will appear delicate and subtle.\"}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ) : (\r\n                  <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"text-center py-8 text-muted-foreground\">\r\n                    <Hand className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\r\n                    <p>Click \"Show Overlay\" to visualize diamond sizes on different ring sizes</p>\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </CardContent>\r\n          </Card>\r\n        </ScrollReveal>\r\n\r\n        {/* Multi-Shape Overlay */}\r\n        <ScrollReveal delay={0.45}>\r\n          <Card className=\"mt-8\">\r\n            <CardHeader className=\"bg-gradient-to-r from-diamond-from/10 via-primary/10 to-gemstone-from/10\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Layers className=\"h-5 w-5\" />\r\n                    Multi-Shape Overlay\r\n                  </CardTitle>\r\n                  <CardDescription>Compare multiple diamond shapes at the same carat weight</CardDescription>\r\n                </div>\r\n                <Button\r\n                  variant={multiOverlayMode ? \"default\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setMultiOverlayMode(!multiOverlayMode)}\r\n                >\r\n                  {multiOverlayMode ? \"Hide Overlay\" : \"Compare Shapes\"}\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"p-6\">\r\n              <AnimatePresence mode=\"wait\">\r\n                {multiOverlayMode ? (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: \"auto\" }}\r\n                    exit={{ opacity: 0, height: 0 }}\r\n                    className=\"space-y-6\"\r\n                  >\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <p className=\"text-sm font-medium\">Select shapes to compare (2-5)</p>\r\n                        <Badge variant=\"secondary\">{selectedShapesForOverlay.length} selected</Badge>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 sm:grid-cols-5 md:grid-cols-10 gap-2\">\r\n                        {shapeKeys.map((shape) => {\r\n                          const isSelected = selectedShapesForOverlay.includes(shape);\r\n                          return (\r\n                            <motion.button\r\n                              key={shape}\r\n                              onClick={() => toggleShapeForOverlay(shape)}\r\n                              className={cn(\r\n                                \"relative p-3 rounded-lg border-2 transition-all\",\r\n                                isSelected ? \"border-primary bg-primary/10\" : \"border-border hover:border-primary/50\"\r\n                              )}\r\n                              whileHover={{ scale: 1.05 }}\r\n                              whileTap={{ scale: 0.95 }}\r\n                            >\r\n                              <DiamondShapeSVG shape={shape} size={28} className=\"mx-auto\" />\r\n                              <span className=\"text-[10px] block text-center mt-1 font-medium\">\r\n                                {DIAMOND_SHAPES[shape].name.split(\" \")[0]}\r\n                              </span>\r\n                              {isSelected && (\r\n                                <div className=\"absolute top-1 right-1 w-2 h-2 rounded-full\" style={{ backgroundColor: SHAPE_COLORS[shape] }} />\r\n                              )}\r\n                            </motion.button>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"text-sm font-medium flex items-center gap-2\">\r\n                          <Scale className=\"h-4 w-4\" />\r\n                          Carat Weight\r\n                        </span>\r\n                        <Badge className=\"text-lg px-3 py-1\">{overlayCaratWeight} ct</Badge>\r\n                      </div>\r\n                      <Slider\r\n                        value={[overlayCaratIndex]}\r\n                        onValueChange={(value) => setOverlayCaratIndex(value[0])}\r\n                        max={DIAMOND_SHAPES.round.sizes.length - 1}\r\n                        step={1}\r\n                        className=\"py-4\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"relative h-80 flex items-center justify-center bg-gradient-to-br from-muted/30 to-muted/10 rounded-xl overflow-hidden\">\r\n                      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                        <div className=\"w-full h-px border-t border-dashed border-muted-foreground/20\" />\r\n                        <div className=\"absolute h-full w-px border-l border-dashed border-muted-foreground/20\" />\r\n                      </div>\r\n\r\n                      <div className=\"relative\">\r\n                        {selectedShapesForOverlay.map((shape, index) => {\r\n                          const shapeInfo = DIAMOND_SHAPES[shape];\r\n                          const sizeData = shapeInfo.sizes[overlayCaratIndex];\r\n                          if (!sizeData) return null;\r\n                          \r\n                          const parsed = parseMM(sizeData.mm);\r\n                          if (!parsed) return null;\r\n                          \r\n                          const width = parsed.length * 12;\r\n                          const height = parsed.width * 12;\r\n                          \r\n                          return (\r\n                            <motion.div\r\n                              key={shape}\r\n                              className=\"absolute\"\r\n                              style={{\r\n                                left: \"50%\", top: \"50%\", transform: \"translate(-50%, -50%)\",\r\n                                zIndex: selectedShapesForOverlay.length - index,\r\n                              }}\r\n                              initial={{ scale: 0, opacity: 0 }}\r\n                              animate={{ scale: 1, opacity: 0.7 }}\r\n                              transition={{ delay: index * 0.1, type: \"spring\" }}\r\n                            >\r\n                              <DiamondShapeSVG \r\n                                shape={shape} \r\n                                size={Math.max(width, height)} \r\n                                fillColor={SHAPE_COLORS[shape]} \r\n                                strokeColor={SHAPE_COLORS[shape]}\r\n                                useGradient={false}\r\n                              />\r\n                            </motion.div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap justify-center gap-3\">\r\n                      {selectedShapesForOverlay.map((shape) => {\r\n                        const sizeData = DIAMOND_SHAPES[shape].sizes[overlayCaratIndex];\r\n                        return (\r\n                          <div key={shape} className=\"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/30 border\">\r\n                            <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: SHAPE_COLORS[shape] }} />\r\n                            <span className=\"text-sm font-medium\">{DIAMOND_SHAPES[shape].name.split(\" \")[0]}</span>\r\n                            <span className=\"text-xs text-muted-foreground\">{sizeData?.mm} mm</span>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n\r\n                    <div className=\"rounded-lg border overflow-hidden\">\r\n                      <table className=\"w-full\">\r\n                        <thead>\r\n                          <tr className=\"bg-muted/50\">\r\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold\">Shape</th>\r\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold\">Dimensions</th>\r\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold\">Depth</th>\r\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold\">Face-Up Area</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {selectedShapesForOverlay.map((shape, index) => {\r\n                            const sizeData = DIAMOND_SHAPES[shape].sizes[overlayCaratIndex];\r\n                            return (\r\n                              <tr key={shape} className={cn(\"border-t\", index % 2 === 0 && \"bg-muted/20\")}>\r\n                                <td className=\"px-4 py-3\">\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: SHAPE_COLORS[shape] }} />\r\n                                    <span className=\"font-medium\">{DIAMOND_SHAPES[shape].name}</span>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"px-4 py-3\">{sizeData?.mm} mm</td>\r\n                                <td className=\"px-4 py-3 text-muted-foreground\">{sizeData?.depth} mm</td>\r\n                                <td className=\"px-4 py-3\">~{calculateFaceUpArea(sizeData?.mm || \"0\")} mm²</td>\r\n                              </tr>\r\n                            );\r\n                          })}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n\r\n                    <div className=\"p-4 rounded-lg bg-primary/5 border border-primary/20\">\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <Info className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                        <div className=\"text-sm\">\r\n                          <p className=\"font-medium mb-1\">Size Comparison Insight</p>\r\n                          <p className=\"text-muted-foreground\">\r\n                            At {overlayCaratWeight} carat, different shapes appear to have different sizes due to varying depth and proportions. \r\n                            Elongated shapes like Marquise and Pear typically look larger face-up, while deeper cuts like Round and Cushion \r\n                            carry more weight in their depth.\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ) : (\r\n                  <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"text-center py-8 text-muted-foreground\">\r\n                    <Layers className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\r\n                    <p>Click \"Compare Shapes\" to see multiple diamond shapes overlaid at the same carat weight</p>\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </CardContent>\r\n          </Card>\r\n        </ScrollReveal>\r\n\r\n        {/* Quick Reference Grid */}\r\n        <ScrollReveal delay={0.5}>\r\n          <div className=\"mt-12\">\r\n            <h2 className=\"text-2xl font-bold mb-6 flex items-center gap-2\">\r\n              <Diamond className=\"h-6 w-6 text-primary\" />\r\n              Quick Reference: 1 Carat Comparison\r\n            </h2>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4\">\r\n              {shapeKeys.map((shape) => {\r\n                const oneCaratSize = DIAMOND_SHAPES[shape].sizes.find(s => s.carat === 1);\r\n                return (\r\n                  <motion.div\r\n                    key={shape}\r\n                    className=\"p-4 rounded-xl border bg-card hover:shadow-lg hover:border-primary/50 transition-all cursor-pointer\"\r\n                    onClick={() => {\r\n                      setSelectedShape(shape);\r\n                      setSelectedCaratIndex(DIAMOND_SHAPES[shape].sizes.findIndex(s => s.carat === 1));\r\n                    }}\r\n                    whileHover={{ y: -4 }}\r\n                  >\r\n                    <DiamondShapeSVG shape={shape} size={60} className=\"mx-auto mb-3\" />\r\n                    <h3 className=\"font-semibold text-center text-sm mb-2\">{DIAMOND_SHAPES[shape].name}</h3>\r\n                    <div className=\"text-center text-xs text-muted-foreground space-y-1\">\r\n                      <p className=\"font-medium text-foreground\">{oneCaratSize?.mm} mm</p>\r\n                      <p>Depth: {oneCaratSize?.depth} mm</p>\r\n                    </div>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </ScrollReveal>\r\n      </main>\r\n\r\n      <Footer />\r\n      <ThemeSwitcher />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiamondSizingChart;\r\n"],"file":"assets/DiamondSizingChart-BHbFzAFC.js"}