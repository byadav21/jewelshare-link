{"version":3,"file":"ManufacturingCost-Can3DyBR.js","sources":["../../src/components/estimate/EstimateWorkflowSteps.tsx","../../src/components/estimate/EstimateFlowGuide.tsx","../../src/components/estimate/BasicInfoSection.tsx","../../src/components/estimate/CostingSection.tsx","../../src/components/estimate/PricingSection.tsx","../../src/components/estimate/ReviewSection.tsx","../../src/hooks/useEstimateWorkflow.ts","../../src/components/InvoicePreviewDialog.tsx","../../src/pages/ManufacturingCost.tsx"],"sourcesContent":["import { Check } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Step {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\ninterface EstimateWorkflowStepsProps {\r\n  currentStep: number;\r\n  steps: Step[];\r\n}\r\n\r\nexport const EstimateWorkflowSteps = ({ currentStep, steps }: EstimateWorkflowStepsProps) => {\r\n  return (\r\n    <div className=\"w-full py-8\">\r\n      <div className=\"flex items-center justify-between\">\r\n        {steps.map((step, index) => (\r\n          <div key={step.id} className=\"flex flex-1 items-center\">\r\n            {/* Step Circle */}\r\n            <div className=\"flex flex-col items-center\">\r\n              <div\r\n                className={cn(\r\n                  \"flex h-12 w-12 items-center justify-center rounded-full border-2 transition-all duration-300\",\r\n                  currentStep > step.id\r\n                    ? \"border-primary bg-primary text-primary-foreground\"\r\n                    : currentStep === step.id\r\n                    ? \"border-primary bg-background text-primary animate-pulse\"\r\n                    : \"border-muted-foreground/30 bg-background text-muted-foreground\"\r\n                )}\r\n              >\r\n                {currentStep > step.id ? (\r\n                  <Check className=\"h-6 w-6\" />\r\n                ) : (\r\n                  <span className=\"text-sm font-bold\">{step.id}</span>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Step Label */}\r\n              <div className=\"mt-2 text-center max-w-[120px]\">\r\n                <p\r\n                  className={cn(\r\n                    \"text-sm font-semibold transition-colors\",\r\n                    currentStep >= step.id\r\n                      ? \"text-foreground\"\r\n                      : \"text-muted-foreground\"\r\n                  )}\r\n                >\r\n                  {step.title}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {step.description}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Connector Line */}\r\n            {index < steps.length - 1 && (\r\n              <div\r\n                className={cn(\r\n                  \"h-0.5 flex-1 mx-4 transition-all duration-300\",\r\n                  currentStep > step.id\r\n                    ? \"bg-primary\"\r\n                    : \"bg-muted-foreground/30\"\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { \r\n  FileText, \r\n  Calculator, \r\n  Diamond, \r\n  IndianRupee, \r\n  TrendingUp,\r\n  Save,\r\n  FileCheck,\r\n  Info,\r\n  ArrowRight\r\n} from \"lucide-react\";\r\n\r\n/**\r\n * EstimateFlowGuide Component\r\n * \r\n * Provides visual guidance on the estimate creation and invoice generation workflow.\r\n * Helps users understand the difference between estimates and invoices.\r\n */\r\nexport const EstimateFlowGuide = () => {\r\n  return (\r\n    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 via-background to-accent/5\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Info className=\"h-5 w-5 text-primary\" />\r\n          Estimate vs Invoice - Quick Guide\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Understanding the workflow from cost estimation to final invoice\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Estimate Section */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Calculator className=\"h-5 w-5 text-primary\" />\r\n            <h3 className=\"font-semibold text-lg\">Step 1: Create Estimate</h3>\r\n          </div>\r\n          <div className=\"pl-7 space-y-2 text-sm text-muted-foreground\">\r\n            <p className=\"flex items-center gap-2\">\r\n              <Diamond className=\"h-4 w-4\" />\r\n              Enter jewelry specifications (weight, purity, diamonds, gemstones)\r\n            </p>\r\n            <p className=\"flex items-center gap-2\">\r\n              <IndianRupee className=\"h-4 w-4\" />\r\n              Calculate manufacturing costs (gold, making charges, CAD, certification)\r\n            </p>\r\n            <p className=\"flex items-center gap-2\">\r\n              <TrendingUp className=\"h-4 w-4\" />\r\n              Set profit margin to determine selling price\r\n            </p>\r\n            <p className=\"flex items-center gap-2\">\r\n              <Save className=\"h-4 w-4\" />\r\n              Save as <span className=\"font-semibold text-foreground\">Draft</span> for future reference\r\n            </p>\r\n          </div>\r\n          \r\n          <Alert className=\"bg-primary/5 border-primary/20\">\r\n            <AlertDescription className=\"text-sm\">\r\n              <strong>Estimates</strong> are for quotations and internal calculations. \r\n              They can be modified anytime and don't require complete customer details.\r\n            </AlertDescription>\r\n          </Alert>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-center\">\r\n          <ArrowRight className=\"h-6 w-6 text-muted-foreground\" />\r\n        </div>\r\n\r\n        <Separator />\r\n\r\n        {/* Invoice Section */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FileCheck className=\"h-5 w-5 text-accent\" />\r\n            <h3 className=\"font-semibold text-lg\">Step 2: Generate Invoice</h3>\r\n          </div>\r\n          <div className=\"pl-7 space-y-2 text-sm text-muted-foreground\">\r\n            <p className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              Convert approved estimate to professional invoice\r\n            </p>\r\n            <p>• Add invoice number (auto-generated)</p>\r\n            <p>• Set payment terms and due date</p>\r\n            <p>• Include customer name (mandatory for invoices)</p>\r\n            <p>• Choose invoice template style</p>\r\n          </div>\r\n          \r\n          <Alert className=\"bg-accent/5 border-accent/20\">\r\n            <AlertDescription className=\"text-sm\">\r\n              <strong>Invoices</strong> are final billing documents with unique numbers. \r\n              Once generated, they're stored separately in Invoice History for record-keeping.\r\n            </AlertDescription>\r\n          </Alert>\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"mt-6 p-4 bg-muted/30 rounded-lg border\">\r\n          <p className=\"text-sm font-semibold mb-2\">Quick Actions:</p>\r\n          <div className=\"grid grid-cols-2 gap-2 text-xs text-muted-foreground\">\r\n            <div>✓ Save Estimate → Draft status</div>\r\n            <div>✓ Export Estimate PDF → Quotation</div>\r\n            <div>✓ Generate Invoice → Final bill</div>\r\n            <div>✓ View History → Past records</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Workflow */}\r\n        <div className=\"p-4 bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 rounded-lg\">\r\n          <p className=\"text-sm font-semibold mb-2\">Status Workflow:</p>\r\n          <div className=\"flex items-center gap-2 text-xs\">\r\n            <span className=\"px-2 py-1 bg-background rounded border\">Draft</span>\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n            <span className=\"px-2 py-1 bg-background rounded border\">Quoted</span>\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n            <span className=\"px-2 py-1 bg-background rounded border\">Approved</span>\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n            <span className=\"px-2 py-1 bg-background rounded border\">In Production</span>\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n            <span className=\"px-2 py-1 bg-background rounded border text-accent font-semibold\">Completed</span>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Building2, User } from \"lucide-react\";\r\n\r\ninterface VendorProfile {\r\n  business_name?: string;\r\n  logo_url?: string;\r\n  address_line1?: string;\r\n  address_line2?: string;\r\n  city?: string;\r\n  state?: string;\r\n  pincode?: string;\r\n  country?: string;\r\n  phone?: string;\r\n  email?: string;\r\n}\r\n\r\ninterface CustomerDetails {\r\n  name: string;\r\n  phone: string;\r\n  email: string;\r\n  address: string;\r\n  gstin: string;\r\n}\r\n\r\ninterface BasicInfoSectionProps {\r\n  vendorProfile: VendorProfile | null;\r\n  vendorGSTIN: string;\r\n  onVendorGSTINChange: (value: string) => void;\r\n  customerDetails: CustomerDetails;\r\n  onCustomerDetailsChange: (details: CustomerDetails) => void;\r\n}\r\n\r\nexport const BasicInfoSection = ({\r\n  vendorProfile,\r\n  vendorGSTIN,\r\n  onVendorGSTINChange,\r\n  customerDetails,\r\n  onCustomerDetailsChange,\r\n}: BasicInfoSectionProps) => {\r\n  const handleCustomerChange = (field: keyof CustomerDetails, value: string) => {\r\n    onCustomerDetailsChange({\r\n      ...customerDetails,\r\n      [field]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n      {/* Vertical Separator - only visible on md+ screens */}\r\n      <div className=\"hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-border to-transparent transform -translate-x-1/2\" />\r\n      \r\n      {/* Vendor Details (Auto-fetched) */}\r\n      <Card className=\"border-primary/20 shadow-sm relative z-10\">\r\n        <CardHeader className=\"bg-gradient-to-r from-primary/10 to-primary/5 border-b border-primary/10\">\r\n          <CardTitle className=\"text-lg flex items-center gap-2\">\r\n            <Building2 className=\"h-5 w-5 text-primary\" />\r\n            Vendor Details\r\n          </CardTitle>\r\n          <CardDescription>Your business information</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-6 bg-primary/5\">\r\n          {vendorProfile ? (\r\n            <div className=\"space-y-4\">\r\n              {vendorProfile.logo_url && (\r\n                <div className=\"flex justify-center mb-4\">\r\n                  <img \r\n                    src={vendorProfile.logo_url} \r\n                    alt=\"Vendor Logo\" \r\n                    className=\"h-20 w-auto object-contain\" \r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div className=\"border-b border-border pb-2\">\r\n                  <p className=\"font-semibold text-foreground\">\r\n                    {vendorProfile.business_name || 'Business Name'}\r\n                  </p>\r\n                </div>\r\n                {(vendorProfile.address_line1 || vendorProfile.city || vendorProfile.state) && (\r\n                  <div>\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">Address</p>\r\n                    <p className=\"text-foreground leading-relaxed\">\r\n                      {[\r\n                        vendorProfile.address_line1,\r\n                        vendorProfile.address_line2,\r\n                        vendorProfile.city,\r\n                        vendorProfile.state,\r\n                        vendorProfile.pincode,\r\n                        vendorProfile.country,\r\n                      ]\r\n                        .filter(Boolean)\r\n                        .join(', ')}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                {vendorProfile.phone && (\r\n                  <div>\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">Phone</p>\r\n                    <p className=\"text-foreground\">{vendorProfile.phone}</p>\r\n                  </div>\r\n                )}\r\n                {vendorProfile.email && (\r\n                  <div>\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">Email</p>\r\n                    <p className=\"text-foreground\">{vendorProfile.email}</p>\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <Label htmlFor=\"vendor-gstin\" className=\"text-xs text-muted-foreground mb-1\">\r\n                    GSTIN (Optional)\r\n                  </Label>\r\n                  <Input\r\n                    id=\"vendor-gstin\"\r\n                    value={vendorGSTIN}\r\n                    onChange={(e) => onVendorGSTINChange(e.target.value)}\r\n                    placeholder=\"Enter GSTIN\"\r\n                    className=\"mt-1.5\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-sm text-muted-foreground py-4\">Loading vendor details...</p>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Customer Details (Input fields) */}\r\n      <Card className=\"border-accent/20 shadow-sm relative z-10\">\r\n        <CardHeader className=\"bg-gradient-to-r from-accent/10 to-accent/5 border-b border-accent/10\">\r\n          <CardTitle className=\"text-lg flex items-center gap-2\">\r\n            <User className=\"h-5 w-5 text-accent\" />\r\n            Customer Details\r\n          </CardTitle>\r\n          <CardDescription>Enter customer information</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-6 bg-accent/5\">\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <Label htmlFor=\"customer-name\" className=\"text-sm font-medium\">\r\n                Customer Name *\r\n              </Label>\r\n              <Input\r\n                id=\"customer-name\"\r\n                value={customerDetails.name}\r\n                onChange={(e) => handleCustomerChange('name', e.target.value)}\r\n                placeholder=\"Enter customer name\"\r\n                className=\"mt-1.5\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"customer-phone\" className=\"text-sm font-medium\">\r\n                Phone Number\r\n              </Label>\r\n              <Input\r\n                id=\"customer-phone\"\r\n                value={customerDetails.phone}\r\n                onChange={(e) => handleCustomerChange('phone', e.target.value)}\r\n                placeholder=\"Enter phone number\"\r\n                className=\"mt-1.5\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"customer-email\" className=\"text-sm font-medium\">\r\n                Email Address\r\n              </Label>\r\n              <Input\r\n                id=\"customer-email\"\r\n                type=\"email\"\r\n                value={customerDetails.email}\r\n                onChange={(e) => handleCustomerChange('email', e.target.value)}\r\n                placeholder=\"Enter email address\"\r\n                className=\"mt-1.5\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"customer-address\" className=\"text-sm font-medium\">\r\n                Address\r\n              </Label>\r\n              <Textarea\r\n                id=\"customer-address\"\r\n                value={customerDetails.address}\r\n                onChange={(e) => handleCustomerChange('address', e.target.value)}\r\n                placeholder=\"Enter customer address\"\r\n                className=\"mt-1.5 min-h-[90px]\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"customer-gstin\" className=\"text-sm font-medium\">\r\n                GSTIN (Optional)\r\n              </Label>\r\n              <Input\r\n                id=\"customer-gstin\"\r\n                value={customerDetails.gstin}\r\n                onChange={(e) => handleCustomerChange('gstin', e.target.value)}\r\n                placeholder=\"Enter customer GSTIN\"\r\n                className=\"mt-1.5\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Percent, IndianRupee } from \"lucide-react\";\r\n\r\ninterface CostingSectionProps {\r\n  gstMode: 'sgst_cgst' | 'igst' | 'none';\r\n  onGstModeChange: (mode: 'sgst_cgst' | 'igst' | 'none') => void;\r\n  sgstPercentage: number;\r\n  cgstPercentage: number;\r\n  igstPercentage: number;\r\n  onSgstChange: (value: number) => void;\r\n  onCgstChange: (value: number) => void;\r\n  onIgstChange: (value: number) => void;\r\n  shippingCharges: number;\r\n  onShippingChargesChange: (value: number) => void;\r\n  shippingZone: string;\r\n  onShippingZoneChange: (value: string) => void;\r\n  exchangeRate: number;\r\n  onExchangeRateChange: (value: number) => void;\r\n  costs: {\r\n    finalSellingPrice: number;\r\n    sgstAmount: number;\r\n    cgstAmount: number;\r\n    igstAmount: number;\r\n    grandTotal: number;\r\n    totalInUSD: number;\r\n  };\r\n}\r\n\r\nexport const CostingSection = ({\r\n  gstMode,\r\n  onGstModeChange,\r\n  sgstPercentage,\r\n  cgstPercentage,\r\n  igstPercentage,\r\n  onSgstChange,\r\n  onCgstChange,\r\n  onIgstChange,\r\n  shippingCharges,\r\n  onShippingChargesChange,\r\n  shippingZone,\r\n  exchangeRate,\r\n  onExchangeRateChange,\r\n  costs,\r\n}: CostingSectionProps) => {\r\n  const applyQuickGSTRate = (rate: number) => {\r\n    if (rate === 0) {\r\n      onGstModeChange('none');\r\n      onSgstChange(0);\r\n      onCgstChange(0);\r\n      onIgstChange(0);\r\n    } else if (gstMode === 'none') {\r\n      // If currently no GST, switch to SGST+CGST mode\r\n      onGstModeChange('sgst_cgst');\r\n      onSgstChange(rate / 2);\r\n      onCgstChange(rate / 2);\r\n    } else if (gstMode === 'sgst_cgst') {\r\n      onSgstChange(rate / 2);\r\n      onCgstChange(rate / 2);\r\n    } else {\r\n      onIgstChange(rate);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Percent className=\"h-5 w-5 text-primary\" />\r\n          Tax, Shipping & Currency\r\n        </CardTitle>\r\n        <CardDescription>Configure GST, shipping charges, and currency conversion</CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* GST Mode Selection */}\r\n        <div className=\"space-y-3\">\r\n          <Label className=\"text-sm font-semibold\">GST Type</Label>\r\n          <div className=\"flex flex-wrap gap-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"no-gst-mode\"\r\n                checked={gstMode === 'none'}\r\n                onChange={() => {\r\n                  onGstModeChange('none');\r\n                  onSgstChange(0);\r\n                  onCgstChange(0);\r\n                  onIgstChange(0);\r\n                }}\r\n                className=\"h-4 w-4\"\r\n              />\r\n              <Label htmlFor=\"no-gst-mode\" className=\"text-sm cursor-pointer\">\r\n                No GST\r\n              </Label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"sgst-cgst-mode\"\r\n                checked={gstMode === 'sgst_cgst'}\r\n                onChange={() => onGstModeChange('sgst_cgst')}\r\n                className=\"h-4 w-4\"\r\n              />\r\n              <Label htmlFor=\"sgst-cgst-mode\" className=\"text-sm cursor-pointer\">\r\n                SGST + CGST (Intra-State)\r\n              </Label>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"igst-mode\"\r\n                checked={gstMode === 'igst'}\r\n                onChange={() => onGstModeChange('igst')}\r\n                className=\"h-4 w-4\"\r\n              />\r\n              <Label htmlFor=\"igst-mode\" className=\"text-sm cursor-pointer\">\r\n                IGST (Inter-State)\r\n              </Label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* GST Rate Presets */}\r\n        {gstMode !== 'none' && (\r\n          <div className=\"space-y-2\">\r\n            <Label className=\"text-sm font-semibold\">Quick GST Rate Selection</Label>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {[1.5, 3, 5, 12, 18, 28].map((rate) => (\r\n                <Button\r\n                  key={rate}\r\n                  type=\"button\"\r\n                  variant={\r\n                    (gstMode === 'sgst_cgst' && sgstPercentage === rate / 2) ||\r\n                    (gstMode === 'igst' && igstPercentage === rate)\r\n                      ? 'default'\r\n                      : 'outline'\r\n                  }\r\n                  size=\"sm\"\r\n                  onClick={() => applyQuickGSTRate(rate)}\r\n                >\r\n                  {rate}%\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* GST Input Fields */}\r\n        {gstMode !== 'none' && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            {gstMode === 'sgst_cgst' ? (\r\n              <>\r\n                <div className=\"space-y-1\">\r\n                  <Label htmlFor=\"sgst\" className=\"text-sm\">\r\n                    SGST (%)\r\n                  </Label>\r\n                  <Input\r\n                    id=\"sgst\"\r\n                    type=\"number\"\r\n                    min={0}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={sgstPercentage}\r\n                    onChange={(e) => onSgstChange(parseFloat(e.target.value) || 0)}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-1\">\r\n                  <Label htmlFor=\"cgst\" className=\"text-sm\">\r\n                    CGST (%)\r\n                  </Label>\r\n                  <Input\r\n                    id=\"cgst\"\r\n                    type=\"number\"\r\n                    min={0}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={cgstPercentage}\r\n                    onChange={(e) => onCgstChange(parseFloat(e.target.value) || 0)}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"space-y-1 md:col-span-2\">\r\n                <Label htmlFor=\"igst\" className=\"text-sm\">\r\n                  IGST (%)\r\n                </Label>\r\n                <Input\r\n                  id=\"igst\"\r\n                  type=\"number\"\r\n                  min={0}\r\n                  max={100}\r\n                  step={0.1}\r\n                  value={igstPercentage}\r\n                  onChange={(e) => onIgstChange(parseFloat(e.target.value) || 0)}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Exchange Rate */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className=\"space-y-1\">\r\n            <Label htmlFor=\"exchange-rate\" className=\"text-sm\">\r\n              Exchange Rate (USD to INR)\r\n            </Label>\r\n            <Input\r\n              id=\"exchange-rate\"\r\n              type=\"number\"\r\n              min={0}\r\n              step={0.01}\r\n              value={exchangeRate}\r\n              onChange={(e) => onExchangeRateChange(parseFloat(e.target.value) || 0)}\r\n            />\r\n          </div>\r\n          <div className=\"space-y-1\">\r\n            <Label className=\"text-sm text-muted-foreground\">Auto-calculated USD Amount</Label>\r\n            <div className=\"flex items-center h-10 px-3 bg-muted/50 rounded-md border\">\r\n              <span className=\"font-medium text-primary\">\r\n                ${costs.totalInUSD.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Manual Shipping Charges Override */}\r\n        <div className=\"space-y-1\">\r\n          <Label htmlFor=\"shipping\" className=\"text-sm\">\r\n            Shipping Charges (₹) - Manual Override\r\n          </Label>\r\n          <div className=\"relative\">\r\n            <IndianRupee className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              id=\"shipping\"\r\n              type=\"number\"\r\n              min={0}\r\n              step={0.01}\r\n              value={shippingCharges}\r\n              onChange={(e) => onShippingChargesChange(parseFloat(e.target.value) || 0)}\r\n              className=\"pl-9\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cost Breakdown Display */}\r\n        <div className=\"border-t pt-4 space-y-3\">\r\n          <h4 className=\"font-semibold text-sm text-muted-foreground\">Cost Breakdown</h4>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm\">\r\n            <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n              <span className=\"text-muted-foreground\">Subtotal (Before Tax):</span>\r\n              <span className=\"font-semibold\">₹{costs.finalSellingPrice.toLocaleString('en-IN')}</span>\r\n            </div>\r\n\r\n            {gstMode === 'sgst_cgst' && (\r\n              <>\r\n                <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n                  <span className=\"text-muted-foreground\">SGST ({sgstPercentage}%):</span>\r\n                  <span className=\"font-semibold\">₹{costs.sgstAmount.toLocaleString('en-IN')}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n                  <span className=\"text-muted-foreground\">CGST ({cgstPercentage}%):</span>\r\n                  <span className=\"font-semibold\">₹{costs.cgstAmount.toLocaleString('en-IN')}</span>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {gstMode === 'igst' && (\r\n              <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n                <span className=\"text-muted-foreground\">IGST ({igstPercentage}%):</span>\r\n                <span className=\"font-semibold\">₹{costs.igstAmount.toLocaleString('en-IN')}</span>\r\n              </div>\r\n            )}\r\n\r\n            {gstMode === 'none' && (\r\n              <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n                <span className=\"text-muted-foreground\">GST:</span>\r\n                <span className=\"font-semibold text-muted-foreground\">Not Applicable</span>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex justify-between items-center p-2 bg-muted/50 rounded\">\r\n              <span className=\"text-muted-foreground\">Shipping ({shippingZone}):</span>\r\n              <span className=\"font-semibold\">₹{shippingCharges.toLocaleString('en-IN')}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t pt-3 mt-3\">\r\n            <div className=\"flex justify-between items-center p-3 bg-primary/10 rounded-lg\">\r\n              <span className=\"font-bold text-lg\">Grand Total (INR):</span>\r\n              <span className=\"font-bold text-xl text-primary\">\r\n                ₹{costs.grandTotal.toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center p-3 bg-accent/10 rounded-lg mt-2\">\r\n              <span className=\"font-semibold\">Equivalent (USD):</span>\r\n              <span className=\"font-semibold text-lg text-accent\">\r\n                ${costs.totalInUSD.toLocaleString('en-US')}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { TrendingUp } from \"lucide-react\";\r\n\r\ninterface Costs {\r\n  goldCost: number;\r\n  totalCost: number;\r\n  finalSellingPrice: number;\r\n  profitAmount: number;\r\n  grandTotal: number;\r\n}\r\n\r\ninterface FormData {\r\n  diamondPerCaratPrice: number;\r\n  diamondWeight: number;\r\n  gemstonePerCaratPrice: number;\r\n  gemstoneWeight: number;\r\n  makingCharges: number;\r\n  cadDesignCharges: number;\r\n  cammingCharges: number;\r\n  certificationCost: number;\r\n}\r\n\r\ninterface PricingSectionProps {\r\n  profitMargin: number;\r\n  onProfitMarginChange: (value: number) => void;\r\n  costs: Costs;\r\n  formData: FormData;\r\n}\r\n\r\nexport const PricingSection = ({\r\n  profitMargin,\r\n  onProfitMarginChange,\r\n  costs,\r\n  formData,\r\n}: PricingSectionProps) => {\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <TrendingUp className=\"h-5 w-5 text-primary\" />\r\n          Profit Margin & Final Pricing\r\n        </CardTitle>\r\n        <CardDescription>Set profit margin and view final selling price</CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Profit Margin Slider */}\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <Label htmlFor=\"profit-margin\" className=\"text-sm font-semibold\">\r\n              Profit Margin (%)\r\n            </Label>\r\n            <span className=\"text-lg font-bold text-primary\">{profitMargin}%</span>\r\n          </div>\r\n          <Input\r\n            id=\"profit-margin\"\r\n            type=\"range\"\r\n            min={0}\r\n            max={200}\r\n            step={1}\r\n            value={profitMargin}\r\n            onChange={(e) => onProfitMarginChange(parseFloat(e.target.value))}\r\n            className=\"w-full\"\r\n          />\r\n          <div className=\"flex justify-between text-xs text-muted-foreground\">\r\n            <span>0%</span>\r\n            <span>100%</span>\r\n            <span>200%</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Summary Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className=\"p-4 bg-muted/50 rounded-lg space-y-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Manufacturing Cost</p>\r\n            <p className=\"text-2xl font-bold\">₹{costs.totalCost.toLocaleString('en-IN')}</p>\r\n          </div>\r\n\r\n          <div className=\"p-4 bg-primary/10 rounded-lg space-y-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Final Selling Price (Before Tax)</p>\r\n            <p className=\"text-2xl font-bold text-primary\">\r\n              ₹{costs.finalSellingPrice.toLocaleString('en-IN')}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"p-4 bg-accent/10 rounded-lg space-y-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Profit Amount</p>\r\n            <p className=\"text-2xl font-bold text-accent\">\r\n              ₹{costs.profitAmount.toLocaleString('en-IN')}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"p-4 bg-gradient-to-br from-primary/20 to-accent/20 rounded-lg space-y-2\">\r\n            <p className=\"text-sm text-muted-foreground\">Grand Total (After Tax)</p>\r\n            <p className=\"text-2xl font-bold\">₹{costs.grandTotal.toLocaleString('en-IN')}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cost Breakdown Summary */}\r\n        <div className=\"border-t pt-4 space-y-2\">\r\n          <h4 className=\"font-semibold text-sm\">Cost Breakdown</h4>\r\n          <div className=\"space-y-1 text-sm\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Gold Cost:</span>\r\n              <span className=\"font-medium\">₹{costs.goldCost.toLocaleString('en-IN')}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Diamond Cost:</span>\r\n              <span className=\"font-medium\">\r\n                ₹{(formData.diamondPerCaratPrice * formData.diamondWeight).toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Gemstone Cost:</span>\r\n              <span className=\"font-medium\">\r\n                ₹\r\n                {(formData.gemstonePerCaratPrice * formData.gemstoneWeight).toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Making Charges:</span>\r\n              <span className=\"font-medium\">₹{formData.makingCharges.toLocaleString('en-IN')}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">CAD Design:</span>\r\n              <span className=\"font-medium\">\r\n                ₹{formData.cadDesignCharges.toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Camming:</span>\r\n              <span className=\"font-medium\">\r\n                ₹{formData.cammingCharges.toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground\">Certification:</span>\r\n              <span className=\"font-medium\">\r\n                ₹{formData.certificationCost.toLocaleString('en-IN')}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Save, FolderOpen, FileText, Trash2 } from \"lucide-react\";\r\n\r\ninterface ReviewSectionProps {\r\n  onSave: () => void;\r\n  onLoad: () => void;\r\n  onExportPDF: () => void;\r\n  onReset: () => void;\r\n  onViewHistory: () => void;\r\n  onCreateInvoice: () => void;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\nexport const ReviewSection = ({\r\n  onSave,\r\n  onLoad,\r\n  onExportPDF,\r\n  onReset,\r\n  onViewHistory,\r\n  onCreateInvoice,\r\n  isAuthenticated,\r\n}: ReviewSectionProps) => {\r\n  return (\r\n    <Card className=\"border-primary/20 shadow-lg\">\r\n      <CardContent className=\"p-6\">\r\n        <div className=\"space-y-4\">\r\n          {/* Primary Actions */}\r\n          <div className=\"flex flex-wrap gap-4 justify-center\">\r\n            {isAuthenticated && (\r\n              <>\r\n                <Button onClick={onSave} size=\"lg\" variant=\"outline\" className=\"gap-2\">\r\n                  <Save className=\"h-5 w-5\" />\r\n                  Save Estimate\r\n                </Button>\r\n\r\n                <Button onClick={onLoad} size=\"lg\" variant=\"outline\" className=\"gap-2\">\r\n                  <FolderOpen className=\"h-5 w-5\" />\r\n                  Load Estimate\r\n                </Button>\r\n              </>\r\n            )}\r\n\r\n            <Button\r\n              onClick={onExportPDF}\r\n              size=\"lg\"\r\n              className=\"gap-2 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70\"\r\n            >\r\n              <FileText className=\"h-5 w-5\" />\r\n              Export Estimate PDF\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Secondary Actions */}\r\n          {isAuthenticated && (\r\n            <div className=\"flex flex-wrap gap-4 justify-center border-t pt-4\">\r\n              <Button onClick={onViewHistory} size=\"lg\" variant=\"secondary\" className=\"gap-2\">\r\n                <FolderOpen className=\"h-5 w-5\" />\r\n                View Estimate History\r\n              </Button>\r\n\r\n              <Button onClick={onCreateInvoice} size=\"lg\" variant=\"secondary\" className=\"gap-2\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                Create Invoice\r\n              </Button>\r\n\r\n              <Button onClick={onReset} size=\"lg\" variant=\"destructive\" className=\"gap-2\">\r\n                <Trash2 className=\"h-5 w-5\" />\r\n                Reset Form\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import { useState } from \"react\";\r\n\r\nexport type EstimateStep = 1 | 2 | 3 | 4 | 5;\r\n\r\ninterface WorkflowStep {\r\n  id: EstimateStep;\r\n  title: string;\r\n  description: string;\r\n  isComplete: boolean;\r\n}\r\n\r\nexport const useEstimateWorkflow = () => {\r\n  const [currentStep, setCurrentStep] = useState<EstimateStep>(1);\r\n  \r\n  const steps: WorkflowStep[] = [\r\n    {\r\n      id: 1,\r\n      title: \"Basic Info\",\r\n      description: \"Customer & estimate details\",\r\n      isComplete: false,\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Specifications\",\r\n      description: \"Jewelry details & weights\",\r\n      isComplete: false,\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Additional Costs\",\r\n      description: \"CAD, camming & GST\",\r\n      isComplete: false,\r\n    },\r\n    {\r\n      id: 4,\r\n      title: \"Pricing\",\r\n      description: \"Profit margin & final price\",\r\n      isComplete: false,\r\n    },\r\n    {\r\n      id: 5,\r\n      title: \"Review & Save\",\r\n      description: \"Export or generate invoice\",\r\n      isComplete: false,\r\n    },\r\n  ];\r\n\r\n  const goToNextStep = () => {\r\n    if (currentStep < 5) {\r\n      setCurrentStep((prev) => (prev + 1) as EstimateStep);\r\n    }\r\n  };\r\n\r\n  const goToPreviousStep = () => {\r\n    if (currentStep > 1) {\r\n      setCurrentStep((prev) => (prev - 1) as EstimateStep);\r\n    }\r\n  };\r\n\r\n  const goToStep = (step: EstimateStep) => {\r\n    setCurrentStep(step);\r\n  };\r\n\r\n  const validateStep = (step: EstimateStep): { isValid: boolean; message?: string } => {\r\n    switch (step) {\r\n      case 1:\r\n        // Basic info validation would go here\r\n        return { isValid: true };\r\n      case 2:\r\n        // Jewelry specs validation would go here\r\n        return { isValid: true };\r\n      case 3:\r\n        // Additional costs validation would go here\r\n        return { isValid: true };\r\n      case 4:\r\n        // Pricing validation would go here\r\n        return { isValid: true };\r\n      case 5:\r\n        // Final review validation would go here\r\n        return { isValid: true };\r\n      default:\r\n        return { isValid: false };\r\n    }\r\n  };\r\n\r\n  return {\r\n    currentStep,\r\n    steps,\r\n    goToNextStep,\r\n    goToPreviousStep,\r\n    goToStep,\r\n    validateStep,\r\n    isFirstStep: currentStep === 1,\r\n    isLastStep: currentStep === 5,\r\n  };\r\n};","import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Download, X } from \"lucide-react\";\r\nimport { InvoiceData } from \"@/utils/invoiceGenerator\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\n\r\ninterface InvoicePreviewDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  invoiceData: InvoiceData | null;\r\n  onConfirmDownload: () => void;\r\n}\r\n\r\nexport const InvoicePreviewDialog = ({\r\n  open,\r\n  onOpenChange,\r\n  invoiceData,\r\n  onConfirmDownload,\r\n}: InvoicePreviewDialogProps) => {\r\n  if (!invoiceData) return null;\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n      style: 'currency',\r\n      currency: 'INR',\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] p-0\">\r\n        <DialogHeader className=\"px-6 pt-6\">\r\n          <DialogTitle>Invoice Preview</DialogTitle>\r\n          <DialogDescription>\r\n            Review your invoice before downloading the PDF\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        \r\n        <ScrollArea className=\"h-[calc(90vh-180px)] px-6\">\r\n          <div className=\"bg-background border rounded-lg p-8 space-y-6\">\r\n            {/* Header Section */}\r\n            <div className=\"flex justify-between items-start border-b pb-4\">\r\n              <div>\r\n                {invoiceData.vendorBranding?.logo && (\r\n                  <img \r\n                    src={invoiceData.vendorBranding.logo} \r\n                    alt=\"Logo\" \r\n                    className=\"h-16 mb-2\"\r\n                  />\r\n                )}\r\n                <h1 className=\"text-3xl font-bold text-primary\">INVOICE</h1>\r\n                <p className=\"text-lg font-semibold mt-1\">\r\n                  {invoiceData.invoiceNumber}\r\n                </p>\r\n              </div>\r\n              {invoiceData.vendorBranding && (\r\n                <div className=\"text-right text-sm\">\r\n                  <p className=\"font-semibold\">{invoiceData.vendorBranding.name}</p>\r\n                  {invoiceData.vendorBranding.address && (\r\n                    <p className=\"text-muted-foreground\">{invoiceData.vendorBranding.address}</p>\r\n                  )}\r\n                  {invoiceData.vendorBranding.phone && (\r\n                    <p className=\"text-muted-foreground\">Phone: {invoiceData.vendorBranding.phone}</p>\r\n                  )}\r\n                  {invoiceData.vendorBranding.email && (\r\n                    <p className=\"text-muted-foreground\">Email: {invoiceData.vendorBranding.email}</p>\r\n                  )}\r\n                  {invoiceData.vendorGSTIN && (\r\n                    <p className=\"text-muted-foreground\">GSTIN: {invoiceData.vendorGSTIN}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Invoice & Customer Details */}\r\n            <div className=\"grid grid-cols-2 gap-6\">\r\n              <div>\r\n                <h3 className=\"font-semibold mb-2\">Invoice Details</h3>\r\n                <div className=\"text-sm space-y-1\">\r\n                  <p>Date: {new Date(invoiceData.invoiceDate).toLocaleDateString()}</p>\r\n                  {invoiceData.paymentDueDate && (\r\n                    <p>Due Date: {new Date(invoiceData.paymentDueDate).toLocaleDateString()}</p>\r\n                  )}\r\n                  {invoiceData.paymentTerms && (\r\n                    <p>Terms: {invoiceData.paymentTerms}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold mb-2\">Bill To</h3>\r\n                <div className=\"text-sm space-y-1\">\r\n                  <p className=\"font-semibold\">{invoiceData.customerName}</p>\r\n                  {invoiceData.customerPhone && <p>Phone: {invoiceData.customerPhone}</p>}\r\n                  {invoiceData.customerEmail && <p>Email: {invoiceData.customerEmail}</p>}\r\n                  {invoiceData.customerAddress && <p>{invoiceData.customerAddress}</p>}\r\n                  {invoiceData.customerGSTIN && <p>GSTIN: {invoiceData.customerGSTIN}</p>}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Line Items */}\r\n            {invoiceData.lineItems && invoiceData.lineItems.length > 0 && (\r\n              <div>\r\n                <h3 className=\"font-semibold mb-3\">Items</h3>\r\n                <div className=\"space-y-4\">\r\n                  {invoiceData.lineItems.map((item, index) => (\r\n                    <div key={index} className=\"border rounded-lg p-4\">\r\n                      <div className=\"flex gap-4\">\r\n                        {item.image_url && (\r\n                          <img \r\n                            src={item.image_url} \r\n                            alt={item.item_name} \r\n                            className=\"w-20 h-20 object-cover rounded\"\r\n                          />\r\n                        )}\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-semibold\">{item.item_name}</h4>\r\n                          {item.description && (\r\n                            <p className=\"text-sm text-muted-foreground\">{item.description}</p>\r\n                          )}\r\n                          <div className=\"mt-2 grid grid-cols-2 gap-2 text-sm\">\r\n                            {item.net_weight && <p>Net Weight: {item.net_weight}g</p>}\r\n                            {item.diamond_weight > 0 && <p>Diamond: {item.diamond_weight}ct</p>}\r\n                            <p className=\"col-span-2 font-semibold\">Total: {formatCurrency(item.subtotal)}</p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Cost Breakdown */}\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-3\">Cost Breakdown</h3>\r\n              <div className=\"space-y-2 text-sm\">\r\n                {invoiceData.diamondCost > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Diamond Cost:</span>\r\n                    <span>{formatCurrency(invoiceData.diamondCost)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.gemstoneCost > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Gemstone Cost:</span>\r\n                    <span>{formatCurrency(invoiceData.gemstoneCost)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.goldCost > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Gold Cost:</span>\r\n                    <span>{formatCurrency(invoiceData.goldCost)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.makingCharges > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Making Charges:</span>\r\n                    <span>{formatCurrency(invoiceData.makingCharges)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.cadDesignCharges > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>CAD Design Charges:</span>\r\n                    <span>{formatCurrency(invoiceData.cadDesignCharges)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.cammingCharges > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Camming Charges:</span>\r\n                    <span>{formatCurrency(invoiceData.cammingCharges)}</span>\r\n                  </div>\r\n                )}\r\n                {invoiceData.certificationCost > 0 && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span>Certification Cost:</span>\r\n                    <span>{formatCurrency(invoiceData.certificationCost)}</span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-between font-semibold text-base pt-2 border-t\">\r\n                  <span>Total Amount:</span>\r\n                  <span>{formatCurrency(invoiceData.finalSellingPrice || invoiceData.totalCost)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            {(invoiceData.notes || invoiceData.invoiceNotes) && (\r\n              <div className=\"border-t pt-4\">\r\n                <h3 className=\"font-semibold mb-2\">Notes</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {invoiceData.invoiceNotes || invoiceData.notes}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </ScrollArea>\r\n\r\n        <DialogFooter className=\"px-6 pb-6\">\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            <X className=\"mr-2 h-4 w-4\" />\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={onConfirmDownload}>\r\n            <Download className=\"mr-2 h-4 w-4\" />\r\n            Download PDF\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Calculator, IndianRupee, Save, FolderOpen, Trash2, TrendingUp, Upload, X, Image as ImageIcon, Info, FileText, Calendar, Copy, Check, Building2, User, Coins, Diamond, Gem, Percent } from \"lucide-react\";\r\nimport { BackToHomeButton } from \"@/components/BackToHomeButton\";\r\nimport { Header } from \"@/components/Header\";\r\nimport { Footer } from \"@/components/Footer\";\r\nimport { ThemeSwitcher } from \"@/components/ThemeSwitcher\";\r\nimport { SEOHead } from \"@/components/SEOHead\";\r\nimport { StructuredData } from \"@/components/StructuredData\";\r\nimport { BreadcrumbNav } from \"@/components/BreadcrumbNav\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { EstimateWorkflowSteps } from \"@/components/estimate/EstimateWorkflowSteps\";\r\nimport { EstimateFlowGuide } from \"@/components/estimate/EstimateFlowGuide\";\r\nimport { BasicInfoSection } from \"@/components/estimate/BasicInfoSection\";\r\nimport { CostingSection } from \"@/components/estimate/CostingSection\";\r\nimport { PricingSection } from \"@/components/estimate/PricingSection\";\r\nimport { ReviewSection } from \"@/components/estimate/ReviewSection\";\r\nimport { useEstimateWorkflow } from \"@/hooks/useEstimateWorkflow\";\r\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\r\nimport { ChevronDown } from \"lucide-react\";\r\nimport { InvoiceLineItems, type LineItem } from \"@/components/InvoiceLineItems\";\r\nimport { generateInvoicePDF, type InvoiceData } from \"@/utils/invoiceGenerator\";\r\nimport { generateEstimatePDF } from \"@/utils/estimateGenerator\";\r\nimport { InvoicePreviewDialog } from \"@/components/InvoicePreviewDialog\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport { Calendar as CalendarPicker } from \"@/components/ui/calendar\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst ManufacturingCost = () => {\r\n  const { toast } = useToast();\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState<any>(null);\r\n  const { currentStep, steps } = useEstimateWorkflow();\r\n  const [showFlowGuide, setShowFlowGuide] = useState(true);\r\n  const [estimates, setEstimates] = useState<any[]>([]);\r\n  const [currentEstimateId, setCurrentEstimateId] = useState<string | null>(null);\r\n  const [estimateName, setEstimateName] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\r\n  const [showLoadDialog, setShowLoadDialog] = useState(false);\r\n  const [estimateCategory, setEstimateCategory] = useState<'jewelry' | 'loose_diamond' | 'gemstone'>('jewelry');\r\n  const [estimateStatus, setEstimateStatus] = useState(\"draft\");\r\n  const [estimatedCompletionDate, setEstimatedCompletionDate] = useState<Date>();\r\n  const [isCustomerVisible, setIsCustomerVisible] = useState(false);\r\n  const [shareToken, setShareToken] = useState<string>(\"\");\r\n  const [copiedToken, setCopiedToken] = useState(false);\r\n  const [guestUsageCount, setGuestUsageCount] = useState(0);\r\n  const [showUsageLimitDialog, setShowUsageLimitDialog] = useState(false);\r\n  const [vendorProfile, setVendorProfile] = useState<any>(null);\r\n  const [invoiceNumber, setInvoiceNumber] = useState(\"\");\r\n  const [invoicePrefix, setInvoicePrefix] = useState(\"INV\");\r\n  const [invoiceDate, setInvoiceDate] = useState<Date>(new Date());\r\n  const [paymentTerms, setPaymentTerms] = useState(\"Net 30\");\r\n  const [paymentDueDate, setPaymentDueDate] = useState<Date>();\r\n  const [invoiceNotes, setInvoiceNotes] = useState(\"\");\r\n  const [invoiceTemplate, setInvoiceTemplate] = useState<'detailed' | 'summary' | 'minimal'>('detailed');\r\n  const [lineItems, setLineItems] = useState<LineItem[]>([]);\r\n  const [showInvoicePreview, setShowInvoicePreview] = useState(false);\r\n  const [previewInvoiceData, setPreviewInvoiceData] = useState<InvoiceData | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    purityFraction: 0.76,\r\n    goldRate24k: 0,\r\n    platinumRate: 3200, // Default platinum rate per gram\r\n    silverRate: 95 // Default silver rate per gram\r\n  });\r\n  const [profitMargin, setProfitMargin] = useState(0);\r\n  const [customerDetails, setCustomerDetails] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    address: \"\",\r\n    gstin: \"\"\r\n  });\r\n  const [vendorGSTIN, setVendorGSTIN] = useState(\"\");\r\n  const [gstMode, setGstMode] = useState<'sgst_cgst' | 'igst' | 'none'>('sgst_cgst');\r\n  const [sgstPercentage, setSgstPercentage] = useState(9);\r\n  const [cgstPercentage, setCgstPercentage] = useState(9);\r\n  const [igstPercentage, setIgstPercentage] = useState(18);\r\n  const [shippingCharges, setShippingCharges] = useState(0);\r\n  const [shippingZone, setShippingZone] = useState('local');\r\n  const [exchangeRate, setExchangeRate] = useState(83); // USD to INR rate\r\n  const [costs, setCosts] = useState({\r\n    goldCost: 0,\r\n    totalCost: 0,\r\n    finalSellingPrice: 0,\r\n    profitAmount: 0,\r\n    sgstAmount: 0,\r\n    cgstAmount: 0,\r\n    igstAmount: 0,\r\n    grandTotal: 0,\r\n    totalInUSD: 0\r\n  });\r\n\r\n  // Check auth status and usage limits\r\n  useEffect(() => {\r\n    const checkUsageAndAuth = async () => {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      setUser(user);\r\n      if (user) {\r\n        // Authenticated users have unlimited access\r\n        fetchEstimates();\r\n        fetchVendorProfile();\r\n      } else {\r\n        // Check guest usage via backend\r\n        try {\r\n          const {\r\n            data,\r\n            error\r\n          } = await supabase.functions.invoke('check-guest-usage', {\r\n            body: {\r\n              calculatorType: 'manufacturing'\r\n            }\r\n          });\r\n          if (error) {\r\n            console.error(\"Error checking guest usage:\", error);\r\n            // Fallback to allowing access if backend check fails\r\n            return;\r\n          }\r\n          if (!data.allowed) {\r\n            setShowUsageLimitDialog(true);\r\n          } else {\r\n            setGuestUsageCount(data.usageCount);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Failed to check usage:\", error);\r\n          // Fallback to allowing access if request fails\r\n        }\r\n      }\r\n    };\r\n    checkUsageAndAuth();\r\n  }, []);\r\n\r\n  // Fetch live exchange rate\r\n  const fetchLiveExchangeRate = async (): Promise<number> => {\r\n    try {\r\n      const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');\r\n      const data = await response.json();\r\n      if (data.rates?.INR) {\r\n        return data.rates.INR;\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch live exchange rate:', error);\r\n    }\r\n    return 87.50; // Fallback rate\r\n  };\r\n\r\n  // Fetch vendor profile for branding and auto-populate pricing\r\n  const fetchVendorProfile = async () => {\r\n    const {\r\n      data: {\r\n        user\r\n      }\r\n    } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n\r\n    // Fetch profile and live rate in parallel\r\n    const [profileResult, liveRate] = await Promise.all([\r\n      supabase.from('vendor_profiles').select('business_name, logo_url, primary_brand_color, secondary_brand_color, brand_tagline, email, phone, address_line1, address_line2, city, state, pincode, country, gold_rate_24k_per_gram, making_charges_per_gram, usd_exchange_rate').eq('user_id', user.id).maybeSingle(),\r\n      fetchLiveExchangeRate()\r\n    ]);\r\n\r\n    if (profileResult.error) {\r\n      console.error('Error fetching vendor profile:', profileResult.error);\r\n      setExchangeRate(liveRate);\r\n    } else if (profileResult.data) {\r\n      setVendorProfile(profileResult.data);\r\n      // Auto-populate gold rate and making charges from profile\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        goldRate24k: profileResult.data.gold_rate_24k_per_gram || 0,\r\n        makingCharges: profileResult.data.making_charges_per_gram || 0\r\n      }));\r\n      // Use live exchange rate\r\n      setExchangeRate(liveRate);\r\n      \r\n      // Update profile with live rate\r\n      await supabase.from('vendor_profiles').update({ usd_exchange_rate: liveRate }).eq('user_id', user.id);\r\n    } else {\r\n      setExchangeRate(liveRate);\r\n    }\r\n  };\r\n\r\n  // Fetch saved estimates\r\n  const fetchEstimates = async () => {\r\n    const {\r\n      data: {\r\n        user\r\n      }\r\n    } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n    const {\r\n      data,\r\n      error\r\n    } = await supabase.from('manufacturing_cost_estimates').select('*').eq('user_id', user.id).order('created_at', {\r\n      ascending: false\r\n    });\r\n    if (error) {\r\n      console.error('Error fetching estimates:', error);\r\n    } else {\r\n      setEstimates(data || []);\r\n    }\r\n  };\r\n\r\n\r\n  // Calculate costs from line items\r\n  useEffect(() => {\r\n    // Calculate subtotal from line items\r\n    const lineItemsTotal = lineItems.reduce((sum, item) => sum + (item.subtotal || 0), 0);\r\n    const totalCost = lineItemsTotal;\r\n    const finalSellingPrice = totalCost * (1 + profitMargin / 100);\r\n    const profitAmount = finalSellingPrice - totalCost;\r\n\r\n    // Calculate GST based on mode\r\n    let sgstAmount = 0;\r\n    let cgstAmount = 0;\r\n    let igstAmount = 0;\r\n    if (gstMode === 'sgst_cgst') {\r\n      sgstAmount = finalSellingPrice * sgstPercentage / 100;\r\n      cgstAmount = finalSellingPrice * cgstPercentage / 100;\r\n    } else {\r\n      igstAmount = finalSellingPrice * igstPercentage / 100;\r\n    }\r\n\r\n    // Calculate grand total with GST and shipping\r\n    const grandTotal = finalSellingPrice + sgstAmount + cgstAmount + igstAmount + shippingCharges;\r\n\r\n    // Calculate USD equivalent\r\n    const totalInUSD = grandTotal / exchangeRate;\r\n    setCosts({\r\n      goldCost: 0, // No longer calculated from formData\r\n      totalCost: parseFloat(totalCost.toFixed(2)),\r\n      finalSellingPrice: parseFloat(finalSellingPrice.toFixed(2)),\r\n      profitAmount: parseFloat(profitAmount.toFixed(2)),\r\n      sgstAmount: parseFloat(sgstAmount.toFixed(2)),\r\n      cgstAmount: parseFloat(cgstAmount.toFixed(2)),\r\n      igstAmount: parseFloat(igstAmount.toFixed(2)),\r\n      grandTotal: parseFloat(grandTotal.toFixed(2)),\r\n      totalInUSD: parseFloat(totalInUSD.toFixed(2))\r\n    });\r\n  }, [lineItems, profitMargin, gstMode, sgstPercentage, cgstPercentage, igstPercentage, shippingCharges, exchangeRate]);\r\n  const handleReset = () => {\r\n    setFormData({\r\n      purityFraction: 0.76,\r\n      goldRate24k: 0,\r\n      platinumRate: 3200,\r\n      silverRate: 95\r\n    });\r\n    setProfitMargin(0);\r\n    setCurrentEstimateId(null);\r\n    setEstimateName(\"\");\r\n    setNotes(\"\");\r\n    setCustomerDetails({\r\n      name: \"\",\r\n      phone: \"\",\r\n      email: \"\",\r\n      address: \"\",\r\n      gstin: \"\"\r\n    });\r\n    setVendorGSTIN(\"\");\r\n    setEstimateStatus(\"draft\");\r\n    setEstimatedCompletionDate(undefined);\r\n    setIsCustomerVisible(false);\r\n    setShareToken(\"\");\r\n    setLineItems([]);\r\n    setGstMode('sgst_cgst');\r\n    setSgstPercentage(9);\r\n    setCgstPercentage(9);\r\n    setIgstPercentage(18);\r\n    setShippingCharges(0);\r\n    setShippingZone('local');\r\n    setExchangeRate(83);\r\n  };\r\n  const copyShareLink = () => {\r\n    if (!shareToken) {\r\n      toast({\r\n        title: \"No Tracking Link\",\r\n        description: \"Please save the estimate first to generate a tracking link\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    const trackingUrl = `${window.location.origin}/order-tracking/${shareToken}`;\r\n    navigator.clipboard.writeText(trackingUrl);\r\n    setCopiedToken(true);\r\n    setTimeout(() => setCopiedToken(false), 2000);\r\n    toast({\r\n      title: \"Link Copied\",\r\n      description: \"Customer tracking link copied to clipboard\"\r\n    });\r\n  };\r\n  const generateNextInvoiceNumber = async () => {\r\n    try {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      const {\r\n        data,\r\n        error\r\n      } = await supabase.from(\"manufacturing_cost_estimates\").select(\"invoice_number\").eq(\"user_id\", user.id).not(\"invoice_number\", \"is\", null).order(\"created_at\", {\r\n        ascending: false\r\n      }).limit(1);\r\n      if (error) throw error;\r\n      const currentYear = new Date().getFullYear();\r\n      let nextNumber = 1;\r\n      if (data && data.length > 0) {\r\n        const lastInvoice = data[0].invoice_number;\r\n        const match = lastInvoice.match(/(\\d+)$/);\r\n        if (match) {\r\n          nextNumber = parseInt(match[1]) + 1;\r\n        }\r\n      }\r\n      const newInvoiceNumber = `${invoicePrefix}-${currentYear}-${String(nextNumber).padStart(3, '0')}`;\r\n      setInvoiceNumber(newInvoiceNumber);\r\n      return newInvoiceNumber;\r\n    } catch (error) {\r\n      console.error(\"Error generating invoice number:\", error);\r\n      return `${invoicePrefix}-${new Date().getFullYear()}-001`;\r\n    }\r\n  };\r\n  // Simplified handlers - redirect to Invoice Generator page\r\n  const handleGenerateInvoice = async () => {\r\n    navigate('/invoice-generator');\r\n  };\r\n\r\n  const handleExportPDF = () => {\r\n    toast({\r\n      title: \"Use Invoice Generator\",\r\n      description: \"Please use the Invoice Generator page to create and export invoice PDFs\"\r\n    });\r\n    navigate('/invoice-generator');\r\n  };\r\n\r\n  const handleConfirmDownload = () => {\r\n    toast({\r\n      title: \"Use Invoice Generator\",\r\n      description: \"Please use the Invoice Generator page to create and export invoice PDFs\"\r\n    });\r\n    navigate('/invoice-generator');\r\n  };\r\n  const handleSave = async () => {\r\n    if (!user) {\r\n      toast({\r\n        title: \"Authentication Required\",\r\n        description: \"Please sign in to save estimates.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!estimateName.trim()) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please enter an estimate name.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Store extra details in line_items metadata\r\n    const lineItemsWithMeta = lineItems.length > 0 ? {\r\n      items: lineItems,\r\n      meta: {\r\n        customer_gstin: customerDetails.gstin,\r\n        vendor_gstin: vendorGSTIN,\r\n        gst_mode: gstMode,\r\n        sgst_percentage: sgstPercentage,\r\n        cgst_percentage: cgstPercentage,\r\n        igst_percentage: igstPercentage,\r\n        shipping_charges: shippingCharges,\r\n        shipping_zone: shippingZone,\r\n        exchange_rate: exchangeRate\r\n      }\r\n    } : null;\r\n\r\n    const estimateData = {\r\n      user_id: user.id,\r\n      estimate_name: estimateName,\r\n      estimate_category: estimateCategory,\r\n      customer_name: customerDetails.name || null,\r\n      customer_phone: customerDetails.phone || null,\r\n      customer_email: customerDetails.email || null,\r\n      customer_address: customerDetails.address || null,\r\n      net_weight: 0,\r\n      purity_fraction: formData.purityFraction,\r\n      gold_rate_24k: formData.goldRate24k,\r\n      making_charges: 0,\r\n      cad_design_charges: 0,\r\n      camming_charges: 0,\r\n      certification_cost: 0,\r\n      diamond_cost: 0,\r\n      gemstone_cost: 0,\r\n      gold_cost: costs.goldCost,\r\n      total_cost: costs.totalCost,\r\n      final_selling_price: costs.finalSellingPrice,\r\n      profit_margin_percentage: profitMargin,\r\n      notes,\r\n      status: estimateStatus,\r\n      estimated_completion_date: estimatedCompletionDate?.toISOString() || null,\r\n      is_customer_visible: isCustomerVisible,\r\n      share_token: shareToken || `EST-${Date.now()}-${Math.random().toString(36).substring(7)}`,\r\n      line_items: lineItemsWithMeta as any\r\n    };\r\n\r\n    let result;\r\n    if (currentEstimateId) {\r\n      result = await supabase\r\n        .from('manufacturing_cost_estimates')\r\n        .update(estimateData)\r\n        .eq('id', currentEstimateId);\r\n    } else {\r\n      result = await supabase\r\n        .from('manufacturing_cost_estimates')\r\n        .insert(estimateData)\r\n        .select()\r\n        .single();\r\n      \r\n      if (result.data) {\r\n        setCurrentEstimateId(result.data.id);\r\n        setShareToken(result.data.share_token);\r\n      }\r\n    }\r\n\r\n    if (result.error) {\r\n      console.error('Save estimate error:', result.error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: result.error.message || \"Failed to save estimate\",\r\n        variant: \"destructive\"\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"Saved\",\r\n        description: currentEstimateId ? \"Estimate updated successfully\" : \"Estimate saved successfully\"\r\n      });\r\n      fetchEstimates();\r\n      setShowSaveDialog(false);\r\n    }\r\n  };\r\n  const handleLoad = (estimate: any) => {\r\n    // Handle both old format (array) and new format (object with items and meta)\r\n    const lineItemsData = estimate.line_items;\r\n    let items: any[] = [];\r\n    let meta: any = {};\r\n    \r\n    if (Array.isArray(lineItemsData)) {\r\n      items = lineItemsData;\r\n    } else if (lineItemsData?.items) {\r\n      items = lineItemsData.items;\r\n      meta = lineItemsData.meta || {};\r\n    }\r\n\r\n    setFormData({\r\n      purityFraction: estimate.purity_fraction || 0.76,\r\n      goldRate24k: estimate.gold_rate_24k || 0,\r\n      platinumRate: 3200, // Default rate\r\n      silverRate: 95 // Default rate\r\n    });\r\n    setProfitMargin(estimate.profit_margin_percentage || 0);\r\n    setCurrentEstimateId(estimate.id);\r\n    setEstimateName(estimate.estimate_name);\r\n    setNotes(estimate.notes || \"\");\r\n    setCustomerDetails({\r\n      name: estimate.customer_name || \"\",\r\n      phone: estimate.customer_phone || \"\",\r\n      email: estimate.customer_email || \"\",\r\n      address: estimate.customer_address || \"\",\r\n      gstin: meta?.customer_gstin || \"\"\r\n    });\r\n    setVendorGSTIN(meta?.vendor_gstin || \"\");\r\n    setGstMode(meta?.gst_mode || 'sgst_cgst');\r\n    setSgstPercentage(meta?.sgst_percentage || 9);\r\n    setCgstPercentage(meta?.cgst_percentage || 9);\r\n    setIgstPercentage(meta?.igst_percentage || 18);\r\n    setShippingCharges(meta?.shipping_charges || 0);\r\n    setShippingZone(meta?.shipping_zone || 'local');\r\n    setExchangeRate(meta?.exchange_rate || 83);\r\n    setLineItems(items);\r\n    setEstimateStatus(estimate.status || \"draft\");\r\n    setEstimateCategory(estimate.estimate_category || 'jewelry');\r\n    setEstimatedCompletionDate(estimate.estimated_completion_date ? new Date(estimate.estimated_completion_date) : undefined);\r\n    setIsCustomerVisible(estimate.is_customer_visible || false);\r\n    setShareToken(estimate.share_token || \"\");\r\n    setInvoiceNumber(estimate.invoice_number || \"\");\r\n    setInvoiceDate(estimate.invoice_date ? new Date(estimate.invoice_date) : new Date());\r\n    setPaymentTerms(estimate.payment_terms || \"Net 30\");\r\n    setPaymentDueDate(estimate.payment_due_date ? new Date(estimate.payment_due_date) : undefined);\r\n    setInvoiceNotes(estimate.invoice_notes || \"\");\r\n    setShowLoadDialog(false);\r\n    toast({\r\n      title: \"Loaded\",\r\n      description: `Estimate \"${estimate.estimate_name}\" loaded successfully`\r\n    });\r\n  };\r\n  const handleDelete = async (id: string) => {\r\n    const {\r\n      error\r\n    } = await supabase.from('manufacturing_cost_estimates').delete().eq('id', id);\r\n    if (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete estimate\",\r\n        variant: \"destructive\"\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"Deleted\",\r\n        description: \"Estimate deleted successfully\"\r\n      });\r\n      fetchEstimates();\r\n      if (currentEstimateId === id) {\r\n        handleReset();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Structured data for SEO\r\n  const toolSchema = {\r\n    type: \"SoftwareApplication\" as const,\r\n    name: \"Jewelry Manufacturing Cost Estimator\",\r\n    description: \"Create detailed manufacturing cost estimates for jewelry. Calculate gold, diamond, gemstone costs, making charges, profit margins, and generate professional PDF quotes.\",\r\n    applicationCategory: \"BusinessApplication\",\r\n    operatingSystem: \"Web Browser\",\r\n    offers: { price: \"0\", priceCurrency: \"USD\" }\r\n  };\r\n\r\n  const faqSchema = {\r\n    type: \"FAQPage\" as const,\r\n    questions: [\r\n      { question: \"How do I calculate jewelry manufacturing cost?\", answer: \"Enter the gold weight, purity, current gold rate, diamond and gemstone costs, making charges, CAD design fees, and other expenses. The estimator calculates total cost and applies your profit margin for final pricing.\" },\r\n      { question: \"Can I save and share estimates with customers?\", answer: \"Yes, save estimates to your account and generate customer tracking links. Customers can view estimate status and updates through their personalized link.\" },\r\n      { question: \"Does it support GST calculations?\", answer: \"Yes, the estimator supports SGST/CGST for intra-state and IGST for inter-state transactions. Configure tax percentages and the system calculates the grand total including taxes.\" }\r\n    ]\r\n  };\r\n\r\n  const breadcrumbSchema = {\r\n    type: \"BreadcrumbList\" as const,\r\n    items: [\r\n      { name: \"Home\", url: \"https://cataleon.io/\" },\r\n      { name: \"Calculators\", url: \"https://cataleon.io/calculators\" },\r\n      { name: \"Manufacturing Cost Estimator\", url: \"https://cataleon.io/manufacturing-cost\" }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-secondary/20 to-background\">\r\n      {/* SEO Meta Tags */}\r\n      <SEOHead\r\n        title=\"Jewelry Manufacturing Cost Estimator - Quote Generator | Cataleon\"\r\n        description=\"Calculate jewelry manufacturing costs including gold, diamonds, gemstones, making charges, and profit margins. Generate professional PDF estimates and quotes. Free online tool for jewelers.\"\r\n        keywords=\"jewelry cost estimator, manufacturing cost calculator, jewelry quote generator, gold price calculator, making charges calculator, jewelry pricing tool\"\r\n        canonicalUrl=\"/manufacturing-cost\"\r\n      />\r\n      \r\n      {/* Structured Data */}\r\n      <StructuredData data={[toolSchema, faqSchema, breadcrumbSchema]} />\r\n\r\n      <Header />\r\n      {/* Guest Usage Limit Dialog */}\r\n      <Dialog open={showUsageLimitDialog} onOpenChange={setShowUsageLimitDialog}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-lg\">Usage Limit Reached</DialogTitle>\r\n            <DialogDescription className=\"text-sm\">\r\n              You've reached 5 uses in 24 hours. Sign in for unlimited access.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"flex gap-3\">\r\n            <Button onClick={() => navigate('/auth')} className=\"flex-1\" size=\"sm\">\r\n              Sign In\r\n            </Button>\r\n            <Button variant=\"outline\" onClick={() => navigate('/')} className=\"flex-1\" size=\"sm\">\r\n              Go Home\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <div className=\"py-4 md:py-8 px-3 md:px-4\">\r\n        <div className=\"max-w-6xl mx-auto mb-4 flex items-center justify-between flex-wrap gap-2\">\r\n          <BreadcrumbNav />\r\n          <BackToHomeButton />\r\n        </div>\r\n        <div className=\"max-w-6xl mx-auto space-y-6 md:space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center space-y-3 md:space-y-4 px-4\">\r\n          <div className=\"inline-flex items-center justify-center w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full mb-2 md:mb-4\">\r\n            <Calculator className=\"h-6 w-6 md:h-8 md:w-8 text-primary\" />\r\n          </div>\r\n          <h1 className=\"text-2xl md:text-3xl lg:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-accent to-primary\">\r\n            Cost Estimator\r\n          </h1>\r\n          <p className=\"text-muted-foreground text-sm md:text-base lg:text-lg max-w-2xl mx-auto\">\r\n            Professional jewelry estimation & invoicing\r\n          </p>\r\n          \r\n          {/* Guest Usage Counter */}\r\n          {!user && guestUsageCount > 0 && guestUsageCount < 5 && <div className=\"mt-3 md:mt-4 inline-flex items-center gap-2 px-3 md:px-4 py-2 bg-muted/50 rounded-lg border border-border\">\r\n              <Info className=\"h-3 w-3 md:h-4 md:w-4 text-muted-foreground flex-shrink-0\" />\r\n              <p className=\"text-xs md:text-sm text-muted-foreground\">\r\n                Guest: {guestUsageCount}/5 uses.\r\n                <Button variant=\"link\" className=\"ml-1 p-0 h-auto text-xs md:text-sm underline\" onClick={() => navigate('/auth')}>\r\n                  Sign in\r\n                </Button>\r\n              </p>\r\n            </div>}\r\n        </div>\r\n\r\n        {/* Workflow Steps Indicator */}\r\n        <Card className=\"border-primary/20\">\r\n          <CardContent className=\"p-6\">\r\n            <EstimateWorkflowSteps currentStep={currentStep} steps={steps} />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Flow Guide (Collapsible) */}\r\n        <Collapsible open={showFlowGuide} onOpenChange={setShowFlowGuide}>\r\n          <Card className=\"border-primary/20\">\r\n            <CollapsibleTrigger className=\"w-full\">\r\n              <CardHeader className=\"cursor-pointer hover:bg-muted/50 transition-colors\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"text-left\">\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Info className=\"h-5 w-5 text-primary\" />\r\n                      Understanding the Workflow\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Learn the difference between estimates and invoices\r\n                    </CardDescription>\r\n                  </div>\r\n                  <ChevronDown className={`h-5 w-5 text-muted-foreground transition-transform ${showFlowGuide ? 'rotate-180' : ''}`} />\r\n                </div>\r\n              </CardHeader>\r\n            </CollapsibleTrigger>\r\n            <CollapsibleContent>\r\n              <CardContent>\r\n                <EstimateFlowGuide />\r\n              </CardContent>\r\n            </CollapsibleContent>\r\n          </Card>\r\n        </Collapsible>\r\n\r\n        {/* Action Buttons */}\r\n        <ReviewSection\r\n          onSave={() => setShowSaveDialog(true)}\r\n          onLoad={() => setShowLoadDialog(true)}\r\n          onExportPDF={handleExportPDF}\r\n          onReset={handleReset}\r\n          onViewHistory={() => navigate(\"/estimate-history\")}\r\n          onCreateInvoice={() => navigate(\"/invoice-generator\")}\r\n          isAuthenticated={!!user}\r\n        />\r\n        \r\n\r\n        {/* Save Dialog */}\r\n        <Dialog open={showSaveDialog} onOpenChange={setShowSaveDialog}>\r\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <DialogHeader>\r\n              <DialogTitle>Save Estimate</DialogTitle>\r\n              <DialogDescription>\r\n                Save this manufacturing cost estimate with customer details and tracking options\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"estimate-name\">Estimate Name *</Label>\r\n                  <Input id=\"estimate-name\" value={estimateName} onChange={e => setEstimateName(e.target.value)} placeholder=\"e.g., Diamond Ring Quote - John Doe\" />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Category *</Label>\r\n                  <Select value={estimateCategory} onValueChange={(v: 'jewelry' | 'loose_diamond' | 'gemstone') => setEstimateCategory(v)}>\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"jewelry\">\r\n                        <span className=\"flex items-center gap-2\">\r\n                          <Gem className=\"h-4 w-4\" /> Jewelry\r\n                        </span>\r\n                      </SelectItem>\r\n                      <SelectItem value=\"loose_diamond\">\r\n                        <span className=\"flex items-center gap-2\">\r\n                          <Diamond className=\"h-4 w-4\" /> Loose Diamond\r\n                        </span>\r\n                      </SelectItem>\r\n                      <SelectItem value=\"gemstone\">\r\n                        <span className=\"flex items-center gap-2\">\r\n                          <Coins className=\"h-4 w-4\" /> Gemstone\r\n                        </span>\r\n                      </SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"font-semibold\">Customer Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"customer-name\">Customer Name</Label>\r\n                    <Input id=\"customer-name\" value={customerDetails.name} onChange={e => setCustomerDetails({\r\n                    ...customerDetails,\r\n                    name: e.target.value\r\n                  })} placeholder=\"Full name\" />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"customer-phone\">Phone Number</Label>\r\n                    <Input id=\"customer-phone\" value={customerDetails.phone} onChange={e => setCustomerDetails({\r\n                    ...customerDetails,\r\n                    phone: e.target.value\r\n                  })} placeholder=\"+1234567890\" />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"customer-email\">Email</Label>\r\n                    <Input id=\"customer-email\" type=\"email\" value={customerDetails.email} onChange={e => setCustomerDetails({\r\n                    ...customerDetails,\r\n                    email: e.target.value\r\n                  })} placeholder=\"customer@example.com\" />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"customer-address\">Address</Label>\r\n                    <Input id=\"customer-address\" value={customerDetails.address} onChange={e => setCustomerDetails({\r\n                    ...customerDetails,\r\n                    address: e.target.value\r\n                  })} placeholder=\"Complete address\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"notes\">Notes</Label>\r\n                <Textarea id=\"notes\" value={notes} onChange={e => setNotes(e.target.value)} placeholder=\"Add any additional notes or specifications...\" rows={3} />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label>Order Status</Label>\r\n                <Select value={estimateStatus} onValueChange={setEstimateStatus}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"draft\">Draft</SelectItem>\r\n                    <SelectItem value=\"quoted\">Quoted</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved</SelectItem>\r\n                    <SelectItem value=\"in_production\">In Production</SelectItem>\r\n                    <SelectItem value=\"completed\">Completed</SelectItem>\r\n                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label>Estimated Completion Date</Label>\r\n                <Popover>\r\n                  <PopoverTrigger asChild>\r\n                    <Button variant=\"outline\" className=\"w-full justify-start text-left font-normal\">\r\n                      <Calendar className=\"mr-2 h-4 w-4\" />\r\n                      {estimatedCompletionDate ? format(estimatedCompletionDate, \"PPP\") : \"Select date\"}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0\">\r\n                    <CalendarPicker mode=\"single\" selected={estimatedCompletionDate} onSelect={setEstimatedCompletionDate} initialFocus />\r\n                  </PopoverContent>\r\n                </Popover>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between space-x-2 border rounded-lg p-4\">\r\n                <div className=\"space-y-0.5\">\r\n                  <Label>Enable Customer Portal</Label>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Allow customer to track order status with a secure link\r\n                  </p>\r\n                </div>\r\n                <Switch checked={isCustomerVisible} onCheckedChange={setIsCustomerVisible} />\r\n              </div>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <Button onClick={handleSave} className=\"flex-1\">Save Estimate</Button>\r\n                <Button onClick={() => setShowSaveDialog(false)} variant=\"outline\" className=\"flex-1\">Cancel</Button>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n\r\n        {/* Vendor and Customer Details Section */}\r\n        <BasicInfoSection\r\n          vendorProfile={vendorProfile}\r\n          vendorGSTIN={vendorGSTIN}\r\n          onVendorGSTINChange={setVendorGSTIN}\r\n          customerDetails={customerDetails}\r\n          onCustomerDetailsChange={setCustomerDetails}\r\n        />\r\n\r\n        {/* Invoice Line Items */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-5 w-5 text-primary\" />\r\n              Invoice Line Items\r\n            </CardTitle>\r\n            <CardDescription>Add multiple jewelry items with individual pricing details</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <InvoiceLineItems \r\n              items={lineItems} \r\n              onChange={setLineItems} \r\n              goldRate24k={formData.goldRate24k} \r\n              platinumRate={formData.platinumRate}\r\n              silverRate={formData.silverRate}\r\n              purityFraction={formData.purityFraction} \r\n              estimateCategory={estimateCategory} \r\n            />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Profit Margin and Summary */}\r\n        <PricingSection\r\n          profitMargin={profitMargin}\r\n          onProfitMarginChange={setProfitMargin}\r\n          costs={costs}\r\n          formData={{ diamondPerCaratPrice: 0, diamondWeight: 0, gemstonePerCaratPrice: 0, gemstoneWeight: 0, makingCharges: 0, cadDesignCharges: 0, cammingCharges: 0, certificationCost: 0 }}\r\n        />\r\n\r\n        {/* Tax, Shipping & Currency Section */}\r\n        <CostingSection\r\n          gstMode={gstMode}\r\n          onGstModeChange={setGstMode}\r\n          sgstPercentage={sgstPercentage}\r\n          cgstPercentage={cgstPercentage}\r\n          igstPercentage={igstPercentage}\r\n          onSgstChange={setSgstPercentage}\r\n          onCgstChange={setCgstPercentage}\r\n          onIgstChange={setIgstPercentage}\r\n          shippingCharges={shippingCharges}\r\n          onShippingChargesChange={setShippingCharges}\r\n          shippingZone={shippingZone}\r\n          onShippingZoneChange={setShippingZone}\r\n          exchangeRate={exchangeRate}\r\n          onExchangeRateChange={setExchangeRate}\r\n          costs={costs}\r\n        />\r\n        </div>\r\n      </div>\r\n\r\n      <InvoicePreviewDialog open={showInvoicePreview} onOpenChange={setShowInvoicePreview} invoiceData={previewInvoiceData} onConfirmDownload={handleConfirmDownload} />\r\n      <Footer />\r\n      <ThemeSwitcher />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManufacturingCost;"],"names":["EstimateWorkflowSteps","currentStep","steps","jsx","step","index","jsxs","cn","Check","EstimateFlowGuide","Card","CardHeader","CardTitle","Info","CardDescription","CardContent","Calculator","Diamond","IndianRupee","TrendingUp","Save","Alert","AlertDescription","ArrowRight","Separator","FileCheck","FileText","BasicInfoSection","vendorProfile","vendorGSTIN","onVendorGSTINChange","customerDetails","onCustomerDetailsChange","handleCustomerChange","field","value","Building2","Label","Input","e","User","Textarea","CostingSection","gstMode","onGstModeChange","sgstPercentage","cgstPercentage","igstPercentage","onSgstChange","onCgstChange","onIgstChange","shippingCharges","onShippingChargesChange","shippingZone","exchangeRate","onExchangeRateChange","costs","applyQuickGSTRate","rate","Percent","Button","Fragment","PricingSection","profitMargin","onProfitMarginChange","formData","ReviewSection","onSave","onLoad","onExportPDF","onReset","onViewHistory","onCreateInvoice","isAuthenticated","FolderOpen","Trash2","useEstimateWorkflow","setCurrentStep","useState","prev","InvoicePreviewDialog","open","onOpenChange","invoiceData","onConfirmDownload","formatCurrency","amount","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","ScrollArea","_a","item","DialogFooter","X","Download","ManufacturingCost","toast","useToast","navigate","useNavigate","user","setUser","showFlowGuide","setShowFlowGuide","estimates","setEstimates","currentEstimateId","setCurrentEstimateId","estimateName","setEstimateName","notes","setNotes","showSaveDialog","setShowSaveDialog","showLoadDialog","setShowLoadDialog","estimateCategory","setEstimateCategory","estimateStatus","setEstimateStatus","estimatedCompletionDate","setEstimatedCompletionDate","isCustomerVisible","setIsCustomerVisible","shareToken","setShareToken","copiedToken","setCopiedToken","guestUsageCount","setGuestUsageCount","showUsageLimitDialog","setShowUsageLimitDialog","setVendorProfile","invoiceNumber","setInvoiceNumber","invoicePrefix","setInvoicePrefix","invoiceDate","setInvoiceDate","paymentTerms","setPaymentTerms","paymentDueDate","setPaymentDueDate","invoiceNotes","setInvoiceNotes","invoiceTemplate","setInvoiceTemplate","lineItems","setLineItems","showInvoicePreview","setShowInvoicePreview","previewInvoiceData","setPreviewInvoiceData","setFormData","setProfitMargin","setCustomerDetails","setVendorGSTIN","setGstMode","setSgstPercentage","setCgstPercentage","setIgstPercentage","setShippingCharges","setShippingZone","setExchangeRate","setCosts","useEffect","supabase","fetchEstimates","fetchVendorProfile","data","error","fetchLiveExchangeRate","profileResult","liveRate","totalCost","sum","finalSellingPrice","profitAmount","sgstAmount","cgstAmount","igstAmount","grandTotal","totalInUSD","handleReset","handleExportPDF","handleConfirmDownload","handleSave","lineItemsWithMeta","estimateData","result","toolSchema","faqSchema","breadcrumbSchema","SEOHead","StructuredData","Header","BreadcrumbNav","BackToHomeButton","Collapsible","CollapsibleTrigger","ChevronDown","CollapsibleContent","Select","v","SelectTrigger","SelectValue","SelectContent","SelectItem","Gem","Coins","Popover","PopoverTrigger","Calendar","format","PopoverContent","CalendarPicker","Switch","InvoiceLineItems","Footer","ThemeSwitcher"],"mappings":"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"}