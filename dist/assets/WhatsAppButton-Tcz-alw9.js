import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as i}from"./react-vendor-BeR0k5Z3.js";import{s as y,B as h}from"./index-CX6yiz0b.js";import{u as v}from"./useKeyboardHeight-DHIJz8gT.js";import{A as N}from"./index-BkbA5Y1F.js";import{k as p}from"./proxy-8agjeDDu.js";import{X as k,a6 as l}from"./ui-vendor-DjQqXt9S.js";const S=({whatsappNumber:s,message:u,businessName:t}={})=>{const[n,c]=i.useState(!1),[x,g]=i.useState(s||"1234567890"),{keyboardHeight:d,isKeyboardVisible:m}=v();i.useEffect(()=>{s||f()},[s]);const f=async()=>{const{data:a,error:o}=await y.from("settings").select("value").eq("key","whatsapp_number").maybeSingle();if(!o&&a){const r=String(a.value).replace(/"/g,"");g(r)}},b=()=>{const a=t?`Hi! I'm interested in your jewelry collection from ${t}.`:"Hi! I'm interested in learning more about your jewelry catalog platform.",o=encodeURIComponent(u||a),r=`https://wa.me/${x}?text=${o}`;window.open(r,"_blank","noopener,noreferrer")},j=m?`${d+80}px`:"6rem",w=m?`${d+16}px`:"1rem";return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:n&&e.jsx(p.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0,bottom:j},exit:{opacity:0,scale:.8,y:20},transition:{duration:.3,ease:"easeOut"},className:"fixed right-4 z-50 md:right-6",children:e.jsxs("div",{className:"relative rounded-lg border-2 border-emerald-500/20 bg-background p-4 shadow-2xl",children:[e.jsx("button",{onClick:()=>c(!1),className:"absolute -right-2 -top-2 rounded-full bg-background p-1 shadow-lg transition-colors hover:bg-muted","aria-label":"Close chat",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsxs("div",{className:"w-64 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-500",children:e.jsx(l,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Chat with us"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"We typically reply instantly"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?`Have questions about ${t}'s jewelry collection? We're here to help!`:"Have questions about our jewelry catalog platform? We're here to help!"}),e.jsxs(h,{onClick:b,className:"w-full gap-2 bg-emerald-500 hover:bg-emerald-600",children:[e.jsx(l,{className:"h-4 w-4"}),"Start Chat on WhatsApp"]})]})]})})}),e.jsx(p.div,{initial:{scale:0},animate:{scale:1,bottom:w},transition:{duration:.3,ease:"easeOut"},className:"fixed right-4 z-50 md:right-6 group",children:e.jsx(h,{onClick:()=>c(!n),size:"icon",className:"h-14 w-14 rounded-full bg-emerald-500/60 shadow-lg transition-all hover:bg-emerald-600 hover:scale-110 opacity-60 hover:opacity-100","aria-label":"Open WhatsApp chat",children:e.jsx(l,{className:"h-6 w-6 text-white"})})})]})};export{S as W};
//# sourceMappingURL=WhatsAppButton-Tcz-alw9.js.map
