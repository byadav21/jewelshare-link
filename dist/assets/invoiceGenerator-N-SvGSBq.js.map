{"version":3,"file":"invoiceGenerator-N-SvGSBq.js","sources":["../../src/utils/invoiceGenerator.ts"],"sourcesContent":["import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nexport interface VendorBranding {\r\n  name?: string;\r\n  logo?: string;\r\n  primaryColor?: string;\r\n  secondaryColor?: string;\r\n  tagline?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  address?: string;\r\n}\r\n\r\nexport interface LineItem {\r\n  id: string;\r\n  item_name: string;\r\n  description: string;\r\n  image_url: string;\r\n  diamond_weight: number;\r\n  diamond_per_carat_price: number;\r\n  diamond_color: string;\r\n  diamond_clarity: string;\r\n  diamond_cut: string;\r\n  diamond_certification: string;\r\n  gemstone_weight: number;\r\n  gemstone_type: string;\r\n  gemstone_color: string;\r\n  gemstone_clarity: string;\r\n  net_weight: number;\r\n  gross_weight: number;\r\n  purity_fraction: number;\r\n  diamond_cost: number;\r\n  gemstone_cost: number;\r\n  gold_cost: number;\r\n  making_charges: number;\r\n  certification_cost: number;\r\n  cad_design_charges: number;\r\n  camming_charges: number;\r\n  subtotal: number;\r\n  weight_mode?: 'gross' | 'net';\r\n}\r\n\r\nexport interface InvoiceData {\r\n  invoiceNumber: string;\r\n  invoiceDate: string;\r\n  paymentDueDate?: string;\r\n  paymentTerms?: string;\r\n  estimateName: string;\r\n  status: string;\r\n  customerName?: string;\r\n  customerPhone?: string;\r\n  customerEmail?: string;\r\n  customerAddress?: string;\r\n  customerGSTIN?: string;\r\n  vendorGSTIN?: string;\r\n  netWeight: number;\r\n  grossWeight?: number;\r\n  purityFraction: number;\r\n  goldRate24k: number;\r\n  makingCharges: number;\r\n  cadDesignCharges: number;\r\n  cammingCharges: number;\r\n  certificationCost: number;\r\n  diamondCost: number;\r\n  gemstoneCost: number;\r\n  goldCost: number;\r\n  totalCost: number;\r\n  profitMargin: number;\r\n  finalSellingPrice: number;\r\n  gstMode?: 'sgst_cgst' | 'igst';\r\n  sgstPercentage?: number;\r\n  cgstPercentage?: number;\r\n  igstPercentage?: number;\r\n  sgstAmount?: number;\r\n  cgstAmount?: number;\r\n  igstAmount?: number;\r\n  shippingCharges?: number;\r\n  shippingZone?: string;\r\n  exchangeRate?: number;\r\n  grandTotal?: number;\r\n  notes?: string;\r\n  invoiceNotes?: string;\r\n  details?: any;\r\n  vendorBranding?: VendorBranding;\r\n  template?: 'detailed' | 'summary' | 'minimal' | 'traditional' | 'modern' | 'luxury';\r\n  lineItems?: LineItem[];\r\n}\r\n\r\ntype InvoiceTemplate = 'detailed' | 'summary' | 'minimal' | 'traditional' | 'modern' | 'luxury';\r\n\r\n// Helper function for consistent currency formatting (PDF-safe)\r\nconst formatCurrency = (amount: number) => {\r\n  const formatted = amount.toLocaleString('en-IN', {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  });\r\n  return `Rs. ${formatted}`;\r\n};\r\n\r\n// Helper function to load image as base64 with CORS handling\r\nconst loadImageAsBase64 = async (url: string): Promise<string | null> => {\r\n  return new Promise((resolve) => {\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    \r\n    img.onload = () => {\r\n      try {\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        if (!ctx) {\r\n          resolve(null);\r\n          return;\r\n        }\r\n        \r\n        ctx.drawImage(img, 0, 0);\r\n        const dataURL = canvas.toDataURL('image/jpeg', 0.95);\r\n        resolve(dataURL);\r\n      } catch (error) {\r\n        console.error('Error converting image to base64:', error);\r\n        resolve(null);\r\n      }\r\n    };\r\n    \r\n    img.onerror = () => {\r\n      console.error('Failed to load image:', url);\r\n      resolve(null);\r\n    };\r\n    \r\n    // Add timestamp to prevent caching issues\r\n    const separator = url.includes('?') ? '&' : '?';\r\n    img.src = `${url}${separator}_t=${Date.now()}`;\r\n    \r\n    // Timeout after 3 seconds\r\n    setTimeout(() => resolve(null), 3000);\r\n  });\r\n};\r\n\r\nexport const generateInvoicePDF = async (data: InvoiceData) => {\r\n  const template = data.template || 'detailed';\r\n  \r\n  switch (template) {\r\n    case 'summary':\r\n      return await generateSummaryInvoice(data);\r\n    case 'minimal':\r\n      return await generateMinimalInvoice(data);\r\n    case 'traditional':\r\n      return await generateTraditionalInvoice(data);\r\n    case 'modern':\r\n      return await generateModernInvoice(data);\r\n    case 'luxury':\r\n      return await generateLuxuryInvoice(data);\r\n    default:\r\n      return await generateDetailedInvoice(data);\r\n  }\r\n};\r\n\r\nconst generateDetailedInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  \r\n  // Parse brand colors or use elegant defaults\r\n  const primaryColor = data.vendorBranding?.primaryColor || '#1e40af';\r\n  const secondaryColor = data.vendorBranding?.secondaryColor || '#6366f1';\r\n  const accentColor = '#f59e0b';\r\n  \r\n  // Convert hex to RGB\r\n  const hexToRgb = (hex: string) => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : { r: 30, g: 64, b: 175 };\r\n  };\r\n  \r\n  const primaryRgb = hexToRgb(primaryColor);\r\n  const secondaryRgb = hexToRgb(secondaryColor);\r\n  const accentRgb = hexToRgb(accentColor);\r\n  \r\n  // Modern gradient header with enhanced design\r\n  doc.setFillColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.rect(0, 0, pageWidth, 50, 'F');\r\n  \r\n  // Subtle accent stripe\r\n  doc.setFillColor(accentRgb.r, accentRgb.g, accentRgb.b);\r\n  doc.rect(0, 48, pageWidth, 2, 'F');\r\n  \r\n  // Logo section with professional styling and actual logo embedding\r\n  if (data.vendorBranding?.logo) {\r\n    // Create logo container with shadow effect\r\n    doc.setFillColor(255, 255, 255);\r\n    doc.roundedRect(16, 10, 30, 30, 3, 3, 'F');\r\n    \r\n    // Logo shadow/border\r\n    doc.setDrawColor(230, 230, 235);\r\n    doc.setLineWidth(0.5);\r\n    doc.roundedRect(16, 10, 30, 30, 3, 3, 'S');\r\n    \r\n    try {\r\n      // Load and embed the actual logo\r\n      const logoBase64 = await loadImageAsBase64(data.vendorBranding.logo);\r\n      \r\n      if (logoBase64) {\r\n        // Add the logo image to PDF with proper sizing and centering\r\n        doc.addImage(logoBase64, 'JPEG', 18, 12, 26, 26, undefined, 'FAST');\r\n      } else {\r\n        // Fallback to placeholder text if image loading fails\r\n        doc.setFontSize(7);\r\n        doc.setTextColor(150, 150, 150);\r\n        doc.text('LOGO', 31, 26.5, { align: 'center' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error processing logo:', error);\r\n      // Fallback: show placeholder\r\n      doc.setFontSize(7);\r\n      doc.setTextColor(150, 150, 150);\r\n      doc.text('LOGO', 31, 26.5, { align: 'center' });\r\n    }\r\n  }\r\n  \r\n  // Business name with enhanced typography\r\n  const nameStartX = data.vendorBranding?.logo ? 52 : pageWidth / 2;\r\n  const nameAlign = data.vendorBranding?.logo ? 'left' : 'center';\r\n  \r\n  doc.setFontSize(22);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(255, 255, 255);\r\n  \r\n  if (data.vendorBranding?.name) {\r\n    doc.text(data.vendorBranding.name.toUpperCase(), nameStartX, 22, { align: nameAlign });\r\n    \r\n    // Tagline with subtle styling\r\n    if (data.vendorBranding?.tagline) {\r\n      doc.setFontSize(9);\r\n      doc.setFont('helvetica', 'italic');\r\n      doc.setTextColor(240, 240, 245);\r\n      doc.text(data.vendorBranding.tagline, nameStartX, 28, { align: nameAlign });\r\n    }\r\n    \r\n    // INVOICE label\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.text('TAX INVOICE', nameStartX, 36, { align: nameAlign });\r\n  } else {\r\n    doc.setFontSize(26);\r\n    doc.text('TAX INVOICE', pageWidth / 2, 28, { align: 'center' });\r\n  }\r\n  \r\n  // Reset text color\r\n  doc.setTextColor(50, 50, 50);\r\n  \r\n  // Vendor contact info in professional card format (right side)\r\n  let headerY = 58;\r\n  if (data.vendorBranding?.email || data.vendorBranding?.phone || data.vendorBranding?.address || data.vendorGSTIN) {\r\n    // Contact info card background\r\n    doc.setFillColor(248, 250, 252);\r\n    doc.roundedRect(pageWidth - 80, headerY, 66, 32, 2, 2, 'F');\r\n    doc.setDrawColor(220, 225, 230);\r\n    doc.setLineWidth(0.5);\r\n    doc.roundedRect(pageWidth - 80, headerY, 66, 32, 2, 2, 'S');\r\n    \r\n    doc.setFontSize(8);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(80, 80, 90);\r\n    \r\n    let contactY = headerY + 6;\r\n    if (data.vendorGSTIN) {\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text(`GSTIN:`, pageWidth - 76, contactY);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(data.vendorGSTIN, pageWidth - 76, contactY + 3.5);\r\n      contactY += 8;\r\n    }\r\n    if (data.vendorBranding.phone) {\r\n      doc.text(`Tel: ${data.vendorBranding.phone}`, pageWidth - 76, contactY);\r\n      contactY += 4.5;\r\n    }\r\n    if (data.vendorBranding.email) {\r\n      const email = data.vendorBranding.email.length > 25 ? \r\n        data.vendorBranding.email.substring(0, 22) + '...' : \r\n        data.vendorBranding.email;\r\n      doc.text(`Email: ${email}`, pageWidth - 76, contactY);\r\n      contactY += 4.5;\r\n    }\r\n    if (data.vendorBranding.address && contactY < headerY + 28) {\r\n      const splitAddress = doc.splitTextToSize(data.vendorBranding.address, 60);\r\n      doc.text(splitAddress.slice(0, 2), pageWidth - 76, contactY);\r\n    }\r\n  }\r\n  \r\n  doc.setTextColor(40, 40, 50);\r\n  \r\n  // Invoice Details in professional card format (left side)\r\n  let invoiceInfoY = 58;\r\n  \r\n  // Invoice info card background\r\n  doc.setFillColor(255, 253, 245);\r\n  doc.roundedRect(14, invoiceInfoY, 90, 32, 2, 2, 'F');\r\n  \r\n  // Accent border on left\r\n  doc.setFillColor(accentRgb.r, accentRgb.g, accentRgb.b);\r\n  doc.rect(14, invoiceInfoY, 2, 32, 'F');\r\n  \r\n  // Border\r\n  doc.setDrawColor(accentRgb.r, accentRgb.g, accentRgb.b);\r\n  doc.setLineWidth(0.5);\r\n  doc.roundedRect(14, invoiceInfoY, 90, 32, 2, 2, 'S');\r\n  \r\n  let infoY = invoiceInfoY + 7;\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('INVOICE NUMBER', 20, infoY);\r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(40, 40, 50);\r\n  doc.text(data.invoiceNumber, 20, infoY + 5);\r\n  \r\n  infoY += 12;\r\n  doc.setFontSize(8);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(100, 100, 110);\r\n  doc.text('Date:', 20, infoY);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.text(new Date(data.invoiceDate).toLocaleDateString('en-IN', {\r\n    day: '2-digit',\r\n    month: 'short',\r\n    year: 'numeric'\r\n  }), 35, infoY);\r\n  \r\n  if (data.paymentDueDate) {\r\n    infoY += 4.5;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Due:', 20, infoY);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(220, 38, 38);\r\n    doc.text(new Date(data.paymentDueDate).toLocaleDateString('en-IN', {\r\n      day: '2-digit',\r\n      month: 'short',\r\n      year: 'numeric'\r\n    }), 35, infoY);\r\n    doc.setTextColor(100, 100, 110);\r\n  }\r\n  \r\n  if (data.paymentTerms) {\r\n    infoY += 4.5;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Terms:', 20, infoY);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(data.paymentTerms, 35, infoY);\r\n  }\r\n  \r\n  // Customer Details Section with enhanced design\r\n  let customerSectionY = 98;\r\n  if (data.customerName) {\r\n    // Customer card with gradient background\r\n    doc.setFillColor(250, 252, 255);\r\n    doc.roundedRect(14, customerSectionY, pageWidth - 28, 42, 2, 2, 'F');\r\n    \r\n    // Decorative top border\r\n    doc.setFillColor(secondaryRgb.r, secondaryRgb.g, secondaryRgb.b);\r\n    doc.roundedRect(14, customerSectionY, pageWidth - 28, 3, 2, 2, 'F');\r\n    \r\n    // Border\r\n    doc.setDrawColor(220, 225, 235);\r\n    doc.setLineWidth(0.5);\r\n    doc.roundedRect(14, customerSectionY, pageWidth - 28, 42, 2, 2, 'S');\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(secondaryRgb.r, secondaryRgb.g, secondaryRgb.b);\r\n    doc.text('BILL TO', 20, customerSectionY + 10);\r\n    doc.setTextColor(40, 40, 50);\r\n    \r\n    doc.setFontSize(11);\r\n    doc.setFont('helvetica', 'bold');\r\n    let yPos = customerSectionY + 17;\r\n    doc.text(data.customerName, 20, yPos);\r\n    \r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(80, 80, 90);\r\n    \r\n    // Two column layout for customer details\r\n    let leftColY = yPos + 6;\r\n    let rightColY = yPos + 6;\r\n    const midPoint = pageWidth / 2;\r\n    \r\n    if (data.customerGSTIN) {\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('GSTIN:', 20, leftColY);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(data.customerGSTIN, 38, leftColY);\r\n      leftColY += 5;\r\n    }\r\n    if (data.customerPhone) {\r\n      doc.text(`Tel: ${data.customerPhone}`, 20, leftColY);\r\n      leftColY += 5;\r\n    }\r\n    if (data.customerEmail) {\r\n      const emailLines = doc.splitTextToSize(`Email: ${data.customerEmail}`, midPoint - 25);\r\n      doc.text(emailLines, 20, leftColY);\r\n      leftColY += (emailLines.length * 4);\r\n    }\r\n    if (data.customerAddress) {\r\n      const addressLines = doc.splitTextToSize(data.customerAddress, pageWidth - 50);\r\n      doc.text(addressLines, 20, leftColY);\r\n    }\r\n    customerSectionY += 47;\r\n  }\r\n  \r\n  // Line Items Section (if provided)\r\n  let currentY = customerSectionY + 5;\r\n  \r\n  if (data.lineItems && data.lineItems.length > 0) {\r\n    // Check if we need a new page\r\n    if (currentY > doc.internal.pageSize.getHeight() - 100) {\r\n      doc.addPage();\r\n      currentY = 20;\r\n    }\r\n    \r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text('INVOICE LINE ITEMS', 14, currentY);\r\n    doc.setTextColor(0, 0, 0);\r\n    currentY += 5;\r\n    \r\n    // Render each line item\r\n    data.lineItems.forEach((item, index) => {\r\n      // Check if we need a new page\r\n      if (currentY > doc.internal.pageSize.getHeight() - 50) {\r\n        doc.addPage();\r\n        currentY = 20;\r\n      }\r\n      \r\n      // Item header with image\r\n      const itemStartY = currentY;\r\n      \r\n      if (item.image_url) {\r\n        try {\r\n          doc.setFillColor(245, 245, 250);\r\n          doc.rect(14, currentY, 30, 30, 'F');\r\n          doc.setFontSize(7);\r\n          doc.setTextColor(150, 150, 150);\r\n          doc.text('[Image]', 29, currentY + 17, { align: 'center' });\r\n        } catch (error) {\r\n          console.error('Error adding item image:', error);\r\n        }\r\n      }\r\n      \r\n      // Item details\r\n      const detailsX = item.image_url ? 48 : 18;\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setTextColor(0, 0, 0);\r\n      doc.text(`${index + 1}. ${item.item_name}`, detailsX, currentY + 5);\r\n      \r\n      if (item.description) {\r\n        doc.setFontSize(9);\r\n        doc.setFont('helvetica', 'normal');\r\n        doc.setTextColor(100, 100, 100);\r\n        const descLines = doc.splitTextToSize(item.description, pageWidth - detailsX - 20);\r\n        doc.text(descLines, detailsX, currentY + 11);\r\n      }\r\n      \r\n      currentY = Math.max(currentY + 35, itemStartY + (item.image_url ? 35 : 25));\r\n      \r\n      // Item specifications table\r\n      const itemSpecs: any[] = [\r\n        ['Gross Weight', `${item.gross_weight} g`],\r\n        ['Net Weight', `${item.net_weight} g`],\r\n      ];\r\n      \r\n      // Add diamond details if present\r\n      if (item.diamond_weight > 0) {\r\n        itemSpecs.push(['Diamond Weight', `${item.diamond_weight} ct`]);\r\n        if (item.diamond_color) {\r\n          itemSpecs.push(['Diamond Color', item.diamond_color]);\r\n        }\r\n        if (item.diamond_clarity) {\r\n          itemSpecs.push(['Diamond Clarity', item.diamond_clarity]);\r\n        }\r\n        if (item.diamond_cut) {\r\n          itemSpecs.push(['Diamond Cut', item.diamond_cut]);\r\n        }\r\n        if (item.diamond_certification) {\r\n          itemSpecs.push(['Diamond Certification', item.diamond_certification]);\r\n        }\r\n      }\r\n      \r\n      // Add gemstone details if present\r\n      if (item.gemstone_weight > 0) {\r\n        itemSpecs.push(['Gemstone Weight', `${item.gemstone_weight} ct`]);\r\n        if (item.gemstone_type) {\r\n          itemSpecs.push(['Gemstone Type', item.gemstone_type]);\r\n        }\r\n        if (item.gemstone_color) {\r\n          itemSpecs.push(['Gemstone Color', item.gemstone_color]);\r\n        }\r\n        if (item.gemstone_clarity) {\r\n          itemSpecs.push(['Gemstone Clarity', item.gemstone_clarity]);\r\n        }\r\n      }\r\n      \r\n      autoTable(doc, {\r\n        startY: currentY,\r\n        body: itemSpecs,\r\n        theme: 'plain',\r\n        styles: { fontSize: 9, cellPadding: 2 },\r\n        columnStyles: {\r\n          0: { fontStyle: 'bold', cellWidth: 40 },\r\n          1: { cellWidth: 'auto' },\r\n        },\r\n        margin: { left: 18, right: 14 },\r\n      });\r\n      \r\n      currentY = (doc as any).lastAutoTable.finalY + 2;\r\n      \r\n      // Item cost breakdown with professional table\r\n      const itemCosts = [\r\n        ['Gold Cost', formatCurrency(item.gold_cost)],\r\n        ['Making Charges', formatCurrency(item.making_charges)],\r\n        ['CAD Design', formatCurrency(item.cad_design_charges)],\r\n        ['Camming', formatCurrency(item.camming_charges)],\r\n        ['Certification', formatCurrency(item.certification_cost)],\r\n        ['Diamond Cost', formatCurrency(item.diamond_cost)],\r\n        ['Gemstone Cost', formatCurrency(item.gemstone_cost)],\r\n      ];\r\n      \r\n      autoTable(doc, {\r\n        startY: currentY,\r\n        body: itemCosts,\r\n        theme: 'plain',\r\n        styles: { \r\n          fontSize: 9, \r\n          cellPadding: 2.5,\r\n          textColor: [70, 70, 80]\r\n        },\r\n        columnStyles: {\r\n          0: { \r\n            cellWidth: 45,\r\n            fontStyle: 'bold',\r\n            textColor: [100, 100, 110]\r\n          },\r\n          1: { \r\n            cellWidth: 'auto', \r\n            halign: 'right',\r\n            fontStyle: 'bold'\r\n          },\r\n        },\r\n        margin: { left: 18, right: 14 },\r\n      });\r\n      \r\n      currentY = (doc as any).lastAutoTable.finalY + 3;\r\n      \r\n      // Item subtotal with enhanced styling\r\n      doc.setFillColor(secondaryRgb.r, secondaryRgb.g, secondaryRgb.b);\r\n      doc.rect(14, currentY, pageWidth - 28, 10, 'F');\r\n      doc.setFontSize(11);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setTextColor(255, 255, 255);\r\n      doc.text('Item Subtotal:', 18, currentY + 6.5);\r\n      doc.text(formatCurrency(item.subtotal), pageWidth - 18, currentY + 6.5, { align: 'right' });\r\n      doc.setTextColor(40, 40, 50);\r\n      \r\n      currentY += 18;\r\n    });\r\n  } else {\r\n    // Check if we need a new page\r\n    if (currentY > doc.internal.pageSize.getHeight() - 100) {\r\n      doc.addPage();\r\n      currentY = 20;\r\n    }\r\n    \r\n    // Original single-item specifications (fallback)\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text('PRODUCT SPECIFICATIONS', 14, currentY);\r\n    doc.setTextColor(0, 0, 0);\r\n  \r\n  const specsData = [];\r\n  if (data.grossWeight) {\r\n    specsData.push(['Gross Weight', `${data.grossWeight} grams`]);\r\n  }\r\n  if (data.netWeight) {\r\n    specsData.push(['Net Weight', `${data.netWeight} grams`]);\r\n  }\r\n  if (data.purityFraction) {\r\n    specsData.push(['Gold Purity', `${(data.purityFraction * 100).toFixed(0)}%`]);\r\n  }\r\n  if (data.details?.diamond_type) {\r\n    specsData.push(['Diamond Type', data.details.diamond_type]);\r\n  }\r\n  if (data.details?.diamond_shape) {\r\n    specsData.push(['Diamond Shape', data.details.diamond_shape]);\r\n  }\r\n  if (data.details?.diamond_weight) {\r\n    specsData.push(['Diamond Weight', `${data.details.diamond_weight} carats`]);\r\n  }\r\n  if (data.details?.diamond_color) {\r\n    specsData.push(['Diamond Color', data.details.diamond_color]);\r\n  }\r\n  if (data.details?.diamond_clarity) {\r\n    specsData.push(['Diamond Clarity', data.details.diamond_clarity]);\r\n  }\r\n  if (data.details?.diamond_certification && data.details.diamond_certification !== 'none') {\r\n    specsData.push(['Certification', data.details.diamond_certification.toUpperCase()]);\r\n  }\r\n  if (data.details?.gemstone_weight) {\r\n    specsData.push(['Gemstone Weight', `${data.details.gemstone_weight} carats`]);\r\n  }\r\n  \r\n  if (specsData.length > 0) {\r\n    autoTable(doc, {\r\n      startY: currentY + 5,\r\n      body: specsData,\r\n      theme: 'plain',\r\n      styles: { fontSize: 10 },\r\n      columnStyles: {\r\n        0: { fontStyle: 'bold', cellWidth: 50 },\r\n        1: { cellWidth: 'auto' },\r\n      },\r\n      margin: { left: 14, right: 14 },\r\n    });\r\n    currentY = (doc as any).lastAutoTable.finalY + 15;\r\n  } else {\r\n    currentY += 10;\r\n  }\r\n  }\r\n  \r\n  // Cost Breakdown Table (only if no line items) with enhanced styling\r\n  if (!data.lineItems || data.lineItems.length === 0) {\r\n  const costStartY = currentY;\r\n  \r\n  // Check for page break\r\n  if (costStartY > doc.internal.pageSize.getHeight() - 100) {\r\n    doc.addPage();\r\n    currentY = 20;\r\n  }\r\n  \r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('COST BREAKDOWN', 14, currentY);\r\n  doc.setTextColor(40, 40, 50);\r\n  \r\n  const tableData = [\r\n    ['Gold Cost', formatCurrency(data.goldCost)],\r\n    ['Making Charges', formatCurrency(data.makingCharges)],\r\n    ['CAD Design Charges', formatCurrency(data.cadDesignCharges)],\r\n    ['Camming Charges', formatCurrency(data.cammingCharges)],\r\n    ['Certification Cost', formatCurrency(data.certificationCost)],\r\n    ['Diamond Cost', formatCurrency(data.diamondCost)],\r\n    ['Gemstone Cost', formatCurrency(data.gemstoneCost)],\r\n  ];\r\n  \r\n  autoTable(doc, {\r\n    startY: currentY + 5,\r\n    head: [['Description', 'Amount']],\r\n    body: tableData,\r\n    theme: 'striped',\r\n    headStyles: { \r\n      fillColor: [primaryRgb.r, primaryRgb.g, primaryRgb.b],\r\n      fontSize: 11,\r\n      fontStyle: 'bold',\r\n      textColor: [255, 255, 255],\r\n      cellPadding: 4\r\n    },\r\n    bodyStyles: {\r\n      fontSize: 10,\r\n      textColor: [50, 50, 60],\r\n      cellPadding: 3.5\r\n    },\r\n    alternateRowStyles: { \r\n      fillColor: [250, 252, 255] \r\n    },\r\n    columnStyles: {\r\n      0: { \r\n        cellWidth: 110,\r\n        fontStyle: 'normal'\r\n      },\r\n      1: { \r\n        cellWidth: 'auto',\r\n        halign: 'right',\r\n        fontStyle: 'bold'\r\n      }\r\n    },\r\n    margin: { left: 14, right: 14 },\r\n  });\r\n  \r\n  currentY = (doc as any).lastAutoTable.finalY + 10;\r\n  }\r\n  \r\n  // Total Section with GST and Shipping\r\n  const finalY = currentY;\r\n  \r\n  // Calculate height based on content\r\n  const hasGst = (data.gstMode === 'sgst_cgst' && ((data.sgstAmount && data.sgstAmount > 0) || (data.cgstAmount && data.cgstAmount > 0))) || \r\n                 (data.gstMode === 'igst' && data.igstAmount && data.igstAmount > 0);\r\n  const hasShipping = data.shippingCharges && data.shippingCharges > 0;\r\n  const hasGrandTotal = data.grandTotal !== undefined && data.grandTotal > 0;\r\n  const hasCurrency = data.exchangeRate && data.exchangeRate > 0 && hasGrandTotal;\r\n  \r\n  const baseHeight = 40;\r\n  const gstHeight = hasGst ? (data.gstMode === 'sgst_cgst' ? 12 : 7) : 0;\r\n  const shippingHeight = hasShipping ? 7 : 0;\r\n  const grandTotalHeight = hasGrandTotal ? 12 : 0;\r\n  const currencyHeight = hasCurrency ? 8 : 0;\r\n  const totalSectionHeight = baseHeight + gstHeight + shippingHeight + grandTotalHeight + currencyHeight;\r\n  \r\n  // Check if we need a new page for totals section\r\n  if (finalY + totalSectionHeight > doc.internal.pageSize.getHeight() - 80) {\r\n    doc.addPage();\r\n    currentY = 20;\r\n    const newFinalY = currentY;\r\n    doc.setFillColor(245, 245, 250);\r\n    doc.rect(14, newFinalY, pageWidth - 28, totalSectionHeight, 'F');\r\n    \r\n    renderTotalsSection(doc, newFinalY, data, primaryRgb, pageWidth, hasGst, hasShipping, hasGrandTotal, hasCurrency);\r\n    currentY = newFinalY + totalSectionHeight + 5;\r\n  } else {\r\n    doc.setFillColor(245, 245, 250);\r\n    doc.rect(14, finalY, pageWidth - 28, totalSectionHeight, 'F');\r\n    \r\n    renderTotalsSection(doc, finalY, data, primaryRgb, pageWidth, hasGst, hasShipping, hasGrandTotal, hasCurrency);\r\n    currentY = finalY + totalSectionHeight + 5;\r\n  }\r\n  \r\n  // Invoice Notes Section  \r\n  if (data.invoiceNotes) {\r\n    if (currentY > doc.internal.pageSize.getHeight() - 60) {\r\n      doc.addPage();\r\n      currentY = 20;\r\n    }\r\n    \r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text('INVOICE NOTES', 14, currentY);\r\n    doc.setTextColor(0, 0, 0);\r\n    \r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    const splitNotes = doc.splitTextToSize(data.invoiceNotes, pageWidth - 28);\r\n    doc.text(splitNotes, 14, currentY + 6);\r\n    currentY += 6 + (splitNotes.length * 5) + 5;\r\n  }\r\n  \r\n  // Payment Instructions with professional card design\r\n  if (currentY > doc.internal.pageSize.getHeight() - 70) {\r\n    doc.addPage();\r\n    currentY = 20;\r\n  }\r\n  \r\n  doc.setFillColor(255, 253, 245);\r\n  doc.roundedRect(14, currentY - 2, pageWidth - 28, 22, 2, 2, 'F');\r\n  doc.setDrawColor(245, 158, 11);\r\n  doc.setLineWidth(2);\r\n  doc.line(14, currentY - 2, 14, currentY + 20);\r\n  doc.setDrawColor(220, 225, 230);\r\n  doc.setLineWidth(0.5);\r\n  doc.roundedRect(14, currentY - 2, pageWidth - 28, 22, 2, 2, 'S');\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('PAYMENT INFORMATION', 20, currentY + 4);\r\n  doc.setTextColor(40, 40, 50);\r\n  \r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setFontSize(8.5);\r\n  doc.setTextColor(70, 70, 80);\r\n  doc.text('Please make payment within the specified terms to avoid late fees.', 20, currentY + 10);\r\n  doc.text('For payment inquiries or bank details, contact us at the details above.', 20, currentY + 15);\r\n  currentY += 28;\r\n  \r\n  // Terms & Conditions with professional formatting\r\n  if (currentY > doc.internal.pageSize.getHeight() - 50) {\r\n    doc.addPage();\r\n    currentY = 20;\r\n  }\r\n  \r\n  doc.setFillColor(248, 250, 252);\r\n  doc.rect(14, currentY - 2, pageWidth - 28, 32, 'F');\r\n  doc.setDrawColor(220, 225, 230);\r\n  doc.setLineWidth(0.5);\r\n  doc.rect(14, currentY - 2, pageWidth - 28, 32, 'S');\r\n  \r\n  doc.setFontSize(9);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('TERMS & CONDITIONS', 18, currentY + 3);\r\n  \r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setFontSize(7.5);\r\n  doc.setTextColor(70, 70, 80);\r\n  doc.text('- Payment must be received by the due date to avoid late fees.', 18, currentY + 9);\r\n  doc.text('- All prices are final and include applicable taxes unless otherwise stated.', 18, currentY + 13);\r\n  doc.text('- This invoice is valid for the amounts and items listed above.', 18, currentY + 17);\r\n  doc.text('- Goods once sold cannot be returned or exchanged.', 18, currentY + 21);\r\n  doc.text('- Subject to jurisdiction mentioned in the invoice.', 18, currentY + 25);\r\n  \r\n  // Professional footer\r\n  const footerY = doc.internal.pageSize.getHeight() - 7;\r\n  doc.setDrawColor(220, 225, 230);\r\n  doc.setLineWidth(0.5);\r\n  doc.line(14, footerY - 2, pageWidth - 14, footerY - 2);\r\n  \r\n  doc.setFontSize(7.5);\r\n  doc.setTextColor(120, 120, 130);\r\n  doc.text(\r\n    `Generated on ${new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' })} at ${new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' })}`,\r\n    pageWidth / 2,\r\n    footerY,\r\n    { align: 'center' }\r\n  );\r\n  \r\n  // Save PDF\r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_${Date.now()}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\n// Helper function to render totals section\r\nconst renderTotalsSection = (\r\n  doc: jsPDF,\r\n  startY: number,\r\n  data: InvoiceData,\r\n  primaryRgb: { r: number; g: number; b: number },\r\n  pageWidth: number,\r\n  hasGst: boolean,\r\n  hasShipping: boolean,\r\n  hasGrandTotal: boolean,\r\n  hasCurrency: boolean\r\n) => {\r\n  let lineY = startY + 10;\r\n  \r\n  // Subtotal with better formatting\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setTextColor(80, 80, 90);\r\n  doc.text('Subtotal:', 20, lineY);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(50, 50, 60);\r\n  doc.text(formatCurrency(data.totalCost), pageWidth - 20, lineY, { align: 'right' });\r\n  lineY += 6;\r\n  \r\n  // Profit Margin\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setTextColor(80, 80, 90);\r\n  doc.text(`Profit Margin (${data.profitMargin}%):`, 20, lineY);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(22, 163, 74);\r\n  doc.text(formatCurrency((data.finalSellingPrice - data.totalCost)), pageWidth - 20, lineY, { align: 'right' });\r\n  lineY += 6;\r\n  \r\n  // Amount before tax with subtle separator\r\n  doc.setDrawColor(220, 225, 235);\r\n  doc.setLineWidth(0.3);\r\n  doc.line(20, lineY, pageWidth - 20, lineY);\r\n  lineY += 5;\r\n  \r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(60, 60, 70);\r\n  doc.text('Amount (Before Tax):', 20, lineY);\r\n  doc.setTextColor(50, 50, 60);\r\n  doc.text(formatCurrency(data.finalSellingPrice), pageWidth - 20, lineY, { align: 'right' });\r\n  lineY += 7;\r\n  \r\n  // GST breakdown with enhanced styling\r\n  if (hasGst) {\r\n    doc.setFontSize(9);\r\n    if (data.gstMode === 'sgst_cgst') {\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setTextColor(80, 80, 90);\r\n      doc.text(`SGST (${data.sgstPercentage || 0}%):`, 24, lineY);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setTextColor(50, 50, 60);\r\n      doc.text(formatCurrency(data.sgstAmount || 0), pageWidth - 20, lineY, { align: 'right' });\r\n      lineY += 4.5;\r\n      \r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setTextColor(80, 80, 90);\r\n      doc.text(`CGST (${data.cgstPercentage || 0}%):`, 24, lineY);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setTextColor(50, 50, 60);\r\n      doc.text(formatCurrency(data.cgstAmount || 0), pageWidth - 20, lineY, { align: 'right' });\r\n      lineY += 5;\r\n    } else {\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setTextColor(80, 80, 90);\r\n      doc.text(`IGST (${data.igstPercentage || 0}%):`, 24, lineY);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setTextColor(50, 50, 60);\r\n      doc.text(formatCurrency(data.igstAmount || 0), pageWidth - 20, lineY, { align: 'right' });\r\n      lineY += 5;\r\n    }\r\n    doc.setFontSize(10);\r\n  }\r\n  \r\n  // Shipping charges with professional styling\r\n  if (hasShipping) {\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(80, 80, 90);\r\n    doc.text(`Shipping${data.shippingZone ? ` (${data.shippingZone})` : ''}:`, 20, lineY);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(50, 50, 60);\r\n    doc.text(formatCurrency(data.shippingCharges!), pageWidth - 20, lineY, { align: 'right' });\r\n    lineY += 6;\r\n  }\r\n  \r\n  // Draw prominent line before grand total\r\n  if (hasGrandTotal) {\r\n    doc.setDrawColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.setLineWidth(1);\r\n    doc.line(20, lineY, pageWidth - 20, lineY);\r\n    lineY += 7;\r\n    \r\n    // Grand Total with enhanced styling\r\n    doc.setFillColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.roundedRect(18, lineY - 4, pageWidth - 36, 12, 1, 1, 'F');\r\n    \r\n    doc.setFontSize(13);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.text('GRAND TOTAL (INR):', 22, lineY + 3);\r\n    doc.setFontSize(14);\r\n    doc.text(formatCurrency(data.grandTotal), pageWidth - 22, lineY + 3, { align: 'right' });\r\n    lineY += 10;\r\n    doc.setTextColor(40, 40, 50);\r\n  } else {\r\n    // Draw line before final total\r\n    doc.setDrawColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.setLineWidth(1);\r\n    doc.line(20, lineY, pageWidth - 20, lineY);\r\n    lineY += 7;\r\n    \r\n    doc.setFontSize(13);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text('TOTAL AMOUNT DUE:', 20, lineY);\r\n    doc.text(formatCurrency(data.finalSellingPrice), pageWidth - 20, lineY, { align: 'right' });\r\n    lineY += 7;\r\n    doc.setTextColor(40, 40, 50);\r\n  }\r\n  \r\n  // Currency conversion with enhanced formatting\r\n  if (hasCurrency && data.grandTotal) {\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'italic');\r\n    doc.setTextColor(100, 100, 110);\r\n    const usdAmount = (data.grandTotal / (data.exchangeRate || 1)).toLocaleString('en-US', {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2\r\n    });\r\n    doc.text(`Equivalent: USD $${usdAmount} @ Exchange Rate Rs.${(data.exchangeRate || 0).toFixed(2)}/USD`, 20, lineY);\r\n    doc.setTextColor(40, 40, 50);\r\n  }\r\n};\r\n\r\nconst generateSummaryInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  \r\n  const primaryColor = data.vendorBranding?.primaryColor || '#4F46E5';\r\n  const hexToRgb = (hex: string) => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : { r: 79, g: 70, b: 229 };\r\n  };\r\n  const primaryRgb = hexToRgb(primaryColor);\r\n  \r\n  // Header\r\n  doc.setFillColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.rect(0, 0, pageWidth, 35, 'F');\r\n  doc.setFontSize(24);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.text('INVOICE', pageWidth / 2, 22, { align: 'center' });\r\n  \r\n  doc.setTextColor(0, 0, 0);\r\n  \r\n  // Invoice info\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text(`Invoice: ${data.invoiceNumber}`, 14, 50);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.text(`Date: ${new Date(data.invoiceDate).toLocaleDateString()}`, 14, 56);\r\n  if (data.paymentDueDate) {\r\n    doc.text(`Due: ${new Date(data.paymentDueDate).toLocaleDateString()}`, 14, 62);\r\n  }\r\n  \r\n  // Customer info\r\n  if (data.customerName) {\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Bill To:', 14, 75);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(data.customerName, 14, 81);\r\n    if (data.customerPhone) doc.text(data.customerPhone, 14, 87);\r\n  }\r\n  \r\n  // Summary table\r\n  const summaryData = [\r\n    ['Gold Cost', `Rs. ${data.goldCost.toFixed(2)}`],\r\n    ['Making & Design', `Rs. ${(data.makingCharges + data.cadDesignCharges + data.cammingCharges).toFixed(2)}`],\r\n    ['Stones & Gems', `Rs. ${(data.diamondCost + data.gemstoneCost).toFixed(2)}`],\r\n    ['Certification', `Rs. ${data.certificationCost.toFixed(2)}`],\r\n  ];\r\n  \r\n  autoTable(doc, {\r\n    startY: 100,\r\n    head: [['Item', 'Amount']],\r\n    body: summaryData,\r\n    theme: 'plain',\r\n    headStyles: { fillColor: [primaryRgb.r, primaryRgb.g, primaryRgb.b], textColor: 255 },\r\n    margin: { left: 14, right: 14 },\r\n  });\r\n  \r\n  const finalY = (doc as any).lastAutoTable.finalY + 10;\r\n  \r\n  // Total\r\n  doc.setFillColor(245, 245, 250);\r\n  doc.rect(14, finalY, pageWidth - 28, 20, 'F');\r\n  doc.setFontSize(14);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(`TOTAL: Rs. ${data.finalSellingPrice.toFixed(2)}`, pageWidth - 18, finalY + 13, { align: 'right' });\r\n  \r\n  doc.setTextColor(0, 0, 0);\r\n  \r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_${Date.now()}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\nconst generateMinimalInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  \r\n  const primaryColor = data.vendorBranding?.primaryColor || '#4F46E5';\r\n  const hexToRgb = (hex: string) => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : { r: 79, g: 70, b: 229 };\r\n  };\r\n  const primaryRgb = hexToRgb(primaryColor);\r\n  \r\n  // Simple header\r\n  doc.setFontSize(28);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('INVOICE', pageWidth / 2, 30, { align: 'center' });\r\n  \r\n  doc.setTextColor(0, 0, 0);\r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'normal');\r\n  \r\n  // Basic info\r\n  let yPos = 50;\r\n  doc.text(`Invoice Number: ${data.invoiceNumber}`, pageWidth / 2, yPos, { align: 'center' });\r\n  yPos += 8;\r\n  doc.text(`Date: ${new Date(data.invoiceDate).toLocaleDateString()}`, pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  if (data.customerName) {\r\n    yPos += 20;\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(`Customer: ${data.customerName}`, pageWidth / 2, yPos, { align: 'center' });\r\n  }\r\n  \r\n  // Total amount - large and centered\r\n  yPos += 40;\r\n  doc.setFontSize(36);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(`Rs. ${data.finalSellingPrice.toFixed(2)}`, pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  doc.setTextColor(0, 0, 0);\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  yPos += 10;\r\n  doc.text('Total Amount Due', pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  if (data.paymentDueDate) {\r\n    yPos += 15;\r\n    doc.setFontSize(11);\r\n    doc.text(`Payment Due: ${new Date(data.paymentDueDate).toLocaleDateString()}`, pageWidth / 2, yPos, { align: 'center' });\r\n  }\r\n  \r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_${Date.now()}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\n// Traditional Template - Classic serif style with ornate borders\r\nconst generateTraditionalInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  \r\n  const primaryColor = data.vendorBranding?.primaryColor || '#2C1810';\r\n  const goldAccent = '#8B7355';\r\n  \r\n  const hexToRgb = (hex: string) => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : { r: 44, g: 24, b: 16 };\r\n  };\r\n  \r\n  const primaryRgb = hexToRgb(primaryColor);\r\n  const goldRgb = hexToRgb(goldAccent);\r\n  \r\n  // Ornate border\r\n  doc.setDrawColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.setLineWidth(2);\r\n  doc.rect(10, 10, pageWidth - 20, pageHeight - 20);\r\n  doc.setLineWidth(0.5);\r\n  doc.rect(12, 12, pageWidth - 24, pageHeight - 24);\r\n  \r\n  // Decorative corner elements\r\n  doc.setFillColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  [\r\n    [15, 15], [pageWidth - 15, 15],\r\n    [15, pageHeight - 15], [pageWidth - 15, pageHeight - 15]\r\n  ].forEach(([x, y]) => {\r\n    doc.circle(x, y, 2, 'F');\r\n  });\r\n  \r\n  // Header with business name\r\n  let yPos = 30;\r\n  doc.setFontSize(32);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(data.vendorBranding?.name || 'FINE JEWELERS', pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  // Tagline with decorative line\r\n  if (data.vendorBranding?.tagline) {\r\n    yPos += 8;\r\n    doc.setFontSize(11);\r\n    doc.setFont('times', 'italic');\r\n    doc.setTextColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n    doc.text(data.vendorBranding.tagline, pageWidth / 2, yPos, { align: 'center' });\r\n  }\r\n  \r\n  // Decorative separator line\r\n  yPos += 10;\r\n  doc.setDrawColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.setLineWidth(0.5);\r\n  const lineMargin = 40;\r\n  doc.line(lineMargin, yPos, pageWidth - lineMargin, yPos);\r\n  doc.circle(pageWidth / 2, yPos, 1, 'F');\r\n  \r\n  // INVOICE title\r\n  yPos += 12;\r\n  doc.setFontSize(24);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('INVOICE', pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  // Invoice details box\r\n  yPos += 15;\r\n  doc.setFillColor(250, 248, 245);\r\n  doc.rect(20, yPos, (pageWidth - 40) / 2 - 5, 30, 'F');\r\n  \r\n  doc.setFontSize(10);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('Invoice Number:', 25, yPos + 8);\r\n  doc.setFont('times', 'normal');\r\n  doc.text(data.invoiceNumber, 25, yPos + 14);\r\n  \r\n  doc.setFont('times', 'bold');\r\n  doc.text('Date:', 25, yPos + 20);\r\n  doc.setFont('times', 'normal');\r\n  doc.text(new Date(data.invoiceDate).toLocaleDateString(), 25, yPos + 26);\r\n  \r\n  // Vendor contact box\r\n  doc.setFillColor(250, 248, 245);\r\n  doc.rect(pageWidth / 2 + 5, yPos, (pageWidth - 40) / 2 - 5, 30, 'F');\r\n  \r\n  doc.setFont('times', 'bold');\r\n  let contactY = yPos + 8;\r\n  if (data.vendorBranding?.phone) {\r\n    doc.text('Tel:', pageWidth / 2 + 10, contactY);\r\n    doc.setFont('times', 'normal');\r\n    doc.text(data.vendorBranding.phone, pageWidth / 2 + 25, contactY);\r\n    contactY += 6;\r\n  }\r\n  if (data.vendorBranding?.email) {\r\n    doc.setFont('times', 'bold');\r\n    doc.text('Email:', pageWidth / 2 + 10, contactY);\r\n    doc.setFont('times', 'normal');\r\n    const emailText = doc.splitTextToSize(data.vendorBranding.email, 60);\r\n    doc.text(emailText, pageWidth / 2 + 25, contactY);\r\n  }\r\n  \r\n  // Customer details\r\n  yPos += 40;\r\n  doc.setFont('times', 'bold');\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.text('BILL TO', 20, yPos);\r\n  \r\n  yPos += 6;\r\n  doc.setDrawColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.line(20, yPos, 80, yPos);\r\n  \r\n  yPos += 8;\r\n  doc.setFont('times', 'normal');\r\n  doc.setFontSize(10);\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  if (data.customerName) doc.text(data.customerName, 20, yPos);\r\n  if (data.customerPhone) {\r\n    yPos += 5;\r\n    doc.text(data.customerPhone, 20, yPos);\r\n  }\r\n  if (data.customerEmail) {\r\n    yPos += 5;\r\n    doc.text(data.customerEmail, 20, yPos);\r\n  }\r\n  if (data.customerAddress) {\r\n    yPos += 5;\r\n    const addressLines = doc.splitTextToSize(data.customerAddress, 70);\r\n    doc.text(addressLines, 20, yPos);\r\n  }\r\n  \r\n  // Cost breakdown table\r\n  yPos += 25;\r\n  const tableData = [\r\n    ['Gold Cost', '', `Rs. ${data.goldCost.toFixed(2)}`],\r\n    ['Diamond Cost', '', `Rs. ${data.diamondCost.toFixed(2)}`],\r\n    ['Gemstone Cost', '', `Rs. ${data.gemstoneCost.toFixed(2)}`],\r\n    ['Making Charges', '', `Rs. ${data.makingCharges.toFixed(2)}`],\r\n    ['Design & CAD', '', `Rs. ${data.cadDesignCharges.toFixed(2)}`],\r\n    ['Certification', '', `Rs. ${data.certificationCost.toFixed(2)}`],\r\n  ];\r\n  \r\n  autoTable(doc, {\r\n    startY: yPos,\r\n    head: [['Description', '', 'Amount']],\r\n    body: tableData,\r\n    theme: 'plain',\r\n    styles: { \r\n      font: 'times',\r\n      fontSize: 10,\r\n      textColor: [primaryRgb.r, primaryRgb.g, primaryRgb.b],\r\n    },\r\n    headStyles: { \r\n      fillColor: [goldRgb.r, goldRgb.g, goldRgb.b],\r\n      textColor: [255, 255, 255],\r\n      fontStyle: 'bold',\r\n      halign: 'left',\r\n    },\r\n    columnStyles: {\r\n      0: { cellWidth: 80 },\r\n      1: { cellWidth: 'auto' },\r\n      2: { cellWidth: 40, halign: 'right' },\r\n    },\r\n    margin: { left: 20, right: 20 },\r\n  });\r\n  \r\n  // Total section with decorative box\r\n  const totalY = (doc as any).lastAutoTable.finalY + 10;\r\n  doc.setDrawColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.setLineWidth(1.5);\r\n  doc.rect(pageWidth - 90, totalY, 70, 20);\r\n  \r\n  doc.setFontSize(14);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('TOTAL:', pageWidth - 85, totalY + 13);\r\n  doc.text(`Rs. ${data.finalSellingPrice.toFixed(2)}`, pageWidth - 25, totalY + 13, { align: 'right' });\r\n  \r\n  // Payment terms\r\n  const footerY = pageHeight - 35;\r\n  doc.setFontSize(9);\r\n  doc.setFont('times', 'italic');\r\n  doc.setTextColor(goldRgb.r, goldRgb.g, goldRgb.b);\r\n  doc.text('Payment Terms:', 20, footerY);\r\n  doc.setFont('times', 'normal');\r\n  doc.text(data.paymentTerms || 'Net 30', 20, footerY + 5);\r\n  \r\n  if (data.invoiceNotes) {\r\n    doc.text('Notes:', 20, footerY + 12);\r\n    const notes = doc.splitTextToSize(data.invoiceNotes, pageWidth - 45);\r\n    doc.text(notes, 20, footerY + 17);\r\n  }\r\n  \r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_Traditional.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\n// Modern Template - Clean minimalist design\r\nconst generateModernInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  \r\n  const primaryColor = data.vendorBranding?.primaryColor || '#000000';\r\n  const accentColor = data.vendorBranding?.secondaryColor || '#6366F1';\r\n  \r\n  const hexToRgb = (hex: string) => {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n      r: parseInt(result[1], 16),\r\n      g: parseInt(result[2], 16),\r\n      b: parseInt(result[3], 16)\r\n    } : { r: 0, g: 0, b: 0 };\r\n  };\r\n  \r\n  const primaryRgb = hexToRgb(primaryColor);\r\n  const accentRgb = hexToRgb(accentColor);\r\n  \r\n  // Minimal header with thin accent line\r\n  doc.setDrawColor(accentRgb.r, accentRgb.g, accentRgb.b);\r\n  doc.setLineWidth(3);\r\n  doc.line(0, 25, pageWidth, 25);\r\n  \r\n  // Business name - ultra minimal\r\n  doc.setFontSize(10);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setTextColor(100, 100, 100);\r\n  doc.text(data.vendorBranding?.name?.toUpperCase() || 'JEWELERS', 20, 15);\r\n  \r\n  // INVOICE - large and minimal\r\n  doc.setFontSize(48);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text('INVOICE', 20, 50);\r\n  \r\n  // Invoice details - clean alignment\r\n  let yPos = 65;\r\n  doc.setFontSize(9);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setTextColor(100, 100, 100);\r\n  doc.text('NUMBER', 20, yPos);\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(data.invoiceNumber, 55, yPos);\r\n  \r\n  yPos += 6;\r\n  doc.setTextColor(100, 100, 100);\r\n  doc.text('DATE', 20, yPos);\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(new Date(data.invoiceDate).toLocaleDateString(), 55, yPos);\r\n  \r\n  if (data.paymentDueDate) {\r\n    yPos += 6;\r\n    doc.setTextColor(100, 100, 100);\r\n    doc.text('DUE', 20, yPos);\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text(new Date(data.paymentDueDate).toLocaleDateString(), 55, yPos);\r\n  }\r\n  \r\n  // Customer info - right aligned\r\n  yPos = 65;\r\n  if (data.customerName) {\r\n    doc.setFontSize(9);\r\n    doc.setTextColor(100, 100, 100);\r\n    doc.text('BILL TO', pageWidth - 20, yPos, { align: 'right' });\r\n    yPos += 6;\r\n    doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n    doc.text(data.customerName, pageWidth - 20, yPos, { align: 'right' });\r\n    if (data.customerEmail) {\r\n      yPos += 5;\r\n      doc.setFontSize(8);\r\n      doc.text(data.customerEmail, pageWidth - 20, yPos, { align: 'right' });\r\n    }\r\n  }\r\n  \r\n  // Items table - ultra clean\r\n  yPos += 25;\r\n  const tableData = [\r\n    ['Gold & Metal Work', `Rs. ${data.goldCost.toFixed(2)}`],\r\n    ['Precious Stones', `Rs. ${(data.diamondCost + data.gemstoneCost).toFixed(2)}`],\r\n    ['Craftsmanship', `Rs. ${data.makingCharges.toFixed(2)}`],\r\n    ['Design & Finishing', `Rs. ${(data.cadDesignCharges + data.cammingCharges).toFixed(2)}`],\r\n    ['Certification', `Rs. ${data.certificationCost.toFixed(2)}`],\r\n  ];\r\n  \r\n  autoTable(doc, {\r\n    startY: yPos,\r\n    body: tableData,\r\n    theme: 'plain',\r\n    styles: { \r\n      fontSize: 10,\r\n      textColor: [primaryRgb.r, primaryRgb.g, primaryRgb.b],\r\n      cellPadding: { top: 4, bottom: 4, left: 0, right: 0 },\r\n    },\r\n    columnStyles: {\r\n      0: { cellWidth: 130, fontStyle: 'normal' },\r\n      1: { cellWidth: 50, halign: 'right', fontStyle: 'bold' },\r\n    },\r\n    margin: { left: 20, right: 20 },\r\n    didDrawCell: (data: any) => {\r\n      // Draw thin separator lines\r\n      if (data.row.index < tableData.length - 1) {\r\n        doc.setDrawColor(230, 230, 230);\r\n        doc.setLineWidth(0.1);\r\n        doc.line(\r\n          data.cell.x,\r\n          data.cell.y + data.cell.height,\r\n          data.cell.x + data.cell.width,\r\n          data.cell.y + data.cell.height\r\n        );\r\n      }\r\n    },\r\n  });\r\n  \r\n  // Total - bold and clean\r\n  const totalY = (doc as any).lastAutoTable.finalY + 15;\r\n  doc.setDrawColor(accentRgb.r, accentRgb.g, accentRgb.b);\r\n  doc.setLineWidth(2);\r\n  doc.line(20, totalY, pageWidth - 20, totalY);\r\n  \r\n  doc.setFontSize(11);\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setTextColor(100, 100, 100);\r\n  doc.text('TOTAL', 20, totalY + 10);\r\n  \r\n  doc.setFontSize(24);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(primaryRgb.r, primaryRgb.g, primaryRgb.b);\r\n  doc.text(`Rs. ${data.finalSellingPrice.toFixed(2)}`, pageWidth - 20, totalY + 10, { align: 'right' });\r\n  \r\n  // Footer - minimal\r\n  const footerY = doc.internal.pageSize.getHeight() - 20;\r\n  doc.setFontSize(8);\r\n  doc.setTextColor(150, 150, 150);\r\n  doc.setFont('helvetica', 'normal');\r\n  if (data.vendorBranding?.email) {\r\n    doc.text(data.vendorBranding.email, 20, footerY);\r\n  }\r\n  if (data.vendorBranding?.phone) {\r\n    doc.text(data.vendorBranding.phone, pageWidth - 20, footerY, { align: 'right' });\r\n  }\r\n  \r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_Modern.pdf`;\r\n  doc.save(fileName);\r\n};\r\n\r\n// Luxury Template - Premium elegant design with gold accents\r\nconst generateLuxuryInvoice = async (data: InvoiceData) => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  \r\n  // Luxury color palette\r\n  const deepPurple = { r: 25, g: 20, b: 40 };\r\n  const gold = { r: 212, g: 175, b: 55 };\r\n  const cream = { r: 250, g: 248, b: 240 };\r\n  \r\n  // Elegant background\r\n  doc.setFillColor(cream.r, cream.g, cream.b);\r\n  doc.rect(0, 0, pageWidth, pageHeight, 'F');\r\n  \r\n  // Top gold accent bar\r\n  doc.setFillColor(gold.r, gold.g, gold.b);\r\n  doc.rect(0, 0, pageWidth, 8, 'F');\r\n  \r\n  // Ornamental corners\r\n  doc.setDrawColor(gold.r, gold.g, gold.b);\r\n  doc.setLineWidth(1);\r\n  const cornerSize = 15;\r\n  // Top left\r\n  doc.line(15, 15, 15 + cornerSize, 15);\r\n  doc.line(15, 15, 15, 15 + cornerSize);\r\n  // Top right\r\n  doc.line(pageWidth - 15, 15, pageWidth - 15 - cornerSize, 15);\r\n  doc.line(pageWidth - 15, 15, pageWidth - 15, 15 + cornerSize);\r\n  // Bottom left\r\n  doc.line(15, pageHeight - 15, 15 + cornerSize, pageHeight - 15);\r\n  doc.line(15, pageHeight - 15, 15, pageHeight - 15 - cornerSize);\r\n  // Bottom right\r\n  doc.line(pageWidth - 15, pageHeight - 15, pageWidth - 15 - cornerSize, pageHeight - 15);\r\n  doc.line(pageWidth - 15, pageHeight - 15, pageWidth - 15, pageHeight - 15 - cornerSize);\r\n  \r\n  // Business name with luxury styling\r\n  let yPos = 35;\r\n  doc.setFontSize(28);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  doc.text(data.vendorBranding?.name?.toUpperCase() || 'PRESTIGE JEWELERS', pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  // Tagline with gold\r\n  if (data.vendorBranding?.tagline) {\r\n    yPos += 8;\r\n    doc.setFontSize(10);\r\n    doc.setFont('times', 'italic');\r\n    doc.setTextColor(gold.r, gold.g, gold.b);\r\n    doc.text(data.vendorBranding.tagline, pageWidth / 2, yPos, { align: 'center' });\r\n  }\r\n  \r\n  // Decorative divider\r\n  yPos += 10;\r\n  doc.setDrawColor(gold.r, gold.g, gold.b);\r\n  doc.setLineWidth(0.5);\r\n  doc.line(60, yPos, pageWidth - 60, yPos);\r\n  // Small diamond shapes\r\n  doc.setFillColor(gold.r, gold.g, gold.b);\r\n  [70, pageWidth / 2, pageWidth - 70].forEach(x => {\r\n    doc.circle(x, yPos, 0.8, 'F');\r\n  });\r\n  \r\n  // INVOICE title\r\n  yPos += 12;\r\n  doc.setFontSize(20);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  doc.text('INVOICE', pageWidth / 2, yPos, { align: 'center' });\r\n  \r\n  // Elegant info boxes\r\n  yPos += 15;\r\n  // Left box - Invoice details\r\n  doc.setFillColor(255, 255, 255);\r\n  doc.setDrawColor(gold.r, gold.g, gold.b);\r\n  doc.setLineWidth(0.5);\r\n  doc.rect(25, yPos, 75, 28, 'FD');\r\n  \r\n  doc.setFontSize(9);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(gold.r, gold.g, gold.b);\r\n  doc.text('INVOICE NO.', 30, yPos + 7);\r\n  doc.setFont('times', 'normal');\r\n  doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  doc.text(data.invoiceNumber, 30, yPos + 12);\r\n  \r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(gold.r, gold.g, gold.b);\r\n  doc.text('DATE', 30, yPos + 19);\r\n  doc.setFont('times', 'normal');\r\n  doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  doc.text(new Date(data.invoiceDate).toLocaleDateString(), 30, yPos + 24);\r\n  \r\n  // Right box - Customer details\r\n  doc.setFillColor(255, 255, 255);\r\n  doc.rect(pageWidth - 100, yPos, 75, 28, 'FD');\r\n  \r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(gold.r, gold.g, gold.b);\r\n  doc.text('ESTEEMED CLIENT', pageWidth - 95, yPos + 7);\r\n  doc.setFont('times', 'normal');\r\n  doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  if (data.customerName) {\r\n    doc.text(data.customerName, pageWidth - 95, yPos + 13);\r\n  }\r\n  if (data.customerPhone) {\r\n    doc.setFontSize(8);\r\n    doc.text(data.customerPhone, pageWidth - 95, yPos + 18);\r\n  }\r\n  if (data.customerEmail) {\r\n    doc.setFontSize(7);\r\n    const emailText = doc.splitTextToSize(data.customerEmail, 70);\r\n    doc.text(emailText, pageWidth - 95, yPos + 23);\r\n  }\r\n  \r\n  // Itemized costs table\r\n  yPos += 40;\r\n  const tableData = [\r\n    ['Fine Gold Workmanship', `Rs. ${data.goldCost.toFixed(2)}`],\r\n    ['Precious Diamond Selection', `Rs. ${data.diamondCost.toFixed(2)}`],\r\n    ['Gemstone Accents', `Rs. ${data.gemstoneCost.toFixed(2)}`],\r\n    ['Master Craftsmanship', `Rs. ${data.makingCharges.toFixed(2)}`],\r\n    ['Bespoke Design Services', `Rs. ${data.cadDesignCharges.toFixed(2)}`],\r\n    ['Finishing & Polish', `Rs. ${data.cammingCharges.toFixed(2)}`],\r\n    ['Authentication Certificate', `Rs. ${data.certificationCost.toFixed(2)}`],\r\n  ];\r\n  \r\n  autoTable(doc, {\r\n    startY: yPos,\r\n    body: tableData,\r\n    theme: 'plain',\r\n    styles: { \r\n      font: 'times',\r\n      fontSize: 10,\r\n      textColor: [deepPurple.r, deepPurple.g, deepPurple.b],\r\n      cellPadding: { top: 3, bottom: 3 },\r\n    },\r\n    columnStyles: {\r\n      0: { cellWidth: 130, fontStyle: 'italic' },\r\n      1: { cellWidth: 45, halign: 'right', fontStyle: 'bold' },\r\n    },\r\n    margin: { left: 25, right: 25 },\r\n    didDrawCell: (data: any) => {\r\n      doc.setDrawColor(gold.r, gold.g, gold.b);\r\n      doc.setLineWidth(0.1);\r\n      doc.line(\r\n        data.cell.x,\r\n        data.cell.y + data.cell.height,\r\n        data.cell.x + data.cell.width,\r\n        data.cell.y + data.cell.height\r\n      );\r\n    },\r\n  });\r\n  \r\n  // Grand total section with luxury styling\r\n  const totalY = (doc as any).lastAutoTable.finalY + 15;\r\n  doc.setFillColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n  doc.rect(pageWidth - 110, totalY, 85, 22, 'F');\r\n  \r\n  doc.setFontSize(11);\r\n  doc.setFont('times', 'bold');\r\n  doc.setTextColor(gold.r, gold.g, gold.b);\r\n  doc.text('TOTAL INVESTMENT', pageWidth - 105, totalY + 8);\r\n  \r\n  doc.setFontSize(18);\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.text(`Rs. ${data.finalSellingPrice.toFixed(2)}`, pageWidth - 105, totalY + 17);\r\n  \r\n  // Elegant footer\r\n  const footerY = pageHeight - 30;\r\n  doc.setDrawColor(gold.r, gold.g, gold.b);\r\n  doc.setLineWidth(0.3);\r\n  doc.line(25, footerY, pageWidth - 25, footerY);\r\n  \r\n  doc.setFontSize(8);\r\n  doc.setFont('times', 'italic');\r\n  doc.setTextColor(gold.r, gold.g, gold.b);\r\n  doc.text('Thank you for choosing exceptional luxury', pageWidth / 2, footerY + 6, { align: 'center' });\r\n  \r\n  if (data.vendorBranding?.phone || data.vendorBranding?.email) {\r\n    doc.setFontSize(7);\r\n    doc.setTextColor(deepPurple.r, deepPurple.g, deepPurple.b);\r\n    let contactText = '';\r\n    if (data.vendorBranding.phone) contactText += data.vendorBranding.phone;\r\n    if (data.vendorBranding.phone && data.vendorBranding.email) contactText += ' | ';\r\n    if (data.vendorBranding.email) contactText += data.vendorBranding.email;\r\n    doc.text(contactText, pageWidth / 2, footerY + 12, { align: 'center' });\r\n  }\r\n  \r\n  const fileName = `Invoice_${data.invoiceNumber.replace(/[^a-z0-9]/gi, '_')}_Luxury.pdf`;\r\n  doc.save(fileName);\r\n};\r\n"],"names":["formatCurrency","amount","loadImageAsBase64","url","resolve","img","canvas","ctx","dataURL","error","separator","generateInvoicePDF","data","generateSummaryInvoice","generateMinimalInvoice","generateTraditionalInvoice","generateModernInvoice","generateLuxuryInvoice","generateDetailedInvoice","doc","jsPDF","pageWidth","primaryColor","_a","secondaryColor","_b","accentColor","hexToRgb","hex","result","primaryRgb","secondaryRgb","accentRgb","_c","logoBase64","nameStartX","_d","nameAlign","_e","_f","_g","headerY","_h","_i","_j","contactY","email","splitAddress","invoiceInfoY","infoY","customerSectionY","yPos","leftColY","midPoint","emailLines","addressLines","currentY","item","index","itemStartY","detailsX","descLines","itemSpecs","autoTable","itemCosts","specsData","_k","_l","_m","_n","_o","_p","_q","tableData","finalY","hasGst","hasShipping","hasGrandTotal","hasCurrency","baseHeight","gstHeight","shippingHeight","grandTotalHeight","currencyHeight","totalSectionHeight","newFinalY","renderTotalsSection","splitNotes","footerY","fileName","startY","lineY","usdAmount","summaryData","pageHeight","goldAccent","goldRgb","x","y","lineMargin","emailText","totalY","notes","deepPurple","gold","cream","cornerSize","contactText"],"mappings":"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"}