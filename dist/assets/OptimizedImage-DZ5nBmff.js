import{j as r}from"./query-vendor-BLxHmmGk.js";import{r as s}from"./react-vendor-BeR0k5Z3.js";import{y as g}from"./index-DGlTgSKx.js";const $=e=>{let n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return`hsl(${Math.abs(n%360)}, 20%, 85%)`},A=({src:e,alt:n,width:c,height:t,lazy:l=!0,priority:d=!1,className:o,objectFit:v="cover",onLoad:a,onError:u,blurPlaceholder:f=!0,...m})=>{const[i,h]=s.useState(!1),[x,w]=s.useState(!1),[j,k]=s.useState(!l||d),C=s.useRef(null),b=s.useRef(null),I=s.useMemo(()=>$(e||""),[e]);s.useEffect(()=>{h(!1),w(!1)},[e]),s.useEffect(()=>{if(!l||d||j)return;const p=new IntersectionObserver(S=>{S.forEach(M=>{M.isIntersecting&&(k(!0),p.disconnect())})},{rootMargin:"200px",threshold:.01});return b.current&&p.observe(b.current),()=>p.disconnect()},[l,d,j]);const E=()=>{h(!0),a==null||a()},N=()=>{w(!0),u==null||u()},R={contain:"object-contain",cover:"object-cover",fill:"object-fill",none:"object-none","scale-down":"object-scale-down"}[v];return j?x?r.jsx("div",{className:g("flex items-center justify-center bg-muted text-muted-foreground",o),style:{width:c,height:t},children:r.jsx("span",{className:"text-xs",children:"Image unavailable"})}):r.jsx("div",{ref:b,className:g("relative overflow-hidden",o),children:r.jsx("img",{ref:C,src:e,alt:n,width:c,height:t,loading:l&&!d?"lazy":"eager",decoding:"async",onLoad:E,onError:N,className:g("w-full h-full",R),...m})}):r.jsx("div",{ref:b,className:g("relative overflow-hidden",o),style:{width:c,height:t,backgroundColor:f?I:void 0},children:r.jsx("div",{className:"absolute inset-0 animate-pulse",style:{background:`linear-gradient(90deg, ${I} 0%, hsl(0, 0%, 90%) 50%, ${I} 100%)`,backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})})},O=e=>{let n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return`hsl(${Math.abs(n%360)}, 15%, 80%)`},B=({src:e,className:n,children:c,lazy:t=!0,overlay:l=!1,overlayOpacity:d=.5})=>{const[o,v]=s.useState(!1),[a,u]=s.useState(!t),f=s.useRef(null),m=s.useMemo(()=>O(e||""),[e]);return s.useEffect(()=>{if(!t||a)return;const i=new IntersectionObserver(h=>{h.forEach(x=>{x.isIntersecting&&(u(!0),i.disconnect())})},{rootMargin:"200px"});return f.current&&i.observe(f.current),()=>i.disconnect()},[t,a]),s.useEffect(()=>{if(!a)return;const i=new Image;i.onload=()=>v(!0),i.src=e},[a,e]),r.jsxs("div",{ref:f,className:g("relative overflow-hidden",n),style:{backgroundImage:o?`url(${e})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:o?void 0:m},children:[!o&&r.jsx("div",{className:"absolute inset-0 animate-pulse",style:{background:`linear-gradient(135deg, ${m} 0%, hsl(0, 0%, 85%) 100%)`,filter:"blur(4px)"}}),l&&o&&r.jsx("div",{className:"absolute inset-0 bg-background",style:{opacity:d}}),r.jsx("div",{className:"relative z-10",children:c})]})};export{A as O,B as a};
//# sourceMappingURL=OptimizedImage-DZ5nBmff.js.map
