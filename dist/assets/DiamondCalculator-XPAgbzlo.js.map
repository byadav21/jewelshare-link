{"version":3,"file":"DiamondCalculator-XPAgbzlo.js","sources":["../../src/components/DiamondCalculatorUpgradeBanner.tsx","../../src/components/UnlimitedUnlockedCelebration.tsx","../../src/pages/DiamondCalculator.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { \r\n  Sparkles, \r\n  Zap, \r\n  TrendingUp, \r\n  Shield, \r\n  Check, \r\n  X,\r\n  ArrowRight,\r\n  Crown\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface DiamondCalculatorUpgradeBannerProps {\r\n  remainingCalculations: number;\r\n  totalLimit: number;\r\n}\r\n\r\nexport const DiamondCalculatorUpgradeBanner = ({\r\n  remainingCalculations,\r\n  totalLimit,\r\n}: DiamondCalculatorUpgradeBannerProps) => {\r\n  const [showComparison, setShowComparison] = useState(false);\r\n  const navigate = useNavigate();\r\n  const usagePercentage = ((totalLimit - remainingCalculations) / totalLimit) * 100;\r\n\r\n  return (\r\n    <>\r\n      <AnimatePresence>\r\n        <motion.div\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -20 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <Alert className={`relative overflow-hidden border-2 ${\r\n            remainingCalculations === 0 \r\n              ? \"border-destructive/50 bg-destructive/5\" \r\n              : remainingCalculations <= 2\r\n              ? \"border-orange-500/50 bg-orange-500/5\"\r\n              : \"border-primary/50 bg-primary/5\"\r\n          }`}>\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent animate-pulse\" />\r\n            \r\n            <div className=\"relative flex items-center justify-between gap-4 flex-wrap\">\r\n              <div className=\"flex items-center gap-3 flex-1 min-w-[200px]\">\r\n                <motion.div\r\n                  animate={{ \r\n                    rotate: remainingCalculations <= 2 ? [0, -10, 10, -10, 0] : 0 \r\n                  }}\r\n                  transition={{ \r\n                    duration: 0.5,\r\n                    repeat: remainingCalculations <= 2 ? Infinity : 0,\r\n                    repeatDelay: 2\r\n                  }}\r\n                >\r\n                  {remainingCalculations === 0 ? (\r\n                    <X className=\"h-5 w-5 text-destructive\" />\r\n                  ) : (\r\n                    <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                  )}\r\n                </motion.div>\r\n                \r\n                <AlertDescription className=\"m-0\">\r\n                  <div className=\"flex flex-col gap-1\">\r\n                    <div className=\"font-semibold\">\r\n                      {remainingCalculations === 0 ? (\r\n                        <span className=\"text-destructive\">Daily Limit Reached!</span>\r\n                      ) : (\r\n                        <span>\r\n                          {remainingCalculations} calculation{remainingCalculations !== 1 ? 's' : ''} remaining today\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-32 h-1.5 bg-muted rounded-full overflow-hidden\">\r\n                        <motion.div\r\n                          className={`h-full ${\r\n                            remainingCalculations === 0\r\n                              ? \"bg-destructive\"\r\n                              : remainingCalculations <= 2\r\n                              ? \"bg-orange-500\"\r\n                              : \"bg-primary\"\r\n                          }`}\r\n                          initial={{ width: 0 }}\r\n                          animate={{ width: `${usagePercentage}%` }}\r\n                          transition={{ duration: 0.5 }}\r\n                        />\r\n                      </div>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {totalLimit - remainingCalculations}/{totalLimit} used\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </AlertDescription>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setShowComparison(true)}\r\n                  className=\"group\"\r\n                >\r\n                  Compare Plans\r\n                  <TrendingUp className=\"ml-1 h-4 w-4 group-hover:translate-x-0.5 transition-transform\" />\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => navigate(\"/auth\")}\r\n                  className=\"group bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70\"\r\n                >\r\n                  <Crown className=\"mr-1 h-4 w-4\" />\r\n                  Sign In for Unlimited\r\n                  <ArrowRight className=\"ml-1 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Alert>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n\r\n      <Dialog open={showComparison} onOpenChange={setShowComparison}>\r\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-2xl\">\r\n              <Zap className=\"h-6 w-6 text-primary\" />\r\n              Choose Your Diamond Calculator Experience\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Compare features and choose what works best for you\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"grid md:grid-cols-2 gap-4 mt-6\">\r\n            {/* Free Plan */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ delay: 0.1 }}\r\n            >\r\n              <Card className=\"p-6 h-full border-2 border-muted hover:border-muted-foreground/20 transition-colors\">\r\n                <div className=\"flex flex-col h-full\">\r\n                  <div className=\"mb-4\">\r\n                    <Badge variant=\"outline\" className=\"mb-3\">\r\n                      Guest Access\r\n                    </Badge>\r\n                    <h3 className=\"text-2xl font-bold mb-2\">Free</h3>\r\n                    <p className=\"text-muted-foreground text-sm\">\r\n                      Try before you commit\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-4 flex-1\">\r\n                    <div className=\"text-3xl font-bold\">\r\n                      5<span className=\"text-lg text-muted-foreground\">/day</span>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Basic diamond price calculations\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"4Cs specifications (Carat, Color, Clarity, Cut)\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Price adjustments (discount/markup)\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Compare up to 4 diamonds\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={false}\r\n                        text=\"Unlimited calculations\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={false}\r\n                        text=\"Save calculation history\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={false}\r\n                        text=\"Export unlimited comparisons\"\r\n                      />\r\n                      <FeatureItem\r\n                        included={false}\r\n                        text=\"Priority support\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"w-full mt-6\"\r\n                    disabled\r\n                  >\r\n                    Current Plan\r\n                  </Button>\r\n                </div>\r\n              </Card>\r\n            </motion.div>\r\n\r\n            {/* Authenticated Plan */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: 20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ delay: 0.2 }}\r\n            >\r\n              <Card className=\"p-6 h-full border-2 border-primary bg-gradient-to-br from-primary/5 via-transparent to-primary/5 shadow-lg relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0\">\r\n                  <Badge className=\"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground\">\r\n                    <Sparkles className=\"h-3 w-3 mr-1\" />\r\n                    Recommended\r\n                  </Badge>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col h-full\">\r\n                  <div className=\"mb-4 mt-6\">\r\n                    <Badge variant=\"default\" className=\"mb-3 bg-gradient-to-r from-primary to-primary/80\">\r\n                      <Crown className=\"h-3 w-3 mr-1\" />\r\n                      Full Access\r\n                    </Badge>\r\n                    <h3 className=\"text-2xl font-bold mb-2\">Unlimited</h3>\r\n                    <p className=\"text-muted-foreground text-sm\">\r\n                      Professional diamond pricing tools\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-4 flex-1\">\r\n                    <div className=\"text-3xl font-bold flex items-baseline gap-2\">\r\n                      <span className=\"text-primary\">∞</span>\r\n                      <span className=\"text-lg text-muted-foreground\">unlimited</span>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Unlimited diamond calculations\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"All 4Cs specifications\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Advanced price adjustments\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Compare unlimited diamonds\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Save calculation history\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Export all comparisons as PDF\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Access to all platform features\"\r\n                        highlight\r\n                      />\r\n                      <FeatureItem\r\n                        included={true}\r\n                        text=\"Priority support\"\r\n                        highlight\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button\r\n                    className=\"w-full mt-6 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 group\"\r\n                    onClick={() => {\r\n                      setShowComparison(false);\r\n                      navigate(\"/auth\");\r\n                    }}\r\n                  >\r\n                    <Shield className=\"mr-2 h-4 w-4\" />\r\n                    Sign In Now\r\n                    <ArrowRight className=\"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\r\n                  </Button>\r\n                  \r\n                  <p className=\"text-xs text-center text-muted-foreground mt-3\">\r\n                    Free to sign up • No credit card required\r\n                  </p>\r\n                </div>\r\n              </Card>\r\n            </motion.div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\ninterface FeatureItemProps {\r\n  included: boolean;\r\n  text: string;\r\n  highlight?: boolean;\r\n}\r\n\r\nconst FeatureItem = ({ included, text, highlight }: FeatureItemProps) => (\r\n  <div className=\"flex items-start gap-2\">\r\n    <div className={`mt-0.5 ${included ? \"text-primary\" : \"text-muted-foreground\"}`}>\r\n      {included ? (\r\n        <Check className=\"h-4 w-4\" />\r\n      ) : (\r\n        <X className=\"h-4 w-4\" />\r\n      )}\r\n    </div>\r\n    <span className={`text-sm ${\r\n      !included \r\n        ? \"text-muted-foreground line-through\" \r\n        : highlight \r\n        ? \"font-medium\" \r\n        : \"\"\r\n    }`}>\r\n      {text}\r\n    </span>\r\n  </div>\r\n);\r\n","import { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Sparkles, Zap, Crown, Infinity, Check, PartyPopper } from \"lucide-react\";\r\n\r\ninterface UnlimitedUnlockedCelebrationProps {\r\n  show: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const UnlimitedUnlockedCelebration = ({\r\n  show,\r\n  onClose,\r\n}: UnlimitedUnlockedCelebrationProps) => {\r\n  const [step, setStep] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      // Fire confetti\r\n      const duration = 3000;\r\n      const animationEnd = Date.now() + duration;\r\n      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };\r\n\r\n      const randomInRange = (min: number, max: number) => {\r\n        return Math.random() * (max - min) + min;\r\n      };\r\n\r\n      const interval = setInterval(() => {\r\n        const timeLeft = animationEnd - Date.now();\r\n\r\n        if (timeLeft <= 0) {\r\n          clearInterval(interval);\r\n          return;\r\n        }\r\n\r\n        const particleCount = 50 * (timeLeft / duration);\r\n\r\n        confetti({\r\n          ...defaults,\r\n          particleCount,\r\n          origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },\r\n          colors: [\"#FFD700\", \"#FFA500\", \"#FF6347\", \"#9370DB\", \"#00CED1\"],\r\n        });\r\n        confetti({\r\n          ...defaults,\r\n          particleCount,\r\n          origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },\r\n          colors: [\"#FFD700\", \"#FFA500\", \"#FF6347\", \"#9370DB\", \"#00CED1\"],\r\n        });\r\n      }, 250);\r\n\r\n      // Progress through steps\r\n      const stepTimer1 = setTimeout(() => setStep(1), 800);\r\n      const stepTimer2 = setTimeout(() => setStep(2), 1600);\r\n      const stepTimer3 = setTimeout(() => setStep(3), 2400);\r\n\r\n      return () => {\r\n        clearInterval(interval);\r\n        clearTimeout(stepTimer1);\r\n        clearTimeout(stepTimer2);\r\n        clearTimeout(stepTimer3);\r\n      };\r\n    }\r\n  }, [show]);\r\n\r\n  const features = [\r\n    { Icon: Infinity, text: \"Unlimited calculations\", color: \"text-primary\" },\r\n    { Icon: Zap, text: \"Compare unlimited diamonds\", color: \"text-orange-500\" },\r\n    { Icon: Crown, text: \"Save calculation history\", color: \"text-yellow-500\" },\r\n    { Icon: Sparkles, text: \"Export all comparisons\", color: \"text-purple-500\" },\r\n  ];\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {show && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 z-[9998] flex items-center justify-center bg-background/80 backdrop-blur-sm\"\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.5, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.5, opacity: 0 }}\r\n            transition={{ type: \"spring\", duration: 0.5 }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <Card className=\"relative overflow-hidden border-2 border-primary shadow-2xl max-w-md mx-4\">\r\n              {/* Animated background gradient */}\r\n              <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 via-purple-500/10 to-orange-500/10 animate-pulse\" />\r\n              \r\n              {/* Sparkle effects */}\r\n              <motion.div\r\n                className=\"absolute top-4 left-4\"\r\n                animate={{ \r\n                  rotate: [0, 360],\r\n                  scale: [1, 1.2, 1]\r\n                }}\r\n                transition={{ \r\n                  duration: 2,\r\n                  repeat: 999999,\r\n                  ease: \"easeInOut\"\r\n                }}\r\n              >\r\n                <Sparkles className=\"h-6 w-6 text-yellow-500\" />\r\n              </motion.div>\r\n              \r\n              <motion.div\r\n                className=\"absolute top-4 right-4\"\r\n                animate={{ \r\n                  rotate: [360, 0],\r\n                  scale: [1, 1.2, 1]\r\n                }}\r\n                transition={{ \r\n                  duration: 2,\r\n                  repeat: 999999,\r\n                  ease: \"easeInOut\",\r\n                  delay: 1\r\n                }}\r\n              >\r\n                <Sparkles className=\"h-6 w-6 text-purple-500\" />\r\n              </motion.div>\r\n\r\n              <div className=\"relative p-8 text-center space-y-6\">\r\n                {/* Main icon */}\r\n                <motion.div\r\n                  initial={{ scale: 0, rotate: -180 }}\r\n                  animate={{ scale: 1, rotate: 0 }}\r\n                  transition={{ \r\n                    type: \"spring\",\r\n                    stiffness: 200,\r\n                    damping: 15,\r\n                    delay: 0.2\r\n                  }}\r\n                  className=\"flex justify-center\"\r\n                >\r\n                  <div className=\"relative\">\r\n                    <motion.div\r\n                      animate={{ \r\n                        scale: [1, 1.2, 1],\r\n                        rotate: [0, 5, -5, 0]\r\n                      }}\r\n                      transition={{ \r\n                        duration: 2,\r\n                        repeat: 999999,\r\n                        ease: \"easeInOut\"\r\n                      }}\r\n                      className=\"w-20 h-20 rounded-full bg-gradient-to-br from-primary via-purple-500 to-orange-500 flex items-center justify-center\"\r\n                    >\r\n                      <PartyPopper className=\"h-10 w-10 text-white\" />\r\n                    </motion.div>\r\n                    <motion.div\r\n                      className=\"absolute -inset-2 rounded-full border-4 border-primary/30\"\r\n                      animate={{ \r\n                        scale: [1, 1.3, 1],\r\n                        opacity: [0.5, 0, 0.5]\r\n                      }}\r\n                      transition={{ \r\n                        duration: 2,\r\n                        repeat: 999999,\r\n                        ease: \"easeInOut\"\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </motion.div>\r\n\r\n                {/* Title */}\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 0.4 }}\r\n                >\r\n                  <Badge className=\"mb-3 bg-gradient-to-r from-primary to-purple-500 text-white\">\r\n                    <Crown className=\"h-3 w-3 mr-1\" />\r\n                    Unlimited Access Unlocked!\r\n                  </Badge>\r\n                  <h2 className=\"text-3xl font-bold bg-gradient-to-r from-primary via-purple-500 to-orange-500 bg-clip-text text-transparent\">\r\n                    Welcome Back!\r\n                  </h2>\r\n                  <p className=\"text-muted-foreground mt-2\">\r\n                    You now have unlimited access to all diamond calculator features\r\n                  </p>\r\n                </motion.div>\r\n\r\n                {/* Features list */}\r\n                <div className=\"space-y-3\">\r\n                  {features.map((feature, index) => {\r\n                    const IconComponent = feature.Icon;\r\n                    return (\r\n                      <motion.div\r\n                        key={index}\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ \r\n                          opacity: step > index ? 1 : 0.3,\r\n                          x: step > index ? 0 : -20,\r\n                          scale: step === index + 1 ? [1, 1.05, 1] : 1\r\n                        }}\r\n                        transition={{ \r\n                          delay: 0.6 + index * 0.1,\r\n                          scale: { duration: 0.3 }\r\n                        }}\r\n                        className={`flex items-center gap-3 p-3 rounded-lg border transition-all duration-300 ${\r\n                          step > index \r\n                            ? \"border-primary/50 bg-primary/5\" \r\n                            : \"border-muted bg-muted/30\"\r\n                        }`}\r\n                      >\r\n                        <div className={`${feature.color}`}>\r\n                          <IconComponent className=\"h-5 w-5\" />\r\n                        </div>\r\n                        <span className={`text-sm font-medium ${\r\n                          step > index ? \"text-foreground\" : \"text-muted-foreground\"\r\n                        }`}>\r\n                          {feature.text}\r\n                        </span>\r\n                        {step > index && (\r\n                          <motion.div\r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            className=\"ml-auto\"\r\n                          >\r\n                            <Check className=\"h-4 w-4 text-primary\" />\r\n                          </motion.div>\r\n                        )}\r\n                      </motion.div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                {/* CTA Button */}\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 1.2 }}\r\n                >\r\n                  <Button\r\n                    onClick={onClose}\r\n                    className=\"w-full bg-gradient-to-r from-primary via-purple-500 to-orange-500 hover:from-primary/90 hover:via-purple-500/90 hover:to-orange-500/90 text-white font-semibold group\"\r\n                  >\r\n                    Start Calculating\r\n                    <Zap className=\"ml-2 h-4 w-4 group-hover:rotate-12 transition-transform\" />\r\n                  </Button>\r\n                </motion.div>\r\n              </div>\r\n            </Card>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n","import { useState, useMemo, useEffect, useCallback } from \"react\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Calculator, Diamond, Sparkles, TrendingDown, TrendingUp, RotateCcw, Plus, X, Scale, Download, Ruler, Volume2, VolumeX } from \"lucide-react\";\r\nimport { AnimatedCounter } from \"@/components/AnimatedCounter\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { ScrollReveal } from \"@/components/ScrollReveal\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { DiamondCalculatorUpgradeBanner } from \"@/components/DiamondCalculatorUpgradeBanner\";\r\nimport { UnlimitedUnlockedCelebration } from \"@/components/UnlimitedUnlockedCelebration\";\r\nimport { BackToHomeButton } from \"@/components/BackToHomeButton\";\r\nimport { Header } from \"@/components/Header\";\r\nimport { Footer } from \"@/components/Footer\";\r\nimport { ThemeSwitcher } from \"@/components/ThemeSwitcher\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { playSparkleSound } from \"@/utils/celebrationSounds\";\r\n\r\ninterface ComparisonItem {\r\n  id: string;\r\n  specs: {\r\n    carat: string;\r\n    shape: string;\r\n    color: string;\r\n    clarity: string;\r\n    cut: string;\r\n  };\r\n  result: {\r\n    pricePerCarat: number;\r\n    totalPrice: number;\r\n    currency: string;\r\n  };\r\n  adjustmentType: \"discount\" | \"markup\";\r\n  adjustmentPercentage: number;\r\n  finalPrice: number;\r\n}\r\n\r\nconst DiamondCalculator = () => {\r\n  const navigate = useNavigate();\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [guestUsageCount, setGuestUsageCount] = useState(0);\r\n  const [showCelebration, setShowCelebration] = useState(false);\r\n  const [carat, setCarat] = useState<string>(\"\");\r\n  const [shape, setShape] = useState<string>(\"\");\r\n  const [color, setColor] = useState<string>(\"\");\r\n  const [clarity, setClarity] = useState<string>(\"\");\r\n  const [cut, setCut] = useState<string>(\"\");\r\n  const [adjustmentType, setAdjustmentType] = useState<\"discount\" | \"markup\">(\"discount\");\r\n  const [adjustmentInput, setAdjustmentInput] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState<{\r\n    pricePerCarat: number;\r\n    totalPrice: number;\r\n    currency: string;\r\n  } | null>(null);\r\n  const [comparisonList, setComparisonList] = useState<ComparisonItem[]>([]);\r\n  const [soundEnabled, setSoundEnabled] = useState(true);\r\n\r\n  // Confetti celebration effect\r\n  const fireConfetti = useCallback(() => {\r\n    const colors = [\"#60a5fa\", \"#a78bfa\", \"#f472b6\", \"#fbbf24\", \"#ffffff\"];\r\n    \r\n    confetti({\r\n      particleCount: 80,\r\n      spread: 70,\r\n      origin: { y: 0.6, x: 0.5 },\r\n      colors,\r\n      shapes: [\"star\", \"circle\"],\r\n      scalar: 1.2,\r\n    });\r\n\r\n    setTimeout(() => {\r\n      confetti({\r\n        particleCount: 40,\r\n        angle: 60,\r\n        spread: 55,\r\n        origin: { x: 0.3, y: 0.65 },\r\n        colors,\r\n        shapes: [\"star\"],\r\n      });\r\n      confetti({\r\n        particleCount: 40,\r\n        angle: 120,\r\n        spread: 55,\r\n        origin: { x: 0.7, y: 0.65 },\r\n        colors,\r\n        shapes: [\"star\"],\r\n      });\r\n    }, 150);\r\n  }, []);\r\n\r\n  // Check authentication status and show celebration on sign in\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      setIsAuthenticated(!!session);\r\n    };\r\n    checkAuth();\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\r\n      const wasGuest = !isAuthenticated;\r\n      setIsAuthenticated(!!session);\r\n      \r\n      // Show celebration if user just signed in and was previously a guest\r\n      if (event === 'SIGNED_IN' && session && wasGuest) {\r\n        setTimeout(() => setShowCelebration(true), 500);\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [isAuthenticated]);\r\n\r\n  // Track guest usage with daily reset\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      const today = new Date().toDateString();\r\n      const stored = localStorage.getItem('diamond_calculator_usage');\r\n      \r\n      if (stored) {\r\n        const { date, count } = JSON.parse(stored);\r\n        if (date === today) {\r\n          setGuestUsageCount(count);\r\n        } else {\r\n          localStorage.setItem('diamond_calculator_usage', JSON.stringify({ date: today, count: 0 }));\r\n          setGuestUsageCount(0);\r\n        }\r\n      } else {\r\n        localStorage.setItem('diamond_calculator_usage', JSON.stringify({ date: today, count: 0 }));\r\n        setGuestUsageCount(0);\r\n      }\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  const incrementGuestUsage = () => {\r\n    if (!isAuthenticated) {\r\n      const today = new Date().toDateString();\r\n      const newCount = guestUsageCount + 1;\r\n      localStorage.setItem('diamond_calculator_usage', JSON.stringify({ date: today, count: newCount }));\r\n      setGuestUsageCount(newCount);\r\n    }\r\n  };\r\n\r\n  const checkUsageLimit = (): boolean => {\r\n    if (isAuthenticated) return true;\r\n    \r\n    if (guestUsageCount >= 5) {\r\n      toast.error(\"Daily limit reached. Please sign in for unlimited calculations.\", {\r\n        action: {\r\n          label: \"Sign In\",\r\n          onClick: () => window.location.href = \"/auth\"\r\n        }\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Parse adjustment input - supports percentages (50, 50%) and fractions (1/2, 3/4)\r\n  const adjustmentPercentage = useMemo(() => {\r\n    if (!adjustmentInput.trim()) return 0;\r\n    \r\n    const input = adjustmentInput.trim();\r\n    \r\n    // Check if it's a fraction (e.g., \"1/2\", \"3/4\")\r\n    if (input.includes('/')) {\r\n      const [numerator, denominator] = input.split('/').map(s => parseFloat(s.trim()));\r\n      if (!isNaN(numerator) && !isNaN(denominator) && denominator !== 0) {\r\n        return Math.min(100, Math.max(0, (numerator / denominator) * 100));\r\n      }\r\n      return 0;\r\n    }\r\n    \r\n    // Parse as percentage (remove % if present)\r\n    const numValue = parseFloat(input.replace('%', ''));\r\n    if (!isNaN(numValue)) {\r\n      return Math.min(100, Math.max(0, numValue));\r\n    }\r\n    \r\n    return 0;\r\n  }, [adjustmentInput]);\r\n\r\n  const shapes = [\"Round\", \"Princess\", \"Cushion\", \"Emerald\", \"Oval\", \"Radiant\", \"Asscher\", \"Marquise\", \"Heart\", \"Pear\"];\r\n  const colors = [\"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\"];\r\n  const clarities = [\"IF\", \"VVS1\", \"VVS2\", \"VS1\", \"VS2\", \"SI1\", \"SI2\", \"SI3\", \"I1\", \"I2\", \"I3\"];\r\n  const cuts = [\"Excellent\"];\r\n\r\n  const testWithSampleData = () => {\r\n    setCarat(\"0.20\");\r\n    setShape(\"Round\");\r\n    setColor(\"D\");\r\n    setClarity(\"IF\");\r\n    setCut(\"Excellent\");\r\n    toast.info(\"Sample data loaded - click Calculate to test\");\r\n  };\r\n\r\n  const calculatePrice = async () => {\r\n    if (!checkUsageLimit()) return;\r\n    \r\n    if (!carat || !shape || !color || !clarity || !cut) {\r\n      toast.error(\"Please fill in all fields\");\r\n      return;\r\n    }\r\n\r\n    const caratNum = parseFloat(carat);\r\n    if (isNaN(caratNum) || caratNum <= 0) {\r\n      toast.error(\"Please enter a valid carat weight\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Dual pricing strategy: Round uses Round pricing, all fancy shapes use Pear pricing\r\n      const lookupShape = shape === \"Round\" ? \"Round\" : \"Pear\";\r\n      \r\n      const { data, error } = await supabase\r\n        .from(\"diamond_prices\")\r\n        .select(\"*\")\r\n        .eq(\"shape\", lookupShape)\r\n        .eq(\"color_grade\", color)\r\n        .eq(\"clarity_grade\", clarity)\r\n        .eq(\"cut_grade\", \"Excellent\") // Always use Excellent grade for pricing\r\n        .lte(\"carat_range_min\", caratNum)\r\n        .gte(\"carat_range_max\", caratNum)\r\n        .maybeSingle();\r\n\r\n      if (error) throw error;\r\n\r\n      if (!data) {\r\n        toast.error(\r\n          `No pricing data found for ${lookupShape} diamonds with these specifications (${color}/${clarity}, ${caratNum}ct). Please contact admin to add pricing data.`,\r\n          { duration: 5000 }\r\n        );\r\n        setResult(null);\r\n        return;\r\n      }\r\n\r\n      const pricePerCarat = Number(data.price_per_carat);\r\n      const totalPrice = pricePerCarat * caratNum;\r\n\r\n      setResult({\r\n        pricePerCarat,\r\n        totalPrice,\r\n        currency: data.currency,\r\n      });\r\n\r\n      // Celebration effects\r\n      fireConfetti();\r\n      if (soundEnabled) {\r\n        playSparkleSound();\r\n      }\r\n\r\n      incrementGuestUsage();\r\n      toast.success(\"Price calculated successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error calculating price:\", error);\r\n      toast.error(\"Failed to calculate price\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addToComparison = () => {\r\n    if (!checkUsageLimit()) return;\r\n    \r\n    if (!result) {\r\n      toast.error(\"Calculate a price first before adding to comparison\");\r\n      return;\r\n    }\r\n\r\n    if (comparisonList.length >= 4) {\r\n      toast.error(\"Maximum 4 diamonds can be compared at once\");\r\n      return;\r\n    }\r\n\r\n    const finalPrice = adjustmentPercentage > 0\r\n      ? adjustmentType === \"discount\"\r\n        ? result.totalPrice * (1 - adjustmentPercentage / 100)\r\n        : result.totalPrice * (1 + adjustmentPercentage / 100)\r\n      : result.totalPrice;\r\n\r\n    const newItem: ComparisonItem = {\r\n      id: Date.now().toString(),\r\n      specs: { carat, shape, color, clarity, cut },\r\n      result,\r\n      adjustmentType,\r\n      adjustmentPercentage,\r\n      finalPrice: Math.round(finalPrice),\r\n    };\r\n\r\n    setComparisonList([...comparisonList, newItem]);\r\n    toast.success(\"Added to comparison\");\r\n  };\r\n\r\n  const removeFromComparison = (id: string) => {\r\n    setComparisonList(comparisonList.filter(item => item.id !== id));\r\n    toast.success(\"Removed from comparison\");\r\n  };\r\n\r\n  const clearComparison = () => {\r\n    setComparisonList([]);\r\n    toast.success(\"Comparison cleared\");\r\n  };\r\n\r\n  const exportComparisonToPDF = () => {\r\n    if (comparisonList.length === 0) {\r\n      toast.error(\"No diamonds to export\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const doc = new jsPDF();\r\n      const pageWidth = doc.internal.pageSize.width;\r\n      \r\n      // Header\r\n      doc.setFontSize(20);\r\n      doc.setTextColor(40, 40, 40);\r\n      doc.text(\"Diamond Comparison Report\", pageWidth / 2, 20, { align: \"center\" });\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setTextColor(100, 100, 100);\r\n      doc.text(`Generated on ${new Date().toLocaleDateString()}`, pageWidth / 2, 28, { align: \"center\" });\r\n      \r\n      // Prepare table data\r\n      const tableHeaders = [\r\n        \"Specification\",\r\n        ...comparisonList.map((_, idx) => `Option ${idx + 1}`)\r\n      ];\r\n      \r\n      const tableData = [\r\n        [\"Carat Weight\", ...comparisonList.map(item => item.specs.carat)],\r\n        [\"Shape\", ...comparisonList.map(item => item.specs.shape)],\r\n        [\"Color Grade\", ...comparisonList.map(item => item.specs.color)],\r\n        [\"Clarity Grade\", ...comparisonList.map(item => item.specs.clarity)],\r\n        [\"Cut Grade\", ...comparisonList.map(item => item.specs.cut)],\r\n        [\"\", ...Array(comparisonList.length).fill(\"\")], // Empty row for spacing\r\n        [\"Price/Carat\", ...comparisonList.map(item => \r\n          `${item.result.currency} ${item.result.pricePerCarat.toLocaleString()}`\r\n        )],\r\n        [\"Base Price\", ...comparisonList.map(item => \r\n          `${item.result.currency} ${item.result.totalPrice.toLocaleString()}`\r\n        )],\r\n        [\"Adjustment\", ...comparisonList.map(item => \r\n          item.adjustmentPercentage > 0 \r\n            ? `${item.adjustmentPercentage.toFixed(1)}% ${item.adjustmentType}`\r\n            : \"None\"\r\n        )],\r\n        [\"Final Price\", ...comparisonList.map(item => \r\n          `${item.result.currency} ${item.finalPrice.toLocaleString()}`\r\n        )],\r\n      ];\r\n      \r\n      // Add table\r\n      autoTable(doc, {\r\n        startY: 35,\r\n        head: [tableHeaders],\r\n        body: tableData,\r\n        theme: \"grid\",\r\n        headStyles: {\r\n          fillColor: [66, 66, 66],\r\n          textColor: [255, 255, 255],\r\n          fontStyle: \"bold\",\r\n          halign: \"center\",\r\n        },\r\n        bodyStyles: {\r\n          halign: \"center\",\r\n        },\r\n        columnStyles: {\r\n          0: { halign: \"left\", fontStyle: \"bold\" },\r\n        },\r\n        alternateRowStyles: {\r\n          fillColor: [245, 245, 245],\r\n        },\r\n      });\r\n      \r\n      // Summary section\r\n      if (comparisonList.length > 1) {\r\n        const finalY = (doc as any).lastAutoTable.finalY + 10;\r\n        \r\n        doc.setFontSize(14);\r\n        doc.setTextColor(40, 40, 40);\r\n        doc.text(\"Quick Summary\", 14, finalY);\r\n        \r\n        const lowestPrice = Math.min(...comparisonList.map(item => item.finalPrice));\r\n        const highestPrice = Math.max(...comparisonList.map(item => item.finalPrice));\r\n        const priceDiff = highestPrice - lowestPrice;\r\n        const currency = comparisonList[0].result.currency;\r\n        \r\n        doc.setFontSize(10);\r\n        doc.setTextColor(60, 60, 60);\r\n        doc.text(`Lowest Price: ${currency} ${lowestPrice.toLocaleString()}`, 14, finalY + 8);\r\n        doc.text(`Highest Price: ${currency} ${highestPrice.toLocaleString()}`, 14, finalY + 14);\r\n        doc.text(`Price Difference: ${currency} ${priceDiff.toLocaleString()}`, 14, finalY + 20);\r\n      }\r\n      \r\n      // Footer\r\n      const pageCount = doc.getNumberOfPages();\r\n      doc.setFontSize(8);\r\n      doc.setTextColor(150, 150, 150);\r\n      for (let i = 1; i <= pageCount; i++) {\r\n        doc.setPage(i);\r\n        doc.text(\r\n          `Page ${i} of ${pageCount}`,\r\n          pageWidth / 2,\r\n          doc.internal.pageSize.height - 10,\r\n          { align: \"center\" }\r\n        );\r\n      }\r\n      \r\n      // Save PDF\r\n      doc.save(`diamond-comparison-${new Date().getTime()}.pdf`);\r\n      toast.success(\"PDF exported successfully!\");\r\n    } catch (error) {\r\n      console.error(\"PDF export error:\", error);\r\n      toast.error(\"Failed to export PDF\");\r\n    }\r\n  };\r\n\r\n  const resetCalculator = () => {\r\n    setCarat(\"\");\r\n    setShape(\"\");\r\n    setColor(\"\");\r\n    setClarity(\"\");\r\n    setCut(\"\");\r\n    setAdjustmentInput(\"\");\r\n    setAdjustmentType(\"discount\");\r\n    setResult(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-background via-background/95 to-background/90\">\r\n      <Header />\r\n      <UnlimitedUnlockedCelebration \r\n        show={showCelebration} \r\n        onClose={() => setShowCelebration(false)} \r\n      />\r\n      \r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        <div className=\"mb-4\">\r\n          <BackToHomeButton />\r\n        </div>\r\n        \r\n        <ScrollReveal>\r\n          <div className=\"text-center mb-8 md:mb-12\">\r\n            <motion.div\r\n              initial={{ scale: 0 }}\r\n              animate={{ scale: 1 }}\r\n              transition={{ type: \"spring\", stiffness: 200, damping: 15 }}\r\n              className=\"inline-block mb-3 md:mb-4\"\r\n            >\r\n              <Diamond className=\"h-12 w-12 md:h-16 md:w-16 text-primary mx-auto\" />\r\n            </motion.div>\r\n            <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-primary via-primary/80 to-primary bg-clip-text text-transparent px-4\">\r\n              Diamond Price Calculator\r\n            </h1>\r\n            <p className=\"text-base md:text-lg text-muted-foreground max-w-2xl mx-auto px-4\">\r\n              Get instant estimates based on the 4Cs\r\n            </p>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"mt-4 gap-2\"\r\n              onClick={() => navigate(\"/diamond-sizing-chart\")}\r\n            >\r\n              <Ruler className=\"h-4 w-4\" />\r\n              View Diamond Sizing Chart\r\n            </Button>\r\n          </div>\r\n        </ScrollReveal>\r\n\r\n        {!isAuthenticated && (\r\n          <ScrollReveal delay={0.05}>\r\n            <div className=\"max-w-6xl mx-auto mb-6\">\r\n              <DiamondCalculatorUpgradeBanner\r\n                remainingCalculations={5 - guestUsageCount}\r\n                totalLimit={5}\r\n              />\r\n            </div>\r\n          </ScrollReveal>\r\n        )}\r\n\r\n        <div className=\"max-w-6xl mx-auto grid lg:grid-cols-3 gap-4 md:gap-6\">\r\n          <ScrollReveal delay={0.1} className=\"lg:col-span-2\">\r\n            <Card className=\"shadow-xl border-2 border-primary/20 hover:border-primary/40 transition-all duration-300 bg-gradient-to-br from-card via-card to-primary/5\">\r\n              <CardHeader className=\"border-b border-border/50 bg-gradient-to-r from-primary/5 to-transparent p-4 md:p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"flex items-center gap-2 text-lg md:text-2xl\">\r\n                      <Calculator className=\"h-5 w-5 md:h-6 md:w-6 text-primary\" />\r\n                      Diamond Specs\r\n                    </CardTitle>\r\n                    <CardDescription className=\"mt-1 md:mt-2 text-sm\">\r\n                      Enter the 4Cs to calculate value\r\n                    </CardDescription>\r\n                  </div>\r\n                  <div className=\"flex flex-col items-end gap-2\">\r\n                    <Diamond className=\"h-8 w-8 md:h-12 md:w-12 text-primary/20\" />\r\n                    {!isAuthenticated && (\r\n                      <Badge variant={guestUsageCount >= 5 ? \"destructive\" : guestUsageCount >= 3 ? \"secondary\" : \"outline\"} className=\"text-xs\">\r\n                        {guestUsageCount}/5\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 md:space-y-6 p-4 md:p-6\">\r\n                <div className=\"grid gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"carat\" className=\"text-sm font-semibold flex items-center gap-2\">\r\n                      <Diamond className=\"h-4 w-4\" />\r\n                      Carat Weight\r\n                    </Label>\r\n                    <Input\r\n                      id=\"carat\"\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      min=\"0.01\"\r\n                      placeholder=\"e.g., 1.50\"\r\n                      value={carat}\r\n                      onChange={(e) => setCarat(e.target.value)}\r\n                      className=\"text-lg\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"shape\" className=\"text-sm font-semibold\">Shape</Label>\r\n                    <Select value={shape} onValueChange={setShape}>\r\n                      <SelectTrigger id=\"shape\">\r\n                        <SelectValue placeholder=\"Select shape\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {shapes.map((s) => (\r\n                          <SelectItem key={s} value={s}>\r\n                            {s}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid md:grid-cols-3 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"color\" className=\"text-sm font-semibold\">Color Grade</Label>\r\n                    <Select value={color} onValueChange={setColor}>\r\n                      <SelectTrigger id=\"color\">\r\n                        <SelectValue placeholder=\"Select color\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {colors.map((c) => (\r\n                          <SelectItem key={c} value={c}>\r\n                            {c}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"clarity\" className=\"text-sm font-semibold\">Clarity Grade</Label>\r\n                    <Select value={clarity} onValueChange={setClarity}>\r\n                      <SelectTrigger id=\"clarity\">\r\n                        <SelectValue placeholder=\"Select clarity\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {clarities.map((cl) => (\r\n                          <SelectItem key={cl} value={cl}>\r\n                            {cl}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"cut\" className=\"text-sm font-semibold\">Cut Grade</Label>\r\n                    <Select value={cut} onValueChange={setCut}>\r\n                      <SelectTrigger id=\"cut\">\r\n                        <SelectValue placeholder=\"Select cut\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {cuts.map((ct) => (\r\n                          <SelectItem key={ct} value={ct}>\r\n                            {ct}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"border-t border-border/50 pt-4 md:pt-6\">\r\n                  <Tabs value={adjustmentType} onValueChange={(v) => setAdjustmentType(v as \"discount\" | \"markup\")}>\r\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-3\">\r\n                      <Label className=\"text-sm font-semibold\">Price Adjustment</Label>\r\n                      <TabsList className=\"grid w-full sm:w-[200px] grid-cols-2\">\r\n                        <TabsTrigger value=\"discount\" className=\"flex items-center gap-1 text-xs sm:text-sm\">\r\n                          <TrendingDown className=\"h-3 w-3\" />\r\n                          <span className=\"hidden sm:inline\">Discount</span>\r\n                          <span className=\"sm:hidden\">-</span>\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"markup\" className=\"flex items-center gap-1 text-xs sm:text-sm\">\r\n                          <TrendingUp className=\"h-3 w-3\" />\r\n                          <span className=\"hidden sm:inline\">Markup</span>\r\n                          <span className=\"sm:hidden\">+</span>\r\n                        </TabsTrigger>\r\n                      </TabsList>\r\n                    </div>\r\n\r\n                    <TabsContent value=\"discount\" className=\"mt-0\">\r\n                      <div className=\"space-y-2\">\r\n                        <Input\r\n                          placeholder=\"Enter discount: 50, 50%, 1/2, 3/4\"\r\n                          value={adjustmentInput}\r\n                          onChange={(e) => setAdjustmentInput(e.target.value)}\r\n                          className=\"text-lg\"\r\n                        />\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">\r\n                            {adjustmentPercentage > 0 ? `${adjustmentPercentage.toFixed(1)}% discount` : 'No discount'}\r\n                          </Badge>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            Accepts percentages or fractions\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"markup\" className=\"mt-0\">\r\n                      <div className=\"space-y-2\">\r\n                        <Input\r\n                          placeholder=\"Enter markup: 20, 20%, 1/5, 1/4\"\r\n                          value={adjustmentInput}\r\n                          onChange={(e) => setAdjustmentInput(e.target.value)}\r\n                          className=\"text-lg\"\r\n                        />\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">\r\n                            {adjustmentPercentage > 0 ? `${adjustmentPercentage.toFixed(1)}% markup` : 'No markup'}\r\n                          </Badge>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            Accepts percentages or fractions\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </TabsContent>\r\n                  </Tabs>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row gap-3 pt-6 border-t border-border/50\">\r\n                  <Button\r\n                    onClick={calculatePrice}\r\n                    disabled={loading}\r\n                    size=\"lg\"\r\n                    className=\"flex-1 text-lg font-semibold shadow-lg\"\r\n                  >\r\n                    <Calculator className=\"h-5 w-5 mr-2\" />\r\n                    {loading ? \"Calculating...\" : \"Calculate Price\"}\r\n                  </Button>\r\n                  <Button\r\n                    onClick={testWithSampleData}\r\n                    variant=\"secondary\"\r\n                    disabled={loading}\r\n                    size=\"lg\"\r\n                  >\r\n                    <Diamond className=\"h-4 w-4 mr-2\" />\r\n                    Test\r\n                  </Button>\r\n                  <Button\r\n                    onClick={resetCalculator}\r\n                    variant=\"outline\"\r\n                    disabled={loading}\r\n                    size=\"lg\"\r\n                  >\r\n                    <RotateCcw className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => setSoundEnabled(!soundEnabled)}\r\n                    variant=\"outline\"\r\n                    size=\"lg\"\r\n                    title={soundEnabled ? \"Mute celebration sound\" : \"Enable celebration sound\"}\r\n                  >\r\n                    {soundEnabled ? <Volume2 className=\"h-4 w-4\" /> : <VolumeX className=\"h-4 w-4\" />}\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </ScrollReveal>\r\n\r\n          <ScrollReveal delay={0.2}>\r\n            <Card className=\"shadow-xl border-2 border-primary/20 bg-gradient-to-br from-card via-primary/5 to-card sticky top-24\">\r\n              <CardHeader className=\"border-b border-border/50 bg-gradient-to-r from-primary/10 to-transparent\">\r\n                <CardTitle className=\"flex items-center gap-2 text-xl\">\r\n                  <Sparkles className=\"h-6 w-6 text-primary\" />\r\n                  Estimated Value\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Based on current market rates\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"pt-6\">\r\n                {result ? (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, scale: 0.95 }}\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                    className=\"space-y-6\"\r\n                  >\r\n                    <div className=\"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent rounded-xl p-6 space-y-5 border border-primary/20\">\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-xs uppercase tracking-wider text-muted-foreground font-medium\">Price per Carat</p>\r\n                        <p className=\"text-3xl font-bold flex items-baseline gap-2\">\r\n                          <span className=\"text-lg text-muted-foreground\">{result.currency}</span>\r\n                          <AnimatedCounter end={result.pricePerCarat} />\r\n                        </p>\r\n                      </div>\r\n                      \r\n                      <div className=\"border-t border-primary/20 pt-5\">\r\n                        <p className=\"text-xs uppercase tracking-wider text-muted-foreground font-medium mb-2\">Base Total Price</p>\r\n                        <p className=\"text-5xl font-bold bg-gradient-to-r from-primary via-primary/80 to-primary/60 bg-clip-text text-transparent flex items-baseline gap-2\">\r\n                          <span className=\"text-xl opacity-80\">{result.currency}</span>\r\n                          <AnimatedCounter end={result.totalPrice} />\r\n                        </p>\r\n                      </div>\r\n\r\n                      {adjustmentPercentage > 0 && (\r\n                        <div className=\"border-t border-primary/20 pt-5 bg-gradient-to-r from-green-500/10 to-blue-500/10 -m-6 mt-5 p-6 rounded-b-xl\">\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            {adjustmentType === \"discount\" ? (\r\n                              <TrendingDown className=\"h-5 w-5 text-green-600\" />\r\n                            ) : (\r\n                              <TrendingUp className=\"h-5 w-5 text-blue-600\" />\r\n                            )}\r\n                            <p className=\"text-sm font-semibold uppercase tracking-wide\">\r\n                              After {adjustmentPercentage.toFixed(1)}% {adjustmentType}\r\n                            </p>\r\n                          </div>\r\n                          <p className={`text-4xl font-bold ${\r\n                            adjustmentType === \"discount\" \r\n                              ? \"text-green-600 dark:text-green-400\" \r\n                              : \"text-blue-600 dark:text-blue-400\"\r\n                          } flex items-baseline gap-2`}>\r\n                            <span className=\"text-lg\">{result.currency}</span>\r\n                            <AnimatedCounter \r\n                              end={Math.round(\r\n                                adjustmentType === \"discount\"\r\n                                  ? result.totalPrice * (1 - adjustmentPercentage / 100)\r\n                                  : result.totalPrice * (1 + adjustmentPercentage / 100)\r\n                              )} \r\n                            />\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground mt-2 flex items-center gap-2\">\r\n                            {adjustmentType === \"discount\" ? (\r\n                              <>\r\n                                <Badge variant=\"secondary\" className=\"bg-green-500/20 text-green-700 dark:text-green-300\">\r\n                                  Save {result.currency} {Math.round(result.totalPrice * (adjustmentPercentage / 100)).toLocaleString()}\r\n                                </Badge>\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Badge variant=\"secondary\" className=\"bg-blue-500/20 text-blue-700 dark:text-blue-300\">\r\n                                  +{result.currency} {Math.round(result.totalPrice * (adjustmentPercentage / 100)).toLocaleString()}\r\n                                </Badge>\r\n                              </>\r\n                            )}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-muted/30 rounded-lg p-4 border border-border/50\">\r\n                      <p className=\"font-semibold mb-3 flex items-center gap-2\">\r\n                        <Diamond className=\"h-4 w-4 text-primary\" />\r\n                        Diamond Summary\r\n                      </p>\r\n                      <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                        <div>\r\n                          <p className=\"text-muted-foreground text-xs\">Weight</p>\r\n                          <p className=\"font-medium\">{carat} Carat</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-muted-foreground text-xs\">Shape</p>\r\n                          <p className=\"font-medium\">{shape}</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-muted-foreground text-xs\">Color</p>\r\n                          <p className=\"font-medium\">{color}</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-muted-foreground text-xs\">Clarity</p>\r\n                          <p className=\"font-medium\">{clarity}</p>\r\n                        </div>\r\n                        <div className=\"col-span-2\">\r\n                          <p className=\"text-muted-foreground text-xs\">Cut</p>\r\n                          <p className=\"font-medium\">{cut}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-xs text-muted-foreground text-center leading-relaxed bg-muted/20 rounded p-3\">\r\n                      <strong>Disclaimer:</strong> This is an estimate based on available market data. Actual prices may vary based on market conditions, certifications, and specific diamond characteristics.\r\n                    </p>\r\n\r\n                    <Button\r\n                      onClick={addToComparison}\r\n                      variant=\"outline\"\r\n                      size=\"lg\"\r\n                      className=\"w-full mt-4\"\r\n                    >\r\n                      <Plus className=\"h-4 w-4 mr-2\" />\r\n                      Add to Comparison ({comparisonList.length}/4)\r\n                    </Button>\r\n                  </motion.div>\r\n                ) : (\r\n                  <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n                    <motion.div\r\n                      animate={{ \r\n                        rotate: [0, 10, -10, 0],\r\n                        scale: [1, 1.05, 1]\r\n                      }}\r\n                      transition={{ \r\n                        duration: 3,\r\n                        repeat: Infinity,\r\n                        ease: \"easeInOut\"\r\n                      }}\r\n                    >\r\n                      <Diamond className=\"h-28 w-28 text-primary/20 mb-6\" />\r\n                    </motion.div>\r\n                    <p className=\"text-muted-foreground max-w-[200px] text-sm\">\r\n                      Enter your diamond specifications to see the estimated value\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </ScrollReveal>\r\n        </div>\r\n\r\n        <ScrollReveal delay={0.3}>\r\n          <div className=\"mt-12 max-w-6xl mx-auto\">\r\n            <Card className=\"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-primary/30 shadow-xl\">\r\n              <CardHeader className=\"text-center border-b border-primary/20 pb-6\">\r\n                <CardTitle className=\"text-2xl flex items-center justify-center gap-2\">\r\n                  <Sparkles className=\"h-6 w-6 text-primary\" />\r\n                  Understanding the 4Cs of Diamonds\r\n                </CardTitle>\r\n                <CardDescription className=\"text-base mt-2\">\r\n                  Learn what determines a diamond's value and quality\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"grid md:grid-cols-2 gap-8 pt-8\">\r\n                <motion.div \r\n                  className=\"space-y-3 p-5 rounded-lg bg-card border border-border/50 hover:border-primary/30 transition-all\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                      <Diamond className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg\">Carat Weight</h3>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                    The weight of the diamond, where 1 carat equals 200 milligrams. Larger diamonds are rarer and typically more valuable per carat.\r\n                  </p>\r\n                </motion.div>\r\n\r\n                <motion.div \r\n                  className=\"space-y-3 p-5 rounded-lg bg-card border border-border/50 hover:border-primary/30 transition-all\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                      <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg\">Color</h3>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                    Graded from D (colorless) to Z (light color). D-F grades are considered colorless and most valuable, showing no visible color tint.\r\n                  </p>\r\n                </motion.div>\r\n\r\n                <motion.div \r\n                  className=\"space-y-3 p-5 rounded-lg bg-card border border-border/50 hover:border-primary/30 transition-all\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                      <Diamond className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg\">Clarity</h3>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                    Measures internal and external imperfections (inclusions and blemishes). FL (Flawless) is the highest grade, with no inclusions visible under 10x magnification.\r\n                  </p>\r\n                </motion.div>\r\n\r\n                <motion.div \r\n                  className=\"space-y-3 p-5 rounded-lg bg-card border border-border/50 hover:border-primary/30 transition-all\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                >\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                      <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg\">Cut</h3>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                    Evaluates how well the diamond reflects light and creates brilliance. An Excellent cut grade maximizes the diamond's sparkle and fire.\r\n                  </p>\r\n                </motion.div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </ScrollReveal>\r\n\r\n        {/* Comparison Section */}\r\n        <AnimatePresence>\r\n          {comparisonList.length > 0 && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 20 }}\r\n              className=\"mt-12 max-w-6xl mx-auto\"\r\n            >\r\n              <Card className=\"shadow-xl border-2 border-primary/30 bg-gradient-to-br from-card via-primary/5 to-card\">\r\n                <CardHeader className=\"border-b border-border/50 bg-gradient-to-r from-primary/10 to-transparent\">\r\n                  <div className=\"flex items-center justify-between flex-wrap gap-4\">\r\n                    <div>\r\n                      <CardTitle className=\"flex items-center gap-2 text-2xl\">\r\n                        <Scale className=\"h-6 w-6 text-primary\" />\r\n                        Diamond Comparison\r\n                      </CardTitle>\r\n                      <CardDescription className=\"mt-2\">\r\n                        Compare up to 4 diamond specifications side-by-side\r\n                      </CardDescription>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button\r\n                        onClick={exportComparisonToPDF}\r\n                        variant=\"default\"\r\n                        size=\"sm\"\r\n                        className=\"gap-2\"\r\n                      >\r\n                        <Download className=\"h-4 w-4\" />\r\n                        Export PDF\r\n                      </Button>\r\n                      <Button\r\n                        onClick={clearComparison}\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                      >\r\n                        Clear All\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent className=\"p-6\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                    {comparisonList.map((item, index) => (\r\n                      <motion.div\r\n                        key={item.id}\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        exit={{ opacity: 0, scale: 0.9 }}\r\n                        transition={{ delay: index * 0.1 }}\r\n                        className=\"relative\"\r\n                      >\r\n                        <Card className=\"border-2 border-primary/20 hover:border-primary/40 transition-all bg-gradient-to-br from-card to-primary/5\">\r\n                          <Button\r\n                            onClick={() => removeFromComparison(item.id)}\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-destructive text-destructive-foreground hover:bg-destructive/90 z-10\"\r\n                          >\r\n                            <X className=\"h-3 w-3\" />\r\n                          </Button>\r\n                          \r\n                          <CardHeader className=\"pb-3\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Badge variant=\"outline\" className=\"text-xs\">\r\n                                Option {index + 1}\r\n                              </Badge>\r\n                              <Diamond className=\"h-4 w-4 text-primary\" />\r\n                            </div>\r\n                          </CardHeader>\r\n                          \r\n                          <CardContent className=\"space-y-4\">\r\n                            {/* Specs */}\r\n                            <div className=\"space-y-2 text-sm\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Carat:</span>\r\n                                <span className=\"font-semibold\">{item.specs.carat}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Shape:</span>\r\n                                <span className=\"font-semibold\">{item.specs.shape}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Color:</span>\r\n                                <span className=\"font-semibold\">{item.specs.color}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Clarity:</span>\r\n                                <span className=\"font-semibold\">{item.specs.clarity}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Cut:</span>\r\n                                <span className=\"font-semibold\">{item.specs.cut}</span>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <Separator />\r\n\r\n                            {/* Pricing */}\r\n                            <div className=\"space-y-3\">\r\n                              <div>\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">Price/Carat</p>\r\n                                <p className=\"text-lg font-bold\">\r\n                                  {item.result.currency} {item.result.pricePerCarat.toLocaleString()}\r\n                                </p>\r\n                              </div>\r\n                              \r\n                              <div>\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">Base Price</p>\r\n                                <p className=\"text-xl font-bold\">\r\n                                  {item.result.currency} {item.result.totalPrice.toLocaleString()}\r\n                                </p>\r\n                              </div>\r\n\r\n                              {item.adjustmentPercentage > 0 && (\r\n                                <div className=\"bg-primary/5 rounded-lg p-3 -mx-3\">\r\n                                  <div className=\"flex items-center gap-1 mb-1\">\r\n                                    {item.adjustmentType === \"discount\" ? (\r\n                                      <TrendingDown className=\"h-3 w-3 text-green-600\" />\r\n                                    ) : (\r\n                                      <TrendingUp className=\"h-3 w-3 text-blue-600\" />\r\n                                    )}\r\n                                    <p className=\"text-xs font-medium\">\r\n                                      {item.adjustmentPercentage.toFixed(1)}% {item.adjustmentType}\r\n                                    </p>\r\n                                  </div>\r\n                                  <p className={`text-2xl font-bold ${\r\n                                    item.adjustmentType === \"discount\"\r\n                                      ? \"text-green-600 dark:text-green-400\"\r\n                                      : \"text-blue-600 dark:text-blue-400\"\r\n                                  }`}>\r\n                                    {item.result.currency} {item.finalPrice.toLocaleString()}\r\n                                  </p>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </CardContent>\r\n                        </Card>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Comparison Summary */}\r\n                  {comparisonList.length > 1 && (\r\n                    <div className=\"mt-6 p-4 bg-gradient-to-r from-primary/10 to-transparent rounded-lg border border-primary/20\">\r\n                      <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n                        <Sparkles className=\"h-4 w-4 text-primary\" />\r\n                        Quick Comparison\r\n                      </h4>\r\n                      <div className=\"grid md:grid-cols-3 gap-4 text-sm\">\r\n                        <div>\r\n                          <p className=\"text-muted-foreground mb-1\">Lowest Price:</p>\r\n                          <p className=\"font-bold text-green-600 dark:text-green-400\">\r\n                            {comparisonList[0].result.currency}{\" \"}\r\n                            {Math.min(...comparisonList.map(item => item.finalPrice)).toLocaleString()}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-muted-foreground mb-1\">Highest Price:</p>\r\n                          <p className=\"font-bold text-red-600 dark:text-red-400\">\r\n                            {comparisonList[0].result.currency}{\" \"}\r\n                            {Math.max(...comparisonList.map(item => item.finalPrice)).toLocaleString()}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-muted-foreground mb-1\">Price Difference:</p>\r\n                          <p className=\"font-bold text-primary\">\r\n                            {comparisonList[0].result.currency}{\" \"}\r\n                            {(Math.max(...comparisonList.map(item => item.finalPrice)) - \r\n                              Math.min(...comparisonList.map(item => item.finalPrice))).toLocaleString()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n      <Footer />\r\n      <ThemeSwitcher />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiamondCalculator;\r\n"],"names":["DiamondCalculatorUpgradeBanner","remainingCalculations","totalLimit","showComparison","setShowComparison","useState","navigate","useNavigate","usagePercentage","jsxs","Fragment","jsx","AnimatePresence","motion","Alert","X","Sparkles","AlertDescription","Button","TrendingUp","Crown","ArrowRight","Dialog","DialogContent","DialogHeader","DialogTitle","Zap","DialogDescription","Card","Badge","FeatureItem","Shield","included","text","highlight","Check","UnlimitedUnlockedCelebration","show","onClose","step","setStep","useEffect","animationEnd","defaults","randomInRange","min","max","interval","timeLeft","particleCount","confetti","stepTimer1","stepTimer2","stepTimer3","features","Infinity","e","PartyPopper","feature","index","IconComponent","DiamondCalculator","isAuthenticated","setIsAuthenticated","guestUsageCount","setGuestUsageCount","showCelebration","setShowCelebration","carat","setCarat","shape","setShape","color","setColor","clarity","setClarity","cut","setCut","adjustmentType","setAdjustmentType","adjustmentInput","setAdjustmentInput","loading","setLoading","result","setResult","comparisonList","setComparisonList","soundEnabled","setSoundEnabled","fireConfetti","useCallback","colors","session","supabase","subscription","event","wasGuest","today","stored","date","count","incrementGuestUsage","newCount","checkUsageLimit","toast","adjustmentPercentage","useMemo","input","numerator","denominator","s","numValue","shapes","clarities","cuts","testWithSampleData","calculatePrice","caratNum","lookupShape","data","error","pricePerCarat","totalPrice","playSparkleSound","addToComparison","finalPrice","newItem","removeFromComparison","id","item","clearComparison","exportComparisonToPDF","doc","jsPDF","pageWidth","tableHeaders","_","idx","tableData","autoTable","finalY","lowestPrice","highestPrice","priceDiff","currency","pageCount","i","resetCalculator","Header","BackToHomeButton","ScrollReveal","Diamond","Ruler","CardHeader","CardTitle","Calculator","CardDescription","CardContent","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","c","cl","ct","Tabs","v","TabsList","TabsTrigger","TrendingDown","TabsContent","RotateCcw","Volume2","VolumeX","AnimatedCounter","Plus","Scale","Download","Separator","Footer","ThemeSwitcher"],"mappings":"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"}