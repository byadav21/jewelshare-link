import{b as S,u as D,c as h,j as e}from"./query-vendor-BLxHmmGk.js";import{r as g}from"./react-vendor-BeR0k5Z3.js";import{B as o,C as F,i as P,k as q,g as E,s as u}from"./index-CX6yiz0b.js";import{A as R}from"./AdminLayout-iDUtkfn_.js";import{I as d}from"./input-CiHC6UAI.js";import{T as k}from"./textarea-CBQfWmvq.js";import{B as L}from"./badge-45Abp579.js";import{S as T}from"./switch-7lvrHTHU.js";import{L as i}from"./label-DbIM3Eg1.js";import{ai as A,R as M,Y as I,aT as O,ar as Q,u as l}from"./ui-vendor-DjQqXt9S.js";import{D as B,a as K,b as U,c as z,d as H}from"./dialog-KVJ8gRMk.js";import{M as Y}from"./MediaUpload-D_Yhy2BU.js";import{A as $}from"./AdminLoadingSkeleton-DpaOBF9G.js";import{A as G}from"./AdminEmptyState-1jKiT_K8.js";import"./supabase-vendor-VSDMYZ1k.js";import"./separator-D0WC8Ha9.js";import"./index-DhS5fNEb.js";import"./index-D6fUEw85.js";import"./NavLink-Bvq0lq1P.js";import"./index-BC78nHQ6.js";import"./index-DVcnno33.js";import"./index-DjQc2W_p.js";function fe(){const m=S(),[b,n]=g.useState(!1),[c,f]=g.useState(null),[a,r]=g.useState({title:"",subtitle:"",content:"",publication:"",publication_logo:"",external_url:"",published_date:new Date().toISOString().split("T")[0],featured:!1}),{data:p,isLoading:v}=D({queryKey:["admin-press"],queryFn:async()=>{const{data:s,error:t}=await u.from("press_releases").select("*").order("published_date",{ascending:!1});if(t)throw t;return s}}),y=h({mutationFn:async s=>{const{error:t}=await u.from("press_releases").insert(s);if(t)throw t},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release created successfully"),n(!1),x()},onError:()=>l.error("Failed to create press release")}),N=h({mutationFn:async({id:s,data:t})=>{const{error:j}=await u.from("press_releases").update(t).eq("id",s);if(j)throw j},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release updated successfully"),n(!1),x()},onError:()=>l.error("Failed to update press release")}),w=h({mutationFn:async s=>{const{error:t}=await u.from("press_releases").delete().eq("id",s);if(t)throw t},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-press"]}),l.success("Press release deleted successfully")},onError:()=>l.error("Failed to delete press release")}),x=()=>{r({title:"",subtitle:"",content:"",publication:"",publication_logo:"",external_url:"",published_date:new Date().toISOString().split("T")[0],featured:!1}),f(null)},C=s=>{f(s),r({title:s.title,subtitle:s.subtitle||"",content:s.content,publication:s.publication||"",publication_logo:s.publication_logo||"",external_url:s.external_url||"",published_date:s.published_date,featured:s.featured||!1}),n(!0)},_=s=>{s.preventDefault(),c?N.mutate({id:c.id,data:a}):y.mutate(a)};return e.jsx(R,{children:e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Press Releases"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage press coverage and media mentions"})]}),e.jsxs(B,{open:b,onOpenChange:n,children:[e.jsx(K,{asChild:!0,children:e.jsxs(o,{onClick:x,className:"shadow-md hover:shadow-lg transition-all",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"New Release"]})}),e.jsxs(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(z,{children:e.jsx(H,{children:c?"Edit Press Release":"Create Press Release"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Title"}),e.jsx(d,{value:a.title,onChange:s=>r({...a,title:s.target.value}),required:!0,className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Subtitle"}),e.jsx(d,{value:a.subtitle,onChange:s=>r({...a,subtitle:s.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Content"}),e.jsx(k,{value:a.content,onChange:s=>r({...a,content:s.target.value}),rows:8,required:!0,className:"mt-1.5"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Publication"}),e.jsx(d,{value:a.publication,onChange:s=>r({...a,publication:s.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Published Date"}),e.jsx(d,{type:"date",value:a.published_date,onChange:s=>r({...a,published_date:s.target.value}),required:!0,className:"mt-1.5"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Publication Logo"}),e.jsx("div",{className:"mt-1.5",children:e.jsx(Y,{bucket:"press-media",onUploadComplete:s=>r({...a,publication_logo:s}),currentImage:a.publication_logo})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"External URL"}),e.jsx(d,{type:"url",value:a.external_url,onChange:s=>r({...a,external_url:s.target.value}),placeholder:"https://...",className:"mt-1.5"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(T,{checked:a.featured,onCheckedChange:s=>r({...a,featured:s})}),e.jsx(i,{children:"Featured"})]}),e.jsxs(o,{type:"submit",className:"w-full",children:[c?"Update":"Create"," Release"]})]})]})]})]}),v?e.jsx($,{}):!p||p.length===0?e.jsx(G,{icon:M,title:"No press releases yet",description:"Add press releases to showcase your media coverage and announcements",actionLabel:"Create First Release",onAction:()=>n(!0)}):e.jsx("div",{className:"grid gap-4",children:p.map((s,t)=>e.jsxs(F,{className:"bg-gradient-card border-border/50 shadow-md hover:shadow-lg transition-all duration-300 animate-fade-in",style:{animationDelay:`${t*50}ms`},children:[e.jsx(P,{children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(q,{className:"text-xl",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center text-sm",children:[s.publication&&e.jsx("span",{className:"font-medium text-foreground",children:s.publication}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.published_date).toLocaleDateString()}),s.featured&&e.jsx(L,{className:"bg-gradient-primary",children:"Featured"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.external_url&&e.jsx(o,{size:"sm",variant:"outline",asChild:!0,className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx("a",{href:s.external_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>C(s),className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>w.mutate(s.id),children:e.jsx(Q,{className:"h-4 w-4"})})]})]})}),e.jsxs(E,{className:"space-y-3",children:[s.subtitle&&e.jsx("p",{className:"text-sm font-medium text-foreground/80",children:s.subtitle}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 leading-relaxed",children:s.content})]})]},s.id))})]})})}export{fe as default};
//# sourceMappingURL=AdminPress-tg5M-xAm.js.map
