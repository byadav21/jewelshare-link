import{j as e}from"./query-vendor-BLxHmmGk.js";import{u as k,r as u}from"./react-vendor-BeR0k5Z3.js";import{F as c,_ as B,B as h,C as A,G as S,H as E,D as P}from"./index-DGlTgSKx.js";import{I as o}from"./input-CEHl5GoJ.js";import{L as l}from"./label-ClRcubO_.js";import{T as U}from"./textarea-DU5hu0UG.js";import{L as T}from"./LogoUpload-B5r2v6aH.js";import{u as g,J as D,q as f,aP as N}from"./ui-vendor-CN4tOqpp.js";import"./supabase-vendor-VSDMYZ1k.js";import"./dialog-CRWggOUB.js";import"./index-CVwUD2ep.js";import"./index-aqCwQlp3.js";import"./slider-Hrq8z6J6.js";import"./index-BdQq_4o_.js";import"./index-BC78nHQ6.js";import"./index-DjQc2W_p.js";const L={elegant:{name:"Elegant",description:"Sophisticated purple and gold palette",primary:"#6B21A8",secondary:"#D97706"},modern:{name:"Modern",description:"Fresh blue and cyan tones",primary:"#0EA5E9",secondary:"#06B6D4"},classic:{name:"Classic",description:"Timeless navy and burgundy",primary:"#1E3A8A",secondary:"#991B1B"},luxury:{name:"Luxury",description:"Premium gold and black elegance",primary:"#D4AF37",secondary:"#1a1a1a"},minimalist:{name:"Minimalist",description:"Clean grayscale simplicity",primary:"#4B5563",secondary:"#9CA3AF"},vibrant:{name:"Vibrant",description:"Bold and energetic colors",primary:"#EC4899",secondary:"#8B5CF6"}},ae=()=>{const w=k(),[_,y]=u.useState(!1),[m,j]=u.useState({}),[x,d]=u.useState("custom"),[a,i]=u.useState({business_name:"",address_line1:"",address_line2:"",city:"",state:"",pincode:"",country:"",email:"",phone:"",whatsapp_number:"",instagram_qr_url:"",whatsapp_qr_url:"",logo_url:"",business_story:"",certifications:[],awards:[],making_charges_per_gram:"",primary_brand_color:"#4F46E5",secondary_brand_color:"#8B5CF6",brand_tagline:""});u.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:{user:r}}=await c.auth.getUser();if(!r)return;const{data:s,error:n}=await c.from("vendor_profiles").select("*").eq("user_id",r.id).maybeSingle();if(n&&n.code!=="PGRST116")throw n;if(s){const t=s;i({business_name:t.business_name||"",address_line1:t.address_line1||"",address_line2:t.address_line2||"",city:t.city||"",state:t.state||"",pincode:t.pincode||"",country:t.country||"",email:t.email||"",phone:t.phone||"",whatsapp_number:t.whatsapp_number||"",instagram_qr_url:t.instagram_qr_url||"",whatsapp_qr_url:t.whatsapp_qr_url||"",logo_url:t.logo_url||"",business_story:t.business_story||"",certifications:t.certifications||[],awards:t.awards||[],making_charges_per_gram:t.making_charges_per_gram||"",primary_brand_color:t.primary_brand_color||"#4F46E5",secondary_brand_color:t.secondary_brand_color||"#8B5CF6",brand_tagline:t.brand_tagline||""}),d(t.brand_theme||"custom")}}catch{g.error("Failed to load vendor profile")}},F=async r=>{r.preventDefault(),y(!0);try{const{data:{user:s}}=await c.auth.getUser();if(!s)throw new Error("Not authenticated");const{error:n}=await c.from("vendor_profiles").upsert({user_id:s.id,...a,brand_theme:x,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(n)throw n;g.success("Vendor profile saved!")}catch(s){g.error(s.message||"Failed to save vendor profile")}finally{y(!1)}},b=async(r,s)=>{try{j({...m,[s]:!0});const{data:{user:n}}=await c.auth.getUser();if(!n)throw new Error("Not authenticated");const t=r.name.split(".").pop(),p=`${n.id}/${s}-qr-${Date.now()}.${t}`,{error:v,data:R}=await c.storage.from("vendor-qr-codes").upload(p,r,{upsert:!0});if(v)throw v;const{data:{publicUrl:q}}=c.storage.from("vendor-qr-codes").getPublicUrl(p);i({...a,[s==="instagram"?"instagram_qr_url":"whatsapp_qr_url"]:q}),g.success(`${s==="instagram"?"Instagram":"WhatsApp"} QR code uploaded!`)}catch(n){g.error(`Failed to upload QR code: ${n.message}`)}finally{j({...m,[s]:!1})}};return e.jsx(B,{children:e.jsx("div",{className:"min-h-screen bg-background py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[e.jsxs(h,{variant:"ghost",onClick:()=>w("/"),className:"mb-6",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Back to Catalog"]}),e.jsxs(A,{children:[e.jsxs(S,{children:[e.jsx(E,{className:"text-3xl font-serif",children:"Vendor Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"This information will be displayed in your shared catalogs"})]}),e.jsx(P,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Brand Logo"}),e.jsx(T,{onUploadComplete:r=>i({...a,logo_url:r}),currentImage:a.logo_url}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically cropped and optimized to 500×500px WebP format. Your logo will appear on PDF invoices and shared catalogs."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"business_name",children:"Business Name *"}),e.jsx(o,{id:"business_name",value:a.business_name,onChange:r=>i({...a,business_name:r.target.value}),placeholder:"GEMHUB",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email *"}),e.jsx(o,{id:"email",type:"email",value:a.email,onChange:r=>i({...a,email:r.target.value}),placeholder:"contact@gemhub.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone *"}),e.jsx(o,{id:"phone",type:"tel",value:a.phone,onChange:r=>i({...a,phone:r.target.value}),placeholder:"+91 98765 43210",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"whatsapp_number",children:"WhatsApp Number *"}),e.jsx(o,{id:"whatsapp_number",type:"tel",value:a.whatsapp_number,onChange:r=>i({...a,whatsapp_number:r.target.value}),placeholder:"+919876543210 (with country code, no spaces)",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter with country code, no spaces (e.g., +919876543210)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address_line1",children:"Address Line 1 *"}),e.jsx(o,{id:"address_line1",value:a.address_line1,onChange:r=>i({...a,address_line1:r.target.value}),placeholder:"Building, Street",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address_line2",children:"Address Line 2"}),e.jsx(o,{id:"address_line2",value:a.address_line2,onChange:r=>i({...a,address_line2:r.target.value}),placeholder:"Area, Landmark"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"city",children:"City *"}),e.jsx(o,{id:"city",value:a.city,onChange:r=>i({...a,city:r.target.value}),placeholder:"Mumbai",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"state",children:"State *"}),e.jsx(o,{id:"state",value:a.state,onChange:r=>i({...a,state:r.target.value}),placeholder:"Maharashtra",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"pincode",children:"Pincode *"}),e.jsx(o,{id:"pincode",value:a.pincode,onChange:r=>i({...a,pincode:r.target.value}),placeholder:"400001",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"country",children:"Country *"}),e.jsx(o,{id:"country",value:a.country,onChange:r=>i({...a,country:r.target.value}),placeholder:"India",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"making_charges_per_gram",children:"Making Charges per Gram (₹)"}),e.jsx(o,{id:"making_charges_per_gram",type:"number",step:"0.01",value:a.making_charges_per_gram,onChange:r=>i({...a,making_charges_per_gram:r.target.value}),placeholder:"150"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be used to auto-calculate making charges for jewelry products"})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Brand Story & Credentials"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"business_story",children:"Business Story"}),e.jsx(U,{id:"business_story",value:a.business_story,onChange:r=>i({...a,business_story:r.target.value}),placeholder:"Tell your brand's story...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Certifications"}),a.certifications.map((r,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:r,onChange:n=>{const t=[...a.certifications];t[s]=n.target.value,i({...a,certifications:t})},placeholder:"e.g., ISO 9001:2015"}),e.jsx(h,{type:"button",variant:"outline",size:"icon",onClick:()=>{const n=a.certifications.filter((t,p)=>p!==s);i({...a,certifications:n})},children:e.jsx(f,{className:"h-4 w-4"})})]},s)),e.jsx(h,{type:"button",variant:"outline",onClick:()=>i({...a,certifications:[...a.certifications,""]}),children:"Add Certification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Awards & Recognition"}),a.awards.map((r,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:r,onChange:n=>{const t=[...a.awards];t[s]=n.target.value,i({...a,awards:t})},placeholder:"e.g., Best Jeweler 2023"}),e.jsx(h,{type:"button",variant:"outline",size:"icon",onClick:()=>{const n=a.awards.filter((t,p)=>p!==s);i({...a,awards:n})},children:e.jsx(f,{className:"h-4 w-4"})})]},s)),e.jsx(h,{type:"button",variant:"outline",onClick:()=>i({...a,awards:[...a.awards,""]}),children:"Add Award"})]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Brand Customization for Estimates"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a preset theme or customize your own brand colors"}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium mb-3 block",children:"Choose a Brand Theme"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[Object.entries(L).map(([r,s])=>e.jsxs("div",{onClick:()=>{d(r),i({...a,primary_brand_color:s.primary,secondary_brand_color:s.secondary})},className:`cursor-pointer rounded-lg border-2 p-4 transition-all hover:scale-105 ${x===r?"border-primary shadow-lg ring-2 ring-primary/20":"border-border hover:border-primary/50"}`,style:{background:`linear-gradient(135deg, ${s.primary}15, ${s.secondary}15)`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:s.primary}}),e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:s.secondary}})]}),e.jsx("p",{className:"font-semibold text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]},r)),e.jsxs("div",{onClick:()=>d("custom"),className:`cursor-pointer rounded-lg border-2 p-4 transition-all hover:scale-105 ${x==="custom"?"border-primary shadow-lg ring-2 ring-primary/20":"border-border hover:border-primary/50"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(N,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"font-semibold text-sm",children:"Custom"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pick your own colors"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"brand_tagline",children:"Brand Tagline"}),e.jsx(o,{id:"brand_tagline",value:a.brand_tagline,onChange:r=>i({...a,brand_tagline:r.target.value}),placeholder:"e.g., Crafting Excellence Since 1985"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will appear on your estimate PDFs below your business name"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"primary_brand_color",children:"Primary Brand Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{id:"primary_brand_color",type:"color",value:a.primary_brand_color,onChange:r=>{i({...a,primary_brand_color:r.target.value}),d("custom")},className:"w-20 h-10"}),e.jsx(o,{type:"text",value:a.primary_brand_color,onChange:r=>{i({...a,primary_brand_color:r.target.value}),d("custom")},placeholder:"#4F46E5",className:"flex-1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for headers and primary accents in PDFs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"secondary_brand_color",children:"Secondary Brand Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{id:"secondary_brand_color",type:"color",value:a.secondary_brand_color,onChange:r=>{i({...a,secondary_brand_color:r.target.value}),d("custom")},className:"w-20 h-10"}),e.jsx(o,{type:"text",value:a.secondary_brand_color,onChange:r=>{i({...a,secondary_brand_color:r.target.value}),d("custom")},placeholder:"#8B5CF6",className:"flex-1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for secondary elements and highlights"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-16 h-16 rounded border",style:{backgroundColor:a.primary_brand_color}}),e.jsx("div",{className:"w-16 h-16 rounded border",style:{backgroundColor:a.secondary_brand_color}})]})]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"QR Codes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"instagram_qr",children:"Instagram QR Code"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{id:"instagram_qr",type:"file",accept:"image/*",onChange:r=>{var n;const s=(n=r.target.files)==null?void 0:n[0];s&&b(s,"instagram")},disabled:m.instagram}),m.instagram&&e.jsx("span",{className:"text-sm",children:"Uploading..."})]}),a.instagram_qr_url&&e.jsx("img",{src:a.instagram_qr_url,alt:"Instagram QR",className:"w-32 h-32 object-cover mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"whatsapp_qr",children:"WhatsApp QR Code"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{id:"whatsapp_qr",type:"file",accept:"image/*",onChange:r=>{var n;const s=(n=r.target.files)==null?void 0:n[0];s&&b(s,"whatsapp")},disabled:m.whatsapp}),m.whatsapp&&e.jsx("span",{className:"text-sm",children:"Uploading..."})]}),a.whatsapp_qr_url&&e.jsx("img",{src:a.whatsapp_qr_url,alt:"WhatsApp QR",className:"w-32 h-32 object-cover mt-2"})]})]})]}),e.jsx(h,{type:"submit",className:"w-full",disabled:_,children:_?"Saving...":"Save Vendor Profile"})]})})]})]})})})};export{ae as default};
//# sourceMappingURL=VendorProfile-C1oHvDS4.js.map
