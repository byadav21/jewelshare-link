{"version":3,"file":"PlanManagement-BkAzbQll.js","sources":["../../src/pages/PlanManagement.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { AdminGuard } from \"@/components/AdminGuard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { toast } from \"sonner\";\r\nimport { ArrowLeft, Crown, Edit, Search, Bookmark } from \"lucide-react\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\n\r\ninterface VendorPermission {\r\n  id: string;\r\n  user_id: string;\r\n  subscription_plan: 'starter' | 'professional' | 'enterprise' | 'essentials';\r\n  max_products: number | null;\r\n  max_share_links: number | null;\r\n  max_team_members: number | null;\r\n  max_product_images: number | null;\r\n  max_active_sessions: number;\r\n  override_plan_limits: boolean | null;\r\n  can_add_products: boolean | null;\r\n  can_edit_products: boolean | null;\r\n  can_delete_products: boolean | null;\r\n  can_view_catalog: boolean | null;\r\n  can_share_catalog: boolean | null;\r\n  can_manage_share_links: boolean | null;\r\n  can_view_share_links: boolean | null;\r\n  can_view_interests: boolean | null;\r\n  can_manage_team: boolean | null;\r\n  can_edit_profile: boolean | null;\r\n  can_add_vendor_details: boolean | null;\r\n  can_view_custom_orders: boolean | null;\r\n  can_manage_custom_orders: boolean | null;\r\n  can_import_data: boolean | null;\r\n  can_view_sessions: boolean | null;\r\n  can_manage_sessions: boolean | null;\r\n}\r\n\r\ninterface VendorInfo {\r\n  business_name: string | null;\r\n  email: string | null;\r\n}\r\n\r\ninterface VendorWithPlan extends VendorPermission {\r\n  vendor_info: VendorInfo;\r\n}\r\n\r\ninterface PermissionTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  template_config: {\r\n    can_add_products: boolean;\r\n    can_view_catalog: boolean;\r\n    can_edit_products: boolean;\r\n    can_delete_products: boolean;\r\n    can_share_catalog: boolean;\r\n    can_view_share_links: boolean;\r\n    can_manage_share_links: boolean;\r\n    can_view_interests: boolean;\r\n    can_add_vendor_details: boolean;\r\n    can_edit_profile: boolean;\r\n    can_view_custom_orders: boolean;\r\n    can_manage_custom_orders: boolean;\r\n    can_import_data: boolean;\r\n    can_manage_team: boolean;\r\n    can_view_sessions: boolean;\r\n    can_manage_sessions: boolean;\r\n    max_products: number | null;\r\n    max_share_links: number | null;\r\n    max_team_members: number | null;\r\n    max_product_images: number | null;\r\n    max_active_sessions: number;\r\n  };\r\n}\r\n\r\nexport default function PlanManagement() {\r\n  const navigate = useNavigate();\r\n  const [vendors, setVendors] = useState<VendorWithPlan[]>([]);\r\n  const [templates, setTemplates] = useState<PermissionTemplate[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [selectedVendor, setSelectedVendor] = useState<VendorWithPlan | null>(null);\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\r\n  const [customPlanDialogOpen, setCustomPlanDialogOpen] = useState(false);\r\n  const [editedPlan, setEditedPlan] = useState<Partial<VendorPermission>>({});\r\n\r\n  useEffect(() => {\r\n    fetchVendors();\r\n    fetchTemplates();\r\n  }, []);\r\n\r\n  const fetchVendors = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data: permissions, error: permError } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .select(\"*\")\r\n        .order(\"subscription_plan\");\r\n\r\n      if (permError) throw permError;\r\n\r\n      // Fetch vendor profiles to get business names\r\n      const vendorsWithInfo = await Promise.all(\r\n        (permissions || []).map(async (perm) => {\r\n          const { data: profile } = await supabase\r\n            .from(\"vendor_profiles\")\r\n            .select(\"business_name, email\")\r\n            .eq(\"user_id\", perm.user_id)\r\n            .single();\r\n\r\n          return {\r\n            ...perm,\r\n            vendor_info: profile || { business_name: null, email: null }\r\n          };\r\n        })\r\n      );\r\n\r\n      setVendors(vendorsWithInfo);\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to fetch vendors\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchTemplates = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"permission_templates\")\r\n        .select(\"*\")\r\n        .order(\"name\");\r\n\r\n      if (error) throw error;\r\n      setTemplates((data as any) || []);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to fetch templates\", error);\r\n    }\r\n  };\r\n\r\n  const handleApplyTemplate = async (templateId: string) => {\r\n    if (!selectedVendor) return;\r\n\r\n    const template = templates.find(t => t.id === templateId);\r\n    if (!template) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .update(template.template_config)\r\n        .eq(\"user_id\", selectedVendor.user_id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(`Template \"${template.name}\" applied successfully`);\r\n      setCustomPlanDialogOpen(false);\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to apply template\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleChangePlan = async (vendorId: string, newPlan: 'starter' | 'professional' | 'enterprise') => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .update({ subscription_plan: newPlan })\r\n        .eq(\"user_id\", vendorId);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(\"Plan updated successfully\");\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to update plan\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleOpenCustomPlan = (vendor: VendorWithPlan) => {\r\n    setSelectedVendor(vendor);\r\n    setEditedPlan({\r\n      max_products: vendor.max_products,\r\n      max_share_links: vendor.max_share_links,\r\n      max_team_members: vendor.max_team_members,\r\n      max_product_images: vendor.max_product_images,\r\n      max_active_sessions: vendor.max_active_sessions,\r\n      override_plan_limits: vendor.override_plan_limits,\r\n      can_add_products: vendor.can_add_products,\r\n      can_edit_products: vendor.can_edit_products,\r\n      can_delete_products: vendor.can_delete_products,\r\n      can_view_catalog: vendor.can_view_catalog,\r\n      can_share_catalog: vendor.can_share_catalog,\r\n      can_manage_share_links: vendor.can_manage_share_links,\r\n      can_view_share_links: vendor.can_view_share_links,\r\n      can_view_interests: vendor.can_view_interests,\r\n      can_manage_team: vendor.can_manage_team,\r\n      can_edit_profile: vendor.can_edit_profile,\r\n      can_add_vendor_details: vendor.can_add_vendor_details,\r\n      can_view_custom_orders: vendor.can_view_custom_orders,\r\n      can_manage_custom_orders: vendor.can_manage_custom_orders,\r\n      can_import_data: vendor.can_import_data,\r\n      can_view_sessions: vendor.can_view_sessions,\r\n      can_manage_sessions: vendor.can_manage_sessions,\r\n    });\r\n    setCustomPlanDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveCustomPlan = async () => {\r\n    if (!selectedVendor) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .update(editedPlan)\r\n        .eq(\"user_id\", selectedVendor.user_id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(\"Custom plan saved successfully\");\r\n      setCustomPlanDialogOpen(false);\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to save custom plan\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const filteredVendors = vendors.filter(v => \r\n    v.vendor_info.business_name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    v.vendor_info.email?.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const getPlanColor = (plan: string) => {\r\n    switch (plan) {\r\n      case 'starter': return 'bg-secondary text-secondary-foreground';\r\n      case 'professional': return 'bg-primary text-primary-foreground';\r\n      case 'enterprise': return 'bg-accent text-accent-foreground';\r\n      default: return 'bg-muted text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AdminGuard>\r\n      <div className=\"min-h-screen bg-background\">\r\n        <header className=\"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-10\">\r\n          <div className=\"container mx-auto px-6 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/super-admin\")}>\r\n                  <ArrowLeft className=\"h-5 w-5\" />\r\n                </Button>\r\n                <div>\r\n                  <h1 className=\"text-3xl font-bold flex items-center gap-2\">\r\n                    <Crown className=\"h-8 w-8 text-primary\" />\r\n                    Plan Management\r\n                  </h1>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    Manage vendor subscription plans and permissions\r\n                    {templates.length > 0 && ` • ${templates.length} template${templates.length !== 1 ? 's' : ''} available`}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button variant=\"outline\" onClick={() => navigate(\"/permission-presets\")}>\r\n                <Bookmark className=\"mr-2 h-4 w-4\" />\r\n                Manage Templates\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"container mx-auto px-6 py-8\">\r\n          <Card>\r\n            <CardHeader>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <CardTitle>Vendor Plans</CardTitle>\r\n                  <CardDescription>View and manage subscription plans for all vendors</CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 w-72\">\r\n                  <Search className=\"h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Search vendors...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {loading ? (\r\n                <div className=\"text-center py-8 text-muted-foreground\">Loading vendors...</div>\r\n              ) : (\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Business Name</TableHead>\r\n                      <TableHead>Email</TableHead>\r\n                      <TableHead>Current Plan</TableHead>\r\n                      <TableHead>Products</TableHead>\r\n                      <TableHead>Share Links</TableHead>\r\n                      <TableHead>Team Members</TableHead>\r\n                      <TableHead className=\"text-right\">Actions</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {filteredVendors.map((vendor) => (\r\n                      <TableRow key={vendor.id}>\r\n                        <TableCell className=\"font-medium\">\r\n                          {vendor.vendor_info.business_name || 'N/A'}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {vendor.vendor_info.email || 'N/A'}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Badge className={getPlanColor(vendor.subscription_plan)}>\r\n                            {vendor.subscription_plan}\r\n                          </Badge>\r\n                        </TableCell>\r\n                        <TableCell>{vendor.max_products || '∞'}</TableCell>\r\n                        <TableCell>{vendor.max_share_links || '∞'}</TableCell>\r\n                        <TableCell>{vendor.max_team_members || '∞'}</TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <div className=\"flex justify-end gap-2\">\r\n                            <Select\r\n                              value={vendor.subscription_plan}\r\n                              onValueChange={(value: 'starter' | 'professional' | 'enterprise') => \r\n                                handleChangePlan(vendor.user_id, value)\r\n                              }\r\n                            >\r\n                              <SelectTrigger className=\"w-36\">\r\n                                <SelectValue />\r\n                              </SelectTrigger>\r\n                              <SelectContent>\r\n                                <SelectItem value=\"starter\">Starter</SelectItem>\r\n                                <SelectItem value=\"professional\">Professional</SelectItem>\r\n                                <SelectItem value=\"enterprise\">Enterprise</SelectItem>\r\n                              </SelectContent>\r\n                            </Select>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"icon\"\r\n                              onClick={() => handleOpenCustomPlan(vendor)}\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n\r\n        {/* Custom Plan Dialog */}\r\n        <Dialog open={customPlanDialogOpen} onOpenChange={setCustomPlanDialogOpen}>\r\n          <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\r\n            <DialogHeader>\r\n              <DialogTitle>Custom Plan Configuration</DialogTitle>\r\n              <DialogDescription>\r\n                Configure custom limits and permissions for {selectedVendor?.vendor_info.business_name}\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n\r\n            <div className=\"space-y-6 py-4\">\r\n              {/* Template Selection */}\r\n              {templates.length > 0 && (\r\n                <div className=\"space-y-4 p-4 bg-primary/5 rounded-lg border border-primary/20\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <Bookmark className=\"h-5 w-5 text-primary mt-0.5\" />\r\n                    <div className=\"flex-1\">\r\n                      <Label className=\"text-base font-semibold\">Apply Permission Template</Label>\r\n                      <p className=\"text-sm text-muted-foreground mt-1 mb-3\">\r\n                        Quick apply a saved permission preset to this vendor\r\n                      </p>\r\n                      <Select onValueChange={handleApplyTemplate}>\r\n                        <SelectTrigger className=\"w-full\">\r\n                          <SelectValue placeholder=\"Select a template...\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          {templates.map((template) => (\r\n                            <SelectItem key={template.id} value={template.id}>\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"font-medium\">{template.name}</span>\r\n                                {template.description && (\r\n                                  <span className=\"text-xs text-muted-foreground\">{template.description}</span>\r\n                                )}\r\n                              </div>\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Override Toggle */}\r\n              <div className=\"space-y-4 p-4 bg-muted/50 rounded-lg border border-border\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <Label htmlFor=\"override_limits\" className=\"text-base font-semibold\">Override Plan Limits</Label>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">\r\n                      Allow this vendor to bypass all plan restrictions and limits\r\n                    </p>\r\n                  </div>\r\n                  <Switch\r\n                    id=\"override_limits\"\r\n                    checked={editedPlan.override_plan_limits || false}\r\n                    onCheckedChange={(checked) => setEditedPlan({ ...editedPlan, override_plan_limits: checked })}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Limits Section */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold\">Resource Limits</h3>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Max Products</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={editedPlan.max_products || ''}\r\n                      onChange={(e) => setEditedPlan({ ...editedPlan, max_products: parseInt(e.target.value) || null })}\r\n                      placeholder=\"Unlimited\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Max Share Links</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={editedPlan.max_share_links || ''}\r\n                      onChange={(e) => setEditedPlan({ ...editedPlan, max_share_links: parseInt(e.target.value) || null })}\r\n                      placeholder=\"Unlimited\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Max Team Members</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={editedPlan.max_team_members || ''}\r\n                      onChange={(e) => setEditedPlan({ ...editedPlan, max_team_members: parseInt(e.target.value) || null })}\r\n                      placeholder=\"Unlimited\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Max Product Images</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={editedPlan.max_product_images || ''}\r\n                      onChange={(e) => setEditedPlan({ ...editedPlan, max_product_images: parseInt(e.target.value) || null })}\r\n                      placeholder=\"Unlimited\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Max Active Sessions</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={editedPlan.max_active_sessions || ''}\r\n                      onChange={(e) => setEditedPlan({ ...editedPlan, max_active_sessions: parseInt(e.target.value) || 3 })}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Permissions Section */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold\">Permissions</h3>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  {[\r\n                    { key: 'can_add_products', label: 'Add Products' },\r\n                    { key: 'can_edit_products', label: 'Edit Products' },\r\n                    { key: 'can_delete_products', label: 'Delete Products' },\r\n                    { key: 'can_view_catalog', label: 'View Catalog' },\r\n                    { key: 'can_share_catalog', label: 'Share Catalog' },\r\n                    { key: 'can_manage_share_links', label: 'Manage Share Links' },\r\n                    { key: 'can_view_share_links', label: 'View Share Links' },\r\n                    { key: 'can_view_interests', label: 'View Interests' },\r\n                    { key: 'can_manage_team', label: 'Manage Team' },\r\n                    { key: 'can_edit_profile', label: 'Edit Profile' },\r\n                    { key: 'can_add_vendor_details', label: 'Add Vendor Details' },\r\n                    { key: 'can_view_custom_orders', label: 'View Custom Orders' },\r\n                    { key: 'can_manage_custom_orders', label: 'Manage Custom Orders' },\r\n                    { key: 'can_import_data', label: 'Import Data' },\r\n                    { key: 'can_view_sessions', label: 'View Sessions' },\r\n                    { key: 'can_manage_sessions', label: 'Manage Sessions' },\r\n                  ].map(({ key, label }) => (\r\n                    <div key={key} className=\"flex items-center justify-between space-x-2\">\r\n                      <Label htmlFor={key} className=\"text-sm\">{label}</Label>\r\n                      <Switch\r\n                        id={key}\r\n                        checked={editedPlan[key as keyof typeof editedPlan] as boolean || false}\r\n                        onCheckedChange={(checked) => setEditedPlan({ ...editedPlan, [key]: checked })}\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <DialogFooter>\r\n              <Button variant=\"outline\" onClick={() => setCustomPlanDialogOpen(false)}>\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={handleSaveCustomPlan}>\r\n                Save Custom Plan\r\n              </Button>\r\n            </DialogFooter>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n    </AdminGuard>\r\n  );\r\n}\r\n"],"names":["PlanManagement","navigate","useNavigate","vendors","setVendors","useState","templates","setTemplates","loading","setLoading","searchQuery","setSearchQuery","selectedVendor","setSelectedVendor","editDialogOpen","setEditDialogOpen","customPlanDialogOpen","setCustomPlanDialogOpen","editedPlan","setEditedPlan","useEffect","fetchVendors","fetchTemplates","permissions","permError","supabase","vendorsWithInfo","perm","profile","error","toast","data","handleApplyTemplate","templateId","template","t","handleChangePlan","vendorId","newPlan","handleOpenCustomPlan","vendor","handleSaveCustomPlan","filteredVendors","_a","v","_b","getPlanColor","plan","jsx","AdminGuard","jsxs","Button","ArrowLeft","Crown","Bookmark","Card","CardHeader","CardTitle","CardDescription","Search","Input","e","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Badge","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Edit","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Switch","checked","key","label","DialogFooter"],"mappings":"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"}