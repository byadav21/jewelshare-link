import{j as g}from"./query-vendor-BLxHmmGk.js";import{r as L,R as rt}from"./react-vendor-BeR0k5Z3.js";import{E as La,F as Oa,C as Lt,G as Ot,H as Ut,D as Ft,I as yn}from"./index-DGlTgSKx.js";import{A as mi}from"./AdminLayout-B_TMsqTg.js";import{T as vi,a as yi,b as xn,c as bt,d as xi,e as Et}from"./table-BDYxPG4d.js";import{B as rn}from"./badge-DknkzE8c.js";import{T as Ua,a as Fa,b as Xe,c as He}from"./tabs-DfoelxW9.js";import{P as j,s as qa}from"./index-CrGJ45nU.js";import{k as Ga,U as Ba,c as Xa,d as wi,bl as Ze}from"./ui-vendor-CN4tOqpp.js";import"./supabase-vendor-VSDMYZ1k.js";import"./input-CEHl5GoJ.js";import"./separator-C73YyUTd.js";import"./sheet-Cln3_CyD.js";import"./index-CVwUD2ep.js";import"./index-aqCwQlp3.js";import"./NavLink-Br6M-CFW.js";import"./index-BC78nHQ6.js";import"./index-XJCymQHf.js";class at{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(e[r++]=s),n=a}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,a=0;if(e>0){for(a=n[--e];e>0&&(r=a,i=n[--e],a=r+i,o=i-(a-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}function*Ha(t){for(const n of t)yield*n}function xo(t){return Array.from(Ha(t))}function an(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}var R=1e-6,zn=1e-12,G=Math.PI,nt=G/2,he=G/4,lt=G*2,W=180/G,D=G/180,X=Math.abs,mn=Math.atan,ft=Math.atan2,A=Math.cos,Vn=Math.ceil,wo=Math.exp,rr=Math.hypot,de=Math.log,Ye=Math.pow,$=Math.sin,St=Math.sign||function(t){return t>0?1:t<0?-1:0},it=Math.sqrt,Dr=Math.tan;function _o(t){return t>1?0:t<-1?G:Math.acos(t)}function ht(t){return t>1?nt:t<-1?-nt:Math.asin(t)}function _i(t){return(t=$(t/2))*t}function J(){}function pe(t,n){t&&Ni.hasOwnProperty(t.type)&&Ni[t.type](t,n)}var Ei={Feature:function(t,n){pe(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)pe(e[r].geometry,n)}},Ni={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){ir(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ir(e[r],n,0)},Polygon:function(t,n){Si(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Si(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)pe(e[r],n)}};function ir(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function Si(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)ir(t[e],n,1);n.polygonEnd()}function jt(t,n){t&&Ei.hasOwnProperty(t.type)?Ei[t.type](t,n):pe(t,n)}var ge=new at,me=new at,Eo,No,or,ar,sr,Rt={point:J,lineStart:J,lineEnd:J,polygonStart:function(){ge=new at,Rt.lineStart=Za,Rt.lineEnd=Ya},polygonEnd:function(){var t=+ge;me.add(t<0?lt+t:t),this.lineStart=this.lineEnd=this.point=J},sphere:function(){me.add(lt)}};function Za(){Rt.point=Wa}function Ya(){So(Eo,No)}function Wa(t,n){Rt.point=So,Eo=t,No=n,t*=D,n*=D,or=t,ar=A(n=n/2+he),sr=$(n)}function So(t,n){t*=D,n*=D,n=n/2+he;var e=t-or,r=e>=0?1:-1,i=r*e,o=A(n),a=$(n),s=sr*a,c=ar*o+s*A(i),l=s*r*$(i);ge.add(ft(l,c)),or=t,ar=o,sr=a}function Va(t){return me=new at,jt(t,Rt),me*2}function ve(t){return[ft(t[1],t[0]),ht(t[2])]}function tn(t){var n=t[0],e=t[1],r=A(e);return[r*A(n),r*$(n),$(e)]}function Kn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function fn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function We(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Qn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ye(t){var n=it(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Q,dt,tt,xt,Jt,Mo,bo,cn,Cn,Wt,Ht,qt={point:ur,lineStart:Mi,lineEnd:bi,polygonStart:function(){qt.point=Po,qt.lineStart=Ka,qt.lineEnd=Qa,Cn=new at,Rt.polygonStart()},polygonEnd:function(){Rt.polygonEnd(),qt.point=ur,qt.lineStart=Mi,qt.lineEnd=bi,ge<0?(Q=-(tt=180),dt=-(xt=90)):Cn>R?xt=90:Cn<-R&&(dt=-90),Ht[0]=Q,Ht[1]=tt},sphere:function(){Q=-(tt=180),dt=-(xt=90)}};function ur(t,n){Wt.push(Ht=[Q=t,tt=t]),n<dt&&(dt=n),n>xt&&(xt=n)}function jo(t,n){var e=tn([t*D,n*D]);if(cn){var r=fn(cn,e),i=[r[1],-r[0],0],o=fn(i,r);ye(o),o=ve(o);var a=t-Jt,s=a>0?1:-1,c=o[0]*W*s,l,u=X(a)>180;u^(s*Jt<c&&c<s*t)?(l=o[1]*W,l>xt&&(xt=l)):(c=(c+360)%360-180,u^(s*Jt<c&&c<s*t)?(l=-o[1]*W,l<dt&&(dt=l)):(n<dt&&(dt=n),n>xt&&(xt=n))),u?t<Jt?yt(Q,t)>yt(Q,tt)&&(tt=t):yt(t,tt)>yt(Q,tt)&&(Q=t):tt>=Q?(t<Q&&(Q=t),t>tt&&(tt=t)):t>Jt?yt(Q,t)>yt(Q,tt)&&(tt=t):yt(t,tt)>yt(Q,tt)&&(Q=t)}else Wt.push(Ht=[Q=t,tt=t]);n<dt&&(dt=n),n>xt&&(xt=n),cn=e,Jt=t}function Mi(){qt.point=jo}function bi(){Ht[0]=Q,Ht[1]=tt,qt.point=ur,cn=null}function Po(t,n){if(cn){var e=t-Jt;Cn.add(X(e)>180?e+(e>0?360:-360):e)}else Mo=t,bo=n;Rt.point(t,n),jo(t,n)}function Ka(){Rt.lineStart()}function Qa(){Po(Mo,bo),Rt.lineEnd(),X(Cn)>R&&(Q=-(tt=180)),Ht[0]=Q,Ht[1]=tt,cn=null}function yt(t,n){return(n-=t)<0?n+360:n}function Ja(t,n){return t[0]-n[0]}function ji(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function ts(t){var n,e,r,i,o,a,s;if(xt=tt=-(Q=dt=1/0),Wt=[],jt(t,qt),e=Wt.length){for(Wt.sort(Ja),n=1,r=Wt[0],o=[r];n<e;++n)i=Wt[n],ji(r,i[0])||ji(r,i[1])?(yt(r[0],i[1])>yt(r[0],r[1])&&(r[1]=i[1]),yt(i[0],r[1])>yt(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=o.length-1,n=0,r=o[e];n<=e;r=i,++n)i=o[n],(s=yt(r[1],i[0]))>a&&(a=s,Q=i[0],tt=r[1])}return Wt=Ht=null,Q===1/0||dt===1/0?[[NaN,NaN],[NaN,NaN]]:[[Q,dt],[tt,xt]]}var En,xe,we,_e,Ee,Ne,Se,Me,cr,lr,fr,ko,Co,st,ut,ct,Pt={sphere:J,point:Ir,lineStart:Pi,lineEnd:ki,polygonStart:function(){Pt.lineStart=rs,Pt.lineEnd=is},polygonEnd:function(){Pt.lineStart=Pi,Pt.lineEnd=ki}};function Ir(t,n){t*=D,n*=D;var e=A(n);Bn(e*A(t),e*$(t),$(n))}function Bn(t,n,e){++En,we+=(t-we)/En,_e+=(n-_e)/En,Ee+=(e-Ee)/En}function Pi(){Pt.point=ns}function ns(t,n){t*=D,n*=D;var e=A(n);st=e*A(t),ut=e*$(t),ct=$(n),Pt.point=es,Bn(st,ut,ct)}function es(t,n){t*=D,n*=D;var e=A(n),r=e*A(t),i=e*$(t),o=$(n),a=ft(it((a=ut*o-ct*i)*a+(a=ct*r-st*o)*a+(a=st*i-ut*r)*a),st*r+ut*i+ct*o);xe+=a,Ne+=a*(st+(st=r)),Se+=a*(ut+(ut=i)),Me+=a*(ct+(ct=o)),Bn(st,ut,ct)}function ki(){Pt.point=Ir}function rs(){Pt.point=os}function is(){$o(ko,Co),Pt.point=Ir}function os(t,n){ko=t,Co=n,t*=D,n*=D,Pt.point=$o;var e=A(n);st=e*A(t),ut=e*$(t),ct=$(n),Bn(st,ut,ct)}function $o(t,n){t*=D,n*=D;var e=A(n),r=e*A(t),i=e*$(t),o=$(n),a=ut*o-ct*i,s=ct*r-st*o,c=st*i-ut*r,l=rr(a,s,c),u=ht(l),f=l&&-u/l;cr.add(f*a),lr.add(f*s),fr.add(f*c),xe+=u,Ne+=u*(st+(st=r)),Se+=u*(ut+(ut=i)),Me+=u*(ct+(ct=o)),Bn(st,ut,ct)}function as(t){En=xe=we=_e=Ee=Ne=Se=Me=0,cr=new at,lr=new at,fr=new at,jt(t,Pt);var n=+cr,e=+lr,r=+fr,i=rr(n,e,r);return i<zn&&(n=Ne,e=Se,r=Me,xe<R&&(n=we,e=_e,r=Ee),i=rr(n,e,r),i<zn)?[NaN,NaN]:[ft(e,n)*W,ht(r/i)*W]}function on(t){return function(){return t}}function hr(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function dr(t,n){return[X(t)>G?t+Math.round(-t/lt)*lt:t,n]}dr.invert=dr;function Lr(t,n,e){return(t%=lt)?n||e?hr($i(t),Ai(n,e)):$i(t):n||e?Ai(n,e):dr}function Ci(t){return function(n,e){return n+=t,[n>G?n-lt:n<-G?n+lt:n,e]}}function $i(t){var n=Ci(t);return n.invert=Ci(-t),n}function Ai(t,n){var e=A(t),r=$(t),i=A(n),o=$(n);function a(s,c){var l=A(c),u=A(s)*l,f=$(s)*l,h=$(c),d=h*e+u*r;return[ft(f*i-d*o,u*e-h*r),ht(d*i+f*o)]}return a.invert=function(s,c){var l=A(c),u=A(s)*l,f=$(s)*l,h=$(c),d=h*i-f*o;return[ft(f*i+h*o,u*e+d*r),ht(d*e-u*r)]},a}function Ao(t){t=Lr(t[0]*D,t[1]*D,t.length>2?t[2]*D:0);function n(e){return e=t(e[0]*D,e[1]*D),e[0]*=W,e[1]*=W,e}return n.invert=function(e){return e=t.invert(e[0]*D,e[1]*D),e[0]*=W,e[1]*=W,e},n}function To(t,n,e,r,i,o){if(e){var a=A(n),s=$(n),c=r*e;i==null?(i=n+r*lt,o=n-c/2):(i=Ti(a,i),o=Ti(a,o),(r>0?i<o:i>o)&&(i+=r*lt));for(var l,u=i;r>0?u>o:u<o;u-=c)l=ve([a,-s*A(u),-s*$(u)]),t.point(l[0],l[1])}}function Ti(t,n){n=tn(n),n[0]-=t,ye(n);var e=_o(-n[1]);return((-n[2]<0?-e:e)+lt-R)%lt}function ss(){var t=on([0,0]),n=on(90),e=on(6),r,i,o={point:a};function a(c,l){r.push(c=i(c,l)),c[0]*=W,c[1]*=W}function s(){var c=t.apply(this,arguments),l=n.apply(this,arguments)*D,u=e.apply(this,arguments)*D;return r=[],i=Lr(-c[0]*D,-c[1]*D,0).invert,To(o,l,u,1),c={type:"Polygon",coordinates:[r]},r=i=null,c}return s.center=function(c){return arguments.length?(t=typeof c=="function"?c:on([+c[0],+c[1]]),s):t},s.radius=function(c){return arguments.length?(n=typeof c=="function"?c:on(+c),s):n},s.precision=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),s):e},s}function Ro(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:J,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function oe(t,n){return X(t[0]-n[0])<R&&X(t[1]-n[1])<R}function Jn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function zo(t,n,e,r,i){var o=[],a=[],s,c;if(t.forEach(function(m){if(!((N=m.length-1)<=0)){var N,v=m[0],_=m[N],S;if(oe(v,_)){if(!v[2]&&!_[2]){for(i.lineStart(),s=0;s<N;++s)i.point((v=m[s])[0],v[1]);i.lineEnd();return}_[0]+=2*R}o.push(S=new Jn(v,m,null,!0)),a.push(S.o=new Jn(v,null,S,!1)),o.push(S=new Jn(_,m,null,!1)),a.push(S.o=new Jn(_,null,S,!0))}}),!!o.length){for(a.sort(n),Ri(o),Ri(a),s=0,c=a.length;s<c;++s)a[s].e=e=!e;for(var l=o[0],u,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Ri(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Ve(t){return X(t[0])<=G?t[0]:St(t[0])*((X(t[0])+G)%lt-G)}function Do(t,n){var e=Ve(n),r=n[1],i=$(r),o=[$(e),-A(e),0],a=0,s=0,c=new at;i===1?r=nt+R:i===-1&&(r=-nt-R);for(var l=0,u=t.length;l<u;++l)if(h=(f=t[l]).length)for(var f,h,d=f[h-1],m=Ve(d),N=d[1]/2+he,v=$(N),_=A(N),S=0;S<h;++S,m=E,v=P,_=T,d=w){var w=f[S],E=Ve(w),b=w[1]/2+he,P=$(b),T=A(b),I=E-m,U=I>=0?1:-1,F=U*I,z=F>G,B=v*P;if(c.add(ft(B*U*$(F),_*T+B*A(F))),a+=z?I+U*lt:I,z^m>=e^E>=e){var Z=fn(tn(d),tn(w));ye(Z);var y=fn(o,Z);ye(y);var x=(z^I>=0?-1:1)*ht(y[2]);(r>x||r===x&&(Z[0]||Z[1]))&&(s+=z^I>=0?1:-1)}}return(a<-R||a<R&&c<-zn)^s&1}function Io(t,n,e,r){return function(i){var o=n(i),a=Ro(),s=n(a),c=!1,l,u,f,h={point:d,lineStart:N,lineEnd:v,polygonStart:function(){h.point=_,h.lineStart=S,h.lineEnd=w,u=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=N,h.lineEnd=v,u=xo(u);var E=Do(l,r);u.length?(c||(i.polygonStart(),c=!0),zo(u,cs,E,e,i)):E&&(c||(i.polygonStart(),c=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(E,b){t(E,b)&&i.point(E,b)}function m(E,b){o.point(E,b)}function N(){h.point=m,o.lineStart()}function v(){h.point=d,o.lineEnd()}function _(E,b){f.push([E,b]),s.point(E,b)}function S(){s.lineStart(),f=[]}function w(){_(f[0][0],f[0][1]),s.lineEnd();var E=s.clean(),b=a.result(),P,T=b.length,I,U,F;if(f.pop(),l.push(f),f=null,!!T){if(E&1){if(U=b[0],(I=U.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),P=0;P<I;++P)i.point((F=U[P])[0],F[1]);i.lineEnd()}return}T>1&&E&2&&b.push(b.pop().concat(b.shift())),u.push(b.filter(us))}}return h}}function us(t){return t.length>1}function cs(t,n){return((t=t.x)[0]<0?t[1]-nt-R:nt-t[1])-((n=n.x)[0]<0?n[1]-nt-R:nt-n[1])}const pr=Io(function(){return!0},ls,hs,[-G,-nt]);function ls(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?G:-G,c=X(o-n);X(c-G)<R?(t.point(n,e=(e+a)/2>0?nt:-nt),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(o,e),i=0):r!==s&&c>=G&&(X(n-r)<R&&(n-=r*R),X(o-s)<R&&(o-=s*R),e=fs(n,e,o,a),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),i=0),t.point(n=o,e=a),r=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function fs(t,n,e,r){var i,o,a=$(t-e);return X(a)>R?mn(($(n)*(o=A(r))*$(e)-$(r)*(i=A(n))*$(t))/(i*o*a)):(n+r)/2}function hs(t,n,e,r){var i;if(t==null)i=e*nt,r.point(-G,i),r.point(0,i),r.point(G,i),r.point(G,0),r.point(G,-i),r.point(0,-i),r.point(-G,-i),r.point(-G,0),r.point(-G,i);else if(X(t[0]-n[0])>R){var o=t[0]<n[0]?G:-G;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Lo(t){var n=A(t),e=6*D,r=n>0,i=X(n)>R;function o(u,f,h,d){To(d,t,e,h,u,f)}function a(u,f){return A(u)*A(f)>n}function s(u){var f,h,d,m,N;return{lineStart:function(){m=d=!1,N=1},point:function(v,_){var S=[v,_],w,E=a(v,_),b=r?E?0:l(v,_):E?l(v+(v<0?G:-G),_):0;if(!f&&(m=d=E)&&u.lineStart(),E!==d&&(w=c(f,S),(!w||oe(f,w)||oe(S,w))&&(S[2]=1)),E!==d)N=0,E?(u.lineStart(),w=c(S,f),u.point(w[0],w[1])):(w=c(f,S),u.point(w[0],w[1],2),u.lineEnd()),f=w;else if(i&&f&&r^E){var P;!(b&h)&&(P=c(S,f,!0))&&(N=0,r?(u.lineStart(),u.point(P[0][0],P[0][1]),u.point(P[1][0],P[1][1]),u.lineEnd()):(u.point(P[1][0],P[1][1]),u.lineEnd(),u.lineStart(),u.point(P[0][0],P[0][1],3)))}E&&(!f||!oe(f,S))&&u.point(S[0],S[1]),f=S,d=E,h=b},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return N|(m&&d)<<1}}}function c(u,f,h){var d=tn(u),m=tn(f),N=[1,0,0],v=fn(d,m),_=Kn(v,v),S=v[0],w=_-S*S;if(!w)return!h&&u;var E=n*_/w,b=-n*S/w,P=fn(N,v),T=Qn(N,E),I=Qn(v,b);We(T,I);var U=P,F=Kn(T,U),z=Kn(U,U),B=F*F-z*(Kn(T,T)-1);if(!(B<0)){var Z=it(B),y=Qn(U,(-F-Z)/z);if(We(y,T),y=ve(y),!h)return y;var x=u[0],p=f[0],M=u[1],k=f[1],C;p<x&&(C=x,x=p,p=C);var O=p-x,q=X(O-G)<R,H=q||O<R;if(!q&&k<M&&(C=M,M=k,k=C),H?q?M+k>0^y[1]<(X(y[0]-x)<R?M:k):M<=y[1]&&y[1]<=k:O>G^(x<=y[0]&&y[0]<=p)){var V=Qn(U,(-F+Z)/z);return We(V,T),[y,ve(V)]}}}function l(u,f){var h=r?t:G-t,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return Io(a,s,o,r?[0,-t]:[-G,t-G])}function ds(t,n,e,r,i,o){var a=t[0],s=t[1],c=n[0],l=n[1],u=0,f=1,h=c-a,d=l-s,m;if(m=e-a,!(!h&&m>0)){if(m/=h,h<0){if(m<u)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>u&&(u=m)}if(m=i-a,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>u&&(u=m)}else if(h>0){if(m<u)return;m<f&&(f=m)}if(m=r-s,!(!d&&m>0)){if(m/=d,d<0){if(m<u)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>u&&(u=m)}if(m=o-s,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>u&&(u=m)}else if(d>0){if(m<u)return;m<f&&(f=m)}return u>0&&(t[0]=a+u*h,t[1]=s+u*d),f<1&&(n[0]=a+f*h,n[1]=s+f*d),!0}}}}}var Nn=1e9,te=-Nn;function Ue(t,n,e,r){function i(l,u){return t<=l&&l<=e&&n<=u&&u<=r}function o(l,u,f,h){var d=0,m=0;if(l==null||(d=a(l,f))!==(m=a(u,f))||c(l,u)<0^f>0)do h.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+f+4)%4)!==m);else h.point(u[0],u[1])}function a(l,u){return X(l[0]-t)<R?u>0?0:3:X(l[0]-e)<R?u>0?2:1:X(l[1]-n)<R?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),h=a(u,1);return f!==h?f-h:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=Ro(),h,d,m,N,v,_,S,w,E,b,P,T={point:I,lineStart:B,lineEnd:Z,polygonStart:F,polygonEnd:z};function I(x,p){i(x,p)&&u.point(x,p)}function U(){for(var x=0,p=0,M=d.length;p<M;++p)for(var k=d[p],C=1,O=k.length,q=k[0],H,V,Y=q[0],K=q[1];C<O;++C)H=Y,V=K,q=k[C],Y=q[0],K=q[1],V<=r?K>r&&(Y-H)*(r-V)>(K-V)*(t-H)&&++x:K<=r&&(Y-H)*(r-V)<(K-V)*(t-H)&&--x;return x}function F(){u=f,h=[],d=[],P=!0}function z(){var x=U(),p=P&&x,M=(h=xo(h)).length;(p||M)&&(l.polygonStart(),p&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),M&&zo(h,s,x,o,l),l.polygonEnd()),u=l,h=d=m=null}function B(){T.point=y,d&&d.push(m=[]),b=!0,E=!1,S=w=NaN}function Z(){h&&(y(N,v),_&&E&&f.rejoin(),h.push(f.result())),T.point=I,E&&u.lineEnd()}function y(x,p){var M=i(x,p);if(d&&m.push([x,p]),b)N=x,v=p,_=M,b=!1,M&&(u.lineStart(),u.point(x,p));else if(M&&E)u.point(x,p);else{var k=[S=Math.max(te,Math.min(Nn,S)),w=Math.max(te,Math.min(Nn,w))],C=[x=Math.max(te,Math.min(Nn,x)),p=Math.max(te,Math.min(Nn,p))];ds(k,C,t,n,e,r)?(E||(u.lineStart(),u.point(k[0],k[1])),u.point(C[0],C[1]),M||u.lineEnd(),P=!1):M&&(u.lineStart(),u.point(x,p),P=!1)}S=x,w=p,E=M}return T}}function ps(){var t=0,n=0,e=960,r=500,i,o,a;return a={stream:function(s){return i&&o===s?i:i=Ue(t,n,e,r)(o=s)},extent:function(s){return arguments.length?(t=+s[0][0],n=+s[0][1],e=+s[1][0],r=+s[1][1],i=o=null,a):[[t,n],[e,r]]}}}var gr,mr,ae,se,hn={sphere:J,point:J,lineStart:gs,lineEnd:J,polygonStart:J,polygonEnd:J};function gs(){hn.point=vs,hn.lineEnd=ms}function ms(){hn.point=hn.lineEnd=J}function vs(t,n){t*=D,n*=D,mr=t,ae=$(n),se=A(n),hn.point=ys}function ys(t,n){t*=D,n*=D;var e=$(n),r=A(n),i=X(t-mr),o=A(i),a=$(i),s=r*a,c=se*e-ae*r*o,l=ae*e+se*r*o;gr.add(ft(it(s*s+c*c),l)),mr=t,ae=e,se=r}function Oo(t){return gr=new at,jt(t,hn),+gr}var vr=[null,null],xs={type:"LineString",coordinates:vr};function be(t,n){return vr[0]=t,vr[1]=n,Oo(xs)}var zi={Feature:function(t,n){return je(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(je(e[r].geometry,n))return!0;return!1}},Di={Sphere:function(){return!0},Point:function(t,n){return Ii(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ii(e[r],n))return!0;return!1},LineString:function(t,n){return Li(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Li(e[r],n))return!0;return!1},Polygon:function(t,n){return Oi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Oi(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(je(e[r],n))return!0;return!1}};function je(t,n){return t&&Di.hasOwnProperty(t.type)?Di[t.type](t,n):!1}function Ii(t,n){return be(t,n)===0}function Li(t,n){for(var e,r,i,o=0,a=t.length;o<a;o++){if(r=be(t[o],n),r===0||o>0&&(i=be(t[o],t[o-1]),i>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<zn*i))return!0;e=r}return!1}function Oi(t,n){return!!Do(t.map(ws),Uo(n))}function ws(t){return t=t.map(Uo),t.pop(),t}function Uo(t){return[t[0]*D,t[1]*D]}function _s(t,n){return(t&&zi.hasOwnProperty(t.type)?zi[t.type]:je)(t,n)}function Ui(t,n,e){var r=an(t,n-R,e).concat(n);return function(i){return r.map(function(o){return[i,o]})}}function Fi(t,n,e){var r=an(t,n-R,e).concat(n);return function(i){return r.map(function(o){return[o,i]})}}function Or(){var t,n,e,r,i,o,a,s,c=10,l=c,u=90,f=360,h,d,m,N,v=2.5;function _(){return{type:"MultiLineString",coordinates:S()}}function S(){return an(Vn(r/u)*u,e,u).map(m).concat(an(Vn(s/f)*f,a,f).map(N)).concat(an(Vn(n/c)*c,t,c).filter(function(w){return X(w%u)>R}).map(h)).concat(an(Vn(o/l)*l,i,l).filter(function(w){return X(w%f)>R}).map(d))}return _.lines=function(){return S().map(function(w){return{type:"LineString",coordinates:w}})},_.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(N(a).slice(1),m(e).reverse().slice(1),N(s).reverse().slice(1))]}},_.extent=function(w){return arguments.length?_.extentMajor(w).extentMinor(w):_.extentMinor()},_.extentMajor=function(w){return arguments.length?(r=+w[0][0],e=+w[1][0],s=+w[0][1],a=+w[1][1],r>e&&(w=r,r=e,e=w),s>a&&(w=s,s=a,a=w),_.precision(v)):[[r,s],[e,a]]},_.extentMinor=function(w){return arguments.length?(n=+w[0][0],t=+w[1][0],o=+w[0][1],i=+w[1][1],n>t&&(w=n,n=t,t=w),o>i&&(w=o,o=i,i=w),_.precision(v)):[[n,o],[t,i]]},_.step=function(w){return arguments.length?_.stepMajor(w).stepMinor(w):_.stepMinor()},_.stepMajor=function(w){return arguments.length?(u=+w[0],f=+w[1],_):[u,f]},_.stepMinor=function(w){return arguments.length?(c=+w[0],l=+w[1],_):[c,l]},_.precision=function(w){return arguments.length?(v=+w,h=Ui(o,i,90),d=Fi(n,t,v),m=Ui(s,a,90),N=Fi(r,e,v),_):v},_.extentMajor([[-180,-90+R],[180,90-R]]).extentMinor([[-180,-80-R],[180,80+R]])}function Es(){return Or()()}function Ns(t,n){var e=t[0]*D,r=t[1]*D,i=n[0]*D,o=n[1]*D,a=A(r),s=$(r),c=A(o),l=$(o),u=a*A(e),f=a*$(e),h=c*A(i),d=c*$(i),m=2*ht(it(_i(o-r)+a*c*_i(i-e))),N=$(m),v=m?function(_){var S=$(_*=m)/N,w=$(m-_)/N,E=w*u+S*h,b=w*f+S*d,P=w*s+S*l;return[ft(b,E)*W,ft(P,it(E*E+b*b))*W]}:function(){return[e*W,r*W]};return v.distance=m,v}const Dn=t=>t;var Ke=new at,yr=new at,Fo,qo,xr,wr,Gt={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Gt.lineStart=Ss,Gt.lineEnd=bs},polygonEnd:function(){Gt.lineStart=Gt.lineEnd=Gt.point=J,Ke.add(X(yr)),yr=new at},result:function(){var t=Ke/2;return Ke=new at,t}};function Ss(){Gt.point=Ms}function Ms(t,n){Gt.point=Go,Fo=xr=t,qo=wr=n}function Go(t,n){yr.add(wr*t-xr*n),xr=t,wr=n}function bs(){Go(Fo,qo)}var dn=1/0,Pe=dn,In=-dn,ke=In,Ce={point:js,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var t=[[dn,Pe],[In,ke]];return In=ke=-(Pe=dn=1/0),t}};function js(t,n){t<dn&&(dn=t),t>In&&(In=t),n<Pe&&(Pe=n),n>ke&&(ke=n)}var _r=0,Er=0,Sn=0,$e=0,Ae=0,sn=0,Nr=0,Sr=0,Mn=0,Bo,Xo,Ct,$t,Nt={point:nn,lineStart:qi,lineEnd:Gi,polygonStart:function(){Nt.lineStart=Cs,Nt.lineEnd=$s},polygonEnd:function(){Nt.point=nn,Nt.lineStart=qi,Nt.lineEnd=Gi},result:function(){var t=Mn?[Nr/Mn,Sr/Mn]:sn?[$e/sn,Ae/sn]:Sn?[_r/Sn,Er/Sn]:[NaN,NaN];return _r=Er=Sn=$e=Ae=sn=Nr=Sr=Mn=0,t}};function nn(t,n){_r+=t,Er+=n,++Sn}function qi(){Nt.point=Ps}function Ps(t,n){Nt.point=ks,nn(Ct=t,$t=n)}function ks(t,n){var e=t-Ct,r=n-$t,i=it(e*e+r*r);$e+=i*(Ct+t)/2,Ae+=i*($t+n)/2,sn+=i,nn(Ct=t,$t=n)}function Gi(){Nt.point=nn}function Cs(){Nt.point=As}function $s(){Ho(Bo,Xo)}function As(t,n){Nt.point=Ho,nn(Bo=Ct=t,Xo=$t=n)}function Ho(t,n){var e=t-Ct,r=n-$t,i=it(e*e+r*r);$e+=i*(Ct+t)/2,Ae+=i*($t+n)/2,sn+=i,i=$t*t-Ct*n,Nr+=i*(Ct+t),Sr+=i*($t+n),Mn+=i*3,nn(Ct=t,$t=n)}function Zo(t){this._context=t}Zo.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,lt);break}}},result:J};var Mr=new at,Qe,Yo,Wo,bn,jn,Ln={point:J,lineStart:function(){Ln.point=Ts},lineEnd:function(){Qe&&Vo(Yo,Wo),Ln.point=J},polygonStart:function(){Qe=!0},polygonEnd:function(){Qe=null},result:function(){var t=+Mr;return Mr=new at,t}};function Ts(t,n){Ln.point=Vo,Yo=bn=t,Wo=jn=n}function Vo(t,n){bn-=t,jn-=n,Mr.add(it(bn*bn+jn*jn)),bn=t,jn=n}function Ko(){this._string=[]}Ko.prototype={_radius:4.5,_circle:Bi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._string.push("M",t,",",n),this._point=1;break}case 1:{this._string.push("L",t,",",n);break}default:{this._circle==null&&(this._circle=Bi(this._radius)),this._string.push("M",t,",",n,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function Bi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qo(t,n){var e=4.5,r,i;function o(a){return a&&(typeof e=="function"&&i.pointRadius(+e.apply(this,arguments)),jt(a,r(i))),i.result()}return o.area=function(a){return jt(a,r(Gt)),Gt.result()},o.measure=function(a){return jt(a,r(Ln)),Ln.result()},o.bounds=function(a){return jt(a,r(Ce)),Ce.result()},o.centroid=function(a){return jt(a,r(Nt)),Nt.result()},o.projection=function(a){return arguments.length?(r=a==null?(t=null,Dn):(t=a).stream,o):t},o.context=function(a){return arguments.length?(i=a==null?(n=null,new Ko):new Zo(n=a),typeof e!="function"&&i.pointRadius(e),o):n},o.pointRadius=function(a){return arguments.length?(e=typeof a=="function"?a:(i.pointRadius(+a),+a),o):e},o.projection(t).context(n)}function Rs(t){return{stream:Xn(t)}}function Xn(t){return function(n){var e=new br;for(var r in t)e[r]=t[r];return e.stream=n,e}}function br(){}br.prototype={constructor:br,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ur(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),jt(e,t.stream(Ce)),n(Ce.result()),r!=null&&t.clipExtent(r),t}function Fe(t,n,e){return Ur(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+n[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+n[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,c])},e)}function Fr(t,n,e){return Fe(t,[[0,0],n],e)}function qr(t,n,e){return Ur(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},e)}function Gr(t,n,e){return Ur(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},e)}var Xi=16,zs=A(30*D);function Hi(t,n){return+n?Is(t,n):Ds(t)}function Ds(t){return Xn({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Is(t,n){function e(r,i,o,a,s,c,l,u,f,h,d,m,N,v){var _=l-r,S=u-i,w=_*_+S*S;if(w>4*n&&N--){var E=a+h,b=s+d,P=c+m,T=it(E*E+b*b+P*P),I=ht(P/=T),U=X(X(P)-1)<R||X(o-f)<R?(o+f)/2:ft(b,E),F=t(U,I),z=F[0],B=F[1],Z=z-r,y=B-i,x=S*Z-_*y;(x*x/w>n||X((_*Z+S*y)/w-.5)>.3||a*h+s*d+c*m<zs)&&(e(r,i,o,a,s,c,z,B,U,E/=T,b/=T,P,N,v),v.point(z,B),e(z,B,U,E,b,P,l,u,f,h,d,m,N,v))}}return function(r){var i,o,a,s,c,l,u,f,h,d,m,N,v={point:_,lineStart:S,lineEnd:E,polygonStart:function(){r.polygonStart(),v.lineStart=b},polygonEnd:function(){r.polygonEnd(),v.lineStart=S}};function _(I,U){I=t(I,U),r.point(I[0],I[1])}function S(){f=NaN,v.point=w,r.lineStart()}function w(I,U){var F=tn([I,U]),z=t(I,U);e(f,h,u,d,m,N,f=z[0],h=z[1],u=I,d=F[0],m=F[1],N=F[2],Xi,r),r.point(f,h)}function E(){v.point=_,r.lineEnd()}function b(){S(),v.point=P,v.lineEnd=T}function P(I,U){w(i=I,U),o=f,a=h,s=d,c=m,l=N,v.point=w}function T(){e(f,h,u,d,m,N,o,a,i,s,c,l,Xi,r),v.lineEnd=E,E()}return v}}var Ls=Xn({point:function(t,n){this.stream.point(t*D,n*D)}});function Os(t){return Xn({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function Us(t,n,e,r,i){function o(a,s){return a*=r,s*=i,[n+t*a,e-t*s]}return o.invert=function(a,s){return[(a-n)/t*r,(e-s)/t*i]},o}function Zi(t,n,e,r,i,o){if(!o)return Us(t,n,e,r,i);var a=A(o),s=$(o),c=a*t,l=s*t,u=a/t,f=s/t,h=(s*e-a*n)/t,d=(s*n+a*e)/t;function m(N,v){return N*=r,v*=i,[c*N-l*v+n,e-l*N-c*v]}return m.invert=function(N,v){return[r*(u*N-f*v+h),i*(d-f*N-u*v)]},m}function zt(t){return Br(function(){return t})()}function Br(t){var n,e=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,h=1,d=1,m=null,N=pr,v=null,_,S,w,E=Dn,b=.5,P,T,I,U,F;function z(x){return I(x[0]*D,x[1]*D)}function B(x){return x=I.invert(x[0],x[1]),x&&[x[0]*W,x[1]*W]}z.stream=function(x){return U&&F===x?U:U=Ls(Os(u)(N(P(E(F=x)))))},z.preclip=function(x){return arguments.length?(N=x,m=void 0,y()):N},z.postclip=function(x){return arguments.length?(E=x,v=_=S=w=null,y()):E},z.clipAngle=function(x){return arguments.length?(N=+x?Lo(m=x*D):(m=null,pr),y()):m*W},z.clipExtent=function(x){return arguments.length?(E=x==null?(v=_=S=w=null,Dn):Ue(v=+x[0][0],_=+x[0][1],S=+x[1][0],w=+x[1][1]),y()):v==null?null:[[v,_],[S,w]]},z.scale=function(x){return arguments.length?(e=+x,Z()):e},z.translate=function(x){return arguments.length?(r=+x[0],i=+x[1],Z()):[r,i]},z.center=function(x){return arguments.length?(o=x[0]%360*D,a=x[1]%360*D,Z()):[o*W,a*W]},z.rotate=function(x){return arguments.length?(s=x[0]%360*D,c=x[1]%360*D,l=x.length>2?x[2]%360*D:0,Z()):[s*W,c*W,l*W]},z.angle=function(x){return arguments.length?(f=x%360*D,Z()):f*W},z.reflectX=function(x){return arguments.length?(h=x?-1:1,Z()):h<0},z.reflectY=function(x){return arguments.length?(d=x?-1:1,Z()):d<0},z.precision=function(x){return arguments.length?(P=Hi(T,b=x*x),y()):it(b)},z.fitExtent=function(x,p){return Fe(z,x,p)},z.fitSize=function(x,p){return Fr(z,x,p)},z.fitWidth=function(x,p){return qr(z,x,p)},z.fitHeight=function(x,p){return Gr(z,x,p)};function Z(){var x=Zi(e,0,0,h,d,f).apply(null,n(o,a)),p=Zi(e,r-x[0],i-x[1],h,d,f);return u=Lr(s,c,l),T=hr(n,p),I=hr(u,T),P=Hi(T,b),y()}function y(){return U=F=null,z}return function(){return n=t.apply(this,arguments),z.invert=n.invert&&B,Z()}}function Xr(t){var n=0,e=G/3,r=Br(t),i=r(n,e);return i.parallels=function(o){return arguments.length?r(n=o[0]*D,e=o[1]*D):[n*W,e*W]},i}function Fs(t){var n=A(t);function e(r,i){return[r*n,$(i)/n]}return e.invert=function(r,i){return[r/n,ht(i*n)]},e}function Jo(t,n){var e=$(t),r=(e+$(n))/2;if(X(r)<R)return Fs(t);var i=1+e*(2*r-e),o=it(i)/r;function a(s,c){var l=it(i-2*r*$(c))/r;return[l*$(s*=r),o-l*A(s)]}return a.invert=function(s,c){var l=o-c,u=ft(s,X(l))*St(l);return l*r<0&&(u-=G*St(s)*St(l)),[u/r,ht((i-(s*s+l*l)*r*r)/(2*r))]},a}function Te(){return Xr(Jo).scale(155.424).center([0,33.6442])}function ta(){return Te().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function qs(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function Gs(){var t,n,e=ta(),r,i=Te().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Te().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(h,d){c=[h,d]}};function u(h){var d=h[0],m=h[1];return c=null,r.point(d,m),c||(o.point(d,m),c)||(s.point(d,m),c)}u.invert=function(h){var d=e.scale(),m=e.translate(),N=(h[0]-m[0])/d,v=(h[1]-m[1])/d;return(v>=.12&&v<.234&&N>=-.425&&N<-.214?i:v>=.166&&v<.234&&N>=-.214&&N<-.115?a:e).invert(h)},u.stream=function(h){return t&&n===h?t:t=qs([e.stream(n=h),i.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(e.precision(h),i.precision(h),a.precision(h),f()):e.precision()},u.scale=function(h){return arguments.length?(e.scale(h),i.scale(h*.35),a.scale(h),u.translate(e.translate())):e.scale()},u.translate=function(h){if(!arguments.length)return e.translate();var d=e.scale(),m=+h[0],N=+h[1];return r=e.translate(h).clipExtent([[m-.455*d,N-.238*d],[m+.455*d,N+.238*d]]).stream(l),o=i.translate([m-.307*d,N+.201*d]).clipExtent([[m-.425*d+R,N+.12*d+R],[m-.214*d-R,N+.234*d-R]]).stream(l),s=a.translate([m-.205*d,N+.212*d]).clipExtent([[m-.214*d+R,N+.166*d+R],[m-.115*d-R,N+.234*d-R]]).stream(l),f()},u.fitExtent=function(h,d){return Fe(u,h,d)},u.fitSize=function(h,d){return Fr(u,h,d)},u.fitWidth=function(h,d){return qr(u,h,d)},u.fitHeight=function(h,d){return Gr(u,h,d)};function f(){return t=n=null,u}return u.scale(1070)}function na(t){return function(n,e){var r=A(n),i=A(e),o=t(r*i);return o===1/0?[2,0]:[o*i*$(n),o*$(e)]}}function Hn(t){return function(n,e){var r=it(n*n+e*e),i=t(r),o=$(i),a=A(i);return[ft(n*o,r*a),ht(r&&e*o/r)]}}var Hr=na(function(t){return it(2/(1+t))});Hr.invert=Hn(function(t){return 2*ht(t/2)});function Bs(){return zt(Hr).scale(124.75).clipAngle(180-.001)}var Zr=na(function(t){return(t=_o(t))&&t/$(t)});Zr.invert=Hn(function(t){return t});function Xs(){return zt(Zr).scale(79.4188).clipAngle(180-.001)}function Zn(t,n){return[t,de(Dr((nt+n)/2))]}Zn.invert=function(t,n){return[t,2*mn(wo(n))-nt]};function Hs(){return ea(Zn).scale(961/lt)}function ea(t){var n=zt(t),e=n.center,r=n.scale,i=n.translate,o=n.clipExtent,a=null,s,c,l;n.scale=function(f){return arguments.length?(r(f),u()):r()},n.translate=function(f){return arguments.length?(i(f),u()):i()},n.center=function(f){return arguments.length?(e(f),u()):e()},n.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=G*r(),h=n(Ao(n.rotate()).invert([0,0]));return o(a==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===Zn?[[Math.max(h[0]-f,a),s],[Math.min(h[0]+f,c),l]]:[[a,Math.max(h[1]-f,s)],[c,Math.min(h[1]+f,l)]])}return u()}function ne(t){return Dr((nt+t)/2)}function ra(t,n){var e=A(t),r=t===n?$(t):de(e/A(n))/de(ne(n)/ne(t)),i=e*Ye(ne(t),r)/r;if(!r)return Zn;function o(a,s){i>0?s<-nt+R&&(s=-nt+R):s>nt-R&&(s=nt-R);var c=i/Ye(ne(s),r);return[c*$(r*a),i-c*A(r*a)]}return o.invert=function(a,s){var c=i-s,l=St(r)*it(a*a+c*c),u=ft(a,X(c))*St(c);return c*r<0&&(u-=G*St(a)*St(c)),[u/r,2*mn(Ye(i/l,1/r))-nt]},o}function Zs(){return Xr(ra).scale(109.5).parallels([30,30])}function On(t,n){return[t,n]}On.invert=On;function Ys(){return zt(On).scale(152.63)}function ia(t,n){var e=A(t),r=t===n?$(t):(e-A(n))/(n-t),i=e/r+t;if(X(r)<R)return On;function o(a,s){var c=i-s,l=r*a;return[c*$(l),i-c*A(l)]}return o.invert=function(a,s){var c=i-s,l=ft(a,X(c))*St(c);return c*r<0&&(l-=G*St(a)*St(c)),[l/r,i-St(r)*it(a*a+c*c)]},o}function Ws(){return Xr(ia).scale(131.154).center([0,13.9389])}var $n=1.340264,An=-.081106,Tn=893e-6,Rn=.003796,Re=it(3)/2,Vs=12;function Yr(t,n){var e=ht(Re*$(n)),r=e*e,i=r*r*r;return[t*A(e)/(Re*($n+3*An*r+i*(7*Tn+9*Rn*r))),e*($n+An*r+i*(Tn+Rn*r))]}Yr.invert=function(t,n){for(var e=n,r=e*e,i=r*r*r,o=0,a,s,c;o<Vs&&(s=e*($n+An*r+i*(Tn+Rn*r))-n,c=$n+3*An*r+i*(7*Tn+9*Rn*r),e-=a=s/c,r=e*e,i=r*r*r,!(X(a)<zn));++o);return[Re*t*($n+3*An*r+i*(7*Tn+9*Rn*r))/A(e),ht($(e)/Re)]};function Ks(){return zt(Yr).scale(177.158)}function Wr(t,n){var e=A(n),r=A(t)*e;return[e*$(t)/r,$(n)/r]}Wr.invert=Hn(mn);function Qs(){return zt(Wr).scale(144.049).clipAngle(60)}function Js(){var t=1,n=0,e=0,r=1,i=1,o=0,a,s,c=null,l,u,f,h=1,d=1,m=Xn({point:function(E,b){var P=w([E,b]);this.stream.point(P[0],P[1])}}),N=Dn,v,_;function S(){return h=t*r,d=t*i,v=_=null,w}function w(E){var b=E[0]*h,P=E[1]*d;if(o){var T=P*a-b*s;b=b*a+P*s,P=T}return[b+n,P+e]}return w.invert=function(E){var b=E[0]-n,P=E[1]-e;if(o){var T=P*a+b*s;b=b*a-P*s,P=T}return[b/h,P/d]},w.stream=function(E){return v&&_===E?v:v=m(N(_=E))},w.postclip=function(E){return arguments.length?(N=E,c=l=u=f=null,S()):N},w.clipExtent=function(E){return arguments.length?(N=E==null?(c=l=u=f=null,Dn):Ue(c=+E[0][0],l=+E[0][1],u=+E[1][0],f=+E[1][1]),S()):c==null?null:[[c,l],[u,f]]},w.scale=function(E){return arguments.length?(t=+E,S()):t},w.translate=function(E){return arguments.length?(n=+E[0],e=+E[1],S()):[n,e]},w.angle=function(E){return arguments.length?(o=E%360*D,s=$(o),a=A(o),S()):o*W},w.reflectX=function(E){return arguments.length?(r=E?-1:1,S()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,S()):i<0},w.fitExtent=function(E,b){return Fe(w,E,b)},w.fitSize=function(E,b){return Fr(w,E,b)},w.fitWidth=function(E,b){return qr(w,E,b)},w.fitHeight=function(E,b){return Gr(w,E,b)},w}function Vr(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),n*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}Vr.invert=function(t,n){var e=n,r=25,i;do{var o=e*e,a=o*o;e-=i=(e*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-n)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(X(i)>R&&--r>0);return[t/(.8707+(o=e*e)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),e]};function tu(){return zt(Vr).scale(175.295)}function Kr(t,n){return[A(n)*$(t),$(n)]}Kr.invert=Hn(ht);function nu(){return zt(Kr).scale(249.5).clipAngle(90+R)}function Qr(t,n){var e=A(n),r=1+A(t)*e;return[e*$(t)/r,$(n)/r]}Qr.invert=Hn(function(t){return 2*mn(t)});function eu(){return zt(Qr).scale(250).clipAngle(142)}function Jr(t,n){return[de(Dr((nt+n)/2)),-t]}Jr.invert=function(t,n){return[-n,2*mn(wo(t))-nt]};function ru(){var t=ea(Jr),n=t.center,e=t.rotate;return t.center=function(r){return arguments.length?n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?e([r[0],r[1],r.length>2?r[2]+90:90]):(r=e(),[r[0],r[1],r[2]-90])},e([0,0,90]).scale(159.155)}const iu=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:ta,geoAlbersUsa:Gs,geoArea:Va,geoAzimuthalEqualArea:Bs,geoAzimuthalEqualAreaRaw:Hr,geoAzimuthalEquidistant:Xs,geoAzimuthalEquidistantRaw:Zr,geoBounds:ts,geoCentroid:as,geoCircle:ss,geoClipAntimeridian:pr,geoClipCircle:Lo,geoClipExtent:ps,geoClipRectangle:Ue,geoConicConformal:Zs,geoConicConformalRaw:ra,geoConicEqualArea:Te,geoConicEqualAreaRaw:Jo,geoConicEquidistant:Ws,geoConicEquidistantRaw:ia,geoContains:_s,geoDistance:be,geoEqualEarth:Ks,geoEqualEarthRaw:Yr,geoEquirectangular:Ys,geoEquirectangularRaw:On,geoGnomonic:Qs,geoGnomonicRaw:Wr,geoGraticule:Or,geoGraticule10:Es,geoIdentity:Js,geoInterpolate:Ns,geoLength:Oo,geoMercator:Hs,geoMercatorRaw:Zn,geoNaturalEarth1:tu,geoNaturalEarth1Raw:Vr,geoOrthographic:nu,geoOrthographicRaw:Kr,geoPath:Qo,geoProjection:zt,geoProjectionMutator:Br,geoRotation:Ao,geoStereographic:eu,geoStereographicRaw:Qr,geoStream:jt,geoTransform:Rs,geoTransverseMercator:ru,geoTransverseMercatorRaw:Jr},Symbol.toStringTag,{value:"Module"}));function ou(t){return t}function au(t){if(t==null)return ou;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(s,c){c||(n=e=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(n+=s[0])*r+o,f[1]=(e+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function su(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}function uu(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(e){return Yi(t,e)})}:Yi(t,n)}function Yi(t,n){var e=n.id,r=n.bbox,i=n.properties==null?{}:n.properties,o=oa(t,n);return e==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function oa(t,n){var e=au(t.transform),r=t.arcs;function i(u,f){f.length&&f.pop();for(var h=r[u<0?~u:u],d=0,m=h.length;d<m;++d)f.push(e(h[d],d));u<0&&su(f,m)}function o(u){return e(u)}function a(u){for(var f=[],h=0,d=u.length;h<d;++h)i(u[h],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":h=o(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(o);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=c(u.arcs);break;case"MultiPolygon":h=u.arcs.map(c);break;default:return null}return{type:f,coordinates:h}}return l(n)}function cu(t,n){var e={},r={},i={},o=[],a=-1;n.forEach(function(l,u){var f=t.arcs[l<0?~l:l],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=n[++a],n[a]=l,n[u]=h)}),n.forEach(function(l){var u=s(l),f=u[0],h=u[1],d,m;if(d=i[f])if(delete i[d.end],d.push(l),d.end=h,m=r[h]){delete r[m.start];var N=m===d?d:d.concat(m);r[N.start=d.start]=i[N.end=m.end]=N}else r[d.start]=i[d.end]=d;else if(d=r[h])if(delete r[d.start],d.unshift(l),d.start=f,m=i[f]){delete i[m.end];var v=m===d?d:m.concat(d);r[v.start=m.start]=i[v.end=d.end]=v}else r[d.start]=i[d.end]=d;else d=[l],r[d.start=f]=i[d.end=h]=d});function s(l){var u=t.arcs[l<0?~l:l],f=u[0],h;return t.transform?(h=[0,0],u.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=u[u.length-1],l<0?[h,f]:[f,h]}function c(l,u){for(var f in l){var h=l[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(d){e[d<0?~d:d]=1}),o.push(h)}}return c(i,r),c(r,i),n.forEach(function(l){e[l<0?~l:l]||o.push([l])}),o}function Wi(t){return oa(t,lu.apply(this,arguments))}function lu(t,n,e){var r,i,o;if(arguments.length>1)r=fu(t,n,e);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:cu(t,r)}}function fu(t,n,e){var r=[],i=[],o;function a(f){var h=f<0?~f:f;(i[h]||(i[h]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(n),i.forEach(e==null?function(f){r.push(f[0].i)}:function(f){e(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}var hu={value:()=>{}};function ti(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new ue(e)}function ue(t){this._=t}function du(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}ue.prototype=ti.prototype={constructor:ue,on:function(t,n){var e=this._,r=du(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=pu(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=Vi(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Vi(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ue(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function pu(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Vi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=hu,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var jr="http://www.w3.org/1999/xhtml";const Ki={svg:"http://www.w3.org/2000/svg",xhtml:jr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qe(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Ki.hasOwnProperty(n)?{space:Ki[n],local:t}:t}function gu(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===jr&&n.documentElement.namespaceURI===jr?n.createElement(t):n.createElementNS(e,t)}}function mu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function aa(t){var n=qe(t);return(n.local?mu:gu)(n)}function vu(){}function ni(t){return t==null?vu:function(){return this.querySelector(t)}}function yu(t){typeof t!="function"&&(t=ni(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new pt(r,this._parents)}function sa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xu(){return[]}function ua(t){return t==null?xu:function(){return this.querySelectorAll(t)}}function wu(t){return function(){var n=t.apply(this,arguments);return n==null?[]:sa(n)}}function _u(t){typeof t=="function"?t=wu(t):t=ua(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new pt(r,i)}function ca(t){return function(){return this.matches(t)}}function la(t){return function(n){return n.matches(t)}}var Eu=Array.prototype.find;function Nu(t){return function(){return Eu.call(this.children,t)}}function Su(){return this.firstElementChild}function Mu(t){return this.select(t==null?Su:Nu(typeof t=="function"?t:la(t)))}var bu=Array.prototype.filter;function ju(){return this.children}function Pu(t){return function(){return bu.call(this.children,t)}}function ku(t){return this.selectAll(t==null?ju:Pu(typeof t=="function"?t:la(t)))}function Cu(t){typeof t!="function"&&(t=ca(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new pt(r,this._parents)}function fa(t){return new Array(t.length)}function $u(){return new pt(this._enter||this._groups.map(fa),this._parents)}function ze(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ze.prototype={constructor:ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Au(t){return function(){return t}}function Tu(t,n,e,r,i,o){for(var a=0,s,c=n.length,l=o.length;a<l;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new ze(t,o[a]);for(;a<c;++a)(s=n[a])&&(i[a]=s)}function Ru(t,n,e,r,i,o,a){var s,c,l=new Map,u=n.length,f=o.length,h=new Array(u),d;for(s=0;s<u;++s)(c=n[s])&&(h[s]=d=a.call(c,c.__data__,s,n)+"",l.has(d)?i[s]=c:l.set(d,c));for(s=0;s<f;++s)d=a.call(t,o[s],s,o)+"",(c=l.get(d))?(r[s]=c,c.__data__=o[s],l.delete(d)):e[s]=new ze(t,o[s]);for(s=0;s<u;++s)(c=n[s])&&l.get(h[s])===c&&(i[s]=c)}function zu(t){return t.__data__}function Du(t,n){if(!arguments.length)return Array.from(this,zu);var e=n?Ru:Tu,r=this._parents,i=this._groups;typeof t!="function"&&(t=Au(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,d=sa(t.call(u,u&&u.__data__,l,r)),m=d.length,N=s[l]=new Array(m),v=a[l]=new Array(m),_=c[l]=new Array(h);e(u,f,N,v,_,d,n);for(var S=0,w=0,E,b;S<m;++S)if(E=N[S]){for(S>=w&&(w=S+1);!(b=v[w])&&++w<m;);E._next=b||null}}return a=new pt(a,r),a._enter=s,a._exit=c,a}function Iu(){return new pt(this._exit||this._groups.map(fa),this._parents)}function Lu(t,n,e){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),n!=null&&(i=n(i)),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Ou(t){if(!(t instanceof pt))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=n[s],l=e[s],u=c.length,f=a[s]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;s<r;++s)a[s]=n[s];return new pt(a,this._parents)}function Uu(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Fu(t){t||(t=qu);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(n)}return new pt(i,this._parents).order()}function qu(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Gu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bu(){return Array.from(this)}function Xu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Hu(){let t=0;for(const n of this)++t;return t}function Zu(){return!this.node()}function Yu(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Wu(t){return function(){this.removeAttribute(t)}}function Vu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ku(t,n){return function(){this.setAttribute(t,n)}}function Qu(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ju(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function tc(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function nc(t,n){var e=qe(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Vu:Wu:typeof n=="function"?e.local?tc:Ju:e.local?Qu:Ku)(e,n))}function ha(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ec(t){return function(){this.style.removeProperty(t)}}function rc(t,n,e){return function(){this.style.setProperty(t,n,e)}}function ic(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function oc(t,n,e){return arguments.length>1?this.each((n==null?ec:typeof n=="function"?ic:rc)(t,n,e??"")):pn(this.node(),t)}function pn(t,n){return t.style.getPropertyValue(n)||ha(t).getComputedStyle(t,null).getPropertyValue(n)}function ac(t){return function(){delete this[t]}}function sc(t,n){return function(){this[t]=n}}function uc(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function cc(t,n){return arguments.length>1?this.each((n==null?ac:typeof n=="function"?uc:sc)(t,n)):this.node()[t]}function da(t){return t.trim().split(/^|\s+/)}function ei(t){return t.classList||new pa(t)}function pa(t){this._node=t,this._names=da(t.getAttribute("class")||"")}pa.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ga(t,n){for(var e=ei(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function ma(t,n){for(var e=ei(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function lc(t){return function(){ga(this,t)}}function fc(t){return function(){ma(this,t)}}function hc(t,n){return function(){(n.apply(this,arguments)?ga:ma)(this,t)}}function dc(t,n){var e=da(t+"");if(arguments.length<2){for(var r=ei(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?hc:n?lc:fc)(e,n))}function pc(){this.textContent=""}function gc(t){return function(){this.textContent=t}}function mc(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function vc(t){return arguments.length?this.each(t==null?pc:(typeof t=="function"?mc:gc)(t)):this.node().textContent}function yc(){this.innerHTML=""}function xc(t){return function(){this.innerHTML=t}}function wc(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function _c(t){return arguments.length?this.each(t==null?yc:(typeof t=="function"?wc:xc)(t)):this.node().innerHTML}function Ec(){this.nextSibling&&this.parentNode.appendChild(this)}function Nc(){return this.each(Ec)}function Sc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mc(){return this.each(Sc)}function bc(t){var n=typeof t=="function"?t:aa(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function jc(){return null}function Pc(t,n){var e=typeof t=="function"?t:aa(t),r=n==null?jc:typeof n=="function"?n:ni(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function kc(){var t=this.parentNode;t&&t.removeChild(this)}function Cc(){return this.each(kc)}function $c(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ac(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Tc(t){return this.select(t?Ac:$c)}function Rc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function zc(t){return function(n){t.call(this,n,this.__data__)}}function Dc(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Ic(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Lc(t,n,e){return function(){var r=this.__on,i,o=zc(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function Oc(t,n,e){var r=Dc(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=n?Lc:Ic,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function va(t,n,e){var r=ha(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Uc(t,n){return function(){return va(this,t,n)}}function Fc(t,n){return function(){return va(this,t,n.apply(this,arguments))}}function qc(t,n){return this.each((typeof n=="function"?Fc:Uc)(t,n))}function*Gc(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var ya=[null];function pt(t,n){this._groups=t,this._parents=n}function Yn(){return new pt([[document.documentElement]],ya)}function Bc(){return this}pt.prototype=Yn.prototype={constructor:pt,select:yu,selectAll:_u,selectChild:Mu,selectChildren:ku,filter:Cu,data:Du,enter:$u,exit:Iu,join:Lu,merge:Ou,selection:Bc,order:Uu,sort:Fu,call:Gu,nodes:Bu,node:Xu,size:Hu,empty:Zu,each:Yu,attr:nc,style:oc,property:cc,classed:dc,text:vc,html:_c,raise:Nc,lower:Mc,append:bc,insert:Pc,remove:Cc,clone:Tc,datum:Rc,on:Oc,dispatch:qc,[Symbol.iterator]:Gc};function Bt(t){return typeof t=="string"?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],ya)}function Xc(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Kt(t,n){if(t=Xc(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}function Pr(t){t.preventDefault(),t.stopImmediatePropagation()}function Hc(t){var n=t.document.documentElement,e=Bt(t).on("dragstart.drag",Pr,!0);"onselectstart"in n?e.on("selectstart.drag",Pr,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Zc(t,n){var e=t.document.documentElement,r=Bt(t).on("dragstart.drag",null);n&&(r.on("click.drag",Pr,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Yc=1e-12;function Qi(t){return((t=Math.exp(t))+1/t)/2}function Wc(t){return((t=Math.exp(t))-1/t)/2}function Vc(t){return((t=Math.exp(2*t))-1)/(t+1)}const Kc=function t(n,e,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],h=a[2],d=u-s,m=f-c,N=d*d+m*m,v,_;if(N<Yc)_=Math.log(h/l)/n,v=function(T){return[s+T*d,c+T*m,l*Math.exp(n*T*_)]};else{var S=Math.sqrt(N),w=(h*h-l*l+r*N)/(2*l*e*S),E=(h*h-l*l-r*N)/(2*h*e*S),b=Math.log(Math.sqrt(w*w+1)-w),P=Math.log(Math.sqrt(E*E+1)-E);_=(P-b)/n,v=function(T){var I=T*_,U=Qi(b),F=l/(e*S)*(U*Vc(n*I+b)-Wc(b));return[s+F*d,c+F*m,l*U/Qi(n*I+b)]}}return v.duration=_*1e3*n/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i}(Math.SQRT2,2,4);var gn=0,Pn=0,wn=0,xa=1e3,De,kn,Ie=0,en=0,Ge=0,Un=typeof performance=="object"&&performance.now?performance:Date,wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ri(){return en||(wa(Qc),en=Un.now()+Ge)}function Qc(){en=0}function Le(){this._call=this._time=this._next=null}Le.prototype=_a.prototype={constructor:Le,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?ri():+e)+(n==null?0:+n),!this._next&&kn!==this&&(kn?kn._next=this:De=this,kn=this),this._call=t,this._time=e,kr()},stop:function(){this._call&&(this._call=null,this._time=1/0,kr())}};function _a(t,n,e){var r=new Le;return r.restart(t,n,e),r}function Jc(){ri(),++gn;for(var t=De,n;t;)(n=en-t._time)>=0&&t._call.call(null,n),t=t._next;--gn}function Ji(){en=(Ie=Un.now())+Ge,gn=Pn=0;try{Jc()}finally{gn=0,nl(),en=0}}function tl(){var t=Un.now(),n=t-Ie;n>xa&&(Ge-=n,Ie=t)}function nl(){for(var t,n=De,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:De=e);kn=t,kr(r)}function kr(t){if(!gn){Pn&&(Pn=clearTimeout(Pn));var n=t-en;n>24?(t<1/0&&(Pn=setTimeout(Ji,t-Un.now()-Ge)),wn&&(wn=clearInterval(wn))):(wn||(Ie=Un.now(),wn=setInterval(tl,xa)),gn=1,wa(Ji))}}function to(t,n,e){var r=new Le;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var el=ti("start","end","cancel","interrupt"),rl=[],Ea=0,no=1,Cr=2,ce=3,eo=4,$r=5,le=6;function Be(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;il(t,e,{name:n,index:r,group:i,on:el,tween:rl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ea})}function ii(t,n){var e=kt(t,n);if(e.state>Ea)throw new Error("too late; already scheduled");return e}function Dt(t,n){var e=kt(t,n);if(e.state>ce)throw new Error("too late; already running");return e}function kt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function il(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=_a(o,0,e.time);function o(l){e.state=no,e.timer.restart(a,e.delay,e.time),e.delay<=l&&a(l-e.delay)}function a(l){var u,f,h,d;if(e.state!==no)return c();for(u in r)if(d=r[u],d.name===e.name){if(d.state===ce)return to(a);d.state===eo?(d.state=le,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<n&&(d.state=le,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(to(function(){e.state===ce&&(e.state=eo,e.timer.restart(s,e.delay,e.time),s(l))}),e.state=Cr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Cr){for(e.state=ce,i=new Array(h=e.tween.length),u=0,f=-1;u<h;++u)(d=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(c),e.state=$r,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);e.state===$r&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){e.state=le,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function fe(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>Cr&&r.state<$r,r.state=le,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function ol(t){return this.each(function(){fe(this,t)})}function oi(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Na(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Wn(){}var Fn=.7,Oe=1/Fn,ln="\\s*([+-]?\\d+)\\s*",qn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",al=/^#([0-9a-f]{3,8})$/,sl=new RegExp("^rgb\\("+[ln,ln,ln]+"\\)$"),ul=new RegExp("^rgb\\("+[Tt,Tt,Tt]+"\\)$"),cl=new RegExp("^rgba\\("+[ln,ln,ln,qn]+"\\)$"),ll=new RegExp("^rgba\\("+[Tt,Tt,Tt,qn]+"\\)$"),fl=new RegExp("^hsl\\("+[qn,Tt,Tt]+"\\)$"),hl=new RegExp("^hsla\\("+[qn,Tt,Tt,qn]+"\\)$"),ro={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oi(Wn,Gn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:io,formatHex:io,formatHsl:dl,formatRgb:oo,toString:oo});function io(){return this.rgb().formatHex()}function dl(){return Sa(this).formatHsl()}function oo(){return this.rgb().formatRgb()}function Gn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=al.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?ao(n):e===3?new wt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ee(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ee(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=sl.exec(t))?new wt(n[1],n[2],n[3],1):(n=ul.exec(t))?new wt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=cl.exec(t))?ee(n[1],n[2],n[3],n[4]):(n=ll.exec(t))?ee(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=fl.exec(t))?co(n[1],n[2]/100,n[3]/100,1):(n=hl.exec(t))?co(n[1],n[2]/100,n[3]/100,n[4]):ro.hasOwnProperty(t)?ao(ro[t]):t==="transparent"?new wt(NaN,NaN,NaN,0):null}function ao(t){return new wt(t>>16&255,t>>8&255,t&255,1)}function ee(t,n,e,r){return r<=0&&(t=n=e=NaN),new wt(t,n,e,r)}function pl(t){return t instanceof Wn||(t=Gn(t)),t?(t=t.rgb(),new wt(t.r,t.g,t.b,t.opacity)):new wt}function Ar(t,n,e,r){return arguments.length===1?pl(t):new wt(t,n,e,r??1)}function wt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}oi(wt,Ar,Na(Wn,{brighter:function(t){return t=t==null?Oe:Math.pow(Oe,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Fn:Math.pow(Fn,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:so,formatHex:so,formatRgb:uo,toString:uo}));function so(){return"#"+Je(this.r)+Je(this.g)+Je(this.b)}function uo(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Je(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function co(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new At(t,n,e,r)}function Sa(t){if(t instanceof At)return new At(t.h,t.s,t.l,t.opacity);if(t instanceof Wn||(t=Gn(t)),!t)return new At;if(t instanceof At)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,c=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new At(a,s,c,t.opacity)}function gl(t,n,e,r){return arguments.length===1?Sa(t):new At(t,n,e,r??1)}function At(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}oi(At,gl,Na(Wn,{brighter:function(t){return t=t==null?Oe:Math.pow(Oe,t),new At(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Fn:Math.pow(Fn,t),new At(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new wt(tr(t>=240?t-240:t+120,i,r),tr(t,i,r),tr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function tr(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Ma=t=>()=>t;function ml(t,n){return function(e){return t+e*n}}function vl(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function yl(t){return(t=+t)==1?ba:function(n,e){return e-n?vl(n,e,t):Ma(isNaN(n)?e:n)}}function ba(t,n){var e=n-t;return e?ml(t,e):Ma(isNaN(t)?n:t)}const lo=function t(n){var e=yl(n);function r(i,o){var a=e((i=Ar(i)).r,(o=Ar(o)).r),s=e(i.g,o.g),c=e(i.b,o.b),l=ba(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Vt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nr=new RegExp(Tr.source,"g");function xl(t){return function(){return t}}function wl(t){return function(n){return t(n)+""}}function _l(t,n){var e=Tr.lastIndex=nr.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",n=n+"";(r=Tr.exec(t))&&(i=nr.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Vt(r,i)})),e=nr.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?wl(c[0].x):xl(n):(n=c.length,function(l){for(var u=0,f;u<n;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}var fo=180/Math.PI,Rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ja(t,n,e,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,c/=s),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*fo,skewX:Math.atan(c)*fo,scaleX:a,scaleY:s}}var re;function El(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Rr:ja(n.a,n.b,n.c,n.d,n.e,n.f)}function Nl(t){return t==null||(re||(re=document.createElementNS("http://www.w3.org/2000/svg","g")),re.setAttribute("transform",t),!(t=re.transform.baseVal.consolidate()))?Rr:(t=t.matrix,ja(t.a,t.b,t.c,t.d,t.e,t.f))}function Pa(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,d,m){if(l!==f||u!==h){var N=d.push("translate(",null,n,null,e);m.push({i:N-4,x:Vt(l,f)},{i:N-2,x:Vt(u,h)})}else(f||h)&&d.push("translate("+f+n+h+e)}function a(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,d,m){if(l!==f||u!==h){var N=d.push(i(d)+"scale(",null,",",null,")");m.push({i:N-4,x:Vt(l,f)},{i:N-2,x:Vt(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),a(l.rotate,u.rotate,f,h),s(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var m=-1,N=h.length,v;++m<N;)f[(v=h[m]).i]=v.x(d);return f.join("")}}}var Sl=Pa(El,"px, ","px)","deg)"),Ml=Pa(Nl,", ",")",")");function bl(t,n){var e,r;return function(){var i=Dt(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function jl(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=Dt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},c=0,l=i.length;c<l;++c)if(i[c].name===n){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Pl(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=kt(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?bl:jl)(e,t,n))}function ai(t,n,e){var r=t._id;return t.each(function(){var i=Dt(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return kt(i,r).value[n]}}function ka(t,n){var e;return(typeof n=="number"?Vt:n instanceof Gn?lo:(e=Gn(n))?(n=e,lo):_l)(t,n)}function kl(t){return function(){this.removeAttribute(t)}}function Cl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $l(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function Al(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function Tl(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function Rl(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function zl(t,n){var e=qe(t),r=e==="transform"?Ml:ka;return this.attrTween(t,typeof n=="function"?(e.local?Rl:Tl)(e,r,ai(this,"attr."+t,n)):n==null?(e.local?Cl:kl)(e):(e.local?Al:$l)(e,r,n))}function Dl(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Il(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Ll(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Il(t,o)),e}return i._value=n,i}function Ol(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Dl(t,o)),e}return i._value=n,i}function Ul(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=qe(t);return this.tween(e,(r.local?Ll:Ol)(r,n))}function Fl(t,n){return function(){ii(this,t).delay=+n.apply(this,arguments)}}function ql(t,n){return n=+n,function(){ii(this,t).delay=n}}function Gl(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Fl:ql)(n,t)):kt(this.node(),n).delay}function Bl(t,n){return function(){Dt(this,t).duration=+n.apply(this,arguments)}}function Xl(t,n){return n=+n,function(){Dt(this,t).duration=n}}function Hl(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Bl:Xl)(n,t)):kt(this.node(),n).duration}function Zl(t,n){if(typeof n!="function")throw new Error;return function(){Dt(this,t).ease=n}}function Yl(t){var n=this._id;return arguments.length?this.each(Zl(n,t)):kt(this.node(),n).ease}function Wl(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Dt(this,t).ease=e}}function Vl(t){if(typeof t!="function")throw new Error;return this.each(Wl(this._id,t))}function Kl(t){typeof t!="function"&&(t=ca(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new Zt(r,this._parents,this._name,this._id)}function Ql(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=n[s],l=e[s],u=c.length,f=a[s]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;s<r;++s)a[s]=n[s];return new Zt(a,this._parents,this._name,this._id)}function Jl(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function tf(t,n,e){var r,i,o=Jl(n)?ii:Dt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function nf(t,n){var e=this._id;return arguments.length<2?kt(this.node(),e).on.on(t):this.each(tf(e,t,n))}function ef(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function rf(){return this.on("end.remove",ef(this._id))}function of(t){var n=this._name,e=this._id;typeof t!="function"&&(t=ni(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,f,h=0;h<c;++h)(u=s[h])&&(f=t.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,Be(l[h],n,e,h,l,kt(u,e)));return new Zt(o,this._parents,n,e)}function af(t){var n=this._name,e=this._id;typeof t!="function"&&(t=ua(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),d,m=kt(u,e),N=0,v=h.length;N<v;++N)(d=h[N])&&Be(d,n,e,N,h,m);o.push(h),a.push(u)}return new Zt(o,a,n,e)}var sf=Yn.prototype.constructor;function uf(){return new sf(this._groups,this._parents)}function cf(t,n){var e,r,i;return function(){var o=pn(this,t),a=(this.style.removeProperty(t),pn(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Ca(t){return function(){this.style.removeProperty(t)}}function lf(t,n,e){var r,i=e+"",o;return function(){var a=pn(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function ff(t,n,e){var r,i,o;return function(){var a=pn(this,t),s=e(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),pn(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s))}}function hf(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var c=Dt(this,t),l=c.on,u=c.value[o]==null?s||(s=Ca(n)):void 0;(l!==e||i!==u)&&(r=(e=l).copy()).on(a,i=u),c.on=r}}function df(t,n,e){var r=(t+="")=="transform"?Sl:ka;return n==null?this.styleTween(t,cf(t,r)).on("end.style."+t,Ca(t)):typeof n=="function"?this.styleTween(t,ff(t,r,ai(this,"style."+t,n))).each(hf(this._id,t)):this.styleTween(t,lf(t,r,n),e).on("end.style."+t,null)}function pf(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function gf(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&pf(t,a,e)),r}return o._value=n,o}function mf(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,gf(t,n,e??""))}function vf(t){return function(){this.textContent=t}}function yf(t){return function(){var n=t(this);this.textContent=n??""}}function xf(t){return this.tween("text",typeof t=="function"?yf(ai(this,"text",t)):vf(t==null?"":t+""))}function wf(t){return function(n){this.textContent=t.call(this,n)}}function _f(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&wf(i)),n}return r._value=t,r}function Ef(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,_f(t))}function Nf(){for(var t=this._name,n=this._id,e=$a(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=kt(c,n);Be(c,t,e,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Zt(r,this._parents,t,e)}function Sf(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};e.each(function(){var l=Dt(this,r),u=l.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(c)),l.on=n}),i===0&&o()})}var Mf=0;function Zt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function $a(){return++Mf}var Qt=Yn.prototype;Zt.prototype={constructor:Zt,select:of,selectAll:af,filter:Kl,merge:Ql,selection:uf,transition:Nf,call:Qt.call,nodes:Qt.nodes,node:Qt.node,size:Qt.size,empty:Qt.empty,each:Qt.each,on:nf,attr:zl,attrTween:Ul,style:df,styleTween:mf,text:xf,textTween:Ef,remove:rf,tween:Pl,delay:Gl,duration:Hl,ease:Yl,easeVarying:Vl,end:Sf,[Symbol.iterator]:Qt[Symbol.iterator]};function bf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var jf={time:null,delay:0,duration:250,ease:bf};function Pf(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function kf(t){var n,e;t instanceof Zt?(n=t._id,t=t._name):(n=$a(),(e=jf).time=ri(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&Be(c,t,n,l,a,e||Pf(c,n));return new Zt(r,this._parents,t,n)}Yn.prototype.interrupt=ol;Yn.prototype.transition=kf;const ie=t=>()=>t;function Cf(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Xt(t,n,e){this.k=t,this.x=n,this.y=e}Xt.prototype={constructor:Xt,scale:function(t){return t===1?this:new Xt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Xt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var si=new Xt(1,0,0);Xt.prototype;function er(t){t.stopImmediatePropagation()}function _n(t){t.preventDefault(),t.stopImmediatePropagation()}function $f(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Af(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ho(){return this.__zoom||si}function Tf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Rf(){return navigator.maxTouchPoints||"ontouchstart"in this}function zf(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Df(){var t=$f,n=Af,e=zf,r=Tf,i=Rf,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Kc,l=ti("start","zoom","end"),u,f,h,d=500,m=150,N=0,v=10;function _(y){y.property("__zoom",ho).on("wheel.zoom",I).on("mousedown.zoom",U).on("dblclick.zoom",F).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(y,x,p,M){var k=y.selection?y.selection():y;k.property("__zoom",ho),y!==k?b(y,x,p,M):k.interrupt().each(function(){P(this,arguments).event(M).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},_.scaleBy=function(y,x,p,M){_.scaleTo(y,function(){var k=this.__zoom.k,C=typeof x=="function"?x.apply(this,arguments):x;return k*C},p,M)},_.scaleTo=function(y,x,p,M){_.transform(y,function(){var k=n.apply(this,arguments),C=this.__zoom,O=p==null?E(k):typeof p=="function"?p.apply(this,arguments):p,q=C.invert(O),H=typeof x=="function"?x.apply(this,arguments):x;return e(w(S(C,H),O,q),k,a)},p,M)},_.translateBy=function(y,x,p,M){_.transform(y,function(){return e(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof p=="function"?p.apply(this,arguments):p),n.apply(this,arguments),a)},null,M)},_.translateTo=function(y,x,p,M,k){_.transform(y,function(){var C=n.apply(this,arguments),O=this.__zoom,q=M==null?E(C):typeof M=="function"?M.apply(this,arguments):M;return e(si.translate(q[0],q[1]).scale(O.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof p=="function"?-p.apply(this,arguments):-p),C,a)},M,k)};function S(y,x){return x=Math.max(o[0],Math.min(o[1],x)),x===y.k?y:new Xt(x,y.x,y.y)}function w(y,x,p){var M=x[0]-p[0]*y.k,k=x[1]-p[1]*y.k;return M===y.x&&k===y.y?y:new Xt(y.k,M,k)}function E(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function b(y,x,p,M){y.on("start.zoom",function(){P(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(M).end()}).tween("zoom",function(){var k=this,C=arguments,O=P(k,C).event(M),q=n.apply(k,C),H=p==null?E(q):typeof p=="function"?p.apply(k,C):p,V=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Y=k.__zoom,K=typeof x=="function"?x.apply(k,C):x,mt=c(Y.invert(H).concat(V/Y.k),K.invert(H).concat(V/K.k));return function(vt){if(vt===1)vt=K;else{var _t=mt(vt),et=V/_t[2];vt=new Xt(et,H[0]-_t[0]*et,H[1]-_t[1]*et)}O.zoom(null,vt)}})}function P(y,x,p){return!p&&y.__zooming||new T(y,x)}function T(y,x){this.that=y,this.args=x,this.active=0,this.sourceEvent=null,this.extent=n.apply(y,x),this.taps=0}T.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,x){return this.mouse&&y!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var x=Bt(this.that).datum();l.call(y,this.that,new Cf(y,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),x)}};function I(y,...x){if(!t.apply(this,arguments))return;var p=P(this,x).event(y),M=this.__zoom,k=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),C=Kt(y);if(p.wheel)(p.mouse[0][0]!==C[0]||p.mouse[0][1]!==C[1])&&(p.mouse[1]=M.invert(p.mouse[0]=C)),clearTimeout(p.wheel);else{if(M.k===k)return;p.mouse=[C,M.invert(C)],fe(this),p.start()}_n(y),p.wheel=setTimeout(O,m),p.zoom("mouse",e(w(S(M,k),p.mouse[0],p.mouse[1]),p.extent,a));function O(){p.wheel=null,p.end()}}function U(y,...x){if(h||!t.apply(this,arguments))return;var p=P(this,x,!0).event(y),M=Bt(y.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",V,!0),k=Kt(y,C),C=y.currentTarget,O=y.clientX,q=y.clientY;Hc(y.view),er(y),p.mouse=[k,this.__zoom.invert(k)],fe(this),p.start();function H(Y){if(_n(Y),!p.moved){var K=Y.clientX-O,mt=Y.clientY-q;p.moved=K*K+mt*mt>N}p.event(Y).zoom("mouse",e(w(p.that.__zoom,p.mouse[0]=Kt(Y,C),p.mouse[1]),p.extent,a))}function V(Y){M.on("mousemove.zoom mouseup.zoom",null),Zc(Y.view,p.moved),_n(Y),p.event(Y).end()}}function F(y,...x){if(t.apply(this,arguments)){var p=this.__zoom,M=Kt(y.changedTouches?y.changedTouches[0]:y,this),k=p.invert(M),C=p.k*(y.shiftKey?.5:2),O=e(w(S(p,C),M,k),n.apply(this,x),a);_n(y),s>0?Bt(this).transition().duration(s).call(b,O,M,y):Bt(this).call(_.transform,O,M,y)}}function z(y,...x){if(t.apply(this,arguments)){var p=y.touches,M=p.length,k=P(this,x,y.changedTouches.length===M).event(y),C,O,q,H;for(er(y),O=0;O<M;++O)q=p[O],H=Kt(q,this),H=[H,this.__zoom.invert(H),q.identifier],k.touch0?!k.touch1&&k.touch0[2]!==H[2]&&(k.touch1=H,k.taps=0):(k.touch0=H,C=!0,k.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(k.taps<2&&(f=H[0],u=setTimeout(function(){u=null},d)),fe(this),k.start())}}function B(y,...x){if(this.__zooming){var p=P(this,x).event(y),M=y.changedTouches,k=M.length,C,O,q,H;for(_n(y),C=0;C<k;++C)O=M[C],q=Kt(O,this),p.touch0&&p.touch0[2]===O.identifier?p.touch0[0]=q:p.touch1&&p.touch1[2]===O.identifier&&(p.touch1[0]=q);if(O=p.that.__zoom,p.touch1){var V=p.touch0[0],Y=p.touch0[1],K=p.touch1[0],mt=p.touch1[1],vt=(vt=K[0]-V[0])*vt+(vt=K[1]-V[1])*vt,_t=(_t=mt[0]-Y[0])*_t+(_t=mt[1]-Y[1])*_t;O=S(O,Math.sqrt(vt/_t)),q=[(V[0]+K[0])/2,(V[1]+K[1])/2],H=[(Y[0]+mt[0])/2,(Y[1]+mt[1])/2]}else if(p.touch0)q=p.touch0[0],H=p.touch0[1];else return;p.zoom("touch",e(w(O,q,H),p.extent,a))}}function Z(y,...x){if(this.__zooming){var p=P(this,x).event(y),M=y.changedTouches,k=M.length,C,O;for(er(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),C=0;C<k;++C)O=M[C],p.touch0&&p.touch0[2]===O.identifier?delete p.touch0:p.touch1&&p.touch1[2]===O.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(O=Kt(O,this),Math.hypot(f[0]-O[0],f[1]-O[1])<v)){var q=Bt(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return _.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:ie(+y),_):r},_.filter=function(y){return arguments.length?(t=typeof y=="function"?y:ie(!!y),_):t},_.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:ie(!!y),_):i},_.extent=function(y){return arguments.length?(n=typeof y=="function"?y:ie([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),_):n},_.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],_):[o[0],o[1]]},_.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(y){return arguments.length?(e=y,_):e},_.duration=function(y){return arguments.length?(s=+y,_):s},_.interpolate=function(y){return arguments.length?(c=y,_):c},_.on=function(){var y=l.on.apply(l,arguments);return y===l?_:y},_.clickDistance=function(y){return arguments.length?(N=(y=+y)*y,_):Math.sqrt(N)},_.tapDistance=function(y){return arguments.length?(v=+y,_):v},_}function po(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,r)}return e}function un(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?po(Object(e),!0).forEach(function(r){If(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):po(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function zr(t){"@babel/helpers - typeof";return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zr(t)}function If(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function gt(){return gt=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},gt.apply(this,arguments)}function Lf(t,n){if(t==null)return{};var e={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(e[i]=t[i]);return e}function Mt(t,n){if(t==null)return{};var e=Lf(t,n),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function ot(t,n){return Of(t)||Uf(t,n)||Ff(t,n)||qf()}function Of(t){if(Array.isArray(t))return t}function Uf(t,n){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var r=[],i=!0,o=!1,a,s;try{for(e=e.call(t);!(i=(a=e.next()).done)&&(r.push(a.value),!(n&&r.length===n));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}return r}}function Ff(t,n){if(t){if(typeof t=="string")return go(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return go(t,n)}}function go(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function qf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gf=["width","height","projection","projectionConfig"],Bf=Qo,Xf=Mt(iu,["geoPath"]),It=L.createContext(),Hf=function(n){var e=n.projectionConfig,r=e===void 0?{}:e,i=n.projection,o=i===void 0?"geoEqualEarth":i,a=n.width,s=a===void 0?800:a,c=n.height,l=c===void 0?600:c,u=typeof o=="function";if(u)return o;var f=Xf[o]().translate([s/2,l/2]),h=[f.center?"center":null,f.rotate?"rotate":null,f.scale?"scale":null,f.parallels?"parallels":null];return h.forEach(function(d){d&&(f=f[d](r[d]||f[d]()))}),f},Aa=function(n){var e=n.width,r=n.height,i=n.projection,o=n.projectionConfig,a=Mt(n,Gf),s=o.center||[],c=ot(s,2),l=c[0],u=c[1],f=o.rotate||[],h=ot(f,3),d=h[0],m=h[1],N=h[2],v=o.parallels||[],_=ot(v,2),S=_[0],w=_[1],E=o.scale||null,b=L.useMemo(function(){return Hf({projectionConfig:{center:l||l===0||u||u===0?[l,u]:null,rotate:d||d===0||m||m===0?[d,m,N]:null,parallels:S||S===0||w||w===0?[S,w]:null,scale:E},projection:i,width:e,height:r})},[e,r,i,l,u,d,m,N,S,w,E]),P=L.useCallback(b,[b]),T=L.useMemo(function(){return{width:e,height:r,projection:P,path:Bf().projection(P)}},[e,r,P]);return rt.createElement(It.Provider,gt({value:T},a))};Aa.propTypes={width:j.number,height:j.number,projection:j.oneOfType([j.string,j.func]),projectionConfig:j.object};var Zf=["width","height","projection","projectionConfig","className"],ui=L.forwardRef(function(t,n){var e=t.width,r=e===void 0?800:e,i=t.height,o=i===void 0?600:i,a=t.projection,s=a===void 0?"geoEqualEarth":a,c=t.projectionConfig,l=c===void 0?{}:c,u=t.className,f=u===void 0?"":u,h=Mt(t,Zf);return rt.createElement(Aa,{width:r,height:o,projection:s,projectionConfig:l},rt.createElement("svg",gt({ref:n,viewBox:"0 0 ".concat(r," ").concat(o),className:"rsm-svg ".concat(f)},h)))});ui.displayName="ComposableMap";ui.propTypes={width:j.number,height:j.number,projection:j.oneOfType([j.string,j.func]),projectionConfig:j.object,className:j.string};function mo(t,n,e){var r=(t*e.k-t)/2,i=(n*e.k-n)/2;return[t/2-(r+e.x)/e.k,n/2-(i+e.y)/e.k]}function Yf(t){return fetch(t).then(function(n){if(!n.ok)throw Error(n.statusText);return n.json()}).catch(function(n){console.log("There was a problem when fetching the data: ",n)})}function vo(t,n){var e=t.type==="Topology";if(!e)return n?n(t.features||t):t.features||t;var r=uu(t,t.objects[Object.keys(t.objects)[0]]).features;return n?n(r):r}function yo(t){var n=t.type==="Topology";if(!n)return null;var e=Wi(t,t.objects[Object.keys(t.objects)[0]],function(i,o){return i===o}),r=Wi(t,t.objects[Object.keys(t.objects)[0]],function(i,o){return i!==o});return{outline:e,borders:r}}function Wf(t,n,e){return t&&n?{outline:un(un({},t),{},{rsmKey:"outline",svgPath:e(t)}),borders:un(un({},n),{},{rsmKey:"borders",svgPath:e(n)})}:{}}function Vf(t,n){return t?t.map(function(e,r){return un(un({},e),{},{rsmKey:"geo-".concat(r),svgPath:n(e)})}):[]}function Kf(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5,r=Array.isArray(e)?e:[e,e],i=t/2*r[0],o=n/2*r[1];return"M".concat(0,",",0," Q",-t/2-i,",").concat(-n/2+o," ").concat(-t,",").concat(-n)}function Qf(t){return typeof t=="string"}function Jf(t){var n=t.geography,e=t.parseGeographies,r=L.useContext(It),i=r.path,o=L.useState({}),a=ot(o,2),s=a[0],c=a[1];L.useEffect(function(){(typeof window>"u"?"undefined":zr(window))!=="undefined"&&n&&(Qf(n)?Yf(n).then(function(d){d&&c({geographies:vo(d,e),mesh:yo(d)})}):c({geographies:vo(n,e),mesh:yo(n)}))},[n,e]);var l=L.useMemo(function(){var d=s.mesh||{},m=Wf(d.outline,d.borders,i);return{geographies:Vf(s.geographies,i),outline:m.outline,borders:m.borders}},[s,i]),u=l.geographies,f=l.outline,h=l.borders;return{geographies:u,outline:f,borders:h}}var th=["geography","children","parseGeographies","className"],ci=L.forwardRef(function(t,n){var e=t.geography,r=t.children,i=t.parseGeographies,o=t.className,a=o===void 0?"":o,s=Mt(t,th),c=L.useContext(It),l=c.path,u=c.projection,f=Jf({geography:e,parseGeographies:i}),h=f.geographies,d=f.outline,m=f.borders;return rt.createElement("g",gt({ref:n,className:"rsm-geographies ".concat(a)},s),h&&h.length>0&&r({geographies:h,outline:d,borders:m,path:l,projection:u}))});ci.displayName="Geographies";ci.propTypes={geography:j.oneOfType([j.string,j.object,j.array]),children:j.func,parseGeographies:j.func,className:j.string};var nh=["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],li=L.forwardRef(function(t,n){var e=t.geography,r=t.onMouseEnter,i=t.onMouseLeave,o=t.onMouseDown,a=t.onMouseUp,s=t.onFocus,c=t.onBlur,l=t.style,u=l===void 0?{}:l,f=t.className,h=f===void 0?"":f,d=Mt(t,nh),m=L.useState(!1),N=ot(m,2),v=N[0],_=N[1],S=L.useState(!1),w=ot(S,2),E=w[0],b=w[1];function P(B){b(!0),r&&r(B)}function T(B){b(!1),v&&_(!1),i&&i(B)}function I(B){b(!0),s&&s(B)}function U(B){b(!1),v&&_(!1),c&&c(B)}function F(B){_(!0),o&&o(B)}function z(B){_(!1),a&&a(B)}return rt.createElement("path",gt({ref:n,tabIndex:"0",className:"rsm-geography ".concat(h),d:e.svgPath,onMouseEnter:P,onMouseLeave:T,onFocus:I,onBlur:U,onMouseDown:F,onMouseUp:z,style:u[v||E?v?"pressed":"hover":"default"]},d))});li.displayName="Geography";li.propTypes={geography:j.object,onMouseEnter:j.func,onMouseLeave:j.func,onMouseDown:j.func,onMouseUp:j.func,onFocus:j.func,onBlur:j.func,style:j.object,className:j.string};var eh=L.memo(li),rh=["fill","stroke","step","className"],fi=L.forwardRef(function(t,n){var e=t.fill,r=e===void 0?"transparent":e,i=t.stroke,o=i===void 0?"currentcolor":i,a=t.step,s=a===void 0?[10,10]:a,c=t.className,l=c===void 0?"":c,u=Mt(t,rh),f=L.useContext(It),h=f.path;return rt.createElement("path",gt({ref:n,d:h(Or().step(s)()),fill:r,stroke:o,className:"rsm-graticule ".concat(l)},u))});fi.displayName="Graticule";fi.propTypes={fill:j.string,stroke:j.string,step:j.array,className:j.string};L.memo(fi);var ih=["value"],oh=L.createContext(),ah={x:0,y:0,k:1,transformString:"translate(0 0) scale(1)"},Ta=function(n){var e=n.value,r=e===void 0?ah:e,i=Mt(n,ih);return rt.createElement(oh.Provider,gt({value:r},i))};Ta.propTypes={x:j.number,y:j.number,k:j.number,transformString:j.string};function sh(t){var n=t.center,e=t.filterZoomEvent,r=t.onMoveStart,i=t.onMoveEnd,o=t.onMove,a=t.translateExtent,s=a===void 0?[[-1/0,-1/0],[1/0,1/0]]:a,c=t.scaleExtent,l=c===void 0?[1,8]:c,u=t.zoom,f=u===void 0?1:u,h=L.useContext(It),d=h.width,m=h.height,N=h.projection,v=ot(n,2),_=v[0],S=v[1],w=L.useState({x:0,y:0,k:1}),E=ot(w,2),b=E[0],P=E[1],T=L.useRef({x:0,y:0,k:1}),I=L.useRef(),U=L.useRef(),F=L.useRef(!1),z=ot(s,2),B=z[0],Z=z[1],y=ot(B,2),x=y[0],p=y[1],M=ot(Z,2),k=M[0],C=M[1],O=ot(l,2),q=O[0],H=O[1];return L.useEffect(function(){var V=Bt(I.current);function Y(et){!r||F.current||r({coordinates:N.invert(mo(d,m,et.transform)),zoom:et.transform.k},et)}function K(et){if(!F.current){var Yt=et.transform,vn=et.sourceEvent;P({x:Yt.x,y:Yt.y,k:Yt.k,dragging:vn}),o&&o({x:Yt.x,y:Yt.y,zoom:Yt.k,dragging:vn},et)}}function mt(et){if(F.current){F.current=!1;return}var Yt=N.invert(mo(d,m,et.transform)),vn=ot(Yt,2),pi=vn[0],gi=vn[1];T.current={x:pi,y:gi,k:et.transform.k},i&&i({coordinates:[pi,gi],zoom:et.transform.k},et)}function vt(et){return e?e(et):et?!et.ctrlKey&&!et.button:!1}var _t=Df().filter(vt).scaleExtent([q,H]).translateExtent([[x,p],[k,C]]).on("start",Y).on("zoom",K).on("end",mt);U.current=_t,V.call(_t)},[d,m,x,p,k,C,q,H,N,r,o,i,e]),L.useEffect(function(){if(!(_===T.current.x&&S===T.current.y&&f===T.current.k)){var V=N([_,S]),Y=V[0]*f,K=V[1]*f,mt=Bt(I.current);F.current=!0,mt.call(U.current.transform,si.translate(d/2-Y,m/2-K).scale(f)),P({x:d/2-Y,y:m/2-K,k:f}),T.current={x:_,y:S,k:f}}},[_,S,f,d,m,N]),{mapRef:I,position:b,transformString:"translate(".concat(b.x," ").concat(b.y,") scale(").concat(b.k,")")}}var uh=["center","zoom","minZoom","maxZoom","translateExtent","filterZoomEvent","onMoveStart","onMove","onMoveEnd","className"],hi=L.forwardRef(function(t,n){var e=t.center,r=e===void 0?[0,0]:e,i=t.zoom,o=i===void 0?1:i,a=t.minZoom,s=a===void 0?1:a,c=t.maxZoom,l=c===void 0?8:c,u=t.translateExtent,f=t.filterZoomEvent,h=t.onMoveStart,d=t.onMove,m=t.onMoveEnd,N=t.className,v=Mt(t,uh),_=L.useContext(It),S=_.width,w=_.height,E=sh({center:r,filterZoomEvent:f,onMoveStart:h,onMove:d,onMoveEnd:m,scaleExtent:[s,l],translateExtent:u,zoom:o}),b=E.mapRef,P=E.transformString,T=E.position;return rt.createElement(Ta,{value:{x:T.x,y:T.y,k:T.k,transformString:P}},rt.createElement("g",{ref:b},rt.createElement("rect",{width:S,height:w,fill:"transparent"}),rt.createElement("g",gt({ref:n,transform:P,className:"rsm-zoomable-group ".concat(N)},v))))});hi.displayName="ZoomableGroup";hi.propTypes={center:j.array,zoom:j.number,minZoom:j.number,maxZoom:j.number,translateExtent:j.arrayOf(j.array),onMoveStart:j.func,onMove:j.func,onMoveEnd:j.func,className:j.string};var ch=["id","fill","stroke","strokeWidth","className"],di=L.forwardRef(function(t,n){var e=t.id,r=e===void 0?"rsm-sphere":e,i=t.fill,o=i===void 0?"transparent":i,a=t.stroke,s=a===void 0?"currentcolor":a,c=t.strokeWidth,l=c===void 0?.5:c,u=t.className,f=u===void 0?"":u,h=Mt(t,ch),d=L.useContext(It),m=d.path,N=L.useMemo(function(){return m({type:"Sphere"})},[m]);return rt.createElement(L.Fragment,null,rt.createElement("defs",null,rt.createElement("clipPath",{id:r},rt.createElement("path",{d:N}))),rt.createElement("path",gt({ref:n,d:N,fill:o,stroke:s,strokeWidth:l,style:{pointerEvents:"none"},className:"rsm-sphere ".concat(f)},h)))});di.displayName="Sphere";di.propTypes={id:j.string,fill:j.string,stroke:j.string,strokeWidth:j.number,className:j.string};L.memo(di);var lh=["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],Ra=L.forwardRef(function(t,n){var e=t.coordinates,r=t.children,i=t.onMouseEnter,o=t.onMouseLeave,a=t.onMouseDown,s=t.onMouseUp,c=t.onFocus,l=t.onBlur,u=t.style,f=u===void 0?{}:u,h=t.className,d=h===void 0?"":h,m=Mt(t,lh),N=L.useContext(It),v=N.projection,_=L.useState(!1),S=ot(_,2),w=S[0],E=S[1],b=L.useState(!1),P=ot(b,2),T=P[0],I=P[1],U=v(e),F=ot(U,2),z=F[0],B=F[1];function Z(C){I(!0),i&&i(C)}function y(C){I(!1),w&&E(!1),o&&o(C)}function x(C){I(!0),c&&c(C)}function p(C){I(!1),w&&E(!1),l&&l(C)}function M(C){E(!0),a&&a(C)}function k(C){E(!1),s&&s(C)}return rt.createElement("g",gt({ref:n,transform:"translate(".concat(z,", ").concat(B,")"),className:"rsm-marker ".concat(d),onMouseEnter:Z,onMouseLeave:y,onFocus:x,onBlur:p,onMouseDown:M,onMouseUp:k,style:f[w||T?w?"pressed":"hover":"default"]},m),r)});Ra.displayName="Marker";Ra.propTypes={coordinates:j.array,children:j.oneOfType([j.node,j.arrayOf(j.node)]),onMouseEnter:j.func,onMouseLeave:j.func,onMouseDown:j.func,onMouseUp:j.func,onFocus:j.func,onBlur:j.func,style:j.object,className:j.string};var fh=["from","to","coordinates","stroke","strokeWidth","fill","className"],za=L.forwardRef(function(t,n){var e=t.from,r=e===void 0?[0,0]:e,i=t.to,o=i===void 0?[0,0]:i,a=t.coordinates,s=t.stroke,c=s===void 0?"currentcolor":s,l=t.strokeWidth,u=l===void 0?3:l,f=t.fill,h=f===void 0?"transparent":f,d=t.className,m=d===void 0?"":d,N=Mt(t,fh),v=L.useContext(It),_=v.path,S={type:"LineString",coordinates:a||[r,o]};return rt.createElement("path",gt({ref:n,d:_(S),className:"rsm-line ".concat(m),stroke:c,strokeWidth:u,fill:h},N))});za.displayName="Line";za.propTypes={from:j.array,to:j.array,coordinates:j.array,stroke:j.string,strokeWidth:j.number,fill:j.string,className:j.string};var hh=["subject","children","connectorProps","dx","dy","curve","className"],Da=L.forwardRef(function(t,n){var e=t.subject,r=t.children,i=t.connectorProps,o=t.dx,a=o===void 0?30:o,s=t.dy,c=s===void 0?30:s,l=t.curve,u=l===void 0?0:l,f=t.className,h=f===void 0?"":f,d=Mt(t,hh),m=L.useContext(It),N=m.projection,v=N(e),_=ot(v,2),S=_[0],w=_[1],E=Kf(a,c,u);return rt.createElement("g",gt({ref:n,transform:"translate(".concat(S+a,", ").concat(w+c,")"),className:"rsm-annotation ".concat(h)},d),rt.createElement("path",gt({d:E,fill:"transparent",stroke:"#000"},i)),r)});Da.displayName="Annotation";Da.propTypes={subject:j.array,children:j.oneOfType([j.node,j.arrayOf(j.node)]),dx:j.number,dy:j.number,curve:j.number,connectorProps:j.object,className:j.string};const dh="https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json",Ia=L.memo(({data:t})=>{const n=t.reduce((i,o)=>(i[o.country_code]=o.usage_count,i),{}),e=Math.max(...t.map(i=>i.usage_count),1),r=qa().domain([0,e*.25,e*.5,e*.75,e]).range(["hsl(var(--muted))","hsl(210 80% 85%)","hsl(210 80% 65%)","hsl(210 80% 45%)","hsl(210 80% 25%)"]);return g.jsx("div",{className:"w-full h-[500px] bg-background rounded-lg border",children:g.jsx(ui,{projectionConfig:{scale:147},className:"w-full h-full",children:g.jsx(hi,{center:[0,20],zoom:1,children:g.jsx(ci,{geography:dh,children:({geographies:i})=>i.map(o=>{const a=o.id,s=n[a]||0,c=s>0?r(s):"hsl(var(--muted))";return g.jsx(eh,{geography:o,fill:c,stroke:"hsl(var(--border))",strokeWidth:.5,style:{default:{outline:"none"},hover:{fill:"hsl(var(--primary))",outline:"none",cursor:"pointer"},pressed:{outline:"none"}},children:g.jsxs("title",{children:[o.properties.name,s>0&&`: ${s} uses`]})},o.rsmKey)})})})})})});Ia.displayName="UsageHeatMap";const Ah=()=>{var m,N;const{toast:t}=La(),[n,e]=L.useState(!0),[r,i]=L.useState({totalUses:0,manufacturingUses:0,diamondUses:0,uniqueIPs:0,last24Hours:0,last7Days:0}),[o,a]=L.useState([]),[s,c]=L.useState([]),[l,u]=L.useState([]);L.useEffect(()=>{f()},[]);const f=async()=>{e(!0);try{const{data:v,error:_}=await Oa.from("guest_calculator_usage").select("*").order("used_at",{ascending:!1});if(_)throw _;if(!v){e(!1);return}const S=new Date,w=new Date(S.getTime()-24*60*60*1e3),E=new Date(S.getTime()-7*24*60*60*1e3),b=v.filter(p=>p.calculator_type==="manufacturing").length,P=v.filter(p=>p.calculator_type==="diamond").length,T=new Set(v.map(p=>p.ip_address)).size,I=v.filter(p=>new Date(p.used_at)>w).length,U=v.filter(p=>new Date(p.used_at)>E).length;i({totalUses:v.length,manufacturingUses:b,diamondUses:P,uniqueIPs:T,last24Hours:I,last7Days:U});const F=new Map;v.forEach(p=>{const M=F.get(p.ip_address);M?(M.count++,new Date(p.used_at)>new Date(M.last)&&(M.last=p.used_at),new Date(p.used_at)<new Date(M.first)&&(M.first=p.used_at)):F.set(p.ip_address,{count:1,type:p.calculator_type,first:p.used_at,last:p.used_at})});const z=Array.from(F.entries()).map(([p,M])=>({ip_address:p,usage_count:M.count,calculator_type:M.type,first_used:M.first,last_used:M.last})).sort((p,M)=>M.usage_count-p.usage_count).slice(0,20);a(z);const B=new Map;for(let p=6;p>=0;p--){const k=new Date(S.getTime()-p*24*60*60*1e3).toISOString().split("T")[0];B.set(k,{manufacturing:0,diamond:0})}v.filter(p=>new Date(p.used_at)>E).forEach(p=>{const M=new Date(p.used_at).toISOString().split("T")[0],k=B.get(M);k&&(p.calculator_type==="manufacturing"?k.manufacturing++:k.diamond++)});const Z=Array.from(B.entries()).map(([p,M])=>({date:p,manufacturing:M.manufacturing,diamond:M.diamond,total:M.manufacturing+M.diamond}));c(Z);const y=new Map;v.filter(p=>p.country).forEach(p=>{const M=y.get(p.country);if(M){if(M.manufacturing+=p.calculator_type==="manufacturing"?1:0,M.diamond+=p.calculator_type==="diamond"?1:0,p.city){const k=M.cities.get(p.city)||0;M.cities.set(p.city,k+1)}}else{const k=new Map;p.city&&k.set(p.city,1),y.set(p.country,{country:p.country,country_code:p.country_code||"",manufacturing:p.calculator_type==="manufacturing"?1:0,diamond:p.calculator_type==="diamond"?1:0,cities:k})}});const x=Array.from(y.entries()).map(([p,M])=>{const k=Array.from(M.cities.entries()).map(([C,O])=>({city:C,count:O})).sort((C,O)=>O.count-C.count).slice(0,3);return{country:M.country,country_code:M.country_code,usage_count:M.manufacturing+M.diamond,manufacturing:M.manufacturing,diamond:M.diamond,top_cities:k}}).sort((p,M)=>M.usage_count-p.usage_count).slice(0,15);u(x)}catch(v){console.error("Error fetching analytics:",v),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{e(!1)}},h=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=v=>new Date(v).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?g.jsx(mi,{children:g.jsx("div",{className:"flex items-center justify-center h-96",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),g.jsx("p",{className:"text-muted-foreground",children:"Loading analytics..."})]})})}):g.jsx(mi,{children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Guest Calculator Analytics"}),g.jsx("p",{className:"text-muted-foreground mt-2",children:"Track guest calculator usage patterns and identify conversion opportunities"})]}),g.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[g.jsxs(Lt,{children:[g.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[g.jsx(Ut,{className:"text-sm font-medium",children:"Total Guest Uses"}),g.jsx(Ga,{className:"h-4 w-4 text-muted-foreground"})]}),g.jsxs(Ft,{children:[g.jsx("div",{className:"text-2xl font-bold",children:r.totalUses}),g.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.last24Hours," in last 24 hours"]})]})]}),g.jsxs(Lt,{children:[g.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[g.jsx(Ut,{className:"text-sm font-medium",children:"Unique IP Addresses"}),g.jsx(Ba,{className:"h-4 w-4 text-muted-foreground"})]}),g.jsxs(Ft,{children:[g.jsx("div",{className:"text-2xl font-bold",children:r.uniqueIPs}),g.jsx("p",{className:"text-xs text-muted-foreground",children:"Individual guest users"})]})]}),g.jsxs(Lt,{children:[g.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[g.jsx(Ut,{className:"text-sm font-medium",children:"Last 7 Days"}),g.jsx(Xa,{className:"h-4 w-4 text-muted-foreground"})]}),g.jsxs(Ft,{children:[g.jsx("div",{className:"text-2xl font-bold",children:r.last7Days}),g.jsx("p",{className:"text-xs text-muted-foreground",children:"Weekly usage trend"})]})]})]}),g.jsxs(Lt,{children:[g.jsxs(Ot,{children:[g.jsx(Ut,{children:"Calculator Usage Breakdown"}),g.jsx(yn,{children:"Distribution by calculator type"})]}),g.jsx(Ft,{children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),g.jsx("span",{className:"font-medium",children:"Manufacturing Cost Estimator"})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"font-bold",children:r.manufacturingUses}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.totalUses>0?Math.round(r.manufacturingUses/r.totalUses*100):0,"%"]})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),g.jsx("span",{className:"font-medium",children:"Diamond Calculator"})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"font-bold",children:r.diamondUses}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.totalUses>0?Math.round(r.diamondUses/r.totalUses*100):0,"%"]})]})]})]})})]}),g.jsxs(Ua,{defaultValue:"top-users",className:"space-y-4",children:[g.jsxs(Fa,{children:[g.jsx(Xe,{value:"top-users",children:"Top Users"}),g.jsx(Xe,{value:"daily-usage",children:"Daily Usage"}),g.jsx(Xe,{value:"geographic",children:"Geographic"})]}),g.jsx(He,{value:"top-users",className:"space-y-4",children:g.jsxs(Lt,{children:[g.jsxs(Ot,{children:[g.jsx(Ut,{children:"Top Users by IP Address"}),g.jsx(yn,{children:"Users approaching or exceeding the 5-use limit are prime conversion targets"})]}),g.jsx(Ft,{children:g.jsxs(vi,{children:[g.jsx(yi,{children:g.jsxs(xn,{children:[g.jsx(bt,{children:"IP Address"}),g.jsx(bt,{children:"Usage Count"}),g.jsx(bt,{children:"Primary Calculator"}),g.jsx(bt,{children:"First Used"}),g.jsx(bt,{children:"Last Used"}),g.jsx(bt,{children:"Status"})]})}),g.jsx(xi,{children:o.length===0?g.jsx(xn,{children:g.jsx(Et,{colSpan:6,className:"text-center text-muted-foreground",children:"No guest usage data available"})}):o.map(v=>g.jsxs(xn,{children:[g.jsx(Et,{className:"font-mono text-sm",children:v.ip_address}),g.jsx(Et,{children:g.jsx("div",{className:"font-bold",children:v.usage_count})}),g.jsx(Et,{children:g.jsx(rn,{variant:v.calculator_type==="manufacturing"?"default":"secondary",children:v.calculator_type==="manufacturing"?"Manufacturing":"Diamond"})}),g.jsx(Et,{className:"text-sm",children:d(v.first_used)}),g.jsx(Et,{className:"text-sm",children:d(v.last_used)}),g.jsx(Et,{children:v.usage_count>=5?g.jsx(rn,{variant:"destructive",children:"Limit Reached"}):v.usage_count>=3?g.jsxs(rn,{variant:"default",className:"bg-orange-500",children:[g.jsx(wi,{className:"w-3 h-3 mr-1"}),"High Potential"]}):g.jsx(rn,{variant:"outline",children:"Active"})})]},v.ip_address))})]})})]})}),g.jsx(He,{value:"daily-usage",className:"space-y-4",children:g.jsxs(Lt,{children:[g.jsxs(Ot,{children:[g.jsx(Ut,{children:"Daily Usage (Last 7 Days)"}),g.jsx(yn,{children:"Guest calculator usage trends over time"})]}),g.jsx(Ft,{children:g.jsx("div",{className:"space-y-4",children:s.map(v=>g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsx("span",{className:"font-medium",children:h(v.date)}),g.jsxs("span",{className:"text-muted-foreground",children:[v.total," uses"]})]}),g.jsxs("div",{className:"flex gap-2 h-8",children:[v.manufacturing>0&&g.jsx("div",{className:"bg-blue-500 rounded flex items-center justify-center text-xs text-white font-medium",style:{width:`${v.manufacturing/(v.total||1)*100}%`},title:`Manufacturing: ${v.manufacturing}`,children:v.manufacturing}),v.diamond>0&&g.jsx("div",{className:"bg-purple-500 rounded flex items-center justify-center text-xs text-white font-medium",style:{width:`${v.diamond/(v.total||1)*100}%`},title:`Diamond: ${v.diamond}`,children:v.diamond}),v.total===0&&g.jsx("div",{className:"w-full bg-muted rounded flex items-center justify-center text-xs text-muted-foreground",children:"No usage"})]})]},v.date))})})]})}),g.jsxs(He,{value:"geographic",className:"space-y-4",children:[l.length>0&&g.jsxs(Lt,{children:[g.jsxs(Ot,{children:[g.jsxs(Ut,{className:"flex items-center gap-2",children:[g.jsx(Ze,{className:"h-5 w-5"}),"World Usage Heat Map"]}),g.jsx(yn,{children:"Visual representation of calculator usage intensity by region"})]}),g.jsxs(Ft,{children:[g.jsx(Ia,{data:l}),g.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-muted-foreground",children:"Usage Intensity:"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"hsl(var(--muted))"}}),g.jsx("span",{className:"text-xs text-muted-foreground",children:"Low"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"hsl(210 80% 65%)"}}),g.jsx("span",{className:"text-xs text-muted-foreground",children:"Medium"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"hsl(210 80% 25%)"}}),g.jsx("span",{className:"text-xs text-muted-foreground",children:"High"})]})]}),g.jsx("span",{className:"text-muted-foreground",children:"Hover over countries to see usage details"})]})]})]}),g.jsxs(Lt,{children:[g.jsxs(Ot,{children:[g.jsxs(Ut,{className:"flex items-center gap-2",children:[g.jsx(Ze,{className:"h-5 w-5"}),"Geographic Distribution"]}),g.jsx(yn,{children:"Calculator usage by country and region - identify expansion opportunities"})]}),g.jsx(Ft,{children:l.length===0?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No geographic data available yet. Location tracking started recently."}):g.jsxs(vi,{children:[g.jsx(yi,{children:g.jsxs(xn,{children:[g.jsx(bt,{children:"Country"}),g.jsx(bt,{children:"Total Uses"}),g.jsx(bt,{children:"Manufacturing"}),g.jsx(bt,{children:"Diamond"}),g.jsx(bt,{children:"Top Cities"})]})}),g.jsx(xi,{children:l.map((v,_)=>g.jsxs(xn,{children:[g.jsx(Et,{children:g.jsxs("div",{className:"flex items-center gap-2",children:[v.country_code&&g.jsx("span",{className:"text-2xl",children:String.fromCodePoint(...[...v.country_code.toUpperCase()].map(S=>127397+S.charCodeAt(0)))}),g.jsx("span",{className:"font-medium",children:v.country})]})}),g.jsx(Et,{children:g.jsx("div",{className:"font-bold",children:v.usage_count})}),g.jsx(Et,{children:g.jsx(rn,{variant:"default",className:"bg-blue-500",children:v.manufacturing})}),g.jsx(Et,{children:g.jsx(rn,{variant:"secondary",className:"bg-purple-500 text-white",children:v.diamond})}),g.jsx(Et,{children:g.jsx("div",{className:"text-sm text-muted-foreground",children:v.top_cities.length>0?v.top_cities.map((S,w)=>g.jsxs("div",{children:[S.city," (",S.count,")"]},w)):g.jsx("span",{className:"text-xs",children:"N/A"})})})]},v.country_code||_))})]})})]})]})]}),g.jsxs(Lt,{children:[g.jsx(Ot,{children:g.jsxs(Ut,{className:"flex items-center gap-2",children:[g.jsx(wi,{className:"h-5 w-5"}),"Engagement Insights"]})}),g.jsxs(Ft,{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[g.jsx("h4",{className:"font-semibold mb-2",children:"High-Potential Conversion Targets"}),g.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.filter(v=>v.usage_count>=3&&v.usage_count<5).length," users have used calculators 3-4 times. These users are highly engaged and close to the limit - prime candidates for conversion campaigns."]})]}),g.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950 rounded-lg border border-orange-200 dark:border-orange-800",children:[g.jsx("h4",{className:"font-semibold mb-2",children:"Blocked Users"}),g.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.filter(v=>v.usage_count>=5).length," users have reached the 5-use limit. Consider targeted email campaigns or remarketing to convert these blocked users into registered customers."]})]}),g.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:[g.jsx("h4",{className:"font-semibold mb-2",children:"Calculator Preference"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:r.manufacturingUses>r.diamondUses?`Manufacturing Cost Estimator is more popular (${Math.round(r.manufacturingUses/r.totalUses*100)}% of uses). Consider promoting this calculator more prominently.`:r.diamondUses>r.manufacturingUses?`Diamond Calculator is more popular (${Math.round(r.diamondUses/r.totalUses*100)}% of uses). Consider promoting this calculator more prominently.`:"Both calculators have equal usage. Maintain balanced promotion strategy."})]}),l.length>0&&g.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950 rounded-lg border border-purple-200 dark:border-purple-800",children:[g.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[g.jsx(Ze,{className:"h-4 w-4"}),"Geographic Insights"]}),g.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Top market: ",g.jsx("strong",{children:(m=l[0])==null?void 0:m.country})," with ",(N=l[0])==null?void 0:N.usage_count," uses.",l.length>1&&g.jsxs(g.Fragment,{children:[" Emerging markets: ",l.slice(1,4).map(v=>v.country).join(", "),"."]})]}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"Consider localization, regional marketing, or partnerships in high-usage countries to maximize conversion potential."})]})]})]})]})})};export{Ah as default};
//# sourceMappingURL=GuestCalculatorAnalytics-3rd2S8RO.js.map
