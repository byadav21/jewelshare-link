{"version":3,"file":"ResetPassword-DfF9nq4U.js","sources":["../../src/pages/ResetPassword.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { toast } from \"sonner\";\r\nimport { Gem } from \"lucide-react\";\r\nimport { BackToHomeButton } from \"@/components/BackToHomeButton\";\r\n\r\nconst ResetPassword = () => {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [validToken, setValidToken] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Check if we have a valid session from the reset link\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      if (session) {\r\n        setValidToken(true);\r\n      } else {\r\n        toast.error(\"Invalid or expired reset link\");\r\n        navigate(\"/auth\");\r\n      }\r\n    });\r\n  }, [navigate]);\r\n\r\n  const handleResetPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (password !== confirmPassword) {\r\n      toast.error(\"Passwords do not match\");\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      toast.error(\"Password must be at least 6 characters\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: password,\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(\"Password updated successfully!\");\r\n      \r\n      // Sign out and redirect to login\r\n      await supabase.auth.signOut();\r\n      navigate(\"/auth\");\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Failed to reset password\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!validToken) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"animate-pulse text-primary text-xl\">Verifying reset link...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\r\n      <div className=\"absolute top-4 left-4\">\r\n        <BackToHomeButton variant=\"ghost\" />\r\n      </div>\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center\">\r\n          <div className=\"flex justify-center mb-4\">\r\n            <Gem className=\"h-12 w-12 text-primary\" />\r\n          </div>\r\n          <CardTitle className=\"text-3xl font-serif\">Reset Password</CardTitle>\r\n          <CardDescription>\r\n            Enter your new password below\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleResetPassword} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">New Password</Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                placeholder=\"••••••••\"\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\r\n              <Input\r\n                id=\"confirmPassword\"\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                required\r\n                placeholder=\"••••••••\"\r\n                minLength={6}\r\n              />\r\n            </div>\r\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\r\n              {loading ? \"Updating...\" : \"Reset Password\"}\r\n            </Button>\r\n          </form>\r\n          <div className=\"mt-4 text-center\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => navigate(\"/auth\")}\r\n              className=\"text-sm text-primary hover:underline\"\r\n            >\r\n              Back to sign in\r\n            </button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"names":["ResetPassword","password","setPassword","useState","confirmPassword","setConfirmPassword","loading","setLoading","validToken","setValidToken","navigate","useNavigate","useEffect","supabase","session","toast","handleResetPassword","e","error","jsxs","jsx","BackToHomeButton","Card","CardHeader","Gem","CardTitle","CardDescription","CardContent","Label","Input","Button"],"mappings":"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"}