import{j as s}from"./query-vendor-BLxHmmGk.js";import{u as A,r as o}from"./react-vendor-BeR0k5Z3.js";import{s as c,B as L}from"./index-CX6yiz0b.js";import{A as N,b as P,a as U}from"./alert-DIsJjuyH.js";import{T as y,d as S}from"./ui-vendor-DjQqXt9S.js";const C=()=>{const f=A(),[e,k]=o.useState(null),[a,b]=o.useState(null),[v,j]=o.useState(!0);o.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:{user:t}}=await c.auth.getUser();if(!t)return;const{data:w,error:g}=await c.from("vendor_permissions").select("subscription_plan, max_products, max_share_links, max_team_members, max_product_images").eq("user_id",t.id).single();if(g)throw g;const{data:u,error:x}=await c.from("products").select("id").eq("user_id",t.id).is("deleted_at",null);if(x)throw x;const{data:m,error:_}=await c.from("share_links").select("id").eq("user_id",t.id);if(_)throw _;k(w),b({products_count:(u==null?void 0:u.length)||0,share_links_count:(m==null?void 0:m.length)||0})}catch(t){console.error("Error fetching limits:",t)}finally{j(!1)}};if(v||!e||!a)return null;const i=a.products_count/e.max_products*100,n=a.share_links_count/e.max_share_links*100,d=i>=100&&e.max_products!==999999,l=n>=100&&e.max_share_links!==999999,h=i>=80&&i<100&&e.max_products!==999999,p=n>=80&&n<100&&e.max_share_links!==999999,r=d||l;return!r&&!(h||p)?null:s.jsxs(N,{className:r?"border-destructive bg-destructive/10 dark:bg-destructive/20":"border-orange-500 bg-orange-50 dark:bg-orange-950/20",children:[s.jsx(y,{className:r?"h-4 w-4 text-destructive":"h-4 w-4 text-orange-600"}),s.jsx(P,{className:r?"text-destructive dark:text-destructive":"text-orange-900 dark:text-orange-100",children:r?"Plan Limits Exhausted":"Approaching Plan Limits"}),s.jsxs(U,{className:r?"text-destructive/90 dark:text-destructive/90 space-y-2":"text-orange-800 dark:text-orange-200 space-y-2",children:[(d||h)&&s.jsxs("p",{children:["ðŸ“¦ Products: ",s.jsxs("strong",{children:[a.products_count,"/",e.max_products]})," used (",Math.round(i),"%)",d&&s.jsx("span",{className:"ml-2 font-semibold",children:"- Limit Reached!"})]}),(l||p)&&s.jsxs("p",{children:["ðŸ”— Share Links: ",s.jsxs("strong",{children:[a.share_links_count,"/",e.max_share_links]})," used (",Math.round(n),"%)",l&&s.jsx("span",{className:"ml-2 font-semibold",children:"- Limit Reached!"})]}),r&&s.jsx("p",{className:"font-medium mt-2",children:"You've reached your plan limit. Upgrade now to continue using this feature."}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsxs(L,{size:"sm",onClick:()=>f("/pricing"),className:r?"bg-destructive hover:bg-destructive/90":"bg-orange-600 hover:bg-orange-700",children:[s.jsx(S,{className:"mr-2 h-4 w-4"}),"Upgrade to ",e.subscription_plan==="starter"?"Professional":"Enterprise"]})})]})]})};export{C as P};
//# sourceMappingURL=PlanLimitWarning-BlkgAHMZ.js.map
