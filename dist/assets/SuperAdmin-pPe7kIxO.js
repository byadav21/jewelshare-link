import{j as s}from"./query-vendor-CIvqgC9B.js";import{u as B,r as j}from"./react-vendor-BCzWReGx.js";import{Y as O,l as x,Z as F,B as r,C as l,t as c,x as i,y as m,o as n}from"./index-DBHw7ps1.js";import{B as S}from"./badge-HmGNQ04n.js";import{u as _,aY as I,U as k,r as U,bd as G,a0 as H,be as L,e as z,a8 as Y,ay as Z,aZ as J,am as K,bc as Q}from"./ui-vendor-B3Ur81tx.js";import"./supabase-vendor-DJknrin8.js";function ls(){const a=B(),{isAdmin:p,loading:N}=O(),[W,A]=j.useState({totalProducts:0,totalValue:0,teamMembers:0,activeShareLinks:0,totalShares:0,productInterests:0,catalogInquiries:0,totalViews:0}),[X,E]=j.useState([]),[M,V]=j.useState(!0);j.useEffect(()=>{!N&&!p&&(_.error("Access denied. Admin only."),a("/auth"))},[p,N,a]),j.useEffect(()=>{p&&(P(),D())},[p]);const P=async()=>{try{const{data:e,error:h}=await x.from("products").select("retail_price");if(h)throw h;const g=(e==null?void 0:e.reduce((u,v)=>u+(v.retail_price||0),0))||0,{data:d,error:t}=await x.from("user_roles").select("id").eq("role","team_member");if(t)throw t;const{data:o,error:y}=await x.from("share_links").select("id, is_active, view_count");if(y)throw y;const R=(o==null?void 0:o.filter(u=>u.is_active).length)||0,q=(o==null?void 0:o.reduce((u,v)=>u+(v.view_count||0),0))||0,{data:w,error:b}=await x.from("product_interests").select("id");if(b)throw b;const{data:f,error:C}=await x.from("catalog_inquiries").select("id");if(C)throw C;A({totalProducts:(e==null?void 0:e.length)||0,totalValue:g,teamMembers:(d==null?void 0:d.length)||0,activeShareLinks:R,totalShares:(o==null?void 0:o.length)||0,productInterests:(w==null?void 0:w.length)||0,catalogInquiries:(f==null?void 0:f.length)||0,totalViews:q})}catch(e){_.error("Failed to fetch stats"),console.error(e)}finally{V(!1)}},D=async()=>{try{const e=[],{data:h}=await x.from("share_links").select("*").order("created_at",{ascending:!1}).limit(5);h==null||h.forEach(t=>{e.push({type:"share",data:t,timestamp:t.created_at||""})});const{data:g}=await x.from("product_interests").select("*").order("created_at",{ascending:!1}).limit(5);g==null||g.forEach(t=>{e.push({type:"interest",data:t,timestamp:t.created_at})});const{data:d}=await x.from("catalog_inquiries").select("*").order("created_at",{ascending:!1}).limit(5);d==null||d.forEach(t=>{e.push({type:"inquiry",data:t,timestamp:t.created_at})}),e.sort((t,o)=>new Date(o.timestamp).getTime()-new Date(t.timestamp).getTime()),E(e.slice(0,10))}catch(e){console.error("Failed to fetch recent activity",e)}},T=async()=>{await x.auth.signOut(),a("/auth")};return N||M?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-pulse",children:"Loading admin dashboard..."})}):p?s.jsx(F,{children:s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-10",children:s.jsx("div",{className:"container mx-auto px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Super Admin"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1",children:"Manage vendors and approvals"})]}),s.jsxs(r,{variant:"outline",onClick:T,size:"sm",className:"w-full sm:w-auto",children:[s.jsx(I,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})})}),s.jsx("main",{className:"container mx-auto px-3 sm:px-6 py-4 sm:py-8",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6 max-w-6xl mx-auto",children:[s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/vendor-approvals"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(k,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Vendor Approvals"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Review and approve new vendor applications"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Manage Approvals"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/vendor-management"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(k,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Vendor Management"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Manage vendor accounts"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Manage"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/admin"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(U,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Content Management"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Manage blog posts, brands, and site settings"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Open Dashboard"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/active-sessions"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(G,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Active Sessions"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Monitor user sessions"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"View"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/global-search"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(H,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Global Search"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Search products & vendors"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Search"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/customer-database"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(L,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Customers"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Customer interests & inquiries"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"View"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/analytics-dashboard"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Analytics"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Activity & engagement metrics"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"View"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/audit-logs"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(Y,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Audit Logs"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Track admin actions"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"View"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/export-reports"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(Z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Export Reports"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Generate PDF & Excel reports"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Export"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98]",onClick:()=>a("/login-history"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(J,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Login History"]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Vendor login activity"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"View"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98] border-primary/50 bg-gradient-to-br from-primary/5 to-transparent",onClick:()=>a("/plan-management"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(K,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Plan Management",s.jsx(S,{variant:"secondary",className:"ml-auto text-xs",children:"Permissions"})]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Manage vendor subscription plans & permissions"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Manage Plans & Access"})})]}),s.jsxs(l,{className:"hover:shadow-lg transition-shadow cursor-pointer active:scale-[0.98] border-primary/50 bg-gradient-to-br from-primary/5 to-transparent",onClick:()=>a("/permission-presets"),children:[s.jsxs(c,{className:"p-4 sm:p-6",children:[s.jsxs(i,{className:"flex items-center gap-2 sm:gap-3 text-base sm:text-lg",children:[s.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),"Permission Presets",s.jsx(S,{variant:"secondary",className:"ml-auto text-xs",children:"Templates"})]}),s.jsx(m,{className:"text-xs sm:text-sm",children:"Create reusable permission templates"})]}),s.jsx(n,{className:"p-4 sm:p-6 pt-0",children:s.jsx(r,{className:"w-full h-9 sm:h-10 text-xs sm:text-sm",variant:"default",children:"Manage Templates"})})]})]})})]})}):null}export{ls as default};
//# sourceMappingURL=SuperAdmin-pPe7kIxO.js.map
