import{r as t}from"./react-vendor-BeR0k5Z3.js";import{s}from"./index-CX6yiz0b.js";const p=()=>{const[o,c]=t.useState({can_view_catalog:!0,can_add_products:!0,can_import_data:!0,can_share_catalog:!0,can_manage_team:!1,can_view_interests:!0,can_delete_products:!0,can_edit_products:!0,can_edit_profile:!0,can_add_vendor_details:!0,can_view_custom_orders:!0,can_manage_custom_orders:!1,can_view_share_links:!0,can_manage_share_links:!0,can_view_sessions:!0,can_manage_sessions:!0}),[d,r]=t.useState(!0);return t.useEffect(()=>{let n;return(async()=>{const{data:{user:_}}=await s.auth.getUser();if(!_){r(!1);return}const{data:e,error:i}=await s.from("vendor_permissions").select("*").eq("user_id",_.id).maybeSingle();i?console.error("Error fetching permissions:",i):e&&c({can_view_catalog:e.can_view_catalog,can_add_products:e.can_add_products,can_import_data:e.can_import_data,can_share_catalog:e.can_share_catalog,can_manage_team:e.can_manage_team,can_view_interests:e.can_view_interests,can_delete_products:e.can_delete_products,can_edit_products:e.can_edit_products,can_edit_profile:e.can_edit_profile,can_add_vendor_details:e.can_add_vendor_details,can_view_custom_orders:e.can_view_custom_orders,can_manage_custom_orders:e.can_manage_custom_orders,can_view_share_links:e.can_view_share_links,can_manage_share_links:e.can_manage_share_links,can_view_sessions:e.can_view_sessions??!0,can_manage_sessions:e.can_manage_sessions??!0}),r(!1),n=s.channel(`vendor_permissions_${_.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vendor_permissions",filter:`user_id=eq.${_.id}`},u=>{const a=u.new;c({can_view_catalog:a.can_view_catalog,can_add_products:a.can_add_products,can_import_data:a.can_import_data,can_share_catalog:a.can_share_catalog,can_manage_team:a.can_manage_team,can_view_interests:a.can_view_interests,can_delete_products:a.can_delete_products,can_edit_products:a.can_edit_products,can_edit_profile:a.can_edit_profile,can_add_vendor_details:a.can_add_vendor_details,can_view_custom_orders:a.can_view_custom_orders,can_manage_custom_orders:a.can_manage_custom_orders,can_view_share_links:a.can_view_share_links,can_manage_share_links:a.can_manage_share_links,can_view_sessions:a.can_view_sessions??!0,can_manage_sessions:a.can_manage_sessions??!0})}).subscribe()})(),()=>{n&&s.removeChannel(n)}},[]),{permissions:o,loading:d}};export{p as u};
//# sourceMappingURL=useVendorPermissions-CoV6zMFq.js.map
