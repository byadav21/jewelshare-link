import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as l,u as Ye}from"./react-vendor-BeR0k5Z3.js";import{C as Ce,G as gt,D as xt,Q as Xt,S as H,B as C,R as es,F as T,z as W,H as ts,U as be,A as Ve,V as Ne,W as ve,X as _e,y as he,Y as ss,Z as as,_ as rs}from"./index-DGlTgSKx.js";import{C as we}from"./checkbox-Bj0qpZun.js";import{B as ee}from"./badge-DknkzE8c.js";import{O as is}from"./OptimizedImage-DZ5nBmff.js";import{f as ft,g as yt,w as ns,Z as ls,I as os,b as ue,d as re,i as cs,aa as ds,x as ms,X as jt,u as _,at as hs,Q as at,aB as us,a8 as ps,ak as je,m as Ge,n as bt,aE as gs,l as xs,aF as rt,k as fs,aG as He,A as ys,aw as js,ac as it,aH as bs,T as Ns,H as nt,V as lt,ab as ot,aI as ct,aJ as dt,U as mt,aK as vs,ay as _s,aD as ht,aL as ws,_ as Cs}from"./ui-vendor-CN4tOqpp.js";import{C as ks}from"./CatalogFilters-DQog0dAb.js";import{D as ke,b as Se,c as Pe,d as Fe,e as De,f as Nt}from"./dialog-CRWggOUB.js";import{S as Qe}from"./scroll-area-B6OKxq6t.js";import{N as Ss,D as Ps,a as Fs,b as Ds,c as V,d as Ue}from"./NavLink-Br6M-CFW.js";import{u as Ls}from"./useVendorPermissions-3FIyIdzZ.js";import{E as Rs,a as Ts}from"./jspdf.plugin.autotable-DkGJWiqm.js";import{P as As}from"./PlanLimitWarning-D2tC9SoR.js";import{P as ut}from"./progress-CD8Qom20.js";import{A as Is,a as Us}from"./alert-B0m9J_BT.js";import{I}from"./input-CEHl5GoJ.js";import{L as k}from"./label-ClRcubO_.js";import{u as vt}from"./useKeyboardHeight-DHIJz8gT.js";import{S as $e,a as ze,b as Ee,c as Me,d as J}from"./select-CQfvDDtS.js";import{T as $s,a as zs,b as We,c as Oe}from"./tabs-DfoelxW9.js";import{T as Es,a as Ms,b as pt,c as Be,d as Ws,e as qe}from"./table-BDYxPG4d.js";import{z as R}from"./index-ibl8YJur.js";import{A as Os,a as Bs,b as qs,c as Vs,d as Gs,e as Hs,f as Ks,g as Ys}from"./alert-dialog-D1nisvxB.js";import{H as Qs}from"./Header-B5-jxlpW.js";import"./supabase-vendor-VSDMYZ1k.js";import"./index-DjQc2W_p.js";import"./index-CVwUD2ep.js";import"./index-aqCwQlp3.js";import"./index-BC78nHQ6.js";import"./index-BdQq_4o_.js";import"./index-XJCymQHf.js";import"./sheet-Cln3_CyD.js";const Js=({product:t,isSelected:r,onToggleSelection:c,usdRate:d,vendorLogoUrl:h})=>{const x=[t.image_url,t.image_url_2,t.image_url_3].filter(Boolean),[o,n]=l.useState(0),[y,N]=l.useState(!1),U=()=>{n(g=>(g+1)%x.length)},p=()=>{n(g=>(g-1+x.length)%x.length)},i=()=>{N(!0),x.length>1&&U()},u=()=>{N(!1),n(0)};return e.jsx("div",{className:"transform hover:-translate-y-2 transition-transform duration-300",children:e.jsxs(Ce,{className:"overflow-hidden relative group bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg hover:shadow-2xl hover:shadow-primary/10 transition-all duration-300 active:scale-[0.98] touch-manipulation",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-md rounded opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx(we,{checked:r,onCheckedChange:g=>{c(t.id)},className:"relative bg-background/95 backdrop-blur-sm border-2 border-primary/30 w-5 h-5 sm:w-6 sm:h-6 shadow-lg cursor-pointer"})]})}),x.length>0?e.jsxs("div",{className:"aspect-square overflow-hidden bg-muted relative group",onMouseEnter:i,onMouseLeave:u,children:[e.jsx(is,{src:x[o],alt:`${t.name} - Image ${o+1}`,className:"w-full h-full object-cover",width:400,height:400,blurPlaceholder:!0,priority:!1}),x.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation","aria-label":"Previous image",children:e.jsx(ft,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("button",{onClick:U,className:"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation","aria-label":"Next image",children:e.jsx(yt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("div",{className:"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 sm:gap-2 bg-background/80 backdrop-blur-sm px-2 sm:px-3 py-1 sm:py-1.5 rounded-full",children:x.map((g,A)=>e.jsx("button",{onClick:()=>n(A),className:`transition-all duration-300 rounded-full touch-manipulation ${A===o?"bg-primary w-5 sm:w-6 h-1.5 sm:h-2":"bg-muted-foreground/40 w-1.5 sm:w-2 h-1.5 sm:h-2 active:bg-muted-foreground/60"}`,"aria-label":`Go to image ${A+1}`},A))}),e.jsxs("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 bg-background/90 backdrop-blur-sm px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium shadow-sm",children:[o+1," / ",x.length]})]})]}):e.jsx("div",{className:"aspect-square overflow-hidden bg-muted flex items-center justify-center",children:e.jsx(ns,{className:"h-24 w-24 text-muted-foreground/30"})}),e.jsxs(gt,{className:"p-4 sm:p-6 relative",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300",children:t.name}),t.sku&&e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground/80 mb-3 font-medium",children:["SKU: ",t.sku]}),e.jsxs("div",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm border-t border-border/50 pt-3 sm:pt-4 bg-gradient-to-b from-transparent to-muted/20 -mx-4 sm:-mx-6 px-4 sm:px-6 pb-2",children:[t.diamond_color&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Diamond Color:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.diamond_color})]}),t.clarity&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Diamond Clarity:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.clarity})]}),t.diamond_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"T DWT:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.diamond_weight,"g"]})]}),t.weight_grams&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Gross Weight:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.weight_grams,"g"]})]}),t.net_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"NET WT:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.net_weight,"g"]})]})]}),t.metal_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Metal Type:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.metal_type})]}),t.purity_fraction_used&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Metal Purity:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[(t.purity_fraction_used*100).toFixed(0),"%"]})]})]})]}),e.jsxs(xt,{className:"p-3 sm:p-6",children:[t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 sm:mb-3 line-clamp-2",children:t.description}),t.category&&e.jsxs("div",{className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",e.jsx("span",{className:"text-foreground font-medium",children:t.category})]})]}),e.jsxs(Xt,{className:"flex flex-col gap-3.5 border-t border-border/50 p-4 sm:p-6 pt-4 sm:pt-5 bg-gradient-to-b from-muted/5 to-transparent",children:[t.delivery_type&&e.jsx("div",{className:"w-full",children:t.delivery_type==="immediate delivery"?e.jsxs(ee,{variant:"secondary",className:"w-full justify-center gap-2 py-2 bg-gradient-to-r from-emerald-500/20 via-green-500/20 to-emerald-500/20 border-emerald-500/40 text-emerald-700 dark:text-emerald-400 hover:from-emerald-500/30 hover:to-green-500/30 shadow-sm font-semibold",children:[e.jsx(ls,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:"Immediate Dispatch"})]}):e.jsxs(ee,{variant:"outline",className:"w-full justify-center gap-2 py-2 border-primary/40 text-primary hover:bg-primary/10 shadow-sm font-semibold",children:[e.jsx(os,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:t.delivery_type})]})}),e.jsxs("div",{className:"flex justify-between w-full items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Retail Price"}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm",children:["â‚¹",t.retail_price.toLocaleString("en-IN")]}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary/20 to-accent/20 blur-lg opacity-30 -z-10"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:["$",(t.retail_price/d).toLocaleString("en-US",{maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:t.stock_quantity})]})]})]})]})})},Zs=l.memo(Js,(t,r)=>t.product.id===r.product.id&&t.isSelected===r.isSelected&&t.usdRate===r.usdRate&&t.product.retail_price===r.product.retail_price),Xs=()=>e.jsxs(Ce,{className:"overflow-hidden bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg",children:[e.jsx(H,{className:"aspect-square w-full"}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{className:"h-6 w-3/4"}),e.jsx(H,{className:"h-4 w-1/2"})]}),e.jsxs("div",{className:"space-y-2 border-t border-border/50 pt-3",children:[e.jsx(H,{className:"h-3 w-full"}),e.jsx(H,{className:"h-3 w-full"}),e.jsx(H,{className:"h-3 w-2/3"})]}),e.jsxs("div",{className:"border-t border-border/50 pt-4",children:[e.jsx(H,{className:"h-10 w-full mb-3"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{className:"h-3 w-16"}),e.jsx(H,{className:"h-8 w-24"})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(H,{className:"h-3 w-12"}),e.jsx(H,{className:"h-8 w-12"})]})]})]})]})]}),ea=[{category:"Ladies Rings",patterns:[/\bCLR\d+/i,/ladies?\s*rings?/i,/women'?s?\s*rings?/i,/female\s*rings?/i],priority:10},{category:"Gents Rings",patterns:[/\bCGR\d+/i,/gents?\s*rings?/i,/men'?s?\s*rings?/i,/male\s*rings?/i],priority:10},{category:"Rings",patterns:[/\brings?\b/i,/\bband\b/i,/\bwedding\s*band/i],priority:5},{category:"Ladies Bangles",patterns:[/\bCLB\d+/i,/ladies?\s*bangles?/i,/women'?s?\s*bangles?/i,/kadas?/i],priority:10},{category:"Gents Bangles",patterns:[/\bCGB\d+/i,/gents?\s*bangles?/i,/men'?s?\s*bangles?/i],priority:10},{category:"Bangles",patterns:[/\bbangles?\b/i,/\bbracelets?\b/i],priority:5},{category:"Bracelets",patterns:[/\bCBR\d+/i,/\bbracelets?\b/i,/\bwrist\s*band/i,/\bchain\s*bracelet/i],priority:8},{category:"Necklaces",patterns:[/\bCLN\d+/i,/\bnecklaces?\b/i,/\bhaar\b/i,/\bmangalsutra/i,/\bchoker/i,/\bcollar\b/i],priority:9},{category:"Earrings",patterns:[/\bCLE\d+/i,/\bearrings?\b/i,/\bstuds?\b/i,/\bhoops?\b/i,/\bdrops?\b/i,/\bjhumka/i,/\bjhumki/i],priority:9},{category:"Pendants",patterns:[/\bCLP\d+/i,/\bpendants?\b/i,/\blockets?\b/i,/\bcharm\b/i],priority:9},{category:"Chains",patterns:[/\bCLC\d+/i,/\bchains?\b/i,/\bgold\s*chain/i,/\bsilver\s*chain/i],priority:9},{category:"Toe Rings",patterns:[/\btoe\s*rings?/i,/\bmetti/i,/\bfoot\s*rings?/i],priority:9},{category:"Nose Pins",patterns:[/\bnose\s*pins?/i,/\bnath\b/i,/\bbullak/i],priority:9},{category:"Mangalsutra",patterns:[/\bmangalsutra/i,/\bthali/i],priority:9},{category:"Anklets",patterns:[/\banklets?/i,/\bpayal/i,/\bpajeb/i],priority:9},{category:"Sets",patterns:[/\bsets?\b/i,/\bcomplete\s*set/i,/\bbridal\s*set/i,/\bjewel(?:le)?ry\s*set/i],priority:8}];function ta(t,r){const c=`${t} ${r||""}`,d=[...ea].sort((h,x)=>x.priority-h.priority);for(const{category:h,patterns:x,priority:o}of d)for(const n of x)if(n.test(c)){let y;return o>=10?y="high":o>=7?y="medium":y="low",{category:h,confidence:y,pattern:n.source}}return null}function sa(t){const r=[];for(const c of t){if(c.category)continue;const d=ta(c.name,c.sku);d&&r.push({productId:c.id,productName:c.name,currentCategory:c.category,suggestedCategory:d.category,confidence:d.confidence,matchedPattern:d.pattern})}return r}function aa(t){const r=t.reduce((d,h)=>(d[h.suggestedCategory]=(d[h.suggestedCategory]||0)+1,d),{}),c=t.reduce((d,h)=>(d[h.confidence]=(d[h.confidence]||0)+1,d),{});return{total:t.length,byCategory:r,byConfidence:c}}function ra({open:t,onOpenChange:r,suggestions:c,onApply:d}){const[h,x]=l.useState(new Set(c.map(u=>u.productId))),[o,n]=l.useState(!1),y=aa(c),N=u=>{const g=new Set(h);g.has(u)?g.delete(u):g.add(u),x(g)},U=()=>{h.size===c.length?x(new Set):x(new Set(c.map(u=>u.productId)))},p=async()=>{n(!0);try{await d(Array.from(h)),r(!1)}finally{n(!1)}},i=u=>{switch(u){case"high":return e.jsx(ee,{className:"bg-green-500/20 text-green-700 dark:text-green-400",children:"High"});case"medium":return e.jsx(ee,{className:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"low":return e.jsx(ee,{className:"bg-orange-500/20 text-orange-700 dark:text-orange-400",children:"Low"});default:return null}};return e.jsx(ke,{open:t,onOpenChange:r,children:e.jsxs(Se,{className:"max-w-4xl max-h-[80vh]",children:[e.jsxs(Pe,{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),"Smart Category Suggestions"]}),e.jsxs(De,{children:["Found ",y.total," products that can be auto-categorized based on their names and SKUs"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 py-4",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:y.total}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Suggestions"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.byConfidence.high||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"High Confidence"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.byConfidence.medium||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Medium Confidence"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y.byConfidence.low||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Low Confidence"})]})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Categories Found"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(y.byCategory).map(([u,g])=>e.jsxs(ee,{variant:"secondary",children:[u,": ",g]},u))})]}),e.jsx(Qe,{className:"h-[300px] border rounded-lg",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b sticky top-0 bg-background",children:[e.jsx(we,{checked:h.size===c.length,onCheckedChange:U}),e.jsxs("span",{className:"text-sm font-medium",children:["Select All (",h.size,"/",c.length,")"]})]}),c.map(u=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors",children:[e.jsx(we,{checked:h.has(u.productId),onCheckedChange:()=>N(u.productId)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:u.productName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"â†’"}),e.jsx(ee,{variant:"outline",className:"text-xs",children:u.suggestedCategory}),i(u.confidence)]})]})]},u.productId))]})}),e.jsxs(Nt,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(C,{onClick:p,disabled:h.size===0||o,children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Apply ",h.size," Categories"]})]})]})})}const Je=()=>{const[t,r]=l.useState(null),[c,d]=l.useState(null),[h,x]=l.useState(!0);l.useEffect(()=>{o()},[]);const o=async()=>{try{const p=await es();if(!p){x(!1);return}const[i,u,g]=await Promise.all([T.from("vendor_permissions").select("subscription_plan, max_products, max_share_links, max_team_members, max_product_images").eq("user_id",p.id).single(),T.from("products").select("id",{count:"exact",head:!0}).eq("user_id",p.id).is("deleted_at",null),T.from("share_links").select("id",{count:"exact",head:!0}).eq("user_id",p.id)]);if(i.error)throw i.error;r(i.data),d({products_count:u.count||0,share_links_count:g.count||0})}catch(p){console.error("Error fetching limits:",p)}finally{x(!1)}};if(!t||!c)return{canAddProducts:!0,canAddShareLinks:!0,productsRemaining:0,shareLinksRemaining:0,productUsagePercent:0,shareLinksUsagePercent:0,loading:h};const n=c.products_count/t.max_products*100,y=c.share_links_count/t.max_share_links*100,N=t.max_products===999999,U=t.max_share_links===999999;return{canAddProducts:N||c.products_count<t.max_products,canAddShareLinks:U||c.share_links_count<t.max_share_links,productsRemaining:N?1/0:t.max_products-c.products_count,shareLinksRemaining:U?1/0:t.max_share_links-c.share_links_count,productUsagePercent:n,shareLinksUsagePercent:y,loading:h}},ia=(t,r,c,d,h,x)=>{var p;const o=new Rs("landscape","mm","a4"),n=o.internal.pageSize.getWidth();if(o.setFontSize(20),o.setFont("helvetica","bold"),o.text((r==null?void 0:r.business_name)||"Product Catalog",n/2,20,{align:"center"}),r){o.setFontSize(10),o.setFont("helvetica","normal");let i=30;r.address_line1&&(o.text(`${r.address_line1}${r.address_line2?", "+r.address_line2:""}`,n/2,i,{align:"center"}),i+=5),r.city&&(o.text(`${r.city}, ${r.state} ${r.pincode}`,n/2,i,{align:"center"}),i+=5);const u=[];r.email&&u.push(`Email: ${r.email}`),r.phone&&u.push(`Phone: ${r.phone}`),r.whatsapp_number&&u.push(`WhatsApp: ${r.whatsapp_number}`),u.length>0&&o.text(u.join(" | "),n/2,i,{align:"center"})}o.setFillColor(248,250,252),o.rect(0,45,n,8,"F"),o.setFontSize(8.5),o.setFont("helvetica","bold"),o.setTextColor(70,70,80),o.text(`Date: ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})} | Exchange Rate: 1 USD = Rs.${c.toFixed(2)} | Gold Rate (24K): Rs.${d.toLocaleString("en-IN")}/g`,n/2,49,{align:"center"});const y=t.map((i,u)=>[i.sku||`${u+1}`,i.name,i.diamond_color||"-",i.clarity||"-",i.d_wt_1?`${i.d_wt_1}`:"-",i.d_wt_2?`${i.d_wt_2}`:"-",i.diamond_weight?`${i.diamond_weight}`:"-",i.weight_grams?`${i.weight_grams}`:"-",i.net_weight?`${i.net_weight}`:"-",i.purity_fraction_used?`${i.purity_fraction_used>1?i.purity_fraction_used:(i.purity_fraction_used*100).toFixed(0)}%`:"-",i.d_rate_1?`${i.d_rate_1.toLocaleString("en-IN")}`:"-",i.pointer_diamond?`${i.pointer_diamond.toLocaleString("en-IN")}`:"-",i.d_value?`${i.d_value.toLocaleString("en-IN")}`:"-",i.gemstone||"NONE",i.mkg?`${i.mkg.toLocaleString("en-IN",{maximumFractionDigits:2})}`:"-",i.certification_cost?`${i.certification_cost.toLocaleString("en-IN")}`:"-",i.gemstone_cost?`${i.gemstone_cost.toLocaleString("en-IN")}`:"-",i.retail_price.toLocaleString("en-IN",{maximumFractionDigits:0}),i.total_usd?i.total_usd.toFixed(2):(i.retail_price/c).toFixed(2)]);Ts(o,{head:[["SKU","PRODUCT NAME",`DIAMOND
COLOR`,"CLARITY",`D.WT 1
(ct)`,`D.WT 2
(ct)`,`TOTAL
D.WT (ct)`,`GROSS
WT (g)`,`NET
WT (g)`,`PURITY
%`,`D RATE 1
(Rs/ct)`,`POINTER
DIAMOND`,`D VALUE
(Rs)`,`GEMSTONE
TYPE`,`MKG
(Rs)`,`CERT
COST (Rs)`,`GEM
COST (Rs)`,`TOTAL
(Rs)`,`TOTAL
(USD)`]],body:y,startY:53,styles:{fontSize:8,cellPadding:3,lineColor:[220,220,220],lineWidth:.15,overflow:"linebreak",halign:"left",valign:"middle",textColor:[50,50,50]},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold",halign:"center",fontSize:7.5,minCellHeight:14,valign:"middle",cellPadding:3},alternateRowStyles:{fillColor:[250,252,255]},columnStyles:{0:{cellWidth:15,halign:"left"},1:{cellWidth:32,halign:"left"},2:{cellWidth:12,halign:"center"},3:{cellWidth:12,halign:"center"},4:{cellWidth:12,halign:"right"},5:{cellWidth:12,halign:"right"},6:{cellWidth:14,halign:"right"},7:{cellWidth:12,halign:"right"},8:{cellWidth:12,halign:"right"},9:{cellWidth:12,halign:"right"},10:{cellWidth:14,halign:"right"},11:{cellWidth:14,halign:"right"},12:{cellWidth:14,halign:"right"},13:{cellWidth:16,halign:"center"},14:{cellWidth:14,halign:"right"},15:{cellWidth:13,halign:"right"},16:{cellWidth:13,halign:"right"},17:{cellWidth:22,halign:"right",fontStyle:"bold",textColor:[30,64,175]},18:{cellWidth:18,halign:"right",fontStyle:"bold",textColor:[30,64,175]}},margin:{top:53,left:5,right:5},tableWidth:"auto",didParseCell:function(i){i.column.index===17&&i.section==="body"&&(i.cell.text=[`Rs. ${i.cell.text[0]}`]),i.column.index===18&&i.section==="body"&&(i.cell.text=[`$ ${i.cell.text[0]}`])}});const N=o.lastAutoTable.finalY||50;o.setFillColor(250,252,255),o.roundedRect(14,N+6,n-28,20,2,2,"F"),o.setDrawColor(41,128,185),o.setLineWidth(.5),o.roundedRect(14,N+6,n-28,20,2,2,"S"),o.setFontSize(11),o.setFont("helvetica","bold"),o.setTextColor(41,128,185),o.text(`Total: Rs.${h.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})} | USD $${x.toFixed(2)}`,n/2,N+13,{align:"center"}),o.setTextColor(50,50,60),o.setFontSize(9),o.text(`Total Products: ${t.length}`,n/2,N+20,{align:"center"});const U=`catalog_${((p=r==null?void 0:r.business_name)==null?void 0:p.replace(/\s+/g,"_"))||"products"}_${new Date().toLocaleDateString("en-IN").replace(/\//g,"-")}.pdf`;o.save(U)},na=()=>{const{productUsagePercent:t,shareLinksUsagePercent:r,productsRemaining:c,shareLinksRemaining:d,loading:h}=Je();if(h)return null;const x=c===1/0,o=d===1/0,n=t>=80||r>=80,y=t>=100||r>=100;return n?e.jsx(Is,{className:`mb-6 ${y?"border-destructive bg-destructive/5":"border-warning bg-warning/5"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[y?e.jsx(ds,{className:"h-5 w-5 text-destructive mt-0.5"}):e.jsx(re,{className:"h-5 w-5 text-warning mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx(Us,{className:"font-medium",children:y?"Plan Limits Reached":"Approaching Plan Limits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Products"}),e.jsx("span",{className:"font-medium",children:x?"Unlimited":`${c} remaining`})]}),!x&&e.jsx(ut,{value:Math.min(t,100),className:t>=100?"[&>div]:bg-destructive":t>=80?"[&>div]:bg-warning":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Share Links"}),e.jsx("span",{className:"font-medium",children:o?"Unlimited":`${d} remaining`})]}),!o&&e.jsx(ut,{value:Math.min(r,100),className:r>=100?"[&>div]:bg-destructive":r>=80?"[&>div]:bg-warning":""})]})]})]})]})}):null},_t=({open:t,onOpenChange:r,limitType:c})=>{const d=Ye(),h=()=>{r(!1),d("/pricing")},x=()=>{switch(c){case"products":return"You've reached your product limit";case"share_links":return"You've reached your share link limit";default:return"You've reached your plan limit"}},o=[{name:"Professional",price:"â‚¹2,999/mo",features:["1,000 Products","10 Share Links","3 Team Members","Unlimited Product Images","Custom Orders","Import Data","Priority Support"]},{name:"Enterprise",price:"Custom",features:["Unlimited Products","Unlimited Share Links","Unlimited Team Members","Unlimited Product Images","All Professional Features","Dedicated Account Manager","Custom Integrations"],highlight:!0}];return e.jsx(ke,{open:t,onOpenChange:r,children:e.jsxs(Se,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Pe,{children:[e.jsxs(Fe,{className:"text-2xl flex items-center gap-2",children:[e.jsx(ue,{className:"h-6 w-6 text-primary"}),"Upgrade Your Plan"]}),e.jsxs(De,{className:"text-base",children:[x(),". Upgrade to continue growing your business."]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:o.map(n=>e.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${n.highlight?"border-primary bg-primary/5":"border-border"}`,children:[n.highlight&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:"RECOMMENDED"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:n.name}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:n.price})]}),e.jsx("ul",{className:"space-y-3",children:n.features.map(y=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:y})]},y))}),e.jsx(C,{onClick:h,className:"w-full",variant:n.highlight?"default":"outline",children:n.name==="Enterprise"?"Contact Sales":"Upgrade Now"})]})]},n.name))})]})})},la=({currentGoldRate:t,onUpdate:r,onSkip:c})=>{const[d,h]=l.useState(!1),[x,o]=l.useState(""),[n,y]=l.useState(!1);l.useEffect(()=>{const p=new Date().toDateString();localStorage.getItem("gold_rate_last_prompt")!==p&&setTimeout(()=>h(!0),1e3)},[]);const N=async()=>{const p=parseFloat(x);if(!x||x.trim()===""){_.error("Please enter a gold rate");return}if(isNaN(p)||p<=0){_.error("Please enter a valid positive number");return}if(p<1e3||p>2e5){_.error("Gold rate must be between â‚¹1,000 and â‚¹2,00,000 per gram");return}y(!0);try{await r(p);const i=new Date().toDateString();localStorage.setItem("gold_rate_last_prompt",i),localStorage.removeItem("gold_rate_skip_timestamp"),h(!1),_.success("Gold rate updated successfully!")}catch(i){console.error("Error updating gold rate:",i),_.error("Failed to update gold rate")}finally{y(!1)}},U=()=>{const p=new Date().toDateString();localStorage.setItem("gold_rate_last_prompt",p),h(!1),c(),_.info("Gold rate update skipped for today.")};return e.jsx(ke,{open:d,onOpenChange:h,children:e.jsxs(Se,{className:"sm:max-w-md border-2 border-primary/20 shadow-2xl",children:[e.jsxs("button",{onClick:U,className:"absolute right-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-accent hover:scale-110 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs(Pe,{className:"space-y-4",children:[e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border-2 border-amber-500/30 shadow-lg",children:e.jsx(re,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(Fe,{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent",children:"Update Gold Rate"}),e.jsx(De,{className:"text-base",children:"Start your day by updating today's 24K gold rate"})]})]}),e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-5 pt-4",children:[e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Current Rate"}),e.jsxs("p",{className:"text-xl font-bold text-amber-600",children:["â‚¹",t.toLocaleString("en-IN"),"/g"]})]}),e.jsx(ue,{className:"h-6 w-6 text-amber-500/50"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"goldRate",className:"text-sm font-medium",children:"New Gold Rate (per gram)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-medium",children:"â‚¹"}),e.jsx(I,{id:"goldRate",type:"number",value:x,onChange:p=>o(p.target.value),onKeyDown:p=>{p.key==="Enter"&&!n&&N()},placeholder:"Enter today's rate",min:"1000",max:"200000",step:"100",disabled:n,className:"pl-8 h-12 text-lg font-semibold border-2 focus:border-amber-500 focus:ring-amber-500",autoFocus:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will automatically recalculate prices for all products with weight"})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[e.jsx(C,{onClick:N,disabled:n,size:"lg",className:"w-full h-12 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:n?e.jsxs(e.Fragment,{children:[e.jsx(W.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mr-2",children:e.jsx(re,{className:"h-5 w-5"})}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),"Update Gold Rate"]})}),e.jsx(C,{onClick:U,disabled:n,variant:"ghost",size:"lg",className:"w-full",children:"Skip for Today"})]}),e.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground leading-relaxed",children:["ðŸ’¡ ",e.jsx("strong",{children:"Pro Tip:"})," Update your gold rate daily to keep your pricing accurate and competitive"]})})]})]})})},oa=({goldRate:t,silverRate:r,platinumRate:c,onRatesUpdated:d})=>{const[h,x]=l.useState(t.toString()),[o,n]=l.useState(r.toString()),[y,N]=l.useState(c.toString()),[U,p]=l.useState(!1),i=async()=>{const u=parseFloat(h),g=parseFloat(o),A=parseFloat(y);if(isNaN(u)||u<=0||isNaN(g)||g<=0||isNaN(A)||A<=0){_.error("Please enter valid positive rates");return}p(!0);try{const{data:{user:S}}=await T.auth.getUser();if(!S){_.error("Please sign in to update rates");return}const{error:K}=await T.from("vendor_profiles").update({gold_rate_24k_per_gram:u,silver_rate_per_gram:g,platinum_rate_per_gram:A,gold_rate_updated_at:new Date().toISOString()}).eq("user_id",S.id);if(K)throw K;d({goldRate:u,silverRate:g,platinumRate:A}),_.success("Metal rates updated successfully!")}catch(S){console.error("Error updating rates:",S),_.error("Failed to update metal rates")}finally{p(!1)}};return e.jsxs(Ce,{className:"border-2 border-amber-500/20 bg-gradient-to-br from-amber-500/5 to-transparent",children:[e.jsx(gt,{className:"pb-3",children:e.jsxs(ts,{className:"flex items-center gap-2 text-base",children:[e.jsx(W.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border border-amber-500/30",children:e.jsx(re,{className:"h-4 w-4 text-amber-600"})}),e.jsx("span",{className:"bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent font-semibold",children:"Today's Metal Rates"}),e.jsx(ue,{className:"h-4 w-4 text-amber-500/50 ml-auto"})]})}),e.jsxs(xt,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{htmlFor:"goldRate",className:"text-xs font-medium text-amber-700",children:"Gold (24K/g)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"â‚¹"}),e.jsx(I,{id:"goldRate",type:"number",value:h,onChange:u=>x(u.target.value),className:"pl-5 h-9 text-sm border-amber-500/30 focus:border-amber-500",placeholder:"Gold"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{htmlFor:"silverRate",className:"text-xs font-medium text-slate-600",children:"Silver (/g)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"â‚¹"}),e.jsx(I,{id:"silverRate",type:"number",value:o,onChange:u=>n(u.target.value),className:"pl-5 h-9 text-sm border-slate-400/30 focus:border-slate-500",placeholder:"Silver"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{htmlFor:"platinumRate",className:"text-xs font-medium text-slate-500",children:"Platinum (/g)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:"â‚¹"}),e.jsx(I,{id:"platinumRate",type:"number",value:y,onChange:u=>N(u.target.value),className:"pl-5 h-9 text-sm border-slate-400/30 focus:border-slate-500",placeholder:"Platinum"})]})]})]}),e.jsx(C,{onClick:i,disabled:U,size:"sm",className:"w-full bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white",children:U?e.jsxs(e.Fragment,{children:[e.jsx(W.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mr-2",children:e.jsx(re,{className:"h-4 w-4"})}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Update Rates"]})})]})]})},ca=({instagramQrUrl:t,whatsappQrUrl:r})=>{const[c,d]=l.useState(!1),{keyboardHeight:h,isKeyboardVisible:x}=vt();if(!t&&!r)return null;const o=x?`${h+16}px`:"1.5rem";return e.jsx(be,{children:e.jsx(W.div,{className:"fixed left-6 z-50",animate:{bottom:o},transition:{duration:.3,ease:"easeOut"},children:e.jsx(Ve,{mode:"wait",children:c?e.jsx(W.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},transition:{type:"spring",stiffness:260,damping:20},children:e.jsxs(Ce,{className:"p-4 shadow-2xl border-2 border-primary/20 bg-card/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Connect With Us"})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"h-8 w-8 p-0 hover:bg-destructive/10 hover:text-destructive transition-colors",children:e.jsx(jt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-4",children:[t&&e.jsx(W.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"group cursor-pointer",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-2xl overflow-hidden border-2 border-primary/30 shadow-lg group-hover:border-primary/60 transition-all duration-300 group-hover:shadow-xl group-hover:scale-105",children:e.jsx("img",{src:t,alt:"Instagram QR Code",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1.5 text-sm font-medium text-muted-foreground group-hover:text-primary transition-colors",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{children:"Instagram"})]}),e.jsx(W.div,{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-pink-500 shadow-lg",animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})}),r&&e.jsx(W.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"group cursor-pointer",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-2xl overflow-hidden border-2 border-primary/30 shadow-lg group-hover:border-primary/60 transition-all duration-300 group-hover:shadow-xl group-hover:scale-105",children:e.jsx("img",{src:r,alt:"WhatsApp QR Code",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1.5 text-sm font-medium text-muted-foreground group-hover:text-primary transition-colors",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsx(W.div,{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-green-500 shadow-lg",animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5}})]})})]}),e.jsx(W.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-xs text-center text-muted-foreground mt-4 pt-3 border-t border-border",children:"Scan to connect instantly"})]})},"expanded"):e.jsx(W.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:260,damping:20},children:e.jsxs(Ne,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(C,{onClick:()=>d(!0),size:"lg",className:"h-16 w-16 rounded-full shadow-2xl bg-gradient-to-br from-primary to-primary/80 hover:from-primary/90 hover:to-primary hover:scale-110 transition-all duration-300 relative overflow-hidden group",children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-primary/30 animate-ping"}),e.jsx(at,{className:"h-7 w-7 text-primary-foreground relative z-10 group-hover:rotate-12 transition-transform"})]})}),e.jsx(_e,{side:"right",className:"font-medium",children:e.jsx("p",{children:"Connect with us"})})]})},"collapsed")})})})},da=({onExportPDF:t,onAutoCategorize:r})=>{const[c,d]=l.useState(!1),h=Ye(),[x,o]=l.useState(!1),[n,y]=l.useState(),{keyboardHeight:N,isKeyboardVisible:U}=vt(),{canAddProducts:p,canAddShareLinks:i,productsRemaining:u,shareLinksRemaining:g}=Je(),A=()=>{if(!p){y("products"),o(!0),d(!1);return}h("/add-product"),d(!1)},S=()=>{if(!i){y("share_links"),o(!0),d(!1);return}h("/share"),d(!1)},K=()=>p?u!==1/0&&u<100?`Add Product (${u} left)`:"Add Product":"Add Product (Limit reached)",B=()=>i?g!==1/0&&g<100?`Share Catalog (${g} left)`:"Share Catalog":"Share Catalog (Limit reached)",ie=[{icon:je,label:K(),onClick:A,gradient:"from-primary/20 to-primary/5",iconColor:"text-primary",disabled:!p,tooltip:p?void 0:"Product limit reached"},{icon:Ge,label:B(),onClick:S,gradient:"from-blue-500/20 to-blue-500/5",iconColor:"text-blue-500",disabled:!i,tooltip:i?void 0:"Share link limit reached"},...r?[{icon:ue,label:"Auto-Categorize",onClick:()=>{r(),d(!1)},gradient:"from-violet-500/20 to-violet-500/5",iconColor:"text-violet-500",disabled:!1,tooltip:"Automatically categorize products"}]:[],{icon:bt,label:"Purchase Inquiries",onClick:()=>{h("/purchase-inquiries"),d(!1)},gradient:"from-purple-500/20 to-purple-500/5",iconColor:"text-purple-500",disabled:!1},{icon:gs,label:"Rewards",onClick:()=>{h("/rewards"),d(!1)},gradient:"from-yellow-500/20 to-yellow-500/5",iconColor:"text-yellow-500",disabled:!1},{icon:xs,label:"Create Invoice",onClick:()=>{h("/invoice-generator"),d(!1)},gradient:"from-orange-500/20 to-orange-500/5",iconColor:"text-orange-500",disabled:!1},{icon:rt,label:"View Invoices",onClick:()=>{h("/invoice-history"),d(!1)},gradient:"from-amber-500/20 to-amber-500/5",iconColor:"text-amber-500",disabled:!1},{icon:fs,label:"Create Estimate",onClick:()=>{h("/manufacturing-cost"),d(!1)},gradient:"from-emerald-500/20 to-emerald-500/5",iconColor:"text-emerald-500",disabled:!1},{icon:rt,label:"View Estimates",onClick:()=>{h("/estimate-history"),d(!1)},gradient:"from-cyan-500/20 to-cyan-500/5",iconColor:"text-cyan-500",disabled:!1},{icon:He,label:"Export PDF",onClick:()=>{t(),d(!1)},gradient:"from-green-500/20 to-green-500/5",iconColor:"text-green-500",disabled:!1}],ne=U?`${N+16}px`:"2rem";return e.jsxs(e.Fragment,{children:[e.jsxs(W.div,{className:"fixed right-8 z-50",animate:{bottom:ne},transition:{duration:.3,ease:"easeOut"},children:[e.jsx(Ve,{children:c&&e.jsx(W.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{duration:.2},className:"absolute bottom-20 right-0 flex flex-col gap-3 mb-2",children:ie.map((M,P)=>{const Y=e.jsxs(W.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:P*.05},onClick:()=>{M.disabled||(M.onClick(),d(!1))},disabled:M.disabled,className:`
                    group relative flex items-center gap-3 px-4 py-3 rounded-xl
                    bg-gradient-to-br ${M.gradient} backdrop-blur-sm
                    border border-border/50 shadow-lg hover:shadow-xl
                    transition-all duration-300 hover:scale-105
                    ${M.disabled?"opacity-50 cursor-not-allowed hover:scale-100":""}
                  `,children:[e.jsx("div",{className:`
                    w-10 h-10 rounded-lg bg-background/50 flex items-center justify-center
                    ${M.iconColor} group-hover:scale-110 transition-transform duration-300
                    ${M.disabled?"group-hover:scale-100":""}
                  `,children:e.jsx(M.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium text-foreground pr-2 whitespace-nowrap",children:M.label})]},M.label);return M.tooltip?e.jsx(be,{children:e.jsxs(Ne,{children:[e.jsx(ve,{asChild:!0,children:Y}),e.jsx(_e,{side:"left",children:e.jsx("p",{children:M.tooltip})})]})},M.label):Y})})}),e.jsx(W.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>d(!c),className:`
          relative w-16 h-16 rounded-full
          bg-gradient-to-br from-primary to-primary/80
          text-primary-foreground shadow-xl hover:shadow-2xl
          transition-all duration-300
          ${c?"rotate-45":""}
        `,children:!c&&e.jsx("span",{className:"absolute inset-0 rounded-full bg-primary animate-ping opacity-20"})}),e.jsx(Ve,{children:!c&&e.jsx(W.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`absolute right-full mr-4 top-1/2 -translate-y-1/2 whitespace-nowrap\r
              px-3 py-2 rounded-lg bg-background/95 backdrop-blur-sm\r
              border border-border/50 shadow-lg text-sm font-medium\r
              pointer-events-none`,children:"Quick Actions"})})]}),e.jsx(_t,{open:x,onOpenChange:o,limitType:n})]})},ma=R.object({category:R.string().max(100).optional(),metal_type:R.string().max(50).optional(),delivery_type:R.enum(["immediate","scheduled"]).optional(),dispatches_in_days:R.number().int().min(0).max(365).optional(),status:R.string().max(50).optional(),stock_quantity:R.number().int().min(0).optional(),description:R.string().max(1e3).optional(),cost_price:R.number().min(0).optional(),retail_price:R.number().min(0).optional(),weight_grams:R.number().min(0).optional(),diamond_color:R.string().max(50).optional(),clarity:R.string().max(50).optional(),gemstone:R.string().max(100).optional(),gemstone_type:R.string().max(100).optional(),certification:R.string().max(100).optional(),cut:R.string().max(50).optional(),polish:R.string().max(50).optional(),symmetry:R.string().max(50).optional(),purity_fraction_used:R.number().min(0).max(1).optional(),pricingAdjustment:R.object({type:R.enum(["markup","discount"]),percentage:R.number().min(0).max(100)}).optional()});function ha({open:t,onOpenChange:r,onUpdate:c,selectedCount:d,selectedProductIds:h}){const[x,o]=l.useState(!1),[n,y]=l.useState({}),[N,U]=l.useState("markup"),[p,i]=l.useState(""),[u,g]=l.useState(!1),[A,S]=l.useState([]),[K,B]=l.useState(!1),ie=async()=>{var m;B(!0);try{const z={...n};p&&parseFloat(p)>0&&(z.pricingAdjustment={type:N,percentage:parseFloat(p)});try{ma.parse(z)}catch(O){_.error(`Validation error: ${((m=O.errors[0])==null?void 0:m.message)||"Invalid input"}`),B(!1);return}const{data:q,error:te}=await T.from("products").select("id, name, sku, category, metal_type, delivery_type, dispatches_in_days, status, stock_quantity, description, cost_price, retail_price, weight_grams, diamond_color, clarity, cut, polish, symmetry, gemstone, gemstone_type, certification, purity_fraction_used").in("id",h);if(te)throw te;if(!q){_.error("Failed to fetch product data");return}const Le=q.map(O=>{const le=[],pe={category:"Category",metal_type:"Metal Type",delivery_type:"Delivery Type",dispatches_in_days:"Dispatch Days",status:"Status",stock_quantity:"Stock Quantity",description:"Description",cost_price:"Cost Price",retail_price:"Retail Price",weight_grams:"Weight",diamond_color:"Diamond Color",clarity:"Clarity",cut:"Cut",polish:"Polish",symmetry:"Symmetry",gemstone:"Gemstone",gemstone_type:"Gemstone Type",certification:"Certification",purity_fraction_used:"Purity Fraction"};if(Object.entries(n).forEach(([Z,Q])=>{if(Q!==""&&Q!==null&&Q!=="no-change"){const se=O[Z];se!==Q&&le.push({field:pe[Z]||Z,oldValue:se||"â€”",newValue:Q})}}),z.pricingAdjustment&&z.pricingAdjustment.percentage>0){const Z=z.pricingAdjustment.type==="markup"?1+z.pricingAdjustment.percentage/100:1-z.pricingAdjustment.percentage/100,Q=Math.max(0,O.cost_price*Z),se=Math.max(0,O.retail_price*Z);n.cost_price||le.push({field:"Cost Price",oldValue:`â‚¹${O.cost_price.toFixed(2)}`,newValue:`â‚¹${Q.toFixed(2)}`}),n.retail_price||le.push({field:"Retail Price",oldValue:`â‚¹${O.retail_price.toFixed(2)}`,newValue:`â‚¹${se.toFixed(2)}`})}return{id:O.id,name:O.name,sku:O.sku||"N/A",changes:le}});S(Le.filter(O=>O.changes.length>0)),g(!0)}catch(z){console.error("Failed to generate preview:",z),_.error(`Failed to generate preview: ${z.message||"Unknown error"}`)}finally{B(!1)}},ne=async()=>{o(!0);try{const m={...n};p&&parseFloat(p)>0&&(m.pricingAdjustment={type:N,percentage:parseFloat(p)}),await c(m),y({}),i(""),g(!1),r(!1)}finally{o(!1)}},M=()=>{g(!1)};l.useEffect(()=>{t||(g(!1),S([]),y({}),i(""))},[t]);const P=(m,z)=>{if(z===""||z==="no-change"){const q={...n};delete q[m],y(q)}else y({...n,[m]:z})},Y=Object.keys(n).length>0||p&&parseFloat(p)>0;return e.jsx(ke,{open:t,onOpenChange:r,children:e.jsxs(Se,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Pe,{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[u&&e.jsx(C,{variant:"ghost",size:"sm",onClick:M,className:"mr-2 -ml-2",children:e.jsx(ft,{className:"h-4 w-4"})}),u?"Preview Changes":"Bulk Edit Products"]}),e.jsx(De,{children:u?`Review changes for ${A.length} product${A.length!==1?"s":""} before applying`:`Update ${d} selected product${d!==1?"s":""}. Leave fields empty to keep existing values.`})]}),u?e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:A.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No changes detected for any products."})}):e.jsx(Qe,{className:"flex-1 pr-4",children:e.jsx("div",{className:"space-y-6 pb-4",children:A.map((m,z)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm",children:m.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["SKU: ",m.sku]})]}),e.jsxs(ee,{variant:"secondary",className:"text-xs",children:[m.changes.length," change",m.changes.length!==1?"s":""]})]}),e.jsxs(Es,{children:[e.jsx(Ms,{children:e.jsxs(pt,{children:[e.jsx(Be,{className:"w-[30%]",children:"Field"}),e.jsx(Be,{className:"w-[35%]",children:"Current Value"}),e.jsx(Be,{className:"w-[35%]",children:"New Value"})]})}),e.jsx(Ws,{children:m.changes.map((q,te)=>e.jsxs(pt,{children:[e.jsx(qe,{className:"font-medium text-sm",children:q.field}),e.jsx(qe,{className:"text-sm text-muted-foreground",children:typeof q.oldValue=="number"?q.oldValue.toLocaleString():q.oldValue}),e.jsxs(qe,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ys,{className:"h-3 w-3 text-primary"}),typeof q.newValue=="number"?q.newValue.toLocaleString():q.newValue]})]},te))})]})]},m.id))})})}):e.jsxs($s,{defaultValue:"basic",className:"w-full",children:[e.jsxs(zs,{className:"grid w-full grid-cols-3",children:[e.jsx(We,{value:"basic",children:"Basic Info"}),e.jsx(We,{value:"jewelry",children:"Jewelry Details"}),e.jsx(We,{value:"pricing",children:"Pricing"})]}),e.jsxs(Oe,{value:"basic",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"category",children:"Category"}),e.jsx(I,{id:"category",placeholder:"Leave empty to keep current",maxLength:100,value:n.category||"",onChange:m=>P("category",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"metal_type",children:"Metal Type"}),e.jsxs($e,{value:n.metal_type||"no-change",onValueChange:m=>P("metal_type",m),children:[e.jsx(ze,{children:e.jsx(Ee,{placeholder:"No change"})}),e.jsxs(Me,{children:[e.jsx(J,{value:"no-change",children:"No change"}),e.jsx(J,{value:"Gold",children:"Gold"}),e.jsx(J,{value:"Silver",children:"Silver"}),e.jsx(J,{value:"Platinum",children:"Platinum"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"delivery_type",children:"Delivery Type"}),e.jsxs($e,{value:n.delivery_type||"no-change",onValueChange:m=>P("delivery_type",m),children:[e.jsx(ze,{children:e.jsx(Ee,{placeholder:"No change"})}),e.jsxs(Me,{children:[e.jsx(J,{value:"no-change",children:"No change"}),e.jsx(J,{value:"immediate",children:"Immediate"}),e.jsx(J,{value:"scheduled",children:"Scheduled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"dispatches_in_days",children:"Dispatch Days"}),e.jsx(I,{id:"dispatches_in_days",type:"number",min:"0",max:"365",placeholder:"Leave empty to keep current",value:n.dispatches_in_days||"",onChange:m=>P("dispatches_in_days",m.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"status",children:"Status"}),e.jsx(I,{id:"status",placeholder:"Leave empty to keep current",maxLength:50,value:n.status||"",onChange:m=>P("status",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"stock_quantity",children:"Stock Quantity"}),e.jsx(I,{id:"stock_quantity",type:"number",min:"0",placeholder:"Leave empty to keep current",value:n.stock_quantity||"",onChange:m=>P("stock_quantity",m.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"description",children:"Description"}),e.jsx(I,{id:"description",placeholder:"Leave empty to keep current",maxLength:1e3,value:n.description||"",onChange:m=>P("description",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"weight_grams",children:"Weight (g)"}),e.jsx(I,{id:"weight_grams",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.weight_grams||"",onChange:m=>P("weight_grams",m.target.value)})]})]}),e.jsxs(Oe,{value:"jewelry",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"diamond_color",children:"Diamond Color"}),e.jsx(I,{id:"diamond_color",placeholder:"Leave empty to keep current",maxLength:50,value:n.diamond_color||"",onChange:m=>P("diamond_color",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"clarity",children:"Clarity"}),e.jsx(I,{id:"clarity",placeholder:"Leave empty to keep current",maxLength:50,value:n.clarity||"",onChange:m=>P("clarity",m.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cut",children:"Cut"}),e.jsx(I,{id:"cut",placeholder:"Leave empty to keep current",maxLength:50,value:n.cut||"",onChange:m=>P("cut",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"polish",children:"Polish"}),e.jsx(I,{id:"polish",placeholder:"Leave empty to keep current",maxLength:50,value:n.polish||"",onChange:m=>P("polish",m.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"symmetry",children:"Symmetry"}),e.jsx(I,{id:"symmetry",placeholder:"Leave empty to keep current",maxLength:50,value:n.symmetry||"",onChange:m=>P("symmetry",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gemstone",children:"Gemstone"}),e.jsx(I,{id:"gemstone",placeholder:"Leave empty to keep current",maxLength:100,value:n.gemstone||"",onChange:m=>P("gemstone",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gemstone_type",children:"Gemstone Type"}),e.jsx(I,{id:"gemstone_type",placeholder:"Leave empty to keep current",maxLength:100,value:n.gemstone_type||"",onChange:m=>P("gemstone_type",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"certification",children:"Certification"}),e.jsx(I,{id:"certification",placeholder:"Leave empty to keep current",maxLength:100,value:n.certification||"",onChange:m=>P("certification",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"purity_fraction_used",children:"Purity Fraction (0-1)"}),e.jsx(I,{id:"purity_fraction_used",type:"number",step:"0.01",min:"0",max:"1",placeholder:"Leave empty to keep current",value:n.purity_fraction_used||"",onChange:m=>P("purity_fraction_used",m.target.value)})]})]}),e.jsxs(Oe,{value:"pricing",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(js,{className:"h-5 w-5 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"Percentage-Based Price Adjustment"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Apply a percentage markup or discount to all selected products"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"adjustment_type",children:"Adjustment Type"}),e.jsxs($e,{value:N,onValueChange:m=>U(m),children:[e.jsx(ze,{children:e.jsx(Ee,{})}),e.jsxs(Me,{children:[e.jsx(J,{value:"markup",children:"Markup (Increase Price)"}),e.jsx(J,{value:"discount",children:"Discount (Decrease Price)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"adjustment_percent",children:"Percentage (%)"}),e.jsx(I,{id:"adjustment_percent",type:"number",min:"0",max:"100",step:"0.1",placeholder:"e.g., 10 for 10%",value:p,onChange:m=>i(m.target.value)})]})]}),p&&parseFloat(p)>0&&e.jsxs("div",{className:"bg-background p-3 rounded border border-border",children:[e.jsxs("p",{className:"text-sm font-medium",children:[N==="markup"?"â†‘":"â†“"," ",N==="markup"?"Increase":"Decrease"," prices by ",p,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Example: â‚¹1,000 â†’ â‚¹",N==="markup"?(1e3*(1+parseFloat(p)/100)).toFixed(0):(1e3*(1-parseFloat(p)/100)).toFixed(0)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Or Set Fixed Prices"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cost_price",children:"Cost Price (â‚¹)"}),e.jsx(I,{id:"cost_price",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.cost_price||"",onChange:m=>P("cost_price",m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"retail_price",children:"Retail Price (â‚¹)"}),e.jsx(I,{id:"retail_price",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.retail_price||"",onChange:m=>P("retail_price",m.target.value)})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Note: Fixed prices will override percentage adjustments"})]})]})]}),e.jsx(Nt,{className:"mt-4",children:u?e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",onClick:M,disabled:x,children:"Back to Edit"}),e.jsxs(C,{onClick:ne,disabled:x||A.length===0,className:"bg-primary",children:[x&&e.jsx(it,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm & Apply Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outline",onClick:()=>r(!1),disabled:K,children:"Cancel"}),e.jsx(C,{onClick:ie,disabled:K||!Y,children:K?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading Preview..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Preview Changes"]})})]})})]})})}const ua=({open:t,onOpenChange:r,onConfirm:c,products:d,isDeleting:h=!1})=>e.jsx(Os,{open:t,onOpenChange:r,children:e.jsxs(Bs,{className:"max-w-2xl",children:[e.jsxs(qs,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ns,{className:"h-5 w-5 text-destructive"}),e.jsx(Vs,{children:"Delete Selected Products?"})]}),e.jsxs(Gs,{children:["You are about to delete ",e.jsxs("strong",{children:[d.length," product(s)"]}),". This action cannot be undone."]})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Products to be deleted:"}),e.jsx(Qe,{className:"h-[200px] w-full border rounded-md p-4",children:e.jsx("div",{className:"space-y-2",children:d.map((x,o)=>e.jsxs("div",{className:"flex items-start gap-2 py-2 border-b last:border-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground min-w-[20px]",children:[o+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:x.name}),x.sku&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["SKU: ",x.sku]})]})]},x.id))})})]}),e.jsxs(Hs,{children:[e.jsx(Ks,{disabled:h,children:"Cancel"}),e.jsx(Ys,{onClick:c,disabled:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:h?"Deleting...":`Delete ${d.length} Product${d.length>1?"s":""}`})]})]})}),wt=l.forwardRef(({...t},r)=>e.jsx("nav",{ref:r,"aria-label":"breadcrumb",...t}));wt.displayName="Breadcrumb";const Ct=l.forwardRef(({className:t,...r},c)=>e.jsx("ol",{ref:c,className:he("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...r}));Ct.displayName="BreadcrumbList";const Ke=l.forwardRef(({className:t,...r},c)=>e.jsx("li",{ref:c,className:he("inline-flex items-center gap-1.5",t),...r}));Ke.displayName="BreadcrumbItem";const kt=l.forwardRef(({asChild:t,className:r,...c},d)=>{const h=t?ss:"a";return e.jsx(h,{ref:d,className:he("transition-colors hover:text-foreground",r),...c})});kt.displayName="BreadcrumbLink";const St=l.forwardRef(({className:t,...r},c)=>e.jsx("span",{ref:c,role:"link","aria-disabled":"true","aria-current":"page",className:he("font-normal text-foreground",t),...r}));St.displayName="BreadcrumbPage";const Pt=({children:t,className:r,...c})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:he("[&>svg]:size-3.5",r),...c,children:t??e.jsx(yt,{})});Pt.displayName="BreadcrumbSeparator";const Ha=()=>{const[t,r]=l.useState([]),[c,d]=l.useState(!0),[h,x]=l.useState(!1),[o,n]=l.useState(87.67),[y,N]=l.useState(0),[U,p]=l.useState(95),[i,u]=l.useState(3200),[g,A]=l.useState(new Set),[S,K]=l.useState(null),[B,ie]=l.useState("Jewellery"),[ne,M]=l.useState(["Jewellery"]),[P,Y]=l.useState(!1),[m,z]=l.useState(),[q,te]=l.useState(!1),[Le,O]=l.useState(!1),[le,pe]=l.useState(!1),[Z,Q]=l.useState(!1),[se,Ft]=l.useState([]),[w,Dt]=l.useState({category:"",metalType:"",minPrice:"",maxPrice:"",diamondColor:"",diamondClarity:"",searchQuery:"",deliveryType:"",minDiamondWeight:"",maxDiamondWeight:"",minNetWeight:"",maxNetWeight:"",gemstoneType:"",color:"",clarity:"",cut:"",minCarat:"",maxCarat:"",diamondType:"",shape:"",polish:"",symmetry:"",fluorescence:"",lab:""}),F=Ye(),{isAdmin:j,loading:Ze}=as(),{permissions:E}=Ls(),{canAddProducts:ce,canAddShareLinks:de,productsRemaining:Re,shareLinksRemaining:Te}=Je(),[ge,Xe]=l.useState(50),Lt=50;l.useEffect(()=>{!Ze&&j&&F("/admin")},[j,Ze,F]),l.useEffect(()=>{(async()=>{const s=sessionStorage.getItem("usd_rate"),f=sessionStorage.getItem("usd_rate_time");s&&f&&Date.now()-parseInt(f)<36e5&&n(parseFloat(s)),await Promise.all([At(),Rt(),s?Promise.resolve():Tt()]),x(!0)})()},[]),l.useEffect(()=>{B&&h&&ae()},[B,h]),l.useEffect(()=>{Xe(50)},[w,B]);const Rt=async()=>{try{const{data:{user:a}}=await T.auth.getUser();if(!a)return;const{data:s,error:f}=await T.from("user_approval_status").select("approved_categories").eq("user_id",a.id).single();if(f)throw f;const v=(s==null?void 0:s.approved_categories)||["Jewellery"];M(v),ie(v[0])}catch(a){console.error("Failed to fetch approved categories:",a)}},Tt=async()=>{var a;try{const f=await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json();(a=f.rates)!=null&&a.INR&&(n(f.rates.INR),sessionStorage.setItem("usd_rate",f.rates.INR.toString()),sessionStorage.setItem("usd_rate_time",Date.now().toString()))}catch(s){console.error("Failed to fetch USD rate:",s)}},At=async()=>{try{const{data:{user:a}}=await T.auth.getUser();if(!a)return;const{data:s,error:f}=await T.from("vendor_profiles").select("*").eq("user_id",a.id).maybeSingle();f&&f.code!=="PGRST116"?console.error("Error fetching vendor profile:",f):s&&(K(s),s.gold_rate_24k_per_gram&&N(s.gold_rate_24k_per_gram),s.silver_rate_per_gram&&p(s.silver_rate_per_gram),s.platinum_rate_per_gram&&u(s.platinum_rate_per_gram))}catch(a){console.error("Failed to fetch vendor profile:",a)}},ae=l.useCallback(async()=>{try{d(!0);const{data:{user:a}}=await T.auth.getUser();if(!a){d(!1);return}let s=T.from("products").select("id, name, sku, image_url, image_url_2, image_url_3, cost_price, retail_price, stock_quantity, category, metal_type, gemstone, color, diamond_color, clarity, delivery_type, product_type, weight_grams, gemstone_type, carat_weight, cut, diamond_type, shape, carat, polish, symmetry, fluorescence, lab, created_at, purity_fraction_used, net_weight, d_value, mkg, certification_cost, gemstone_cost, gold_per_gram_price, d_rate_1, d_wt_1, d_wt_2, pointer_diamond, diamond_weight").eq("user_id",a.id).is("deleted_at",null);B==="Jewellery"?s=s.or(`product_type.eq.${B},product_type.is.null`):s=s.eq("product_type",B);const{data:f,error:v}=await s.order("created_at",{ascending:!1});if(v)throw v;r(f||[])}catch(a){console.error("Failed to load products:",a),_.error("Failed to load products. Please refresh the page.")}finally{d(!1)}},[B]),It=async a=>{const{data:{user:s}}=await T.auth.getUser();if(!s)return;const{error:f}=await T.from("vendor_profiles").update({gold_rate_24k_per_gram:a,gold_rate_updated_at:new Date().toISOString()}).eq("user_id",s.id);if(f)throw f;const D=t.filter(b=>b.net_weight||b.weight_grams).map(b=>{const L=b.purity_fraction_used||18;let G;L<=1?G=L:L<=24?G=L/24:G=L/100;const fe=(b.net_weight||b.weight_grams||0)*G*a,$=b.d_value||0,ye=b.mkg||0,me=b.certification_cost||0,Zt=b.gemstone_cost||0,st=fe+$+ye+me+Zt;return{id:b.id,cost_price:Math.round(st*100)/100,retail_price:Math.round(st*100)/100,gold_per_gram_price:a}}).map(b=>T.from("products").update({cost_price:b.cost_price,retail_price:b.retail_price,gold_per_gram_price:b.gold_per_gram_price}).eq("id",b.id));await Promise.all(D),N(a),await ae(),_.success(`Gold rate updated to â‚¹${a.toLocaleString("en-IN")}/g`)},Ut=l.useMemo(()=>{const a=t.map(s=>s.category).filter(Boolean);return[...new Set(a)].sort()},[t]),$t=l.useMemo(()=>{const a={all:t.length};return t.forEach(s=>{if(s.category){const f=s.category.toUpperCase().trim();a[f]=(a[f]||0)+1}}),a},[t]),zt=l.useMemo(()=>[...new Set(t.map(a=>a.metal_type).filter(Boolean))].sort(),[t]),Et=l.useMemo(()=>[...new Set(t.map(a=>{var s;return(s=a.gemstone)==null?void 0:s.split(" ")[0]}).filter(Boolean))].sort(),[t]),Mt=l.useMemo(()=>[...new Set(t.map(a=>{var s;return(s=a.gemstone)==null?void 0:s.split(" ")[1]}).filter(Boolean))].sort(),[t]),Wt=l.useMemo(()=>[...new Set(t.map(a=>a.delivery_type).filter(Boolean))].sort(),[t]),X=l.useMemo(()=>t.filter(s=>{var f,v,D,b,L,G,oe,fe;if(w.searchQuery){const $=w.searchQuery.toLowerCase().trim();if(![s.name,s.category,s.sku,s.description,s.metal_type,s.gemstone,s.color,s.clarity,(f=s.diamond_weight)==null?void 0:f.toString(),(v=s.net_weight)==null?void 0:v.toString(),(D=s.retail_price)==null?void 0:D.toString()].filter(Boolean).some(me=>me==null?void 0:me.toLowerCase().includes($)))return!1}if(w.category){const $=((b=s.category)==null?void 0:b.toUpperCase().trim())===w.category.toUpperCase().trim(),ye=(L=s.name)==null?void 0:L.toUpperCase().trim().includes(w.category.toUpperCase().trim());if(!$&&!ye)return!1}if(w.metalType&&((G=s.metal_type)==null?void 0:G.toUpperCase().trim())!==w.metalType.toUpperCase().trim()||w.minPrice&&s.retail_price<parseFloat(w.minPrice)||w.maxPrice&&s.retail_price>parseFloat(w.maxPrice))return!1;if(w.diamondColor){const $=(oe=s.gemstone)==null?void 0:oe.split(" ")[0];if(($==null?void 0:$.toUpperCase().trim())!==w.diamondColor.toUpperCase().trim())return!1}if(w.diamondClarity){const $=(fe=s.gemstone)==null?void 0:fe.split(" ")[1];if(($==null?void 0:$.toUpperCase().trim())!==w.diamondClarity.toUpperCase().trim())return!1}if(w.deliveryType&&s.delivery_type!==w.deliveryType)return!1;if(w.minDiamondWeight){const $=parseFloat(w.minDiamondWeight);if(!s.diamond_weight||s.diamond_weight<$)return!1}if(w.maxDiamondWeight){const $=parseFloat(w.maxDiamondWeight);if(!s.diamond_weight||s.diamond_weight>$)return!1}if(w.minNetWeight){const $=parseFloat(w.minNetWeight);if(!s.net_weight||s.net_weight<$)return!1}if(w.maxNetWeight){const $=parseFloat(w.maxNetWeight);if(!s.net_weight||s.net_weight>$)return!1}return!0}).sort((s,f)=>{var b,L;const v=(b=s.name)==null?void 0:b.match(/^(.+?)\s*(\d+)$/),D=(L=f.name)==null?void 0:L.match(/^(.+?)\s*(\d+)$/);return v&&D&&v[1]===D[1]?parseInt(v[2],10)-parseInt(D[2],10):(s.name||"").localeCompare(f.name||"")}),[t,w]),Ae=l.useMemo(()=>X.slice(0,ge),[X,ge]),Ot=X.length>ge,xe=X.reduce((a,s)=>a+(s.retail_price||0),0),et=xe/o,Bt=()=>Xe(a=>a+Lt),Ie=l.useCallback(async()=>{try{ia(X,S,o,y,xe,et),_.success("Catalog exported to PDF!")}catch{_.error("Failed to export catalog to PDF")}},[X,S,o,y,xe,et]),qt=l.useCallback(a=>a==="Jewellery"?t.filter(s=>s.product_type==="Jewellery"||s.product_type===null).length:t.filter(s=>s.product_type===a).length,[t]),Vt=l.useCallback(async()=>{pe(!0);try{const{data:{user:a}}=await T.auth.getUser();if(!a){_.error("You must be logged in to delete products");return}const{error:s}=await T.from("products").update({deleted_at:new Date().toISOString()}).in("id",Array.from(g)).eq("user_id",a.id);if(s)throw s;_.success(`${g.size} product(s) deleted`),A(new Set),O(!1),await ae()}catch(a){_.error(`Failed to delete: ${a.message||"Unknown error"}`)}finally{pe(!1)}},[g,ae]),Gt=l.useMemo(()=>t.filter(a=>g.has(a.id)).map(a=>({id:a.id,name:a.name,sku:a.sku})),[t,g]),Ht=l.useCallback(async a=>{if(g.size===0){_.error("No products selected");return}try{const{data:{user:s}}=await T.auth.getUser();if(!s)throw new Error("Not authenticated");const f=a.pricingAdjustment;delete a.pricingAdjustment;const v={};if(Object.entries(a).forEach(([D,b])=>{if(!(b===""||b===null))if(["cost_price","retail_price","weight_grams","stock_quantity","dispatches_in_days"].includes(D)){const L=parseFloat(b);!isNaN(L)&&L>=0&&(v[D]=L)}else if(D==="purity_fraction_used"){const L=parseFloat(b);!isNaN(L)&&L>=0&&(v[D]=L>1?L/100:L)}else v[D]=b}),f&&f.percentage>0){const{data:D,error:b}=await T.from("products").select("id, cost_price, retail_price").in("id",Array.from(g)).eq("user_id",s.id);if(b)throw b;if(D){const L=D.map(async G=>{const oe=f.type==="markup"?1+f.percentage/100:1-f.percentage/100;return T.from("products").update({...v,cost_price:v.cost_price||Math.max(0,G.cost_price*oe),retail_price:v.retail_price||Math.max(0,G.retail_price*oe)}).eq("id",G.id).eq("user_id",s.id)});await Promise.all(L),_.success(`${g.size} product(s) updated`)}}else{if(Object.keys(v).length===0){_.error("No changes to update");return}const{error:D}=await T.from("products").update(v).in("id",Array.from(g)).eq("user_id",s.id);if(D)throw D;_.success(`${g.size} product(s) updated`)}A(new Set),await ae()}catch(s){_.error(`Failed to update: ${s.message||"Unknown error"}`)}},[g,ae]),Kt=()=>{if(!t||t.length===0){_.info("No products found");return}const a=sa(t.map(s=>({id:s.id,name:s.name,sku:s.sku,category:s.category})));if(a.length===0){_.info("All products already have categories");return}Ft(a),Q(!0)},Yt=async a=>{try{const s=se.filter(f=>a.includes(f.productId)).reduce((f,v)=>(f[v.suggestedCategory]||(f[v.suggestedCategory]=[]),f[v.suggestedCategory].push(v.productId),f),{});for(const[f,v]of Object.entries(s)){const{error:D}=await T.from("products").update({category:f}).in("id",v);if(D)throw D}_.success(`Categorized ${a.length} products!`),await ae()}catch(s){throw _.error("Failed to apply categorization"),s}},Qt=l.useCallback(a=>{A(s=>{const f=new Set(s);return f.has(a)?f.delete(a):f.add(a),f})},[]),Jt=l.useCallback(()=>{A(a=>a.size===t.length?new Set:new Set(t.map(s=>s.id)))},[t]),tt=l.useCallback(async()=>{await T.auth.signOut(),F("/auth")},[F]);return e.jsxs(rs,{children:[e.jsx(la,{currentGoldRate:y,onUpdate:It,onSkip:()=>{}}),e.jsx(ca,{instagramQrUrl:S==null?void 0:S.instagram_qr_url,whatsappQrUrl:S==null?void 0:S.whatsapp_qr_url}),e.jsx(da,{onExportPDF:Ie,onAutoCategorize:Kt}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background relative overflow-hidden",children:[e.jsx(Qs,{}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none"}),e.jsx("div",{className:"relative bg-background/50 backdrop-blur-sm border-b border-border/30 z-10",children:e.jsx("div",{className:"container mx-auto px-3 md:px-4 py-2 md:py-3",children:e.jsx(wt,{children:e.jsxs(Ct,{className:"text-sm",children:[e.jsx(Ke,{children:e.jsx(kt,{asChild:!0,children:e.jsx(Ss,{to:"/",children:"Home"})})}),e.jsx(Pt,{className:"text-xs"}),e.jsx(Ke,{children:e.jsx(St,{className:"text-sm",children:"Catalog"})})]})})})}),e.jsx("header",{className:"relative border-b border-border/50 bg-card/95 backdrop-blur-xl shadow-xl z-10",children:e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 max-w-[1800px] relative z-10",children:[S&&e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 lg:gap-6 mb-4 pb-4 border-b border-border/30",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1 w-full lg:w-auto",children:[S.logo_url&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:S.logo_url,alt:"Logo",className:"w-12 h-12 sm:w-16 sm:h-16 object-contain rounded-lg border border-border/30"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground truncate",children:S.business_name||"My Catalog"}),S.brand_tagline&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2",children:S.brand_tagline})]})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-foreground",children:t.length}),e.jsx("div",{className:"text-muted-foreground",children:"Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-foreground",children:["â‚¹",y.toLocaleString("en-IN")]}),e.jsx("div",{className:"text-muted-foreground",children:"Gold Rate/g"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-foreground",children:["â‚¹",xe.toLocaleString("en-IN")]}),e.jsx("div",{className:"text-muted-foreground",children:"Total Value"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden lg:flex items-center flex-wrap gap-2 justify-center",children:[(E.can_view_interests||j)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/interests"),children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Interests"]}),(E.can_view_interests||j)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/video-requests"),children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Video Requests"]}),(E.can_edit_profile||j)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/vendor-profile"),children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Profile"]}),(E.can_share_catalog||j)&&e.jsx(be,{children:e.jsxs(Ne,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{if(!de&&!j){z("share_links"),Y(!0);return}F("/share")},disabled:!de&&!j,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Share",!j&&Te!==1/0&&Te<100&&e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",Te," left)"]})]})}),!de&&!j&&e.jsx(_e,{children:e.jsx("p",{children:"Share link limit reached"})})]})}),j&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/admin"),children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Admin"]}),(E.can_add_products||j)&&e.jsx(be,{children:e.jsxs(Ne,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{if(!ce&&!j){z("products"),Y(!0);return}F("/add-product")},disabled:!ce&&!j,children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Add",!j&&Re!==1/0&&Re<100&&e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",Re," left)"]})]})}),!ce&&!j&&e.jsx(_e,{children:e.jsx("p",{children:"Product limit reached"})})]})}),(E.can_import_data||j)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/import"),children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:Ie,children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),(E.can_manage_team||j)&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>F("/team"),children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Team"]}),(E.can_delete_products||j)&&g.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>te(!0),children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Update (",g.size,")"]}),e.jsxs(C,{variant:"destructive",size:"sm",onClick:()=>O(!0),children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Delete (",g.size,")"]})]}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:tt,children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),e.jsx("div",{className:"lg:hidden w-full",children:e.jsxs(Ps,{children:[e.jsx(Fs,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"default",className:"w-full h-11",children:[e.jsx(ws,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Menu"})]})}),e.jsxs(Ds,{align:"center",className:"w-[calc(100vw-2rem)] sm:w-80 max-h-[70vh] overflow-y-auto",children:[(E.can_view_interests||j)&&e.jsxs(V,{onClick:()=>F("/interests"),className:"py-3",children:[e.jsx(nt,{className:"h-5 w-5 mr-3 text-primary"}),"View Interests"]}),(E.can_view_interests||j)&&e.jsxs(V,{onClick:()=>F("/video-requests"),className:"py-3",children:[e.jsx(lt,{className:"h-5 w-5 mr-3 text-primary"}),"Video Requests"]}),(E.can_view_interests||j)&&e.jsxs(V,{onClick:()=>F("/purchase-inquiries"),className:"py-3",children:[e.jsx(bt,{className:"h-5 w-5 mr-3 text-primary"}),"Purchase Inquiries"]}),(E.can_edit_profile||j)&&e.jsxs(V,{onClick:()=>F("/vendor-profile"),className:"py-3",children:[e.jsx(ot,{className:"h-5 w-5 mr-3 text-primary"}),"Vendor Profile"]}),(E.can_share_catalog||j)&&e.jsxs(V,{onClick:()=>{if(!de&&!j){z("share_links"),Y(!0);return}F("/share")},disabled:!de&&!j,className:"py-3",children:[e.jsx(Ge,{className:"h-5 w-5 mr-3 text-primary"}),"Share Catalog"]}),j&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{}),e.jsxs(V,{onClick:()=>F("/admin"),className:"py-3",children:[e.jsx(ct,{className:"h-5 w-5 mr-3 text-primary"}),"Admin Dashboard"]})]}),e.jsx(Ue,{}),(E.can_add_products||j)&&e.jsxs(V,{onClick:()=>{if(!ce&&!j){z("products"),Y(!0);return}F("/add-product")},disabled:!ce&&!j,className:"py-3",children:[e.jsx(je,{className:"h-5 w-5 mr-3 text-primary"}),"Add Product"]}),(E.can_import_data||j)&&e.jsxs(V,{onClick:()=>F("/import"),className:"py-3",children:[e.jsx(dt,{className:"h-5 w-5 mr-3 text-primary"}),"Import Data"]}),e.jsxs(V,{onClick:Ie,className:"py-3",children:[e.jsx(He,{className:"h-5 w-5 mr-3 text-primary"}),"Export PDF"]}),(E.can_manage_team||j)&&e.jsxs(V,{onClick:()=>F("/team"),className:"py-3",children:[e.jsx(mt,{className:"h-5 w-5 mr-3 text-primary"}),"Manage Team"]}),e.jsx(Ue,{}),(E.can_view_sessions||j)&&e.jsxs(V,{onClick:()=>F("/active-sessions"),className:"py-3",children:[e.jsx(Cs,{className:"h-5 w-5 mr-3 text-primary"}),"Active Sessions"]}),e.jsxs(V,{onClick:tt,className:"py-3 text-destructive",children:[e.jsx(ht,{className:"h-5 w-5 mr-3"}),"Sign Out"]})]})]})})]})]})}),e.jsxs("main",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-6 sm:py-8 lg:py-10 max-w-[1800px]",children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx(As,{}),e.jsx(na,{}),e.jsx(oa,{goldRate:y,silverRate:U,platinumRate:i,onRatesUpdated:a=>{N(a.goldRate),p(a.silverRate),u(a.platinumRate)}})]}),c?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Array.from({length:6}).map((a,s)=>e.jsx(Xs,{},s))}):e.jsxs("div",{className:"animate-fade-in",children:[ne.length>1&&e.jsx("div",{className:"mb-6 flex gap-2 overflow-x-auto justify-start md:justify-center pb-2 px-2",children:ne.map(a=>e.jsxs("button",{onClick:()=>ie(a),disabled:c,className:`px-4 py-2 rounded-xl font-medium text-sm transition-all ${B===a?"bg-primary text-primary-foreground scale-105":"bg-card border border-border hover:bg-muted"}`,children:[a," (",qt(a),")"]},a))}),e.jsx(ks,{filters:w,onFilterChange:Dt,productType:B,categories:Ut,metalTypes:zt,diamondColors:Et,diamondClarities:Mt,deliveryTypes:Wt,categoryCounts:$t,gemstoneTypes:[],colors:[],clarities:[],cuts:[],shapes:[],polishes:[],symmetries:[],fluorescences:[],labs:[]}),(E.can_delete_products||j)&&t.length>0&&e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(we,{checked:g.size===t.length&&t.length>0,onCheckedChange:Jt,id:"select-all"}),e.jsxs("label",{htmlFor:"select-all",className:"text-sm text-muted-foreground cursor-pointer",children:["Select All (",g.size,"/",t.length,")"]})]}),Ae.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’Ž"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first product to get started"}),(E.can_add_products||j)&&e.jsxs(C,{onClick:()=>F("/add-product"),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-5",children:Ae.map(a=>e.jsx(Zs,{product:a,isSelected:g.has(a.id),onToggleSelection:Qt,usdRate:o},a.id))}),Ot&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(C,{variant:"outline",size:"lg",onClick:Bt,children:["Load More (",X.length-ge," remaining)"]})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Showing ",Ae.length," of ",X.length," products"]})]})]})]})]}),e.jsx(_t,{open:P,onOpenChange:Y,limitType:m}),e.jsx(ha,{open:q,onOpenChange:te,selectedCount:g.size,onUpdate:Ht,selectedProductIds:Array.from(g)}),e.jsx(ua,{open:Le,onOpenChange:O,onConfirm:Vt,isDeleting:le,products:Gt}),e.jsx(ra,{open:Z,onOpenChange:Q,suggestions:se,onApply:Yt})]})};export{Ha as default};
//# sourceMappingURL=Catalog-9gK1Pmep.js.map
