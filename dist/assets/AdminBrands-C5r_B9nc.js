import{b as D,u as A,c as h,j as e}from"./query-vendor-CIvqgC9B.js";import{r as x}from"./react-vendor-BCzWReGx.js";import{B as d,C as S,t as F,x as q,o as E,l}from"./index-DBHw7ps1.js";import{A as L}from"./AdminLayout-Bt5p8wlS.js";import{I as j}from"./input-CpEp8mrX.js";import{S as k}from"./switch-BY5jX96K.js";import{L as c}from"./label-Di_dI0OZ.js";import{B as y}from"./badge-HmGNQ04n.js";import{P as I,al as M,bf as O,aG as Q,u as i}from"./ui-vendor-B3Ur81tx.js";import{D as K,a as T,b as P,c as U,d as z}from"./dialog-acGhLkoK.js";import{M as H}from"./MediaUpload-Cant2t3q.js";import{A as G}from"./AdminLoadingSkeleton-2vW1rJwi.js";import{A as R}from"./AdminEmptyState-BHWpFob6.js";import"./supabase-vendor-DJknrin8.js";import"./separator-6caDi7bi.js";import"./sheet-BWMSKSTq.js";import"./index-BswhvY0M.js";import"./index-vsC2Ycwh.js";import"./NavLink-B_nTQT1l.js";import"./index-lgWsV-kP.js";import"./index-vM6_qKqc.js";import"./index-D6hZrTqZ.js";function xe(){const m=D(),[v,o]=x.useState(!1),[n,g]=x.useState(null),[r,t]=x.useState({name:"",logo_url:"",display_order:0,active:!0}),{data:u,isLoading:b}=A({queryKey:["admin-brands"],queryFn:async()=>{const{data:a,error:s}=await l.from("brands").select("*").order("display_order",{ascending:!0});if(s)throw s;return a}}),N=h({mutationFn:async a=>{const{error:s}=await l.from("brands").insert(a);if(s)throw s},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-brands"]}),i.success("Brand created successfully"),o(!1),p()},onError:()=>i.error("Failed to create brand")}),w=h({mutationFn:async({id:a,data:s})=>{const{error:f}=await l.from("brands").update(s).eq("id",a);if(f)throw f},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-brands"]}),i.success("Brand updated successfully"),o(!1),p()},onError:()=>i.error("Failed to update brand")}),C=h({mutationFn:async a=>{const{error:s}=await l.from("brands").delete().eq("id",a);if(s)throw s},onSuccess:()=>{m.invalidateQueries({queryKey:["admin-brands"]}),i.success("Brand deleted successfully")},onError:()=>i.error("Failed to delete brand")}),p=()=>{t({name:"",logo_url:"",display_order:0,active:!0}),g(null)},B=a=>{g(a),t({name:a.name,logo_url:a.logo_url,display_order:a.display_order,active:a.active}),o(!0)},_=a=>{a.preventDefault(),n?w.mutate({id:n.id,data:r}):N.mutate(r)};return e.jsx(L,{children:e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Brand Logos"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage brand logos displayed on your site"})]}),e.jsxs(K,{open:v,onOpenChange:o,children:[e.jsx(T,{asChild:!0,children:e.jsxs(d,{onClick:p,className:"shadow-md hover:shadow-lg transition-all",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"New Brand"]})}),e.jsxs(P,{children:[e.jsx(U,{children:e.jsx(z,{children:n?"Edit Brand":"Create Brand"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Brand Name"}),e.jsx(j,{value:r.name,onChange:a=>t({...r,name:a.target.value}),required:!0,className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Logo"}),e.jsx("div",{className:"mt-1.5",children:e.jsx(H,{bucket:"brand-logos",onUploadComplete:a=>t({...r,logo_url:a}),currentImage:r.logo_url})})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Display Order"}),e.jsx(j,{type:"number",value:r.display_order,onChange:a=>t({...r,display_order:parseInt(a.target.value)}),className:"mt-1.5"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(k,{checked:r.active,onCheckedChange:a=>t({...r,active:a})}),e.jsx(c,{children:"Active"})]}),e.jsxs(d,{type:"submit",className:"w-full",children:[n?"Update":"Create"," Brand"]})]})]})]})]}),b?e.jsx(G,{}):!u||u.length===0?e.jsx(R,{icon:M,title:"No brands yet",description:"Add brand logos to showcase your partners and collaborations",actionLabel:"Add First Brand",onAction:()=>o(!0)}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map((a,s)=>e.jsxs(S,{className:"bg-gradient-card border-border/50 shadow-md hover:shadow-lg transition-all duration-300 animate-fade-in group",style:{animationDelay:`${s*50}ms`},children:[e.jsx(F,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(q,{className:"text-lg",children:a.name}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(y,{variant:a.active?"default":"secondary",className:a.active?"bg-success text-success-foreground":"",children:a.active?"Active":"Inactive"}),e.jsxs(y,{variant:"outline",className:"text-xs",children:["Order: ",a.display_order]})]})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>B(a),className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"destructive",onClick:()=>C.mutate(a.id),children:e.jsx(Q,{className:"h-4 w-4"})})]})]})}),e.jsx(E,{children:e.jsx("div",{className:"relative aspect-video bg-muted/50 rounded-lg overflow-hidden border border-border/50",children:e.jsx("img",{src:a.logo_url,alt:a.name,className:"w-full h-full object-contain p-4 transition-transform group-hover:scale-105"})})})]},a.id))})]})})}export{xe as default};
//# sourceMappingURL=AdminBrands-C5r_B9nc.js.map
