import{r as n}from"./react-vendor-BeR0k5Z3.js";import{s as r}from"./index-CX6yiz0b.js";const M=()=>{const[c,o]=n.useState([]),[l,u]=n.useState(!0),[f,a]=n.useState(null);n.useEffect(()=>{i(),m()},[]);const i=async()=>{try{const{data:{user:e}}=await r.auth.getUser();if(!e)return;const{data:t,error:s}=await r.from("vendor_milestones").select("*").eq("user_id",e.id).order("achieved_at",{ascending:!1});if(s)throw s;o(t||[])}catch(e){console.error("Error fetching milestones:",e)}finally{u(!1)}},m=()=>{const e=r.channel("milestone-achievements").on("postgres_changes",{event:"INSERT",schema:"public",table:"vendor_milestones"},t=>{t.new&&(a(t.new),o(s=>[t.new,...s]))}).subscribe();return()=>{r.removeChannel(e)}};return{milestones:c,loading:l,latestMilestone:f,clearLatestMilestone:()=>{a(null)},refetch:i}};export{M as u};
//# sourceMappingURL=useMilestones-Bt2TalEd.js.map
