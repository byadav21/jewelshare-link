import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as l,u as L}from"./react-vendor-BeR0k5Z3.js";import{F as o,_ as P,B as x,C as h,G as u,H as p,D as j}from"./index-DGlTgSKx.js";import{B as f}from"./badge-DknkzE8c.js";import{T as S,a as B,b as g,c as N}from"./tabs-DfoelxW9.js";import{u as v,J as H,H as d,a8 as b,I as w,h as y,a3 as _}from"./ui-vendor-CN4tOqpp.js";import{f as C}from"./format-CqKCEgBk.js";import"./supabase-vendor-VSDMYZ1k.js";import"./index-XJCymQHf.js";import"./index-BC78nHQ6.js";const V=()=>{const[t,I]=l.useState([]),[r,k]=l.useState([]),[M,T]=l.useState(!0),c=L();l.useEffect(()=>{G(),E()},[]);const G=async()=>{try{const{data:s,error:a}=await o.from("product_interests").select(`
          id,
          customer_name,
          customer_email,
          customer_phone,
          notes,
          created_at,
          products (
            id,
            name,
            sku,
            image_url,
            retail_price
          )
        `).order("created_at",{ascending:!1});if(a)throw a;I(s||[])}catch{v.error("Failed to load interests")}finally{T(!1)}},E=async()=>{try{const{data:s,error:a}=await o.from("catalog_inquiries").select("*").order("created_at",{ascending:!1});if(a)throw a;k(s||[])}catch{v.error("Failed to load inquiries")}};return e.jsx(P,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>c("/"),children:e.jsx(H,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-serif font-bold text-foreground",children:"Customer Interests"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"secondary",className:"text-sm",children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),t.length," Product Interests"]}),e.jsxs(f,{variant:"outline",className:"text-sm",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),r.length," General Inquiries"]})]})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:M?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"animate-pulse text-primary text-xl",children:"Loading..."})}):t.length===0&&r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-serif mb-2 text-foreground",children:"No messages yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"When customers contact you or show interest in products, they'll appear here"}),e.jsx(x,{onClick:()=>c("/"),children:"Go to Catalog"})]}):e.jsxs(S,{defaultValue:"interests",className:"w-full",children:[e.jsxs(B,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-6",children:[e.jsxs(g,{value:"interests",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Product Interests (",t.length,")"]}),e.jsxs(g,{value:"inquiries",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"General Inquiries (",r.length,")"]})]}),e.jsx(N,{value:"interests",children:t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No product interests yet"})}):e.jsx("div",{className:"grid gap-4",children:t.map(s=>{var a,m,i,n;return e.jsxs(h,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx(u,{className:"bg-muted/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-4 flex-1",children:[((a=s.products)==null?void 0:a.image_url)&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:e.jsx("img",{src:s.products.image_url,alt:s.products.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{className:"text-lg mb-1",children:(m=s.products)==null?void 0:m.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground",children:[((i=s.products)==null?void 0:i.sku)&&e.jsxs("span",{children:["SKU: ",s.products.sku]}),((n=s.products)==null?void 0:n.retail_price)&&e.jsxs("span",{className:"font-semibold text-primary",children:["â‚¹",s.products.retail_price.toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(w,{className:"h-3 w-3"}),C(new Date(s.created_at),"MMM d, yyyy")]})]})}),e.jsx(j,{className:"pt-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Customer Name"}),e.jsx("p",{className:"text-foreground font-semibold",children:s.customer_name})]}),s.customer_email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${s.customer_email}`,className:"text-primary hover:underline flex items-center gap-1",children:[e.jsx(y,{className:"h-4 w-4"}),s.customer_email]})]}),s.customer_phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${s.customer_phone}`,className:"text-primary hover:underline flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),s.customer_phone]})]})]}),s.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-foreground bg-muted p-3 rounded-md",children:s.notes})]})]})})]},s.id)})})}),e.jsx(N,{value:"inquiries",children:r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No general inquiries yet"})}):e.jsx("div",{className:"grid gap-4",children:r.map(s=>e.jsxs(h,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx(u,{className:"bg-muted/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx(p,{className:"text-lg",children:"General Inquiry"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(w,{className:"h-3 w-3"}),C(new Date(s.created_at),"MMM d, yyyy")]})]})}),e.jsx(j,{className:"pt-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Customer Name"}),e.jsx("p",{className:"text-foreground font-semibold",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Email"}),e.jsxs("a",{href:`mailto:${s.customer_email}`,className:"text-primary hover:underline flex items-center gap-1",children:[e.jsx(y,{className:"h-4 w-4"}),s.customer_email]})]}),s.customer_phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Phone"}),e.jsxs("a",{href:`tel:${s.customer_phone}`,className:"text-primary hover:underline flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),s.customer_phone]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Message"}),e.jsx("p",{className:"text-sm text-foreground bg-muted p-3 rounded-md",children:s.message})]})]})})]},s.id))})})]})})]})})};export{V as default};
//# sourceMappingURL=Interests-DGSS-TmM.js.map
