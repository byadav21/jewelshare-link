import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as a,u as j}from"./react-vendor-BeR0k5Z3.js";import{s as n,C as g,i as v,k as y,l as N,g as b,B as P}from"./index-CX6yiz0b.js";import{I as m}from"./input-CiHC6UAI.js";import{L as u}from"./label-DbIM3Eg1.js";import{u as r,t as C}from"./ui-vendor-DjQqXt9S.js";import{B as k}from"./BackToHomeButton-C1MOpu96.js";import"./supabase-vendor-VSDMYZ1k.js";import"./proxy-8agjeDDu.js";const D=()=>{const[t,h]=a.useState(""),[l,p]=a.useState(""),[d,c]=a.useState(!1),[x,f]=a.useState(!1),o=j();a.useEffect(()=>{n.auth.getSession().then(({data:{session:s}})=>{s?f(!0):(r.error("Invalid or expired reset link"),o("/auth"))})},[o]);const w=async s=>{if(s.preventDefault(),t!==l){r.error("Passwords do not match");return}if(t.length<6){r.error("Password must be at least 6 characters");return}c(!0);try{const{error:i}=await n.auth.updateUser({password:t});if(i)throw i;r.success("Password updated successfully!"),await n.auth.signOut(),o("/auth")}catch(i){r.error(i.message||"Failed to reset password")}finally{c(!1)}};return x?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(k,{variant:"ghost"})}),e.jsxs(g,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(C,{className:"h-12 w-12 text-primary"})}),e.jsx(y,{className:"text-3xl font-serif",children:"Reset Password"}),e.jsx(N,{children:"Enter your new password below"})]}),e.jsxs(b,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",children:"New Password"}),e.jsx(m,{id:"password",type:"password",value:t,onChange:s=>h(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:"password",value:l,onChange:s=>p(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsx(P,{type:"submit",className:"w-full",disabled:d,children:d?"Updating...":"Reset Password"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>o("/auth"),className:"text-sm text-primary hover:underline",children:"Back to sign in"})})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse text-primary text-xl",children:"Verifying reset link..."})})};export{D as default};
//# sourceMappingURL=ResetPassword-BxknsOSh.js.map
