{"version":3,"file":"AnalyticsDashboard-DPmSAzBo.js","sources":["../../src/pages/AnalyticsDashboard.tsx"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { ArrowLeft, TrendingUp, Users, Package, Share2, Eye, MessageSquare } from \"lucide-react\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { format, formatDistanceToNow } from \"date-fns\";\r\n\r\nconst AnalyticsDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const { isAdmin, loading: roleLoading } = useUserRole();\r\n\r\n  // Fetch vendor activity data\r\n  const { data: vendorActivity, isLoading: activityLoading } = useQuery({\r\n    queryKey: [\"vendor-activity\"],\r\n    queryFn: async () => {\r\n      // Get all vendors with approval status\r\n      const { data: vendors, error: vendorsError } = await supabase\r\n        .from(\"user_approval_status\")\r\n        .select(\"user_id, business_name, email, status\")\r\n        .eq(\"status\", \"approved\");\r\n\r\n      if (vendorsError) throw vendorsError;\r\n\r\n      // Get vendor profiles\r\n      const { data: profiles, error: profilesError } = await supabase\r\n        .from(\"vendor_profiles\")\r\n        .select(\"user_id, business_name\");\r\n\r\n      if (profilesError) throw profilesError;\r\n\r\n      // Get last session activity\r\n      const { data: sessions, error: sessionsError } = await supabase\r\n        .from(\"user_sessions\")\r\n        .select(\"user_id, last_activity\")\r\n        .order(\"last_activity\", { ascending: false });\r\n\r\n      if (sessionsError) throw sessionsError;\r\n\r\n      // Get product counts (last 30 days)\r\n      const thirtyDaysAgo = new Date();\r\n      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n      const { data: recentProducts, error: productsError } = await supabase\r\n        .from(\"products\")\r\n        .select(\"user_id, created_at\")\r\n        .gte(\"created_at\", thirtyDaysAgo.toISOString())\r\n        .is(\"deleted_at\", null);\r\n\r\n      if (productsError) throw productsError;\r\n\r\n      // Get share link stats\r\n      const { data: shareLinks, error: linksError } = await supabase\r\n        .from(\"share_links\")\r\n        .select(\"user_id, view_count, created_at\");\r\n\r\n      if (linksError) throw linksError;\r\n\r\n      // Process data\r\n      const productCounts = recentProducts?.reduce((acc: any, p: any) => {\r\n        acc[p.user_id] = (acc[p.user_id] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n\r\n      const shareLinkStats = shareLinks?.reduce((acc: any, link: any) => {\r\n        if (!acc[link.user_id]) {\r\n          acc[link.user_id] = { count: 0, totalViews: 0 };\r\n        }\r\n        acc[link.user_id].count++;\r\n        acc[link.user_id].totalViews += link.view_count || 0;\r\n        return acc;\r\n      }, {});\r\n\r\n      const lastActivity = sessions?.reduce((acc: any, session: any) => {\r\n        if (!acc[session.user_id] || new Date(session.last_activity) > new Date(acc[session.user_id])) {\r\n          acc[session.user_id] = session.last_activity;\r\n        }\r\n        return acc;\r\n      }, {});\r\n\r\n      return vendors?.map((vendor: any) => ({\r\n        ...vendor,\r\n        businessName: profiles?.find((p: any) => p.user_id === vendor.user_id)?.business_name || vendor.business_name,\r\n        lastActivity: lastActivity[vendor.user_id],\r\n        productsAddedThisMonth: productCounts?.[vendor.user_id] || 0,\r\n        shareLinks: shareLinkStats?.[vendor.user_id]?.count || 0,\r\n        totalViews: shareLinkStats?.[vendor.user_id]?.totalViews || 0,\r\n      })).sort((a: any, b: any) => {\r\n        if (!a.lastActivity) return 1;\r\n        if (!b.lastActivity) return -1;\r\n        return new Date(b.lastActivity).getTime() - new Date(a.lastActivity).getTime();\r\n      });\r\n    },\r\n    enabled: isAdmin,\r\n  });\r\n\r\n  // Fetch customer engagement metrics\r\n  const { data: engagementMetrics, isLoading: metricsLoading } = useQuery({\r\n    queryKey: [\"engagement-metrics\"],\r\n    queryFn: async () => {\r\n      const { data: interests, error: interestsError } = await supabase\r\n        .from(\"product_interests\")\r\n        .select(\"product_id, created_at\");\r\n\r\n      if (interestsError) throw interestsError;\r\n\r\n      const { data: inquiries, error: inquiriesError } = await supabase\r\n        .from(\"catalog_inquiries\")\r\n        .select(\"created_at\");\r\n\r\n      if (inquiriesError) throw inquiriesError;\r\n\r\n      const { data: products, error: productsError } = await supabase\r\n        .from(\"products\")\r\n        .select(\"id, name, sku\")\r\n        .is(\"deleted_at\", null);\r\n\r\n      if (productsError) throw productsError;\r\n\r\n      // Calculate most inquired products\r\n      const productInterestCounts = interests?.reduce((acc: any, interest: any) => {\r\n        acc[interest.product_id] = (acc[interest.product_id] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n\r\n      const topProducts = Object.entries(productInterestCounts || {})\r\n        .map(([productId, count]: [string, any]) => {\r\n          const product = products?.find((p: any) => p.id === productId);\r\n          return {\r\n            productId,\r\n            name: product?.name || \"Unknown\",\r\n            sku: product?.sku,\r\n            interestCount: count,\r\n          };\r\n        })\r\n        .sort((a, b) => b.interestCount - a.interestCount)\r\n        .slice(0, 10);\r\n\r\n      return {\r\n        totalInterests: interests?.length || 0,\r\n        totalInquiries: inquiries?.length || 0,\r\n        conversionRate: products?.length ? ((interests?.length || 0) / products.length * 100).toFixed(2) : 0,\r\n        topProducts,\r\n      };\r\n    },\r\n    enabled: isAdmin,\r\n  });\r\n\r\n  if (roleLoading) {\r\n    return <div className=\"flex items-center justify-center min-h-screen\">Loading...</div>;\r\n  }\r\n\r\n  if (!isAdmin) {\r\n    navigate(\"/\");\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"ghost\" onClick={() => navigate(\"/super-admin\")}>\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Back to Dashboard\r\n          </Button>\r\n          <h1 className=\"text-3xl font-bold\">Activity Analytics</h1>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Engagement Metrics */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Interests</CardTitle>\r\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">\r\n              {metricsLoading ? \"...\" : engagementMetrics?.totalInterests}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Inquiries</CardTitle>\r\n            <MessageSquare className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">\r\n              {metricsLoading ? \"...\" : engagementMetrics?.totalInquiries}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Active Vendors</CardTitle>\r\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">\r\n              {activityLoading ? \"...\" : vendorActivity?.length}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Interest Rate</CardTitle>\r\n            <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">\r\n              {metricsLoading ? \"...\" : `${engagementMetrics?.conversionRate}%`}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Vendor Activity Table */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Vendor Activity</CardTitle>\r\n          <CardDescription>Monitor vendor engagement and productivity</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {activityLoading ? (\r\n            <div className=\"text-center py-8\">Loading vendor activity...</div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Vendor</TableHead>\r\n                    <TableHead>Last Login</TableHead>\r\n                    <TableHead>Products Added (30d)</TableHead>\r\n                    <TableHead>Share Links</TableHead>\r\n                    <TableHead>Total Views</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {vendorActivity?.map((vendor: any) => (\r\n                    <TableRow key={vendor.user_id}>\r\n                      <TableCell>\r\n                        <div>\r\n                          <div className=\"font-medium\">{vendor.businessName || \"N/A\"}</div>\r\n                          <div className=\"text-sm text-muted-foreground\">{vendor.email}</div>\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {vendor.lastActivity ? (\r\n                          <div className=\"text-sm\">\r\n                            <div>{formatDistanceToNow(new Date(vendor.lastActivity), { addSuffix: true })}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">\r\n                              {format(new Date(vendor.lastActivity), \"MMM dd, yyyy HH:mm\")}\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-muted-foreground\">Never</span>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge variant=\"outline\">{vendor.productsAddedThisMonth}</Badge>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge variant=\"outline\">{vendor.shareLinks}</Badge>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge variant=\"secondary\">{vendor.totalViews}</Badge>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Top Products */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Package className=\"h-5 w-5\" />\r\n            Most Inquired Products\r\n          </CardTitle>\r\n          <CardDescription>Products with the highest customer interest</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {metricsLoading ? (\r\n            <div className=\"text-center py-8\">Loading metrics...</div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Rank</TableHead>\r\n                    <TableHead>Product Name</TableHead>\r\n                    <TableHead>SKU</TableHead>\r\n                    <TableHead>Interest Count</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {engagementMetrics?.topProducts?.map((product: any, index: number) => (\r\n                    <TableRow key={product.productId}>\r\n                      <TableCell>\r\n                        <Badge variant={index < 3 ? \"default\" : \"outline\"}>#{index + 1}</Badge>\r\n                      </TableCell>\r\n                      <TableCell className=\"font-medium\">{product.name}</TableCell>\r\n                      <TableCell>{product.sku || \"-\"}</TableCell>\r\n                      <TableCell>\r\n                        <Badge variant=\"secondary\">{product.interestCount}</Badge>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n"],"names":["AnalyticsDashboard","navigate","useNavigate","isAdmin","roleLoading","useUserRole","vendorActivity","activityLoading","useQuery","vendors","vendorsError","supabase","profiles","profilesError","sessions","sessionsError","thirtyDaysAgo","recentProducts","productsError","shareLinks","linksError","productCounts","acc","p","shareLinkStats","link","lastActivity","session","vendor","_a","_b","_c","a","b","engagementMetrics","metricsLoading","interests","interestsError","inquiries","inquiriesError","products","productInterestCounts","interest","topProducts","productId","count","product","jsx","jsxs","Button","ArrowLeft","Card","CardHeader","CardTitle","TrendingUp","CardContent","MessageSquare","Users","Eye","CardDescription","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","formatDistanceToNow","format","Badge","Package","index"],"mappings":"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"}