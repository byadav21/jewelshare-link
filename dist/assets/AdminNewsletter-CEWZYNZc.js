import{b as y,u as C,c as j,j as e}from"./query-vendor-CIvqgC9B.js";import{C as a,t as l,x as c,o as i,B as p,l as m}from"./index-DBHw7ps1.js";import{A as S}from"./AdminLayout-Bt5p8wlS.js";import{B as f}from"./badge-HmGNQ04n.js";import{bg as A,i as T,aG as _,u as o}from"./ui-vendor-B3Ur81tx.js";import{T as q,a as E,b as g,c as d,d as M,e as n}from"./table-CywLfQKL.js";import{A as B}from"./AdminLoadingSkeleton-2vW1rJwi.js";import{A as F}from"./AdminEmptyState-BHWpFob6.js";import"./react-vendor-BCzWReGx.js";import"./supabase-vendor-DJknrin8.js";import"./input-CpEp8mrX.js";import"./separator-6caDi7bi.js";import"./sheet-BWMSKSTq.js";import"./index-BswhvY0M.js";import"./index-vsC2Ycwh.js";import"./NavLink-B_nTQT1l.js";import"./index-lgWsV-kP.js";import"./index-vM6_qKqc.js";function Z(){const u=y(),{data:r,isLoading:N}=C({queryKey:["admin-newsletter"],queryFn:async()=>{const{data:s,error:t}=await m.from("newsletter_subscribers").select("*").order("subscribed_at",{ascending:!1});if(t)throw t;return s}}),v=j({mutationFn:async({id:s,is_active:t})=>{const{error:b}=await m.from("newsletter_subscribers").update({is_active:t}).eq("id",s);if(b)throw b},onSuccess:()=>{u.invalidateQueries({queryKey:["admin-newsletter"]}),o.success("Subscriber status updated")},onError:()=>o.error("Failed to update subscriber")}),w=j({mutationFn:async s=>{const{error:t}=await m.from("newsletter_subscribers").delete().eq("id",s);if(t)throw t},onSuccess:()=>{u.invalidateQueries({queryKey:["admin-newsletter"]}),o.success("Subscriber deleted")},onError:()=>o.error("Failed to delete subscriber")}),x=(r==null?void 0:r.filter(s=>s.is_active).length)||0,h=(r==null?void 0:r.length)||0;return e.jsx(S,{children:e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Newsletter Subscribers"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your email newsletter subscribers"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(a,{className:"bg-gradient-card border-border/50 shadow-md",children:[e.jsx(l,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Total Subscribers"})}),e.jsx(i,{children:e.jsx("div",{className:"text-3xl font-bold",children:h})})]}),e.jsxs(a,{className:"bg-gradient-success border-border/50 shadow-md",children:[e.jsx(l,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium text-success-foreground",children:"Active Subscribers"})}),e.jsx(i,{children:e.jsx("div",{className:"text-3xl font-bold text-success",children:x})})]}),e.jsxs(a,{className:"bg-gradient-card border-border/50 shadow-md",children:[e.jsx(l,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Inactive Subscribers"})}),e.jsx(i,{children:e.jsx("div",{className:"text-3xl font-bold",children:h-x})})]})]}),N?e.jsx(B,{}):!r||r.length===0?e.jsx(F,{icon:A,title:"No subscribers yet",description:"Email subscribers will appear here when visitors sign up for your newsletter"}):e.jsx(a,{className:"bg-gradient-card border-border/50 shadow-md",children:e.jsx(i,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(E,{children:e.jsxs(g,{className:"border-border/50 hover:bg-transparent",children:[e.jsx(d,{className:"font-semibold",children:"Email"}),e.jsx(d,{className:"font-semibold",children:"Status"}),e.jsx(d,{className:"font-semibold",children:"Subscribed"}),e.jsx(d,{className:"text-right font-semibold",children:"Actions"})]})}),e.jsx(M,{children:r.map(s=>e.jsxs(g,{className:"border-border/50 hover:bg-muted/30 transition-colors",children:[e.jsx(n,{className:"font-medium",children:s.email}),e.jsx(n,{children:s.is_active?e.jsx(f,{className:"bg-success text-success-foreground",children:"Active"}):e.jsx(f,{variant:"outline",children:"Inactive"})}),e.jsx(n,{className:"text-muted-foreground",children:new Date(s.subscribed_at).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>v.mutate({id:s.id,is_active:!s.is_active}),className:"hover:bg-primary/10 hover:border-primary transition-colors",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"destructive",onClick:()=>w.mutate(s.id),children:e.jsx(_,{className:"h-4 w-4"})})]})})]},s.id))})]})})})})]})})}export{Z as default};
//# sourceMappingURL=AdminNewsletter-CEWZYNZc.js.map
