import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as a,u as j}from"./react-vendor-BeR0k5Z3.js";import{F as i,C as g,G as v,H as y,I as N,D as b,B as P}from"./index-DGlTgSKx.js";import{I as m}from"./input-CEHl5GoJ.js";import{L as u}from"./label-ClRcubO_.js";import{u as r,w as C}from"./ui-vendor-CN4tOqpp.js";import{B as k}from"./BackToHomeButton-Dxc739pt.js";import"./supabase-vendor-VSDMYZ1k.js";const D=()=>{const[t,h]=a.useState(""),[l,p]=a.useState(""),[d,c]=a.useState(!1),[x,f]=a.useState(!1),n=j();a.useEffect(()=>{i.auth.getSession().then(({data:{session:s}})=>{s?f(!0):(r.error("Invalid or expired reset link"),n("/auth"))})},[n]);const w=async s=>{if(s.preventDefault(),t!==l){r.error("Passwords do not match");return}if(t.length<6){r.error("Password must be at least 6 characters");return}c(!0);try{const{error:o}=await i.auth.updateUser({password:t});if(o)throw o;r.success("Password updated successfully!"),await i.auth.signOut(),n("/auth")}catch(o){r.error(o.message||"Failed to reset password")}finally{c(!1)}};return x?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(k,{variant:"ghost"})}),e.jsxs(g,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(C,{className:"h-12 w-12 text-primary"})}),e.jsx(y,{className:"text-3xl font-serif",children:"Reset Password"}),e.jsx(N,{children:"Enter your new password below"})]}),e.jsxs(b,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",children:"New Password"}),e.jsx(m,{id:"password",type:"password",value:t,onChange:s=>h(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:"password",value:l,onChange:s=>p(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsx(P,{type:"submit",className:"w-full",disabled:d,children:d?"Updating...":"Reset Password"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>n("/auth"),className:"text-sm text-primary hover:underline",children:"Back to sign in"})})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse text-primary text-xl",children:"Verifying reset link..."})})};export{D as default};
//# sourceMappingURL=ResetPassword-DfF9nq4U.js.map
