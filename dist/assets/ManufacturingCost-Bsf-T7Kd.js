import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as a,u as cs}from"./react-vendor-BeR0k5Z3.js";import{y as ee,C as b,G as S,H as w,I as C,D as y,B as p,E as os,T as ds,F as N}from"./index-DGlTgSKx.js";import{I as g}from"./input-CEHl5GoJ.js";import{L as l}from"./label-ClRcubO_.js";import{T as Le}from"./textarea-DU5hu0UG.js";import{S as ms}from"./switch-CO0K2nGH.js";import{B as xs}from"./BackToHomeButton-Dxc739pt.js";import{H as hs}from"./Header-B5-jxlpW.js";import{F as us}from"./Footer-BK7nFY-c.js";import{x as gs,an as se,k as Re,D as De,as as Ue,d as Be,at as Ve,A as L,au as ps,l as Q,ab as js,av as fs,aw as Ns,ax as ke,ay as vs,X as bs,ae as ys,C as Ss,w as ws,az as Cs,I as Is}from"./ui-vendor-CN4tOqpp.js";import{A as Fe,a as Te}from"./alert-B0m9J_BT.js";import{S as _s}from"./separator-C73YyUTd.js";import{C as ks,a as Fs,b as Ts}from"./collapsible-DrSukZLl.js";import{I as Es}from"./InvoiceLineItems-CHUGsz1p.js";import{D as te,b as ae,c as re,d as ne,e as ie,f as Ps}from"./dialog-CRWggOUB.js";import{S as As}from"./scroll-area-B6OKxq6t.js";import{S as Ee,a as Pe,b as Ae,c as Ge,d as v}from"./select-CQfvDDtS.js";import{P as Gs,a as Ls,b as Rs,C as Ds}from"./popover-NSDtVqGC.js";import{f as Us}from"./format-CqKCEgBk.js";import"./supabase-vendor-VSDMYZ1k.js";import"./index-DjQc2W_p.js";import"./index-BC78nHQ6.js";import"./sheet-Cln3_CyD.js";import"./index-CVwUD2ep.js";import"./index-aqCwQlp3.js";import"./ScrollReveal-Cik8ssSz.js";import"./index-D_-4tDD2.js";import"./EstimateImage-BXHCwrxx.js";import"./index-BdQq_4o_.js";import"./endOfMonth-CPC63KWN.js";import"./subDays-BcNQht-D.js";const Bs=({currentStep:t,steps:i})=>e.jsx("div",{className:"w-full py-8",children:e.jsx("div",{className:"flex items-center justify-between",children:i.map((s,c)=>e.jsxs("div",{className:"flex flex-1 items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:ee("flex h-12 w-12 items-center justify-center rounded-full border-2 transition-all duration-300",t>s.id?"border-primary bg-primary text-primary-foreground":t===s.id?"border-primary bg-background text-primary animate-pulse":"border-muted-foreground/30 bg-background text-muted-foreground"),children:t>s.id?e.jsx(gs,{className:"h-6 w-6"}):e.jsx("span",{className:"text-sm font-bold",children:s.id})}),e.jsxs("div",{className:"mt-2 text-center max-w-[120px]",children:[e.jsx("p",{className:ee("text-sm font-semibold transition-colors",t>=s.id?"text-foreground":"text-muted-foreground"),children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]}),c<i.length-1&&e.jsx("div",{className:ee("h-0.5 flex-1 mx-4 transition-all duration-300",t>s.id?"bg-primary":"bg-muted-foreground/30")})]},s.id))})}),Vs=()=>e.jsxs(b,{className:"border-primary/20 bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[e.jsxs(S,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),"Estimate vs Invoice - Quick Guide"]}),e.jsx(C,{children:"Understanding the workflow from cost estimation to final invoice"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Step 1: Create Estimate"})]}),e.jsxs("div",{className:"pl-7 space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Enter jewelry specifications (weight, purity, diamonds, gemstones)"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Calculate manufacturing costs (gold, making charges, CAD, certification)"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Set profit margin to determine selling price"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Save as ",e.jsx("span",{className:"font-semibold text-foreground",children:"Draft"})," for future reference"]})]}),e.jsx(Fe,{className:"bg-primary/5 border-primary/20",children:e.jsxs(Te,{className:"text-sm",children:[e.jsx("strong",{children:"Estimates"})," are for quotations and internal calculations. They can be modified anytime and don't require complete customer details."]})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(L,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx(_s,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-accent"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Step 2: Generate Invoice"})]}),e.jsxs("div",{className:"pl-7 space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Convert approved estimate to professional invoice"]}),e.jsx("p",{children:"• Add invoice number (auto-generated)"}),e.jsx("p",{children:"• Set payment terms and due date"}),e.jsx("p",{children:"• Include customer name (mandatory for invoices)"}),e.jsx("p",{children:"• Choose invoice template style"})]}),e.jsx(Fe,{className:"bg-accent/5 border-accent/20",children:e.jsxs(Te,{className:"text-sm",children:[e.jsx("strong",{children:"Invoices"})," are final billing documents with unique numbers. Once generated, they're stored separately in Invoice History for record-keeping."]})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg border",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Quick Actions:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[e.jsx("div",{children:"✓ Save Estimate → Draft status"}),e.jsx("div",{children:"✓ Export Estimate PDF → Quotation"}),e.jsx("div",{children:"✓ Generate Invoice → Final bill"}),e.jsx("div",{children:"✓ View History → Past records"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Status Workflow:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-1 bg-background rounded border",children:"Draft"}),e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"px-2 py-1 bg-background rounded border",children:"Quoted"}),e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"px-2 py-1 bg-background rounded border",children:"Approved"}),e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"px-2 py-1 bg-background rounded border",children:"In Production"}),e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"px-2 py-1 bg-background rounded border text-accent font-semibold",children:"Completed"})]})]})]})]}),zs=({vendorProfile:t,vendorGSTIN:i,onVendorGSTINChange:s,customerDetails:c,onCustomerDetailsChange:m})=>{const h=(r,u)=>{m({...c,[r]:u})};return e.jsxs("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-border to-transparent transform -translate-x-1/2"}),e.jsxs(b,{className:"border-primary/20 shadow-sm relative z-10",children:[e.jsxs(S,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-b border-primary/10",children:[e.jsxs(w,{className:"text-lg flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5 text-primary"}),"Vendor Details"]}),e.jsx(C,{children:"Your business information"})]}),e.jsx(y,{className:"pt-6 bg-primary/5",children:t?e.jsxs("div",{className:"space-y-4",children:[t.logo_url&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:t.logo_url,alt:"Vendor Logo",className:"h-20 w-auto object-contain"})}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("div",{className:"border-b border-border pb-2",children:e.jsx("p",{className:"font-semibold text-foreground",children:t.business_name||"Business Name"})}),(t.address_line1||t.city||t.state)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Address"}),e.jsx("p",{className:"text-foreground leading-relaxed",children:[t.address_line1,t.address_line2,t.city,t.state,t.pincode,t.country].filter(Boolean).join(", ")})]}),t.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Phone"}),e.jsx("p",{className:"text-foreground",children:t.phone})]}),t.email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),e.jsx("p",{className:"text-foreground",children:t.email})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vendor-gstin",className:"text-xs text-muted-foreground mb-1",children:"GSTIN (Optional)"}),e.jsx(g,{id:"vendor-gstin",value:i,onChange:r=>s(r.target.value),placeholder:"Enter GSTIN",className:"mt-1.5"})]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"Loading vendor details..."})})]}),e.jsxs(b,{className:"border-accent/20 shadow-sm relative z-10",children:[e.jsxs(S,{className:"bg-gradient-to-r from-accent/10 to-accent/5 border-b border-accent/10",children:[e.jsxs(w,{className:"text-lg flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5 text-accent"}),"Customer Details"]}),e.jsx(C,{children:"Enter customer information"})]}),e.jsx(y,{className:"pt-6 bg-accent/5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-name",className:"text-sm font-medium",children:"Customer Name *"}),e.jsx(g,{id:"customer-name",value:c.name,onChange:r=>h("name",r.target.value),placeholder:"Enter customer name",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(g,{id:"customer-phone",value:c.phone,onChange:r=>h("phone",r.target.value),placeholder:"Enter phone number",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-email",className:"text-sm font-medium",children:"Email Address"}),e.jsx(g,{id:"customer-email",type:"email",value:c.email,onChange:r=>h("email",r.target.value),placeholder:"Enter email address",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-address",className:"text-sm font-medium",children:"Address"}),e.jsx(Le,{id:"customer-address",value:c.address,onChange:r=>h("address",r.target.value),placeholder:"Enter customer address",className:"mt-1.5 min-h-[90px]",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-gstin",className:"text-sm font-medium",children:"GSTIN (Optional)"}),e.jsx(g,{id:"customer-gstin",value:c.gstin,onChange:r=>h("gstin",r.target.value),placeholder:"Enter customer GSTIN",className:"mt-1.5"})]})]})})]})]})},Hs=({gstMode:t,onGstModeChange:i,sgstPercentage:s,cgstPercentage:c,igstPercentage:m,onSgstChange:h,onCgstChange:r,onIgstChange:u,shippingCharges:$,onShippingChargesChange:J,shippingZone:T,exchangeRate:R,onExchangeRateChange:E,costs:f})=>{const D=d=>{d===0?(i("none"),h(0),r(0),u(0)):t==="none"?(i("sgst_cgst"),h(d/2),r(d/2)):t==="sgst_cgst"?(h(d/2),r(d/2)):u(d)};return e.jsxs(b,{children:[e.jsxs(S,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5 text-primary"}),"Tax, Shipping & Currency"]}),e.jsx(C,{children:"Configure GST, shipping charges, and currency conversion"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{className:"text-sm font-semibold",children:"GST Type"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"no-gst-mode",checked:t==="none",onChange:()=>{i("none"),h(0),r(0),u(0)},className:"h-4 w-4"}),e.jsx(l,{htmlFor:"no-gst-mode",className:"text-sm cursor-pointer",children:"No GST"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"sgst-cgst-mode",checked:t==="sgst_cgst",onChange:()=>i("sgst_cgst"),className:"h-4 w-4"}),e.jsx(l,{htmlFor:"sgst-cgst-mode",className:"text-sm cursor-pointer",children:"SGST + CGST (Intra-State)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"igst-mode",checked:t==="igst",onChange:()=>i("igst"),className:"h-4 w-4"}),e.jsx(l,{htmlFor:"igst-mode",className:"text-sm cursor-pointer",children:"IGST (Inter-State)"})]})]})]}),t!=="none"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-semibold",children:"Quick GST Rate Selection"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1.5,3,5,12,18,28].map(d=>e.jsxs(p,{type:"button",variant:t==="sgst_cgst"&&s===d/2||t==="igst"&&m===d?"default":"outline",size:"sm",onClick:()=>D(d),children:[d,"%"]},d))})]}),t!=="none"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t==="sgst_cgst"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"sgst",className:"text-sm",children:"SGST (%)"}),e.jsx(g,{id:"sgst",type:"number",min:0,max:100,step:.1,value:s,onChange:d=>h(parseFloat(d.target.value)||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"cgst",className:"text-sm",children:"CGST (%)"}),e.jsx(g,{id:"cgst",type:"number",min:0,max:100,step:.1,value:c,onChange:d=>r(parseFloat(d.target.value)||0)})]})]}):e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsx(l,{htmlFor:"igst",className:"text-sm",children:"IGST (%)"}),e.jsx(g,{id:"igst",type:"number",min:0,max:100,step:.1,value:m,onChange:d=>u(parseFloat(d.target.value)||0)})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"exchange-rate",className:"text-sm",children:"Exchange Rate (USD to INR)"}),e.jsx(g,{id:"exchange-rate",type:"number",min:0,step:.01,value:R,onChange:d=>E(parseFloat(d.target.value)||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"text-sm text-muted-foreground",children:"Auto-calculated USD Amount"}),e.jsx("div",{className:"flex items-center h-10 px-3 bg-muted/50 rounded-md border",children:e.jsxs("span",{className:"font-medium text-primary",children:["$",f.totalInUSD.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"shipping",className:"text-sm",children:"Shipping Charges (₹) - Manual Override"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{id:"shipping",type:"number",min:0,step:.01,value:$,onChange:d=>J(parseFloat(d.target.value)||0),className:"pl-9"})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Cost Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal (Before Tax):"}),e.jsxs("span",{className:"font-semibold",children:["₹",f.finalSellingPrice.toLocaleString("en-IN")]})]}),t==="sgst_cgst"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsxs("span",{className:"text-muted-foreground",children:["SGST (",s,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["₹",f.sgstAmount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsxs("span",{className:"text-muted-foreground",children:["CGST (",c,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["₹",f.cgstAmount.toLocaleString("en-IN")]})]})]}),t==="igst"&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsxs("span",{className:"text-muted-foreground",children:["IGST (",m,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["₹",f.igstAmount.toLocaleString("en-IN")]})]}),t==="none"&&e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"GST:"}),e.jsx("span",{className:"font-semibold text-muted-foreground",children:"Not Applicable"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Shipping (",T,"):"]}),e.jsxs("span",{className:"font-semibold",children:["₹",$.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"border-t pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-primary/10 rounded-lg",children:[e.jsx("span",{className:"font-bold text-lg",children:"Grand Total (INR):"}),e.jsxs("span",{className:"font-bold text-xl text-primary",children:["₹",f.grandTotal.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/10 rounded-lg mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Equivalent (USD):"}),e.jsxs("span",{className:"font-semibold text-lg text-accent",children:["$",f.totalInUSD.toLocaleString("en-US")]})]})]})]})]})]})},Os=({profitMargin:t,onProfitMarginChange:i,costs:s,formData:c})=>e.jsxs(b,{children:[e.jsxs(S,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-primary"}),"Profit Margin & Final Pricing"]}),e.jsx(C,{children:"Set profit margin and view final selling price"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{htmlFor:"profit-margin",className:"text-sm font-semibold",children:"Profit Margin (%)"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:[t,"%"]})]}),e.jsx(g,{id:"profit-margin",type:"range",min:0,max:200,step:1,value:t,onChange:m=>i(parseFloat(m.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"100%"}),e.jsx("span",{children:"200%"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manufacturing Cost"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",s.totalCost.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Final Selling Price (Before Tax)"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["₹",s.finalSellingPrice.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"p-4 bg-accent/10 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-accent",children:["₹",s.profitAmount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-primary/20 to-accent/20 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Grand Total (After Tax)"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",s.grandTotal.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gold Cost:"}),e.jsxs("span",{className:"font-medium",children:["₹",s.goldCost.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Diamond Cost:"}),e.jsxs("span",{className:"font-medium",children:["₹",(c.diamondPerCaratPrice*c.diamondWeight).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gemstone Cost:"}),e.jsxs("span",{className:"font-medium",children:["₹",(c.gemstonePerCaratPrice*c.gemstoneWeight).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Making Charges:"}),e.jsxs("span",{className:"font-medium",children:["₹",c.makingCharges.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"CAD Design:"}),e.jsxs("span",{className:"font-medium",children:["₹",c.cadDesignCharges.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Camming:"}),e.jsxs("span",{className:"font-medium",children:["₹",c.cammingCharges.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Certification:"}),e.jsxs("span",{className:"font-medium",children:["₹",c.certificationCost.toLocaleString("en-IN")]})]})]})]})]})]}),qs=({onSave:t,onLoad:i,onExportPDF:s,onReset:c,onViewHistory:m,onCreateInvoice:h,isAuthenticated:r})=>e.jsx(b,{className:"border-primary/20 shadow-lg",children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[r&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{onClick:t,size:"lg",variant:"outline",className:"gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"Save Estimate"]}),e.jsxs(p,{onClick:i,size:"lg",variant:"outline",className:"gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Load Estimate"]})]}),e.jsxs(p,{onClick:s,size:"lg",className:"gap-2 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:[e.jsx(Q,{className:"h-5 w-5"}),"Export Estimate PDF"]})]}),r&&e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center border-t pt-4",children:[e.jsxs(p,{onClick:m,size:"lg",variant:"secondary",className:"gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"View Estimate History"]}),e.jsxs(p,{onClick:h,size:"lg",variant:"secondary",className:"gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Create Invoice"]}),e.jsxs(p,{onClick:c,size:"lg",variant:"destructive",className:"gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Reset Form"]})]})]})})}),Ws=()=>{const[t,i]=a.useState(1);return{currentStep:t,steps:[{id:1,title:"Basic Info",description:"Customer & estimate details",isComplete:!1},{id:2,title:"Specifications",description:"Jewelry details & weights",isComplete:!1},{id:3,title:"Additional Costs",description:"CAD, camming & GST",isComplete:!1},{id:4,title:"Pricing",description:"Profit margin & final price",isComplete:!1},{id:5,title:"Review & Save",description:"Export or generate invoice",isComplete:!1}],goToNextStep:()=>{t<5&&i(u=>u+1)},goToPreviousStep:()=>{t>1&&i(u=>u-1)},goToStep:u=>{i(u)},validateStep:u=>{switch(u){case 1:return{isValid:!0};case 2:return{isValid:!0};case 3:return{isValid:!0};case 4:return{isValid:!0};case 5:return{isValid:!0};default:return{isValid:!1}}},isFirstStep:t===1,isLastStep:t===5}},Qs=({open:t,onOpenChange:i,invoiceData:s,onConfirmDownload:c})=>{var h;if(!s)return null;const m=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(r);return e.jsx(te,{open:t,onOpenChange:i,children:e.jsxs(ae,{className:"max-w-4xl max-h-[90vh] p-0",children:[e.jsxs(re,{className:"px-6 pt-6",children:[e.jsx(ne,{children:"Invoice Preview"}),e.jsx(ie,{children:"Review your invoice before downloading the PDF"})]}),e.jsx(As,{className:"h-[calc(90vh-180px)] px-6",children:e.jsxs("div",{className:"bg-background border rounded-lg p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start border-b pb-4",children:[e.jsxs("div",{children:[((h=s.vendorBranding)==null?void 0:h.logo)&&e.jsx("img",{src:s.vendorBranding.logo,alt:"Logo",className:"h-16 mb-2"}),e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"INVOICE"}),e.jsx("p",{className:"text-lg font-semibold mt-1",children:s.invoiceNumber})]}),s.vendorBranding&&e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("p",{className:"font-semibold",children:s.vendorBranding.name}),s.vendorBranding.address&&e.jsx("p",{className:"text-muted-foreground",children:s.vendorBranding.address}),s.vendorBranding.phone&&e.jsxs("p",{className:"text-muted-foreground",children:["Phone: ",s.vendorBranding.phone]}),s.vendorBranding.email&&e.jsxs("p",{className:"text-muted-foreground",children:["Email: ",s.vendorBranding.email]}),s.vendorGSTIN&&e.jsxs("p",{className:"text-muted-foreground",children:["GSTIN: ",s.vendorGSTIN]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Invoice Details"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:["Date: ",new Date(s.invoiceDate).toLocaleDateString()]}),s.paymentDueDate&&e.jsxs("p",{children:["Due Date: ",new Date(s.paymentDueDate).toLocaleDateString()]}),s.paymentTerms&&e.jsxs("p",{children:["Terms: ",s.paymentTerms]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Bill To"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-semibold",children:s.customerName}),s.customerPhone&&e.jsxs("p",{children:["Phone: ",s.customerPhone]}),s.customerEmail&&e.jsxs("p",{children:["Email: ",s.customerEmail]}),s.customerAddress&&e.jsx("p",{children:s.customerAddress}),s.customerGSTIN&&e.jsxs("p",{children:["GSTIN: ",s.customerGSTIN]})]})]})]}),s.lineItems&&s.lineItems.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Items"}),e.jsx("div",{className:"space-y-4",children:s.lineItems.map((r,u)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-4",children:[r.image_url&&e.jsx("img",{src:r.image_url,alt:r.item_name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:r.item_name}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[r.net_weight&&e.jsxs("p",{children:["Net Weight: ",r.net_weight,"g"]}),r.diamond_weight>0&&e.jsxs("p",{children:["Diamond: ",r.diamond_weight,"ct"]}),e.jsxs("p",{className:"col-span-2 font-semibold",children:["Total: ",m(r.subtotal)]})]})]})]})},u))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.diamondCost>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Diamond Cost:"}),e.jsx("span",{children:m(s.diamondCost)})]}),s.gemstoneCost>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gemstone Cost:"}),e.jsx("span",{children:m(s.gemstoneCost)})]}),s.goldCost>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gold Cost:"}),e.jsx("span",{children:m(s.goldCost)})]}),s.makingCharges>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Making Charges:"}),e.jsx("span",{children:m(s.makingCharges)})]}),s.cadDesignCharges>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"CAD Design Charges:"}),e.jsx("span",{children:m(s.cadDesignCharges)})]}),s.cammingCharges>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Camming Charges:"}),e.jsx("span",{children:m(s.cammingCharges)})]}),s.certificationCost>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Certification Cost:"}),e.jsx("span",{children:m(s.certificationCost)})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-base pt-2 border-t",children:[e.jsx("span",{children:"Total Amount:"}),e.jsx("span",{children:m(s.finalSellingPrice||s.totalCost)})]})]})]}),(s.notes||s.invoiceNotes)&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.invoiceNotes||s.notes})]})]})}),e.jsxs(Ps,{className:"px-6 pb-6",children:[e.jsxs(p,{variant:"outline",onClick:()=>i(!1),children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(p,{onClick:c,children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]})]})})},Ot=()=>{const{toast:t}=os(),i=cs(),[s,c]=a.useState(null),{currentStep:m,steps:h}=Ws(),[r,u]=a.useState(!0),[$,J]=a.useState([]),[T,R]=a.useState(null),[E,f]=a.useState(""),[D,d]=a.useState(""),[ze,U]=a.useState(!1),[$s,He]=a.useState(!1),[Z,Oe]=a.useState("jewelry"),[le,ce]=a.useState("draft"),[I,oe]=a.useState(),[de,me]=a.useState(!1),[qe,xe]=a.useState(""),[Js,Zs]=a.useState(!1),[Y,We]=a.useState(0),[Qe,he]=a.useState(!1),[$e,Je]=a.useState(null),[Ys,Xs]=a.useState(""),[Ks,Ms]=a.useState("INV"),[et,st]=a.useState(new Date),[tt,at]=a.useState("Net 30"),[rt,nt]=a.useState(),[it,lt]=a.useState(""),[ct,ot]=a.useState("detailed"),[P,ue]=a.useState([]),[Ze,Ye]=a.useState(!1),[Xe,dt]=a.useState(null),[_,ge]=a.useState({purityFraction:.76,goldRate24k:0,platinumRate:3200,silverRate:95}),[B,pe]=a.useState(0),[j,k]=a.useState({name:"",phone:"",email:"",address:"",gstin:""}),[je,fe]=a.useState(""),[V,Ne]=a.useState("sgst_cgst"),[z,ve]=a.useState(9),[H,be]=a.useState(9),[O,ye]=a.useState(18),[q,Se]=a.useState(0),[we,Ce]=a.useState("local"),[W,A]=a.useState(83),[G,Ke]=a.useState({goldCost:0,totalCost:0,finalSellingPrice:0,profitAmount:0,sgstAmount:0,cgstAmount:0,igstAmount:0,grandTotal:0,totalInUSD:0});a.useEffect(()=>{(async()=>{const{data:{user:x}}=await N.auth.getUser();if(c(x),x)Ie(),es();else try{const{data:n,error:F}=await N.functions.invoke("check-guest-usage",{body:{calculatorType:"manufacturing"}});if(F){console.error("Error checking guest usage:",F);return}n.allowed?We(n.usageCount):he(!0)}catch(n){console.error("Failed to check usage:",n)}})()},[]);const Me=async()=>{var o;try{const n=await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json();if((o=n.rates)!=null&&o.INR)return n.rates.INR}catch(x){console.error("Failed to fetch live exchange rate:",x)}return 87.5},es=async()=>{const{data:{user:o}}=await N.auth.getUser();if(!o)return;const[x,n]=await Promise.all([N.from("vendor_profiles").select("business_name, logo_url, primary_brand_color, secondary_brand_color, brand_tagline, email, phone, address_line1, address_line2, city, state, pincode, country, gold_rate_24k_per_gram, making_charges_per_gram, usd_exchange_rate").eq("user_id",o.id).maybeSingle(),Me()]);x.error?(console.error("Error fetching vendor profile:",x.error),A(n)):x.data?(Je(x.data),ge(F=>({...F,goldRate24k:x.data.gold_rate_24k_per_gram||0,makingCharges:x.data.making_charges_per_gram||0})),A(n),await N.from("vendor_profiles").update({usd_exchange_rate:n}).eq("user_id",o.id)):A(n)},Ie=async()=>{const{data:{user:o}}=await N.auth.getUser();if(!o)return;const{data:x,error:n}=await N.from("manufacturing_cost_estimates").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});n?console.error("Error fetching estimates:",n):J(x||[])};a.useEffect(()=>{const x=P.reduce((is,ls)=>is+(ls.subtotal||0),0),n=x*(1+B/100),F=n-x;let X=0,K=0,M=0;V==="sgst_cgst"?(X=n*z/100,K=n*H/100):M=n*O/100;const _e=n+X+K+M+q,ns=_e/W;Ke({goldCost:0,totalCost:parseFloat(x.toFixed(2)),finalSellingPrice:parseFloat(n.toFixed(2)),profitAmount:parseFloat(F.toFixed(2)),sgstAmount:parseFloat(X.toFixed(2)),cgstAmount:parseFloat(K.toFixed(2)),igstAmount:parseFloat(M.toFixed(2)),grandTotal:parseFloat(_e.toFixed(2)),totalInUSD:parseFloat(ns.toFixed(2))})},[P,B,V,z,H,O,q,W]);const ss=()=>{ge({purityFraction:.76,goldRate24k:0,platinumRate:3200,silverRate:95}),pe(0),R(null),f(""),d(""),k({name:"",phone:"",email:"",address:"",gstin:""}),fe(""),ce("draft"),oe(void 0),me(!1),xe(""),ue([]),Ne("sgst_cgst"),ve(9),be(9),ye(18),Se(0),Ce("local"),A(83)},ts=()=>{t({title:"Use Invoice Generator",description:"Please use the Invoice Generator page to create and export invoice PDFs"}),i("/invoice-generator")},as=()=>{t({title:"Use Invoice Generator",description:"Please use the Invoice Generator page to create and export invoice PDFs"}),i("/invoice-generator")},rs=async()=>{if(!s){t({title:"Authentication Required",description:"Please sign in to save estimates.",variant:"destructive"});return}if(!E.trim()){t({title:"Missing Information",description:"Please enter an estimate name.",variant:"destructive"});return}const o=P.length>0?{items:P,meta:{customer_gstin:j.gstin,vendor_gstin:je,gst_mode:V,sgst_percentage:z,cgst_percentage:H,igst_percentage:O,shipping_charges:q,shipping_zone:we,exchange_rate:W}}:null,x={user_id:s.id,estimate_name:E,estimate_category:Z,customer_name:j.name||null,customer_phone:j.phone||null,customer_email:j.email||null,customer_address:j.address||null,net_weight:0,purity_fraction:_.purityFraction,gold_rate_24k:_.goldRate24k,making_charges:0,cad_design_charges:0,camming_charges:0,certification_cost:0,diamond_cost:0,gemstone_cost:0,gold_cost:G.goldCost,total_cost:G.totalCost,final_selling_price:G.finalSellingPrice,profit_margin_percentage:B,notes:D,status:le,estimated_completion_date:(I==null?void 0:I.toISOString())||null,is_customer_visible:de,share_token:qe||`EST-${Date.now()}-${Math.random().toString(36).substring(7)}`,line_items:o};let n;T?n=await N.from("manufacturing_cost_estimates").update(x).eq("id",T):(n=await N.from("manufacturing_cost_estimates").insert(x).select().single(),n.data&&(R(n.data.id),xe(n.data.share_token))),n.error?(console.error("Save estimate error:",n.error),t({title:"Error",description:n.error.message||"Failed to save estimate",variant:"destructive"})):(t({title:"Saved",description:T?"Estimate updated successfully":"Estimate saved successfully"}),Ie(),U(!1))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/20 to-background",children:[e.jsx(hs,{}),e.jsx(te,{open:Qe,onOpenChange:he,children:e.jsxs(ae,{className:"sm:max-w-md",children:[e.jsxs(re,{children:[e.jsx(ne,{className:"text-lg",children:"Usage Limit Reached"}),e.jsx(ie,{className:"text-sm",children:"You've reached 5 uses in 24 hours. Sign in for unlimited access."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{onClick:()=>i("/auth"),className:"flex-1",size:"sm",children:"Sign In"}),e.jsx(p,{variant:"outline",onClick:()=>i("/"),className:"flex-1",size:"sm",children:"Go Home"})]})]})}),e.jsxs("div",{className:"py-4 md:py-8 px-3 md:px-4",children:[e.jsx(xs,{}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3 md:space-y-4 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full mb-2 md:mb-4",children:e.jsx(Re,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"})}),e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary via-accent to-primary",children:"Cost Estimator"}),e.jsx("p",{className:"text-muted-foreground text-sm md:text-base lg:text-lg max-w-2xl mx-auto",children:"Professional jewelry estimation & invoicing"}),!s&&Y>0&&Y<5&&e.jsxs("div",{className:"mt-3 md:mt-4 inline-flex items-center gap-2 px-3 md:px-4 py-2 bg-muted/50 rounded-lg border border-border",children:[e.jsx(se,{className:"h-3 w-3 md:h-4 md:w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground",children:["Guest: ",Y,"/5 uses.",e.jsx(p,{variant:"link",className:"ml-1 p-0 h-auto text-xs md:text-sm underline",onClick:()=>i("/auth"),children:"Sign in"})]})]})]}),e.jsx(b,{className:"border-primary/20",children:e.jsx(y,{className:"p-6",children:e.jsx(Bs,{currentStep:m,steps:h})})}),e.jsx(ks,{open:r,onOpenChange:u,children:e.jsxs(b,{className:"border-primary/20",children:[e.jsx(Fs,{className:"w-full",children:e.jsx(S,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),"Understanding the Workflow"]}),e.jsx(C,{children:"Learn the difference between estimates and invoices"})]}),e.jsx(Ss,{className:`h-5 w-5 text-muted-foreground transition-transform ${r?"rotate-180":""}`})]})})}),e.jsx(Ts,{children:e.jsx(y,{children:e.jsx(Vs,{})})})]})}),e.jsx(qs,{onSave:()=>U(!0),onLoad:()=>He(!0),onExportPDF:ts,onReset:ss,onViewHistory:()=>i("/estimate-history"),onCreateInvoice:()=>i("/invoice-generator"),isAuthenticated:!!s}),e.jsx(te,{open:ze,onOpenChange:U,children:e.jsxs(ae,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(re,{children:[e.jsx(ne,{children:"Save Estimate"}),e.jsx(ie,{children:"Save this manufacturing cost estimate with customer details and tracking options"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"estimate-name",children:"Estimate Name *"}),e.jsx(g,{id:"estimate-name",value:E,onChange:o=>f(o.target.value),placeholder:"e.g., Diamond Ring Quote - John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Category *"}),e.jsxs(Ee,{value:Z,onValueChange:o=>Oe(o),children:[e.jsx(Pe,{children:e.jsx(Ae,{})}),e.jsxs(Ge,{children:[e.jsx(v,{value:"jewelry",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"})," Jewelry"]})}),e.jsx(v,{value:"loose_diamond",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"})," Loose Diamond"]})}),e.jsx(v,{value:"gemstone",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"})," Gemstone"]})})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"customer-name",children:"Customer Name"}),e.jsx(g,{id:"customer-name",value:j.name,onChange:o=>k({...j,name:o.target.value}),placeholder:"Full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"customer-phone",children:"Phone Number"}),e.jsx(g,{id:"customer-phone",value:j.phone,onChange:o=>k({...j,phone:o.target.value}),placeholder:"+1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"customer-email",children:"Email"}),e.jsx(g,{id:"customer-email",type:"email",value:j.email,onChange:o=>k({...j,email:o.target.value}),placeholder:"customer@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"customer-address",children:"Address"}),e.jsx(g,{id:"customer-address",value:j.address,onChange:o=>k({...j,address:o.target.value}),placeholder:"Complete address"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"notes",children:"Notes"}),e.jsx(Le,{id:"notes",value:D,onChange:o=>d(o.target.value),placeholder:"Add any additional notes or specifications...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Order Status"}),e.jsxs(Ee,{value:le,onValueChange:ce,children:[e.jsx(Pe,{children:e.jsx(Ae,{})}),e.jsxs(Ge,{children:[e.jsx(v,{value:"draft",children:"Draft"}),e.jsx(v,{value:"quoted",children:"Quoted"}),e.jsx(v,{value:"approved",children:"Approved"}),e.jsx(v,{value:"in_production",children:"In Production"}),e.jsx(v,{value:"completed",children:"Completed"}),e.jsx(v,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Estimated Completion Date"}),e.jsxs(Gs,{children:[e.jsx(Ls,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),I?Us(I,"PPP"):"Select date"]})}),e.jsx(Rs,{className:"w-auto p-0",children:e.jsx(Ds,{mode:"single",selected:I,onSelect:oe,initialFocus:!0})})]})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 border rounded-lg p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Customer Portal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow customer to track order status with a secure link"})]}),e.jsx(ms,{checked:de,onCheckedChange:me})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{onClick:rs,className:"flex-1",children:"Save Estimate"}),e.jsx(p,{onClick:()=>U(!1),variant:"outline",className:"flex-1",children:"Cancel"})]})]})]})}),e.jsx(zs,{vendorProfile:$e,vendorGSTIN:je,onVendorGSTINChange:fe,customerDetails:j,onCustomerDetailsChange:k}),e.jsxs(b,{children:[e.jsxs(S,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),"Invoice Line Items"]}),e.jsx(C,{children:"Add multiple jewelry items with individual pricing details"})]}),e.jsx(y,{children:e.jsx(Es,{items:P,onChange:ue,goldRate24k:_.goldRate24k,platinumRate:_.platinumRate,silverRate:_.silverRate,purityFraction:_.purityFraction,estimateCategory:Z})})]}),e.jsx(Os,{profitMargin:B,onProfitMarginChange:pe,costs:G,formData:{diamondPerCaratPrice:0,diamondWeight:0,gemstonePerCaratPrice:0,gemstoneWeight:0,makingCharges:0,cadDesignCharges:0,cammingCharges:0,certificationCost:0}}),e.jsx(Hs,{gstMode:V,onGstModeChange:Ne,sgstPercentage:z,cgstPercentage:H,igstPercentage:O,onSgstChange:ve,onCgstChange:be,onIgstChange:ye,shippingCharges:q,onShippingChargesChange:Se,shippingZone:we,onShippingZoneChange:Ce,exchangeRate:W,onExchangeRateChange:A,costs:G})]})]}),e.jsx(Qs,{open:Ze,onOpenChange:Ye,invoiceData:Xe,onConfirmDownload:as}),e.jsx(us,{}),e.jsx(ds,{})]})};export{Ot as default};
//# sourceMappingURL=ManufacturingCost-Bsf-T7Kd.js.map
