{"version":3,"file":"AdminSettings-CVqn-6UR.js","sources":["../../src/pages/AdminSettings.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { AdminLayout } from \"@/components/AdminLayout\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { toast } from \"sonner\";\r\nimport { Save, Settings as SettingsIcon, Loader2 } from \"lucide-react\";\r\n\r\nconst AdminSettings = () => {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [settings, setSettings] = useState({\r\n    whatsapp_number: \"\",\r\n    contact_email: \"\",\r\n    contact_phone: \"\",\r\n    company_name: \"\",\r\n    company_address: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const fetchSettings = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"settings\")\r\n        .select(\"*\");\r\n\r\n      if (error) throw error;\r\n\r\n      const settingsMap: Record<string, string> = {};\r\n      data?.forEach((setting) => {\r\n        settingsMap[setting.key] = setting.value as string;\r\n      });\r\n\r\n      setSettings({\r\n        whatsapp_number: settingsMap.whatsapp_number || \"\",\r\n        contact_email: settingsMap.contact_email || \"\",\r\n        contact_phone: settingsMap.contact_phone || \"\",\r\n        company_name: settingsMap.company_name || \"\",\r\n        company_address: settingsMap.company_address || \"\",\r\n      });\r\n    } catch (error: any) {\r\n      console.error(\"Error fetching settings:\", error);\r\n      toast.error(\"Failed to load settings\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n\r\n      for (const [key, value] of Object.entries(settings)) {\r\n        const { error } = await supabase\r\n          .from(\"settings\")\r\n          .upsert({\r\n            key,\r\n            value,\r\n            updated_by: user.id,\r\n            updated_at: new Date().toISOString(),\r\n          }, {\r\n            onConflict: \"key\"\r\n          });\r\n\r\n        if (error) throw error;\r\n      }\r\n\r\n      toast.success(\"Settings saved successfully!\");\r\n    } catch (error: any) {\r\n      console.error(\"Error saving settings:\", error);\r\n      toast.error(\"Failed to save settings\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (key: string, value: string) => {\r\n    setSettings((prev) => ({\r\n      ...prev,\r\n      [key]: value,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <AdminLayout>\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n          <div className=\"text-center space-y-4 animate-fade-in\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-primary/20 blur-3xl rounded-full\" />\r\n              <div className=\"relative bg-gradient-primary rounded-full p-6 shadow-glow mx-auto w-fit\">\r\n                <Loader2 className=\"h-12 w-12 text-primary-foreground animate-spin\" />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-muted-foreground\">Loading settings...</p>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-6 space-y-6 animate-fade-in\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent\">\r\n              Site Settings\r\n            </h1>\r\n            <p className=\"text-muted-foreground mt-1\">\r\n              Configure your website's global settings\r\n            </p>\r\n          </div>\r\n\r\n          <Card className=\"bg-gradient-card border-border/50 shadow-md\">\r\n            <CardHeader>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n                  <SettingsIcon className=\"h-5 w-5 text-primary\" />\r\n                </div>\r\n                <div>\r\n                  <CardTitle>Company Information</CardTitle>\r\n                  <CardDescription>\r\n                    Basic details about your business\r\n                  </CardDescription>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"company_name\">Company Name</Label>\r\n                <Input\r\n                  id=\"company_name\"\r\n                  value={settings.company_name}\r\n                  onChange={(e) => handleChange(\"company_name\", e.target.value)}\r\n                  placeholder=\"Your Company Name\"\r\n                  className=\"mt-1.5\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"company_address\">Company Address</Label>\r\n                <Input\r\n                  id=\"company_address\"\r\n                  value={settings.company_address}\r\n                  onChange={(e) => handleChange(\"company_address\", e.target.value)}\r\n                  placeholder=\"123 Main Street, City, Country\"\r\n                  className=\"mt-1.5\"\r\n                />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card className=\"bg-gradient-card border-border/50 shadow-md\">\r\n            <CardHeader>\r\n              <CardTitle>Contact Information</CardTitle>\r\n              <CardDescription>\r\n                How customers can reach you\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"contact_email\">Contact Email</Label>\r\n                <Input\r\n                  id=\"contact_email\"\r\n                  type=\"email\"\r\n                  value={settings.contact_email}\r\n                  onChange={(e) => handleChange(\"contact_email\", e.target.value)}\r\n                  placeholder=\"contact@example.com\"\r\n                  className=\"mt-1.5\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"contact_phone\">Contact Phone</Label>\r\n                <Input\r\n                  id=\"contact_phone\"\r\n                  type=\"tel\"\r\n                  value={settings.contact_phone}\r\n                  onChange={(e) => handleChange(\"contact_phone\", e.target.value)}\r\n                  placeholder=\"+1 (555) 123-4567\"\r\n                  className=\"mt-1.5\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"whatsapp_number\">WhatsApp Number</Label>\r\n                <Input\r\n                  id=\"whatsapp_number\"\r\n                  type=\"tel\"\r\n                  value={settings.whatsapp_number}\r\n                  onChange={(e) => handleChange(\"whatsapp_number\", e.target.value)}\r\n                  placeholder=\"+1 (555) 123-4567\"\r\n                  className=\"mt-1.5\"\r\n                />\r\n                <p className=\"text-xs text-muted-foreground mt-1.5\">\r\n                  Include country code (e.g., +1 for US)\r\n                </p>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <div className=\"flex justify-end\">\r\n            <Button\r\n              onClick={handleSave}\r\n              disabled={saving}\r\n              className=\"shadow-md hover:shadow-lg transition-all\"\r\n            >\r\n              {saving ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  Save Settings\r\n                </>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </AdminLayout>\r\n  );\r\n};\r\n\r\nexport default AdminSettings;\r\n"],"names":["AdminSettings","useNavigate","loading","setLoading","useState","saving","setSaving","settings","setSettings","useEffect","fetchSettings","data","error","supabase","settingsMap","setting","toast","handleSave","user","key","value","handleChange","prev","jsx","AdminLayout","jsxs","Loader2","Card","CardHeader","SettingsIcon","CardTitle","CardDescription","CardContent","Label","Input","e","Button","Fragment","Save"],"mappings":"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"}