{"version":3,"file":"InvoiceLineItems-CHUGsz1p.js","sources":["../../src/components/InvoiceLineItems.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Plus, Trash2, Upload, X } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { EstimateImage } from \"@/components/EstimateImage\";\r\n\r\nexport type MetalType = 'gold' | 'platinum' | 'silver';\r\n\r\nexport interface LineItem {\r\n  id: string;\r\n  item_name: string;\r\n  description: string;\r\n  image_url: string;\r\n  certificate_image_url?: string;\r\n  metal_type: MetalType;\r\n  metal_rate: number; // Rate per gram for selected metal\r\n  diamond_weight: number;\r\n  diamond_per_carat_price: number;\r\n  diamond_color: string;\r\n  diamond_clarity: string;\r\n  diamond_cut: string;\r\n  diamond_certification: string;\r\n  diamond_shape?: string;\r\n  diamond_fluorescence?: string;\r\n  diamond_measurements?: string;\r\n  gemstone_weight: number;\r\n  gemstone_type: string;\r\n  gemstone_color: string;\r\n  gemstone_clarity: string;\r\n  gemstone_origin?: string;\r\n  gemstone_treatment?: string;\r\n  gemstone_shape?: string;\r\n  gemstone_per_carat_price?: number;\r\n  net_weight: number;\r\n  gross_weight: number;\r\n  purity_fraction: number;\r\n  diamond_cost: number;\r\n  gemstone_cost: number;\r\n  metal_cost: number; // Renamed from gold_cost to support all metals\r\n  gold_cost: number; // Keep for backwards compatibility\r\n  making_charges: number;\r\n  certification_cost: number;\r\n  cad_design_charges: number;\r\n  camming_charges: number;\r\n  subtotal: number;\r\n  weight_mode: 'gross' | 'net';\r\n}\r\n\r\ninterface InvoiceLineItemsProps {\r\n  items: LineItem[];\r\n  onChange: (items: LineItem[]) => void;\r\n  goldRate24k: number;\r\n  platinumRate?: number;\r\n  silverRate?: number;\r\n  purityFraction: number;\r\n  estimateCategory?: 'jewelry' | 'loose_diamond' | 'gemstone';\r\n}\r\n\r\n// Default market rates (can be overridden by props)\r\nconst DEFAULT_PLATINUM_RATE = 3200; // Rs per gram\r\nconst DEFAULT_SILVER_RATE = 95; // Rs per gram\r\n\r\nexport const InvoiceLineItems = ({ \r\n  items, \r\n  onChange, \r\n  goldRate24k, \r\n  platinumRate = DEFAULT_PLATINUM_RATE,\r\n  silverRate = DEFAULT_SILVER_RATE,\r\n  purityFraction, \r\n  estimateCategory = 'jewelry' \r\n}: InvoiceLineItemsProps) => {\r\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n\r\n  const getMetalRate = (metalType: MetalType, purity: number): number => {\r\n    switch (metalType) {\r\n      case 'platinum':\r\n        return platinumRate * purity;\r\n      case 'silver':\r\n        return silverRate * purity;\r\n      case 'gold':\r\n      default:\r\n        return goldRate24k * purity;\r\n    }\r\n  };\r\n\r\n  const getMetalLabel = (metalType: MetalType): string => {\r\n    switch (metalType) {\r\n      case 'platinum': return 'Platinum';\r\n      case 'silver': return 'Silver';\r\n      case 'gold':\r\n      default: return 'Gold';\r\n    }\r\n  };\r\n\r\n  const addNewItem = () => {\r\n    const newItem: LineItem = {\r\n      id: `item-${Date.now()}`,\r\n      item_name: \"\",\r\n      description: \"\",\r\n      image_url: \"\",\r\n      certificate_image_url: \"\",\r\n      metal_type: 'gold',\r\n      metal_rate: goldRate24k,\r\n      diamond_weight: 0,\r\n      diamond_per_carat_price: 0,\r\n      diamond_color: \"\",\r\n      diamond_clarity: \"\",\r\n      diamond_cut: \"\",\r\n      diamond_certification: \"\",\r\n      diamond_shape: \"\",\r\n      diamond_fluorescence: \"\",\r\n      diamond_measurements: \"\",\r\n      gemstone_weight: 0,\r\n      gemstone_type: \"\",\r\n      gemstone_color: \"\",\r\n      gemstone_clarity: \"\",\r\n      gemstone_origin: \"\",\r\n      gemstone_treatment: \"\",\r\n      gemstone_shape: \"\",\r\n      gemstone_per_carat_price: 0,\r\n      net_weight: 0,\r\n      gross_weight: 0,\r\n      purity_fraction: purityFraction,\r\n      diamond_cost: 0,\r\n      gemstone_cost: 0,\r\n      metal_cost: 0,\r\n      gold_cost: 0,\r\n      making_charges: 0,\r\n      certification_cost: 0,\r\n      cad_design_charges: 0,\r\n      camming_charges: 0,\r\n      subtotal: 0,\r\n      weight_mode: 'gross',\r\n    };\r\n    onChange([...items, newItem]);\r\n    setEditingIndex(items.length);\r\n  };\r\n\r\n  const updateItem = (index: number, field: keyof LineItem, value: any) => {\r\n    const updatedItems = [...items];\r\n    updatedItems[index] = { ...updatedItems[index], [field]: value };\r\n    \r\n    const item = updatedItems[index];\r\n    \r\n    // Auto-calculate net weight if in gross weight mode (jewelry only)\r\n    if (item.weight_mode === 'gross' && (field === 'gross_weight' || field === 'diamond_weight' || field === 'gemstone_weight')) {\r\n      const totalStoneWeight = (item.diamond_weight + item.gemstone_weight) / 5;\r\n      item.net_weight = Math.max(0, item.gross_weight - totalStoneWeight);\r\n    }\r\n    \r\n    // Auto-calculate diamond cost from weight × per carat price\r\n    if (field === 'diamond_weight' || field === 'diamond_per_carat_price') {\r\n      item.diamond_cost = item.diamond_weight * item.diamond_per_carat_price;\r\n    }\r\n    \r\n    // Auto-calculate gemstone cost from weight × per carat price (if per carat price is set)\r\n    if ((field === 'gemstone_weight' || field === 'gemstone_per_carat_price') && item.gemstone_per_carat_price) {\r\n      item.gemstone_cost = item.gemstone_weight * item.gemstone_per_carat_price;\r\n    }\r\n    \r\n    // Update metal rate when metal type changes\r\n    if (field === 'metal_type') {\r\n      const metalType = value as MetalType;\r\n      switch (metalType) {\r\n        case 'platinum':\r\n          item.metal_rate = platinumRate;\r\n          break;\r\n        case 'silver':\r\n          item.metal_rate = silverRate;\r\n          break;\r\n        case 'gold':\r\n        default:\r\n          item.metal_rate = goldRate24k;\r\n      }\r\n    }\r\n    \r\n    // Auto-calculate metal cost based on selected metal type\r\n    const effectiveRate = getMetalRate(item.metal_type || 'gold', item.purity_fraction);\r\n    item.metal_cost = item.net_weight * effectiveRate;\r\n    item.gold_cost = item.metal_cost; // Keep backwards compatibility\r\n    \r\n    // Calculate subtotal based on category context\r\n    // For loose diamonds: only diamond cost + certification\r\n    // For gemstones: only gemstone cost + certification  \r\n    // For jewelry: everything\r\n    if (estimateCategory === 'loose_diamond') {\r\n      item.subtotal = item.diamond_cost + item.certification_cost;\r\n    } else if (estimateCategory === 'gemstone') {\r\n      item.subtotal = item.gemstone_cost + item.certification_cost;\r\n    } else {\r\n      // Jewelry - full calculation\r\n      item.subtotal = \r\n        item.metal_cost +\r\n        item.making_charges +\r\n        item.certification_cost +\r\n        item.cad_design_charges +\r\n        item.camming_charges +\r\n        item.diamond_cost +\r\n        item.gemstone_cost;\r\n    }\r\n    \r\n    onChange(updatedItems);\r\n  };\r\n\r\n  const deleteItem = (index: number) => {\r\n    const updatedItems = items.filter((_, i) => i !== index);\r\n    onChange(updatedItems);\r\n    if (editingIndex === index) {\r\n      setEditingIndex(null);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = async (index: number, file: File) => {\r\n    try {\r\n      setUploadingImage(true);\r\n      \r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${Date.now()}-${Math.random().toString(36).substring(7)}.${fileExt}`;\r\n      const filePath = `${fileName}`;\r\n\r\n      const { error: uploadError, data } = await supabase.storage\r\n        .from('manufacturing-estimates')\r\n        .upload(filePath, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n        });\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      // Store the storage path (not public URL)\r\n      // Signed URLs will be generated when displaying\r\n      const imagePath = data.path;\r\n\r\n      updateItem(index, 'image_url', imagePath);\r\n      toast.success(\"Image uploaded successfully\");\r\n    } catch (error: any) {\r\n      console.error('Error uploading image:', error);\r\n      toast.error(\"Failed to upload image\");\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    updateItem(index, 'image_url', '');\r\n  };\r\n\r\n  const handleCertificateUpload = async (index: number, file: File) => {\r\n    try {\r\n      setUploadingImage(true);\r\n      \r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `cert-${Date.now()}-${Math.random().toString(36).substring(7)}.${fileExt}`;\r\n      const filePath = `${fileName}`;\r\n\r\n      const { error: uploadError, data } = await supabase.storage\r\n        .from('manufacturing-estimates')\r\n        .upload(filePath, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n        });\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const imagePath = data.path;\r\n      updateItem(index, 'certificate_image_url', imagePath);\r\n      toast.success(\"Certificate uploaded successfully\");\r\n    } catch (error: any) {\r\n      console.error('Error uploading certificate:', error);\r\n      toast.error(\"Failed to upload certificate\");\r\n    } finally {\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  const removeCertificate = (index: number) => {\r\n    updateItem(index, 'certificate_image_url', '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Invoice Line Items</h3>\r\n        <Button onClick={addNewItem} size=\"sm\">\r\n          <Plus className=\"h-4 w-4 mr-2\" />\r\n          Add Item\r\n        </Button>\r\n      </div>\r\n\r\n      {items.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"p-6 text-center text-muted-foreground\">\r\n            No items added yet. Click \"Add Item\" to start adding jewelry pieces to this invoice.\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {items.map((item, index) => (\r\n            <Card key={item.id} className=\"border-2\">\r\n              <CardHeader className=\"pb-3\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <CardTitle className=\"text-base\">\r\n                    Item {index + 1}: {item.item_name || \"Untitled Item\"}\r\n                  </CardTitle>\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      variant={editingIndex === index ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setEditingIndex(editingIndex === index ? null : index)}\r\n                    >\r\n                      {editingIndex === index ? \"Done\" : \"Edit\"}\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"destructive\"\r\n                      size=\"sm\"\r\n                      onClick={() => deleteItem(index)}\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              \r\n              {editingIndex === index ? (\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"col-span-2\">\r\n                      <Label>Item Name *</Label>\r\n                      <Input\r\n                        value={item.item_name}\r\n                        onChange={(e) => updateItem(index, 'item_name', e.target.value)}\r\n                        placeholder=\"e.g., Diamond Engagement Ring\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div className=\"col-span-2\">\r\n                      <Label>Description</Label>\r\n                      <Textarea\r\n                        value={item.description}\r\n                        onChange={(e) => updateItem(index, 'description', e.target.value)}\r\n                        placeholder=\"Describe the jewelry piece...\"\r\n                        rows={3}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <Label>Product Image</Label>\r\n                      <div className=\"mt-2\">\r\n                        {item.image_url ? (\r\n                          <div className=\"relative inline-block\">\r\n                            <img\r\n                              src={item.image_url}\r\n                              alt={item.item_name}\r\n                              className=\"h-32 w-32 object-cover rounded border\"\r\n                            />\r\n                            <Button\r\n                              variant=\"destructive\"\r\n                              size=\"sm\"\r\n                              className=\"absolute -top-2 -right-2\"\r\n                              onClick={() => removeImage(index)}\r\n                            >\r\n                              <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Input\r\n                              type=\"file\"\r\n                              accept=\"image/*\"\r\n                              onChange={(e) => {\r\n                                const file = e.target.files?.[0];\r\n                                if (file) handleImageUpload(index, file);\r\n                              }}\r\n                              disabled={uploadingImage}\r\n                            />\r\n                            {uploadingImage && <span className=\"text-sm text-muted-foreground\">Uploading...</span>}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Metal Type & Weight Section - Only for Jewelry */}\r\n                    {estimateCategory === 'jewelry' && (\r\n                      <div className=\"col-span-2 space-y-4 p-4 border rounded-lg bg-card\">\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-base mb-1\">Metal Type & Weight</h4>\r\n                          <p className=\"text-sm text-muted-foreground\">Select metal and enter weight details</p>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                          <div>\r\n                            <Label className=\"mb-2 block\">Metal Type:</Label>\r\n                            <Select\r\n                              value={item.metal_type || 'gold'}\r\n                              onValueChange={(value: MetalType) => updateItem(index, 'metal_type', value)}\r\n                            >\r\n                              <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select metal\" />\r\n                              </SelectTrigger>\r\n                              <SelectContent>\r\n                                <SelectItem value=\"gold\">Gold (24K Rate: ₹{goldRate24k.toLocaleString()}/g)</SelectItem>\r\n                                <SelectItem value=\"platinum\">Platinum (Rate: ₹{platinumRate.toLocaleString()}/g)</SelectItem>\r\n                                <SelectItem value=\"silver\">Silver (Rate: ₹{silverRate.toLocaleString()}/g)</SelectItem>\r\n                              </SelectContent>\r\n                            </Select>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <Label className=\"mb-2 block\">Weight Entry Mode:</Label>\r\n                            <Select\r\n                              value={item.weight_mode}\r\n                              onValueChange={(value: 'gross' | 'net') => updateItem(index, 'weight_mode', value)}\r\n                            >\r\n                              <SelectTrigger>\r\n                                <SelectValue />\r\n                              </SelectTrigger>\r\n                              <SelectContent>\r\n                                <SelectItem value=\"gross\">Gross Weight Mode</SelectItem>\r\n                                <SelectItem value=\"net\">Net Weight Mode</SelectItem>\r\n                              </SelectContent>\r\n                            </Select>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {item.weight_mode === 'gross' ? (\r\n                          <>\r\n                            <div>\r\n                              <Label>Gross Weight (grams)</Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={item.gross_weight}\r\n                                onChange={(e) => updateItem(index, 'gross_weight', parseFloat(e.target.value) || 0)}\r\n                                className=\"mt-1.5\"\r\n                              />\r\n                            </div>\r\n\r\n                            <div>\r\n                              <Label>Net Weight (grams) <span className=\"text-muted-foreground text-xs\">(Auto-calculated)</span></Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={item.net_weight}\r\n                                disabled\r\n                                className=\"mt-1.5 bg-muted\"\r\n                              />\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <div>\r\n                              <Label>Gross Weight (grams)</Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={item.gross_weight}\r\n                                onChange={(e) => updateItem(index, 'gross_weight', parseFloat(e.target.value) || 0)}\r\n                                className=\"mt-1.5\"\r\n                              />\r\n                            </div>\r\n\r\n                            <div>\r\n                              <Label>Net Weight (grams)</Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={item.net_weight}\r\n                                onChange={(e) => updateItem(index, 'net_weight', parseFloat(e.target.value) || 0)}\r\n                                className=\"mt-1.5\"\r\n                              />\r\n                            </div>\r\n                          </>\r\n                        )}\r\n\r\n                        <div>\r\n                          <Label>Purity Fraction (e.g., 0.76 for 18K)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            min=\"0\"\r\n                            max=\"1\"\r\n                            value={item.purity_fraction}\r\n                            onChange={(e) => updateItem(index, 'purity_fraction', parseFloat(e.target.value) || 0)}\r\n                            className=\"mt-1.5\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Diamond Section - Show for jewelry and loose_diamond only */}\r\n                    {(estimateCategory === 'jewelry' || estimateCategory === 'loose_diamond') && (\r\n                      <>\r\n                        <div className=\"col-span-2 border-t my-2 pt-4\">\r\n                          <h5 className=\"font-medium text-sm text-muted-foreground mb-3\">Diamond Details</h5>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Weight (ct)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.diamond_weight}\r\n                            onChange={(e) => updateItem(index, 'diamond_weight', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Per Carat Price (₹/ct)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.diamond_per_carat_price}\r\n                            onChange={(e) => updateItem(index, 'diamond_per_carat_price', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Cost (₹) <span className=\"text-muted-foreground text-xs\">(Auto-calculated)</span></Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.diamond_cost}\r\n                            disabled\r\n                            className=\"bg-muted\"\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {/* Diamond 4Cs and Details - Show for jewelry and loose_diamond only */}\r\n                    {(estimateCategory === 'jewelry' || estimateCategory === 'loose_diamond') && (\r\n                      <>\r\n                        <div>\r\n                          <Label>Diamond Color</Label>\r\n                          <Input\r\n                            value={item.diamond_color}\r\n                            onChange={(e) => updateItem(index, 'diamond_color', e.target.value)}\r\n                            placeholder=\"e.g., D, E, F\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Clarity</Label>\r\n                          <Input\r\n                            value={item.diamond_clarity}\r\n                            onChange={(e) => updateItem(index, 'diamond_clarity', e.target.value)}\r\n                            placeholder=\"e.g., VVS1, VS1, SI1\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Cut</Label>\r\n                          <Input\r\n                            value={item.diamond_cut}\r\n                            onChange={(e) => updateItem(index, 'diamond_cut', e.target.value)}\r\n                            placeholder=\"e.g., Excellent, Very Good\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Certification</Label>\r\n                          <Input\r\n                            value={item.diamond_certification}\r\n                            onChange={(e) => updateItem(index, 'diamond_certification', e.target.value)}\r\n                            placeholder=\"e.g., GIA, IGI\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Shape</Label>\r\n                          <Input\r\n                            value={item.diamond_shape || ''}\r\n                            onChange={(e) => updateItem(index, 'diamond_shape', e.target.value)}\r\n                            placeholder=\"e.g., Round, Princess, Oval\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Diamond Fluorescence</Label>\r\n                          <Input\r\n                            value={item.diamond_fluorescence || ''}\r\n                            onChange={(e) => updateItem(index, 'diamond_fluorescence', e.target.value)}\r\n                            placeholder=\"e.g., None, Faint, Medium\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"col-span-2\">\r\n                          <Label>Diamond Measurements</Label>\r\n                          <Input\r\n                            value={item.diamond_measurements || ''}\r\n                            onChange={(e) => updateItem(index, 'diamond_measurements', e.target.value)}\r\n                            placeholder=\"e.g., 6.5 x 6.5 x 4.0 mm\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"col-span-2\">\r\n                          <Label>Certificate Image</Label>\r\n                          <div className=\"mt-2\">\r\n                            {item.certificate_image_url ? (\r\n                              <div className=\"relative inline-block\">\r\n                                <EstimateImage\r\n                                  src={item.certificate_image_url}\r\n                                  alt=\"Certificate\"\r\n                                  className=\"h-32 w-auto object-contain rounded border\"\r\n                                />\r\n                                <Button\r\n                                  variant=\"destructive\"\r\n                                  size=\"sm\"\r\n                                  className=\"absolute -top-2 -right-2\"\r\n                                  onClick={() => removeCertificate(index)}\r\n                                >\r\n                                  <X className=\"h-3 w-3\" />\r\n                                </Button>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <Input\r\n                                  type=\"file\"\r\n                                  accept=\"image/*,.pdf\"\r\n                                  onChange={(e) => {\r\n                                    const file = e.target.files?.[0];\r\n                                    if (file) handleCertificateUpload(index, file);\r\n                                  }}\r\n                                  disabled={uploadingImage}\r\n                                />\r\n                                {uploadingImage && <span className=\"text-sm text-muted-foreground\">Uploading...</span>}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {/* Gemstone Section - Show for jewelry and gemstone only */}\r\n                    {(estimateCategory === 'jewelry' || estimateCategory === 'gemstone') && (\r\n                      <>\r\n                        <div className=\"col-span-2 border-t my-2 pt-4\">\r\n                          <h5 className=\"font-medium text-sm text-muted-foreground mb-3\">Gemstone Details</h5>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Type</Label>\r\n                          <Input\r\n                            value={item.gemstone_type}\r\n                            onChange={(e) => updateItem(index, 'gemstone_type', e.target.value)}\r\n                            placeholder=\"e.g., Ruby, Sapphire, Emerald\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Weight (ct)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.gemstone_weight}\r\n                            onChange={(e) => updateItem(index, 'gemstone_weight', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Per Carat Price (₹/ct)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.gemstone_per_carat_price || 0}\r\n                            onChange={(e) => updateItem(index, 'gemstone_per_carat_price', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Cost (₹) <span className=\"text-muted-foreground text-xs\">(Auto/Manual)</span></Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.gemstone_cost}\r\n                            onChange={(e) => updateItem(index, 'gemstone_cost', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Color</Label>\r\n                          <Input\r\n                            value={item.gemstone_color}\r\n                            onChange={(e) => updateItem(index, 'gemstone_color', e.target.value)}\r\n                            placeholder=\"e.g., Pigeon Blood Red\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Clarity</Label>\r\n                          <Input\r\n                            value={item.gemstone_clarity}\r\n                            onChange={(e) => updateItem(index, 'gemstone_clarity', e.target.value)}\r\n                            placeholder=\"e.g., Eye Clean, VVS\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Origin</Label>\r\n                          <Input\r\n                            value={item.gemstone_origin || ''}\r\n                            onChange={(e) => updateItem(index, 'gemstone_origin', e.target.value)}\r\n                            placeholder=\"e.g., Burma, Kashmir, Colombia\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Treatment</Label>\r\n                          <Input\r\n                            value={item.gemstone_treatment || ''}\r\n                            onChange={(e) => updateItem(index, 'gemstone_treatment', e.target.value)}\r\n                            placeholder=\"e.g., None, Heated, Untreated\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Gemstone Shape</Label>\r\n                          <Input\r\n                            value={item.gemstone_shape || ''}\r\n                            onChange={(e) => updateItem(index, 'gemstone_shape', e.target.value)}\r\n                            placeholder=\"e.g., Oval, Cushion, Cabochon\"\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Certificate for Gemstones */}\r\n                        <div className=\"col-span-2\">\r\n                          <Label>Certificate Image</Label>\r\n                          <div className=\"mt-2\">\r\n                            {item.certificate_image_url ? (\r\n                              <div className=\"relative inline-block\">\r\n                                <EstimateImage\r\n                                  src={item.certificate_image_url}\r\n                                  alt=\"Certificate\"\r\n                                  className=\"h-32 w-auto object-contain rounded border\"\r\n                                />\r\n                                <Button\r\n                                  variant=\"destructive\"\r\n                                  size=\"sm\"\r\n                                  className=\"absolute -top-2 -right-2\"\r\n                                  onClick={() => removeCertificate(index)}\r\n                                >\r\n                                  <X className=\"h-3 w-3\" />\r\n                                </Button>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <Input\r\n                                  type=\"file\"\r\n                                  accept=\"image/*,.pdf\"\r\n                                  onChange={(e) => {\r\n                                    const file = e.target.files?.[0];\r\n                                    if (file) handleCertificateUpload(index, file);\r\n                                  }}\r\n                                  disabled={uploadingImage}\r\n                                />\r\n                                {uploadingImage && <span className=\"text-sm text-muted-foreground\">Uploading...</span>}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {/* Additional Charges Section - Only for Jewelry */}\r\n                    {estimateCategory === 'jewelry' && (\r\n                      <>\r\n                        <div className=\"col-span-2 border-t my-2 pt-4\">\r\n                          <h5 className=\"font-medium text-sm text-muted-foreground mb-3\">Additional Charges</h5>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Making Charges (₹)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.making_charges}\r\n                            onChange={(e) => updateItem(index, 'making_charges', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>CAD Design Charges (₹)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.cad_design_charges}\r\n                            onChange={(e) => updateItem(index, 'cad_design_charges', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label>Camming Charges (₹)</Label>\r\n                          <Input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.camming_charges}\r\n                            onChange={(e) => updateItem(index, 'camming_charges', parseFloat(e.target.value) || 0)}\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {/* Certification Cost - Show for all categories */}\r\n                    <div>\r\n                      <Label>Certification Cost (₹)</Label>\r\n                      <Input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={item.certification_cost}\r\n                        onChange={(e) => updateItem(index, 'certification_cost', parseFloat(e.target.value) || 0)}\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Totals Section */}\r\n                    <div className=\"col-span-2 pt-4 border-t\">\r\n                      {/* Metal Cost - Only for Jewelry */}\r\n                      {estimateCategory === 'jewelry' && (\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <span className=\"font-semibold\">{getMetalLabel(item.metal_type || 'gold')} Cost (Auto-calculated):</span>\r\n                          <span className=\"text-lg\">₹{(item.metal_cost || item.gold_cost || 0).toFixed(2)}</span>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"flex justify-between items-center mt-2\">\r\n                        <span className=\"font-bold text-lg\">Item Subtotal:</span>\r\n                        <span className=\"text-xl font-bold text-primary\">₹{item.subtotal.toFixed(2)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              ) : (\r\n                <CardContent>\r\n                  <div className=\"flex gap-4\">\r\n                    {item.image_url && (\r\n                      <EstimateImage\r\n                        src={item.image_url}\r\n                        alt={item.item_name}\r\n                        className=\"h-20 w-20 object-cover rounded border flex-shrink-0\"\r\n                      />\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      {item.description && (\r\n                        <p className=\"text-sm text-muted-foreground mb-2 truncate\">{item.description}</p>\r\n                      )}\r\n                      <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 text-sm\">\r\n                        {/* Loose Diamond Summary */}\r\n                        {estimateCategory === 'loose_diamond' && item.diamond_weight > 0 && (\r\n                          <>\r\n                            <div><span className=\"text-muted-foreground\">Carat:</span> {item.diamond_weight}ct</div>\r\n                            <div><span className=\"text-muted-foreground\">Color:</span> {item.diamond_color || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Clarity:</span> {item.diamond_clarity || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Cut:</span> {item.diamond_cut || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Shape:</span> {item.diamond_shape || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Cert:</span> {item.diamond_certification || '-'}</div>\r\n                          </>\r\n                        )}\r\n                        \r\n                        {/* Gemstone Summary */}\r\n                        {estimateCategory === 'gemstone' && item.gemstone_weight > 0 && (\r\n                          <>\r\n                            <div><span className=\"text-muted-foreground\">Type:</span> {item.gemstone_type || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Carat:</span> {item.gemstone_weight}ct</div>\r\n                            <div><span className=\"text-muted-foreground\">Color:</span> {item.gemstone_color || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Origin:</span> {item.gemstone_origin || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Treatment:</span> {item.gemstone_treatment || '-'}</div>\r\n                            <div><span className=\"text-muted-foreground\">Shape:</span> {item.gemstone_shape || '-'}</div>\r\n                          </>\r\n                        )}\r\n                        \r\n                        {/* Jewelry Summary */}\r\n                        {estimateCategory === 'jewelry' && (\r\n                          <>\r\n                            {item.net_weight > 0 && (\r\n                              <div><span className=\"text-muted-foreground\">{getMetalLabel(item.metal_type || 'gold')}:</span> {item.net_weight}g ({(item.purity_fraction * 100).toFixed(0)}%)</div>\r\n                            )}\r\n                            {item.diamond_weight > 0 && (\r\n                              <div><span className=\"text-muted-foreground\">Diamond:</span> {item.diamond_weight}ct {item.diamond_color}/{item.diamond_clarity}</div>\r\n                            )}\r\n                            {item.gemstone_weight > 0 && (\r\n                              <div><span className=\"text-muted-foreground\">Gemstone:</span> {item.gemstone_weight}ct {item.gemstone_type}</div>\r\n                            )}\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"mt-2 pt-2 border-t flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">Subtotal:</span>\r\n                        <span className=\"font-bold text-primary\">₹{item.subtotal.toLocaleString('en-IN', { minimumFractionDigits: 2 })}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              )}\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {items.length > 0 && (\r\n        <Card className=\"bg-muted/50\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-lg font-bold\">Total (All Items):</span>\r\n              <span className=\"text-2xl font-bold text-primary\">\r\n                ₹{items.reduce((sum, item) => sum + item.subtotal, 0).toFixed(2)}\r\n              </span>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":["DEFAULT_PLATINUM_RATE","DEFAULT_SILVER_RATE","InvoiceLineItems","items","onChange","goldRate24k","platinumRate","silverRate","purityFraction","estimateCategory","editingIndex","setEditingIndex","useState","uploadingImage","setUploadingImage","getMetalRate","metalType","purity","getMetalLabel","addNewItem","newItem","updateItem","index","field","value","updatedItems","item","totalStoneWeight","effectiveRate","deleteItem","_","handleImageUpload","file","fileExt","filePath","uploadError","data","supabase","imagePath","toast","error","removeImage","handleCertificateUpload","removeCertificate","jsxs","jsx","Button","Plus","Card","CardContent","CardHeader","CardTitle","Trash2","Label","Input","e","Textarea","X","_a","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Fragment","EstimateImage","sum"],"mappings":"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"}