{"version":3,"file":"VendorManagement-BwyxvPhH.js","sources":["../../src/pages/VendorManagement.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { ApprovalGuard } from \"@/components/ApprovalGuard\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { toast } from \"sonner\";\r\nimport { ArrowLeft, Trash2, Settings } from \"lucide-react\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n\r\ninterface VendorPermissions {\r\n  can_view_catalog: boolean;\r\n  can_add_products: boolean;\r\n  can_import_data: boolean;\r\n  can_share_catalog: boolean;\r\n  can_manage_team: boolean;\r\n  can_view_interests: boolean;\r\n  can_delete_products: boolean;\r\n  can_edit_products: boolean;\r\n  can_edit_profile: boolean;\r\n  can_add_vendor_details: boolean;\r\n  can_view_custom_orders: boolean;\r\n  can_manage_custom_orders: boolean;\r\n  can_view_share_links: boolean;\r\n  can_manage_share_links: boolean;\r\n  can_view_sessions: boolean;\r\n  can_manage_sessions: boolean;\r\n  max_active_sessions: number;\r\n  subscription_plan?: 'starter' | 'professional' | 'enterprise' | 'essentials';\r\n  max_products?: number;\r\n  max_share_links?: number;\r\n  max_team_members?: number;\r\n  max_product_images?: number;\r\n}\r\n\r\ninterface Vendor {\r\n  id: string;\r\n  email: string;\r\n  business_name?: string;\r\n  is_enabled: boolean;\r\n  status: string;\r\n  created_at: string;\r\n  product_count: number;\r\n  deleted_product_count: number;\r\n  permissions?: VendorPermissions;\r\n}\r\n\r\nexport default function VendorManagement() {\r\n  const navigate = useNavigate();\r\n  const { isAdmin, loading: roleLoading } = useUserRole();\r\n  const [vendors, setVendors] = useState<Vendor[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [deletedProducts, setDeletedProducts] = useState<any[]>([]);\r\n  const [selectedVendor, setSelectedVendor] = useState<Vendor | null>(null);\r\n  const [showPermissionsDialog, setShowPermissionsDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!roleLoading && !isAdmin) {\r\n      toast.error(\"Access denied. Admin only.\");\r\n      navigate(\"/catalog\");\r\n    }\r\n  }, [isAdmin, roleLoading, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (isAdmin) {\r\n      fetchVendors();\r\n      fetchDeletedProducts();\r\n    }\r\n  }, [isAdmin]);\r\n\r\n  const fetchVendors = async () => {\r\n    try {\r\n      // Get all users with approval status\r\n      const { data: approvals, error: approvalsError } = await supabase\r\n        .from(\"user_approval_status\")\r\n        .select(\"*\")\r\n        .eq(\"status\", \"approved\");\r\n\r\n      if (approvalsError) throw approvalsError;\r\n\r\n      // Get admin users to exclude from vendor list\r\n      const { data: adminRoles, error: adminError } = await supabase\r\n        .from(\"user_roles\")\r\n        .select(\"user_id\")\r\n        .eq(\"role\", \"admin\");\r\n\r\n      if (adminError) throw adminError;\r\n\r\n      const adminUserIds = new Set(adminRoles?.map(r => r.user_id) || []);\r\n      \r\n      // Filter out admin users from vendors\r\n      const vendorApprovals = approvals?.filter(a => !adminUserIds.has(a.user_id)) || [];\r\n\r\n      // Get vendor profiles which contain email\r\n      const { data: profiles, error: profilesError } = await supabase\r\n        .from(\"vendor_profiles\")\r\n        .select(\"*\");\r\n\r\n      if (profilesError) throw profilesError;\r\n\r\n      // Get product counts for each vendor\r\n      const { data: productCounts, error: productError } = await supabase\r\n        .from(\"products\")\r\n        .select(\"user_id, deleted_at\");\r\n\r\n      if (productError) throw productError;\r\n\r\n      // Get permissions for each vendor\r\n      const { data: permissionsData, error: permissionsError } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .select(\"*\");\r\n\r\n      if (permissionsError) throw permissionsError;\r\n\r\n      // Combine data\r\n      const vendorsData: Vendor[] = vendorApprovals.map(approval => {\r\n        const profile = profiles?.find(p => p.user_id === approval.user_id);\r\n        const userProducts = productCounts?.filter(p => p.user_id === approval.user_id) || [];\r\n        const vendorPermissions = permissionsData?.find(p => p.user_id === approval.user_id);\r\n        \r\n        return {\r\n          id: approval.user_id,\r\n          email: profile?.email || approval.email || \"N/A\",\r\n          business_name: profile?.business_name,\r\n          is_enabled: approval.is_enabled ?? true,\r\n          status: approval.status,\r\n          created_at: approval.requested_at,\r\n          product_count: userProducts.filter(p => !p.deleted_at).length,\r\n          deleted_product_count: userProducts.filter(p => p.deleted_at).length,\r\n          permissions: vendorPermissions ? {\r\n            can_view_catalog: vendorPermissions.can_view_catalog,\r\n            can_add_products: vendorPermissions.can_add_products,\r\n            can_import_data: vendorPermissions.can_import_data,\r\n            can_share_catalog: vendorPermissions.can_share_catalog,\r\n            can_manage_team: vendorPermissions.can_manage_team,\r\n            can_view_interests: vendorPermissions.can_view_interests,\r\n            can_delete_products: vendorPermissions.can_delete_products,\r\n            can_edit_products: vendorPermissions.can_edit_products,\r\n            can_edit_profile: vendorPermissions.can_edit_profile,\r\n            can_add_vendor_details: vendorPermissions.can_add_vendor_details,\r\n            can_view_custom_orders: vendorPermissions.can_view_custom_orders,\r\n            can_manage_custom_orders: vendorPermissions.can_manage_custom_orders,\r\n            can_view_share_links: vendorPermissions.can_view_share_links,\r\n            can_manage_share_links: vendorPermissions.can_manage_share_links,\r\n            can_view_sessions: vendorPermissions.can_view_sessions ?? true,\r\n            can_manage_sessions: vendorPermissions.can_manage_sessions ?? true,\r\n            max_active_sessions: vendorPermissions.max_active_sessions ?? 3,\r\n            subscription_plan: vendorPermissions.subscription_plan,\r\n            max_products: vendorPermissions.max_products,\r\n            max_share_links: vendorPermissions.max_share_links,\r\n            max_team_members: vendorPermissions.max_team_members,\r\n            max_product_images: vendorPermissions.max_product_images,\r\n          } : undefined,\r\n        };\r\n      });\r\n\r\n      setVendors(vendorsData);\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to fetch vendors\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDeletedProducts = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\"*\")\r\n        .not(\"deleted_at\", \"is\", null)\r\n        .order(\"deleted_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setDeletedProducts(data || []);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to fetch deleted products:\", error);\r\n    }\r\n  };\r\n\r\n  const toggleVendorStatus = async (vendorId: string, currentStatus: boolean) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"user_approval_status\")\r\n        .update({ is_enabled: !currentStatus })\r\n        .eq(\"user_id\", vendorId);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(`Vendor ${!currentStatus ? \"enabled\" : \"disabled\"} successfully`);\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to update vendor status\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const openPermissionsDialog = async (vendor: Vendor) => {\r\n    setSelectedVendor(vendor);\r\n    \r\n    // If vendor doesn't have permissions yet, create default ones\r\n    if (!vendor.permissions) {\r\n      try {\r\n        const { error } = await supabase\r\n          .from(\"vendor_permissions\")\r\n          .insert({\r\n            user_id: vendor.id,\r\n            can_view_catalog: true,\r\n            can_add_products: true,\r\n            can_import_data: true,\r\n            can_share_catalog: true,\r\n            can_manage_team: false,\r\n            can_view_interests: true,\r\n            can_delete_products: true,\r\n            can_edit_products: true,\r\n            can_edit_profile: true,\r\n            can_add_vendor_details: true,\r\n            can_view_custom_orders: true,\r\n            can_manage_custom_orders: false,\r\n            can_view_share_links: true,\r\n            can_manage_share_links: true,\r\n          });\r\n\r\n        if (error) throw error;\r\n        \r\n        // Refresh vendors to get the new permissions\r\n        await fetchVendors();\r\n      } catch (error: any) {\r\n        console.error(\"Failed to create default permissions:\", error);\r\n        toast.error(\"Failed to initialize permissions\");\r\n        return;\r\n      }\r\n    }\r\n    \r\n    setShowPermissionsDialog(true);\r\n  };\r\n\r\n  const handleHardDelete = async (productIds: string[]) => {\r\n    try {\r\n      const { error } = await supabase.rpc(\"hard_delete_products\", {\r\n        product_ids: productIds,\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(`${productIds.length} product(s) permanently deleted`);\r\n      fetchDeletedProducts();\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to delete products permanently\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const updateVendorPermissions = async (vendorId: string, permissions: Partial<VendorPermissions>) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .update(permissions)\r\n        .eq(\"user_id\", vendorId);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(\"Permissions updated successfully\");\r\n      fetchVendors();\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to update permissions\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handlePermissionToggle = (permission: keyof VendorPermissions, value: boolean) => {\r\n    if (!selectedVendor) return;\r\n    \r\n    // Update local state immediately\r\n    setSelectedVendor({\r\n      ...selectedVendor,\r\n      permissions: {\r\n        ...selectedVendor.permissions!,\r\n        [permission]: value\r\n      }\r\n    });\r\n\r\n    // Update database\r\n    updateVendorPermissions(selectedVendor.id, { [permission]: value });\r\n  };\r\n\r\n  if (roleLoading || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-pulse\">Loading vendor management...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAdmin) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ApprovalGuard>\r\n      <div className=\"min-h-screen bg-background\">\r\n        <header className=\"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-10\">\r\n          <div className=\"container mx-auto px-6 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold\">Vendor Management</h1>\r\n                <p className=\"text-muted-foreground mt-1\">Manage vendors and deleted products</p>\r\n              </div>\r\n              <Button variant=\"outline\" onClick={() => navigate(\"/admin\")}>\r\n                <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n                Back to Dashboard\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"container mx-auto px-6 py-8 space-y-8\">\r\n          {/* Vendors List */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Vendors</CardTitle>\r\n              <CardDescription>Manage vendor accounts and their status</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Business Name</TableHead>\r\n                    <TableHead>Email</TableHead>\r\n                    <TableHead>Products</TableHead>\r\n                    <TableHead>Deleted</TableHead>\r\n                    <TableHead>Status</TableHead>\r\n                    <TableHead>Enabled</TableHead>\r\n                    <TableHead>Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {vendors.map((vendor) => (\r\n                    <TableRow key={vendor.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        {vendor.business_name || \"No business name\"}\r\n                      </TableCell>\r\n                      <TableCell>{vendor.email}</TableCell>\r\n                      <TableCell>{vendor.product_count}</TableCell>\r\n                      <TableCell>{vendor.deleted_product_count}</TableCell>\r\n                      <TableCell>\r\n                        <Badge variant={vendor.status === \"approved\" ? \"default\" : \"secondary\"}>\r\n                          {vendor.status}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Switch\r\n                          checked={vendor.is_enabled}\r\n                          onCheckedChange={() => toggleVendorStatus(vendor.id, vendor.is_enabled)}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Button \r\n                          variant=\"outline\" \r\n                          size=\"sm\"\r\n                          onClick={() => openPermissionsDialog(vendor)}\r\n                        >\r\n                          <Settings className=\"h-4 w-4 mr-2\" />\r\n                          Permissions\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                  {vendors.length === 0 && (\r\n                    <TableRow>\r\n                      <TableCell colSpan={7} className=\"text-center text-muted-foreground\">\r\n                        No vendors found\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Permissions Dialog */}\r\n          <Dialog open={showPermissionsDialog} onOpenChange={setShowPermissionsDialog}>\r\n            <DialogContent className=\"max-w-md max-h-[80vh] overflow-y-auto\">\r\n              <DialogHeader>\r\n                <DialogTitle>Vendor Permissions</DialogTitle>\r\n                <DialogDescription>\r\n                  Configure what {selectedVendor?.business_name || selectedVendor?.email} can do\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              {selectedVendor && (\r\n                <div className=\"space-y-4 py-4\">\r\n                  {/* Subscription Plan Selector */}\r\n                  <div className=\"space-y-2 pb-4 border-b\">\r\n                    <Label htmlFor=\"subscription_plan\">Subscription Plan</Label>\r\n                    <Select\r\n                      value={selectedVendor.permissions?.subscription_plan || 'starter'}\r\n                      onValueChange={async (value: 'starter' | 'professional' | 'enterprise') => {\r\n                        try {\r\n                          const { error } = await supabase\r\n                            .from(\"vendor_permissions\")\r\n                            .update({ subscription_plan: value })\r\n                            .eq(\"user_id\", selectedVendor.id);\r\n\r\n                          if (error) throw error;\r\n\r\n                          toast.success(`Plan updated to ${value}. Permissions will refresh automatically.`);\r\n                          \r\n                          // Wait a bit for the trigger to fire, then refresh\r\n                          setTimeout(() => {\r\n                            fetchVendors();\r\n                            setShowPermissionsDialog(false);\r\n                          }, 1000);\r\n                        } catch (error: any) {\r\n                          toast.error(\"Failed to update subscription plan\");\r\n                          console.error(error);\r\n                        }\r\n                      }}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select a plan\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"starter\">\r\n                          Starter - 100 products, 1 share link, limited features\r\n                        </SelectItem>\r\n                        <SelectItem value=\"professional\">\r\n                          Professional - 1,000 products, 10 share links, all features\r\n                        </SelectItem>\r\n                        <SelectItem value=\"enterprise\">\r\n                          Enterprise - Unlimited everything\r\n                        </SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    {selectedVendor.permissions && (\r\n                      <div className=\"text-xs text-muted-foreground space-y-1 mt-2\">\r\n                        <p>• Products: {selectedVendor.permissions.max_products === 999999 ? 'Unlimited' : selectedVendor.permissions.max_products}</p>\r\n                        <p>• Share Links: {selectedVendor.permissions.max_share_links === 999999 ? 'Unlimited' : selectedVendor.permissions.max_share_links}</p>\r\n                        <p>• Team Members: {selectedVendor.permissions.max_team_members === 999999 ? 'Unlimited' : selectedVendor.permissions.max_team_members}</p>\r\n                        <p>• Product Images: {selectedVendor.permissions.max_product_images === 999999 ? 'Unlimited' : selectedVendor.permissions.max_product_images}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_view_catalog\">View Catalog</Label>\r\n                    <Switch\r\n                      id=\"can_view_catalog\"\r\n                      checked={selectedVendor.permissions?.can_view_catalog ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_view_catalog', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_add_vendor_details\">Add Vendor Details</Label>\r\n                    <Switch\r\n                      id=\"can_add_vendor_details\"\r\n                      checked={selectedVendor.permissions?.can_add_vendor_details ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_add_vendor_details', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_add_products\">Add Products</Label>\r\n                    <Switch\r\n                      id=\"can_add_products\"\r\n                      checked={selectedVendor.permissions?.can_add_products ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_add_products', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_import_data\">Import Data</Label>\r\n                    <Switch\r\n                      id=\"can_import_data\"\r\n                      checked={selectedVendor.permissions?.can_import_data ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_import_data', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_view_share_links\">View Share Links</Label>\r\n                    <Switch\r\n                      id=\"can_view_share_links\"\r\n                      checked={selectedVendor.permissions?.can_view_share_links ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_view_share_links', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_manage_share_links\">Manage Share Links</Label>\r\n                    <Switch\r\n                      id=\"can_manage_share_links\"\r\n                      checked={selectedVendor.permissions?.can_manage_share_links ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_manage_share_links', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_share_catalog\">Share Catalog</Label>\r\n                    <Switch\r\n                      id=\"can_share_catalog\"\r\n                      checked={selectedVendor.permissions?.can_share_catalog ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_share_catalog', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_manage_team\">Manage Team</Label>\r\n                    <Switch\r\n                      id=\"can_manage_team\"\r\n                      checked={selectedVendor.permissions?.can_manage_team ?? false}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_manage_team', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_view_interests\">View Interests</Label>\r\n                    <Switch\r\n                      id=\"can_view_interests\"\r\n                      checked={selectedVendor.permissions?.can_view_interests ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_view_interests', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_view_custom_orders\">View Custom Orders</Label>\r\n                    <Switch\r\n                      id=\"can_view_custom_orders\"\r\n                      checked={selectedVendor.permissions?.can_view_custom_orders ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_view_custom_orders', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_manage_custom_orders\">Manage Custom Orders</Label>\r\n                    <Switch\r\n                      id=\"can_manage_custom_orders\"\r\n                      checked={selectedVendor.permissions?.can_manage_custom_orders ?? false}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_manage_custom_orders', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_delete_products\">Delete Products</Label>\r\n                    <Switch\r\n                      id=\"can_delete_products\"\r\n                      checked={selectedVendor.permissions?.can_delete_products ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_delete_products', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_edit_products\">Edit Products</Label>\r\n                    <Switch\r\n                      id=\"can_edit_products\"\r\n                      checked={selectedVendor.permissions?.can_edit_products ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_edit_products', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_edit_profile\">Edit Profile</Label>\r\n                    <Switch\r\n                      id=\"can_edit_profile\"\r\n                      checked={selectedVendor.permissions?.can_edit_profile ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_edit_profile', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_view_sessions\">View Sessions</Label>\r\n                    <Switch\r\n                      id=\"can_view_sessions\"\r\n                      checked={selectedVendor.permissions?.can_view_sessions ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_view_sessions', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"can_manage_sessions\">Manage Sessions</Label>\r\n                    <Switch\r\n                      id=\"can_manage_sessions\"\r\n                      checked={selectedVendor.permissions?.can_manage_sessions ?? true}\r\n                      onCheckedChange={(checked) => handlePermissionToggle('can_manage_sessions', checked)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"max_active_sessions\">Max Active Sessions</Label>\r\n                    <Input\r\n                      id=\"max_active_sessions\"\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      max=\"10\"\r\n                      value={selectedVendor.permissions?.max_active_sessions ?? 3}\r\n                      onChange={(e) => {\r\n                        const value = parseInt(e.target.value) || 3;\r\n                        if (value >= 1 && value <= 10) {\r\n                          updateVendorPermissions(selectedVendor.id, { max_active_sessions: value });\r\n                          setSelectedVendor({\r\n                            ...selectedVendor,\r\n                            permissions: {\r\n                              ...selectedVendor.permissions!,\r\n                              max_active_sessions: value\r\n                            }\r\n                          });\r\n                        }\r\n                      }}\r\n                      className=\"w-full\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Number of devices that can be logged in simultaneously (1-10)\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* Deleted Products */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Deleted Products</CardTitle>\r\n              <CardDescription>Permanently delete products that were soft-deleted by vendors</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Name</TableHead>\r\n                    <TableHead>SKU</TableHead>\r\n                    <TableHead>Category</TableHead>\r\n                    <TableHead>Deleted At</TableHead>\r\n                    <TableHead>Action</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {deletedProducts.map((product) => (\r\n                    <TableRow key={product.id}>\r\n                      <TableCell className=\"font-medium\">{product.name}</TableCell>\r\n                      <TableCell>{product.sku || \"N/A\"}</TableCell>\r\n                      <TableCell>{product.category || \"N/A\"}</TableCell>\r\n                      <TableCell>\r\n                        {new Date(product.deleted_at).toLocaleString()}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <AlertDialog>\r\n                          <AlertDialogTrigger asChild>\r\n                            <Button variant=\"destructive\" size=\"sm\">\r\n                              <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                              Hard Delete\r\n                            </Button>\r\n                          </AlertDialogTrigger>\r\n                          <AlertDialogContent>\r\n                            <AlertDialogHeader>\r\n                              <AlertDialogTitle>Permanently Delete Product?</AlertDialogTitle>\r\n                              <AlertDialogDescription>\r\n                                This will permanently delete \"{product.name}\". This action cannot be undone.\r\n                              </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                              <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                              <AlertDialogAction \r\n                                onClick={() => handleHardDelete([product.id])}\r\n                                className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                              >\r\n                                Permanently Delete\r\n                              </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                          </AlertDialogContent>\r\n                        </AlertDialog>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                  {deletedProducts.length === 0 && (\r\n                    <TableRow>\r\n                      <TableCell colSpan={5} className=\"text-center text-muted-foreground\">\r\n                        No deleted products\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n      </div>\r\n    </ApprovalGuard>\r\n  );\r\n}\r\n"],"names":["VendorManagement","navigate","useNavigate","isAdmin","roleLoading","useUserRole","vendors","setVendors","useState","loading","setLoading","deletedProducts","setDeletedProducts","selectedVendor","setSelectedVendor","showPermissionsDialog","setShowPermissionsDialog","useEffect","toast","fetchVendors","fetchDeletedProducts","approvals","approvalsError","supabase","adminRoles","adminError","adminUserIds","r","vendorApprovals","a","profiles","profilesError","productCounts","productError","permissionsData","permissionsError","vendorsData","approval","profile","p","userProducts","vendorPermissions","error","data","toggleVendorStatus","vendorId","currentStatus","openPermissionsDialog","vendor","handleHardDelete","productIds","updateVendorPermissions","permissions","handlePermissionToggle","permission","value","jsx","ApprovalGuard","jsxs","Button","ArrowLeft","Card","CardHeader","CardTitle","CardDescription","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Badge","Switch","Settings","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Select","_a","SelectTrigger","SelectValue","SelectContent","SelectItem","_b","checked","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","Input","_r","e","product","AlertDialog","AlertDialogTrigger","Trash2","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}