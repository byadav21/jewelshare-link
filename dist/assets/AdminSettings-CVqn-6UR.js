import{j as e}from"./query-vendor-BLxHmmGk.js";import{u as C,r as l}from"./react-vendor-BeR0k5Z3.js";import{s as d,C as x,i as g,k as j,l as y,g as f,B as S}from"./index-CX6yiz0b.js";import{A as F}from"./AdminLayout-iDUtkfn_.js";import{I as i}from"./input-CiHC6UAI.js";import{L as c}from"./label-DbIM3Eg1.js";import{u as m,a9 as v,p as E,am as I}from"./ui-vendor-DjQqXt9S.js";import"./supabase-vendor-VSDMYZ1k.js";import"./separator-D0WC8Ha9.js";import"./index-DhS5fNEb.js";import"./index-D6fUEw85.js";import"./NavLink-Bvq0lq1P.js";import"./index-BC78nHQ6.js";import"./index-DVcnno33.js";import"./badge-45Abp579.js";const z=()=>{C();const[_,N]=l.useState(!0),[p,h]=l.useState(!1),[t,u]=l.useState({whatsapp_number:"",contact_email:"",contact_phone:"",company_name:"",company_address:""});l.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:a,error:r}=await d.from("settings").select("*");if(r)throw r;const s={};a==null||a.forEach(o=>{s[o.key]=o.value}),u({whatsapp_number:s.whatsapp_number||"",contact_email:s.contact_email||"",contact_phone:s.contact_phone||"",company_name:s.company_name||"",company_address:s.company_address||""})}catch(a){console.error("Error fetching settings:",a),m.error("Failed to load settings")}finally{N(!1)}},w=async()=>{h(!0);try{const{data:{user:a}}=await d.auth.getUser();if(!a)throw new Error("Not authenticated");for(const[r,s]of Object.entries(t)){const{error:o}=await d.from("settings").upsert({key:r,value:s,updated_by:a.id,updated_at:new Date().toISOString()},{onConflict:"key"});if(o)throw o}m.success("Settings saved successfully!")}catch(a){console.error("Error saving settings:",a),m.error("Failed to save settings")}finally{h(!1)}},n=(a,r)=>{u(s=>({...s,[a]:r}))};return e.jsx(F,{children:_?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-3xl rounded-full"}),e.jsx("div",{className:"relative bg-gradient-primary rounded-full p-6 shadow-glow mx-auto w-fit",children:e.jsx(v,{className:"h-12 w-12 text-primary-foreground animate-spin"})})]}),e.jsx("p",{className:"text-muted-foreground",children:"Loading settings..."})]})}):e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Site Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure your website's global settings"})]}),e.jsxs(x,{className:"bg-gradient-card border-border/50 shadow-md",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(E,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(j,{children:"Company Information"}),e.jsx(y,{children:"Basic details about your business"})]})]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"company_name",children:"Company Name"}),e.jsx(i,{id:"company_name",value:t.company_name,onChange:a=>n("company_name",a.target.value),placeholder:"Your Company Name",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"company_address",children:"Company Address"}),e.jsx(i,{id:"company_address",value:t.company_address,onChange:a=>n("company_address",a.target.value),placeholder:"123 Main Street, City, Country",className:"mt-1.5"})]})]})]}),e.jsxs(x,{className:"bg-gradient-card border-border/50 shadow-md",children:[e.jsxs(g,{children:[e.jsx(j,{children:"Contact Information"}),e.jsx(y,{children:"How customers can reach you"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(i,{id:"contact_email",type:"email",value:t.contact_email,onChange:a=>n("contact_email",a.target.value),placeholder:"contact@example.com",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"contact_phone",children:"Contact Phone"}),e.jsx(i,{id:"contact_phone",type:"tel",value:t.contact_phone,onChange:a=>n("contact_phone",a.target.value),placeholder:"+1 (555) 123-4567",className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"whatsapp_number",children:"WhatsApp Number"}),e.jsx(i,{id:"whatsapp_number",type:"tel",value:t.whatsapp_number,onChange:a=>n("whatsapp_number",a.target.value),placeholder:"+1 (555) 123-4567",className:"mt-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:"Include country code (e.g., +1 for US)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:w,disabled:p,className:"shadow-md hover:shadow-lg transition-all",children:p?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})})};export{z as default};
//# sourceMappingURL=AdminSettings-CVqn-6UR.js.map
