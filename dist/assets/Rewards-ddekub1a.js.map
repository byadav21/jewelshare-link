{"version":3,"file":"Rewards-ddekub1a.js","sources":["../../src/hooks/useRedemptions.tsx","../../src/components/RewardCard.tsx","../../src/pages/Rewards.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface Redemption {\r\n  id: string;\r\n  reward_id: string;\r\n  points_spent: number;\r\n  reward_details: any;\r\n  status: string;\r\n  redeemed_at: string;\r\n  expires_at: string | null;\r\n  applied_at: string | null;\r\n}\r\n\r\nexport const useRedemptions = () => {\r\n  const [redemptions, setRedemptions] = useState<Redemption[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchRedemptions();\r\n  }, []);\r\n\r\n  const fetchRedemptions = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"redemptions\")\r\n        .select(\"*\")\r\n        .eq(\"user_id\", user.id)\r\n        .order(\"redeemed_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setRedemptions(data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching redemptions:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    redemptions,\r\n    loading,\r\n    refetch: fetchRedemptions\r\n  };\r\n};","import { motion } from \"framer-motion\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Gift, Package, Link2, Headphones, Check } from \"lucide-react\";\r\n\r\ninterface RewardCardProps {\r\n  reward: {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    points_cost: number;\r\n    reward_type: string;\r\n    reward_value: any;\r\n  };\r\n  userPoints: number;\r\n  onRedeem: (rewardId: string) => void;\r\n  isRedeeming: boolean;\r\n}\r\n\r\nconst getRewardIcon = (type: string) => {\r\n  const icons: Record<string, any> = {\r\n    extra_products: Package,\r\n    extra_share_links: Link2,\r\n    premium_support: Headphones,\r\n  };\r\n  return icons[type] || Gift;\r\n};\r\n\r\nexport const RewardCard = ({ reward, userPoints, onRedeem, isRedeeming }: RewardCardProps) => {\r\n  const canAfford = userPoints >= reward.points_cost;\r\n  const IconComponent = getRewardIcon(reward.reward_type);\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <Card className={`relative overflow-hidden ${!canAfford ? 'opacity-60' : ''}`}>\r\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/10 to-accent/10 rounded-full blur-3xl\" />\r\n        \r\n        <CardHeader>\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-3\">\r\n              <IconComponent className=\"h-6 w-6 text-primary\" />\r\n            </div>\r\n            <Badge variant={canAfford ? \"default\" : \"secondary\"}>\r\n              {reward.points_cost} points\r\n            </Badge>\r\n          </div>\r\n          <CardTitle className=\"text-lg\">{reward.name}</CardTitle>\r\n          {reward.description && (\r\n            <CardDescription>{reward.description}</CardDescription>\r\n          )}\r\n        </CardHeader>\r\n        \r\n        <CardContent>\r\n          <Button\r\n            onClick={() => onRedeem(reward.id)}\r\n            disabled={!canAfford || isRedeeming}\r\n            className=\"w-full\"\r\n            variant={canAfford ? \"default\" : \"outline\"}\r\n          >\r\n            {isRedeeming ? (\r\n              \"Redeeming...\"\r\n            ) : canAfford ? (\r\n              <>\r\n                <Check className=\"h-4 w-4 mr-2\" />\r\n                Redeem Now\r\n              </>\r\n            ) : (\r\n              \"Not Enough Points\"\r\n            )}\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n};","import { useState, useEffect } from \"react\";\r\nimport { useRewardsSystem } from \"@/hooks/useRewardsSystem\";\r\nimport { useMilestones } from \"@/hooks/useMilestones\";\r\nimport { useRedemptions } from \"@/hooks/useRedemptions\";\r\nimport { ApprovalGuard } from \"@/components/ApprovalGuard\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Trophy, Star, Package, Share2, Eye, ArrowLeft, Gift, ShoppingBag } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { motion } from \"framer-motion\";\r\nimport { format } from \"date-fns\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { RewardCard } from \"@/components/RewardCard\";\r\n\r\nconst Rewards = () => {\r\n  const navigate = useNavigate();\r\n  const { toast } = useToast();\r\n  const { points, history, loading: pointsLoading, refetch: refetchPoints } = useRewardsSystem();\r\n  const { milestones, loading: milestonesLoading } = useMilestones();\r\n  const { redemptions, refetch: refetchRedemptions } = useRedemptions();\r\n  const [rewardsCatalog, setRewardsCatalog] = useState<any[]>([]);\r\n  const [redeemingId, setRedeemingId] = useState<string | null>(null);\r\n\r\n  const loading = pointsLoading || milestonesLoading;\r\n\r\n  useEffect(() => {\r\n    fetchRewardsCatalog();\r\n  }, []);\r\n\r\n  const fetchRewardsCatalog = async () => {\r\n    const { data, error } = await supabase\r\n      .from('rewards_catalog')\r\n      .select('*')\r\n      .eq('is_active', true)\r\n      .order('points_cost', { ascending: true });\r\n\r\n    if (!error && data) {\r\n      setRewardsCatalog(data);\r\n    }\r\n  };\r\n\r\n  const handleRedeem = async (rewardId: string) => {\r\n    setRedeemingId(rewardId);\r\n    try {\r\n      const { data, error } = await supabase.functions.invoke('redeem-reward', {\r\n        body: { reward_id: rewardId }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Reward Redeemed!\",\r\n        description: \"Your reward has been successfully applied to your account.\",\r\n      });\r\n\r\n      await refetchPoints();\r\n      await refetchRedemptions();\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Redemption Failed\",\r\n        description: error.message || \"Unable to redeem reward. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setRedeemingId(null);\r\n    }\r\n  };\r\n\r\n  const getTierColor = (tier: string) => {\r\n    const colors: Record<string, string> = {\r\n      bronze: \"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400\",\r\n      silver: \"bg-gray-100 text-gray-700 dark:bg-gray-800/20 dark:text-gray-400\",\r\n      gold: \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400\",\r\n      platinum: \"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400\",\r\n    };\r\n    return colors[tier] || colors.bronze;\r\n  };\r\n\r\n  const getNextTier = (currentTier: string) => {\r\n    const tiers: Record<string, { next: string; points: number }> = {\r\n      bronze: { next: 'Silver', points: 500 },\r\n      silver: { next: 'Gold', points: 2000 },\r\n      gold: { next: 'Platinum', points: 5000 },\r\n      platinum: { next: 'Legend', points: 10000 }\r\n    };\r\n    return tiers[currentTier] || { next: 'Silver', points: 500 };\r\n  };\r\n\r\n  const getActionIcon = (actionType: string) => {\r\n    const icons: Record<string, any> = {\r\n      'product_added': Package,\r\n      'share_link_created': Share2,\r\n      'product_viewed': Eye,\r\n      'first_product': Package,\r\n      'profile_completed': Gift\r\n    };\r\n    return icons[actionType] || Star;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <ApprovalGuard>\r\n        <div className=\"min-h-screen bg-background p-6\">\r\n          <div className=\"container mx-auto max-w-6xl\">\r\n            <div className=\"animate-pulse space-y-6\">\r\n              <div className=\"h-10 bg-muted rounded w-1/4\"></div>\r\n              <div className=\"h-40 bg-muted rounded\"></div>\r\n              <div className=\"h-60 bg-muted rounded\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ApprovalGuard>\r\n    );\r\n  }\r\n\r\n  const nextTierInfo = points ? getNextTier(points.current_tier) : null;\r\n  const progressToNext = points && nextTierInfo \r\n    ? (points.total_points / nextTierInfo.points) * 100 \r\n    : 0;\r\n\r\n  return (\r\n    <ApprovalGuard>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background\">\r\n        <div className=\"container mx-auto max-w-6xl p-6 space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/catalog\")}>\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-foreground\">Rewards & Achievements</h1>\r\n              <p className=\"text-muted-foreground\">Track your progress and earn rewards</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Points Overview */}\r\n          {points && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.4 }}\r\n            >\r\n              <Card className=\"bg-gradient-to-br from-primary/10 via-background to-accent/10 border-primary/20\">\r\n                <CardHeader>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center\">\r\n                        <Trophy className=\"h-8 w-8 text-primary-foreground\" />\r\n                      </div>\r\n                      <div>\r\n                        <CardTitle className=\"text-2xl\">\r\n                          {points.total_points.toLocaleString()} Points\r\n                        </CardTitle>\r\n                        <CardDescription>Your total reward points</CardDescription>\r\n                      </div>\r\n                    </div>\r\n                    <Badge className={getTierColor(points.current_tier)} variant=\"secondary\">\r\n                      {points.current_tier.toUpperCase()}\r\n                    </Badge>\r\n                  </div>\r\n                </CardHeader>\r\n                {nextTierInfo && points.current_tier !== 'platinum' && (\r\n                  <CardContent>\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex items-center justify-between text-sm\">\r\n                        <span className=\"text-muted-foreground\">\r\n                          Progress to {nextTierInfo.next}\r\n                        </span>\r\n                        <span className=\"font-medium\">\r\n                          {nextTierInfo.points - points.total_points} points to go\r\n                        </span>\r\n                      </div>\r\n                      <Progress value={Math.min(progressToNext, 100)} className=\"h-3\" />\r\n                    </div>\r\n                  </CardContent>\r\n                )}\r\n              </Card>\r\n            </motion.div>\r\n          )}\r\n\r\n          <div className=\"grid md:grid-cols-2 gap-6\">\r\n            {/* Milestones */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Star className=\"h-5 w-5 text-primary\" />\r\n                  Achievements\r\n                </CardTitle>\r\n                <CardDescription>Milestones you've unlocked</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {milestones.length === 0 ? (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <Trophy className=\"h-12 w-12 mx-auto mb-3 opacity-30\" />\r\n                    <p>No achievements yet. Keep growing!</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                    {milestones.map((milestone, index) => (\r\n                      <motion.div\r\n                        key={milestone.id}\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: index * 0.05 }}\r\n                        className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors\"\r\n                      >\r\n                        <div className=\"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0\">\r\n                          <Trophy className=\"h-5 w-5 text-primary\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"font-medium text-sm\">\r\n                            {milestone.milestone_type.replace(/_/g, ' ').toUpperCase()}\r\n                          </p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {format(new Date(milestone.achieved_at), 'MMM d, yyyy')}\r\n                          </p>\r\n                        </div>\r\n                        <Badge variant=\"secondary\" className=\"flex-shrink-0\">\r\n                          +{milestone.points_awarded} pts\r\n                        </Badge>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Activity */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Gift className=\"h-5 w-5 text-primary\" />\r\n                  Recent Activity\r\n                </CardTitle>\r\n                <CardDescription>Points you've earned recently</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {history.length === 0 ? (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <Gift className=\"h-12 w-12 mx-auto mb-3 opacity-30\" />\r\n                    <p>No activity yet. Start earning points!</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                    {history.map((item, index) => {\r\n                      const IconComponent = getActionIcon(item.action_type);\r\n                      return (\r\n                        <motion.div\r\n                          key={item.id}\r\n                          initial={{ opacity: 0, x: 20 }}\r\n                          animate={{ opacity: 1, x: 0 }}\r\n                          transition={{ delay: index * 0.05 }}\r\n                          className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors\"\r\n                        >\r\n                          <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n                            <IconComponent className=\"h-5 w-5 text-primary\" />\r\n                          </div>\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"font-medium text-sm\">\r\n                              {item.action_type.replace(/_/g, ' ').toUpperCase()}\r\n                            </p>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                              {format(new Date(item.created_at), 'MMM d, yyyy h:mm a')}\r\n                            </p>\r\n                          </div>\r\n                          <Badge \r\n                            variant={item.points > 0 ? \"default\" : \"secondary\"}\r\n                            className=\"flex-shrink-0\"\r\n                          >\r\n                            {item.points > 0 ? '+' : ''}{item.points} pts\r\n                          </Badge>\r\n                        </motion.div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Redeem Rewards */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <ShoppingBag className=\"h-5 w-5 text-primary\" />\r\n                Redeem Rewards\r\n              </CardTitle>\r\n              <CardDescription>Exchange your points for exclusive perks</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {rewardsCatalog.map((reward) => (\r\n                  <RewardCard\r\n                    key={reward.id}\r\n                    reward={reward}\r\n                    userPoints={points?.total_points || 0}\r\n                    onRedeem={handleRedeem}\r\n                    isRedeeming={redeemingId === reward.id}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* How to Earn Points */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>How to Earn Points</CardTitle>\r\n              <CardDescription>Actions that reward you with points</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {[\r\n                  { action: 'Add a product', points: 10, icon: Package },\r\n                  { action: 'Create share link', points: 20, icon: Share2 },\r\n                  { action: 'Complete profile', points: 30, icon: Gift },\r\n                  { action: 'First product', points: 50, icon: Star },\r\n                ].map((item) => (\r\n                  <div\r\n                    key={item.action}\r\n                    className=\"flex items-center gap-3 p-4 rounded-lg border border-border bg-muted/30 hover:bg-muted/50 transition-colors\"\r\n                  >\r\n                    <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                      <item.icon className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"font-medium text-sm\">{item.action}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">+{item.points} points</p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </ApprovalGuard>\r\n  );\r\n};\r\n\r\nexport default Rewards;\r\n"],"names":["useRedemptions","redemptions","setRedemptions","useState","loading","setLoading","useEffect","fetchRedemptions","user","supabase","data","error","getRewardIcon","type","Package","Link2","Headphones","Gift","RewardCard","reward","userPoints","onRedeem","isRedeeming","canAfford","IconComponent","jsx","motion","jsxs","Card","CardHeader","Badge","CardTitle","CardDescription","CardContent","Button","Fragment","Check","Rewards","navigate","useNavigate","toast","useToast","points","history","pointsLoading","refetchPoints","useRewardsSystem","milestones","milestonesLoading","useMilestones","refetchRedemptions","rewardsCatalog","setRewardsCatalog","redeemingId","setRedeemingId","fetchRewardsCatalog","handleRedeem","rewardId","getTierColor","tier","colors","getNextTier","currentTier","getActionIcon","actionType","Share2","Eye","Star","ApprovalGuard","nextTierInfo","progressToNext","ArrowLeft","Trophy","Progress","milestone","index","format","item","ShoppingBag"],"mappings":"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"}