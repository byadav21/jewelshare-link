import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as t}from"./react-vendor-BeR0k5Z3.js";import{f as d,S}from"./index-CX6yiz0b.js";const B=({src:c,alt:x,width:u,height:a,lazy:l=!0,priority:o=!1,quality:f=85,sizes:b,className:r,objectFit:p="cover",onLoad:i,onError:n,...I})=>{const[m,N]=t.useState(!1),[E,R]=t.useState(!1),[w,$]=t.useState(!l||o),v=t.useRef(null),j=t.useRef(null);t.useEffect(()=>{if(!(!l||o||w))return j.current=new IntersectionObserver(s=>{s.forEach(h=>{var g;h.isIntersecting&&($(!0),(g=j.current)==null||g.disconnect())})},{rootMargin:"50px"}),v.current&&j.current.observe(v.current),()=>{var s;(s=j.current)==null||s.disconnect()}},[l,o,w]);const k=s=>u?[320,640,768,1024,1920].map(g=>`${s}?w=${g}&q=${f} ${g}w`).join(", "):s,O=()=>{const s=[];return s.push(e.jsx("source",{type:"image/avif",srcSet:`${c}?format=avif&q=${f}`},"avif")),s.push(e.jsx("source",{type:"image/webp",srcSet:k(c),sizes:b},"webp")),s},y=()=>{N(!0),i==null||i()},V=()=>{R(!0),n==null||n()},C=d("transition-opacity duration-300 max-w-full h-auto",m?"opacity-100":"opacity-0",r),F={contain:"object-contain",cover:"object-cover",fill:"object-fill",none:"object-none","scale-down":"object-scale-down"}[p];return w?E?e.jsx("div",{className:d("flex items-center justify-center bg-muted text-muted-foreground",r),style:{width:u,height:a},children:e.jsx("span",{className:"text-sm",children:"Failed to load image"})}):e.jsxs("div",{className:d("relative",!m&&"overflow-hidden"),children:[!m&&e.jsx(S,{className:"absolute inset-0"}),e.jsxs("picture",{children:[O(),e.jsx("img",{ref:v,src:c,alt:x,width:u,height:a,loading:l&&!o?"lazy":"eager",decoding:o?"sync":"async",onLoad:y,onError:V,className:d(C,F),...I})]})]}):e.jsx("div",{ref:v,className:d("relative",r),style:{width:u,height:a},children:e.jsx(S,{className:"w-full h-full"})})},H=({src:c,className:x,children:u,lazy:a=!0,overlay:l=!1,overlayOpacity:o=.5})=>{const[f,b]=t.useState(!1),[r,p]=t.useState(!a),i=t.useRef(null);return t.useEffect(()=>{if(!a||r)return;const n=new IntersectionObserver(I=>{I.forEach(m=>{m.isIntersecting&&(p(!0),n.disconnect())})},{rootMargin:"50px"});return i.current&&n.observe(i.current),()=>n.disconnect()},[a,r]),t.useEffect(()=>{if(!r)return;const n=new Image;n.onload=()=>b(!0),n.src=c},[r,c]),e.jsxs("div",{ref:i,className:d("relative",x),style:{backgroundImage:f?`url(${c})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[!f&&e.jsx(S,{className:"absolute inset-0"}),l&&f&&e.jsx("div",{className:"absolute inset-0 bg-background",style:{opacity:o}}),e.jsx("div",{className:"relative z-10",children:u})]})};export{B as O,H as a};
//# sourceMappingURL=OptimizedImage-DQ051bg0.js.map
