import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as a,u as B}from"./react-vendor-BeR0k5Z3.js";import{h as A,C as b,g as y,B as u,s as S,S as E,i as P,k as _,l as I}from"./index-CX6yiz0b.js";import{B as w}from"./badge-45Abp579.js";import{I as C}from"./input-CiHC6UAI.js";import{S as m}from"./ScrollReveal-D3It02AA.js";import{z as v}from"./index-ibl8YJur.js";import{i as D,h as R,E as T,J as U,K as q,N as F,b as H,d as M,O,c as Q,A as Y}from"./ui-vendor-DjQqXt9S.js";import"./supabase-vendor-VSDMYZ1k.js";import"./proxy-8agjeDDu.js";const z=v.object({email:v.string().trim().email({message:"Please enter a valid email address"}).max(255)}),G=()=>{const[c,r]=a.useState(""),[x,t]=a.useState(!1),[g,h]=a.useState(!1),{toast:i}=A(),j=async n=>{n.preventDefault();try{const l=z.safeParse({email:c});if(!l.success){i({title:"Invalid Email",description:l.error.issues[0].message,variant:"destructive"});return}t(!0);const{error:d}=await S.from("newsletter_subscribers").insert({email:l.data.email});if(d)if(d.code==="23505")i({title:"Already Subscribed",description:"This email is already subscribed to our newsletter."});else throw d;else h(!0),r(""),i({title:"Successfully Subscribed!",description:"You'll receive updates about new blog posts and platform news."})}catch(l){console.error("Subscription error:",l),i({title:"Subscription Failed",description:"Something went wrong. Please try again later.",variant:"destructive"})}finally{t(!1)}};return g?e.jsx(b,{className:"border-2 border-category-jewellery/20 bg-gradient-to-br from-category-jewellery/5 to-category-gemstone/5",children:e.jsxs(y,{className:"flex items-center gap-4 p-6",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-category-jewellery/20",children:e.jsx(D,{className:"h-6 w-6 text-category-jewellery"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"You're all set!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check your inbox for a confirmation email."})]})]})}):e.jsx(b,{className:"border-2 border-category-jewellery/20",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-category-jewellery/10",children:e.jsx(R,{className:"h-5 w-5 text-category-jewellery"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Stay Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get the latest articles delivered to your inbox"})]})]}),e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx(C,{type:"email",placeholder:"Enter your email",value:c,onChange:n=>r(n.target.value),maxLength:255,required:!0,className:"flex-1"}),e.jsx(u,{type:"submit",disabled:x,className:"bg-gradient-to-r from-category-jewellery to-category-gemstone",children:x?"Subscribing...":"Subscribe"})]})]})})},te=()=>{const c=B(),[r,x]=a.useState(""),[t,g]=a.useState("All"),[h,i]=a.useState([]),[j,n]=a.useState(["All"]),[l,d]=a.useState(!0);a.useEffect(()=>{k()},[]);const k=async()=>{const{data:s,error:o}=await S.from("blog_posts").select("*").eq("published",!0).order("published_at",{ascending:!1});if(o)console.error("Error fetching blog posts:",o);else if(s){i(s);const f=["All",...new Set(s.map(p=>p.category).filter(Boolean))];n(f)}d(!1)},N=h.filter(s=>{const o=s.title.toLowerCase().includes(r.toLowerCase())||(s.excerpt||"").toLowerCase().includes(r.toLowerCase())||(s.tags||[]).some(p=>p.toLowerCase().includes(r.toLowerCase())),f=t==="All"||s.category===t;return o&&f}),L=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("section",{className:"border-b bg-gradient-to-br from-category-jewellery/10 via-category-gemstone/10 to-category-diamond/10 py-20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(u,{variant:"ghost",onClick:()=>c("/"),className:"mb-8",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),e.jsx(m,{children:e.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[e.jsxs(w,{className:"mb-4 gap-1.5 px-4 py-1.5",variant:"secondary",children:[e.jsx(U,{className:"h-3.5 w-3.5"}),"Blog & Resources"]}),e.jsx("h1",{className:"mb-4 text-5xl font-bold",children:"Insights & Updates"}),e.jsx("p",{className:"mb-8 text-xl text-muted-foreground",children:"Stay informed with the latest jewelry industry trends, platform updates, and best practices for managing your business."}),e.jsxs("div",{className:"relative mx-auto max-w-xl",children:[e.jsx(q,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(C,{type:"text",placeholder:"Search articles, trends, updates...",value:r,onChange:s=>x(s.target.value),className:"h-14 pl-12 pr-4 text-base",maxLength:100})]})]})})]})}),e.jsx("section",{className:"border-b py-6",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx(m,{children:e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:j.map(s=>e.jsxs(u,{variant:t===s?"default":"outline",onClick:()=>g(s),className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),s]},s))})})})}),e.jsx("section",{className:"container mx-auto px-4 py-16",children:l?e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(s=>e.jsx(E,{className:"h-96 w-full"},s))}):N.length===0?e.jsx("div",{className:"py-20 text-center",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"No articles found matching your criteria."})}):e.jsxs(e.Fragment,{children:[e.jsx(m,{children:e.jsxs("h2",{className:"mb-8 flex items-center gap-2 text-3xl font-bold",children:[e.jsx(H,{className:"h-6 w-6 text-category-jewellery"}),t==="All"?"All Articles":t]})}),e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:N.map((s,o)=>e.jsx(m,{delay:.1*o,children:e.jsxs(b,{className:"group cursor-pointer overflow-hidden border-2 transition-all hover:border-category-jewellery/50 hover:shadow-xl",onClick:()=>c(`/blog/${s.slug}`),children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[e.jsx("img",{src:s.cover_image||"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=800",alt:s.title,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),s.category&&e.jsxs(w,{className:"absolute left-4 top-4 gap-1.5",children:[e.jsx(M,{className:"h-3 w-3"}),s.category]})]}),e.jsxs(P,{children:[e.jsxs("div",{className:"mb-3 flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(O,{className:"h-4 w-4"}),L(s.published_at)]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Q,{className:"h-4 w-4"}),s.read_time," min read"]})]}),e.jsx(_,{className:"text-2xl transition-colors group-hover:text-category-jewellery line-clamp-2",children:s.title}),e.jsx(I,{className:"mt-2 text-base line-clamp-3",children:s.excerpt})]}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["By ",s.author_name]}),e.jsxs(u,{variant:"ghost",className:"group gap-2",children:["Read More",e.jsx(Y,{className:"h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})})]})},s.id))})]})}),e.jsx("section",{className:"border-t bg-gradient-to-br from-category-jewellery/5 via-category-gemstone/5 to-category-diamond/5 py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx(m,{children:e.jsx("div",{className:"mx-auto max-w-2xl",children:e.jsx(G,{})})})})})]})};export{te as default};
//# sourceMappingURL=Blog-Bkg9oqE8.js.map
