{"version":3,"file":"Catalog-htTUh0oZ.js","sources":["../../src/components/ProductCard.tsx","../../src/components/ProductCardSkeleton.tsx","../../src/utils/productCategorization.ts","../../src/components/AutoCategorizationDialog.tsx","../../src/hooks/usePlanLimits.tsx","../../src/utils/pdfExport.ts","../../src/components/PlanUsageBanner.tsx","../../src/components/UpgradePromptDialog.tsx","../../src/utils/celebrationSounds.ts","../../src/components/PlanUpgradeCelebration.tsx","../../src/components/PlanBenefitsShowcase.tsx","../../src/components/ReferralCelebration.tsx","../../src/components/MilestoneCelebration.tsx","../../src/components/RewardsWidget.tsx","../../src/components/GoldRateDialog.tsx","../../src/components/QuickActionsMenu.tsx","../../src/components/BrandShowcase.tsx","../../src/components/BulkEditDialog.tsx","../../src/components/DeleteConfirmationDialog.tsx","../../src/components/ui/breadcrumb.tsx","../../src/pages/Catalog.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { OptimizedImage } from \"@/components/OptimizedImage\";\r\nimport { Gem, ChevronLeft, ChevronRight, Zap, Calendar } from \"lucide-react\";\r\n\r\ninterface ProductCardProps {\r\n  product: any;\r\n  isSelected: boolean;\r\n  onToggleSelection: (id: string) => void;\r\n  usdRate: number;\r\n  vendorLogoUrl?: string;\r\n}\r\n\r\nexport const ProductCard = ({ product, isSelected, onToggleSelection, usdRate, vendorLogoUrl }: ProductCardProps) => {\r\n  const images = [product.image_url, product.image_url_2, product.image_url_3].filter(Boolean);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [isHovering, setIsHovering] = useState(false);\r\n\r\n  const nextImage = () => {\r\n    setCurrentImageIndex((prev) => (prev + 1) % images.length);\r\n  };\r\n\r\n  const prevImage = () => {\r\n    setCurrentImageIndex((prev) => (prev - 1 + images.length) % images.length);\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHovering(true);\r\n    if (images.length > 1) {\r\n      nextImage();\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHovering(false);\r\n    setCurrentImageIndex(0);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.4 }}\r\n      whileHover={{ \r\n        y: -8,\r\n        transition: { duration: 0.3, ease: \"easeOut\" }\r\n      }}\r\n    >\r\n      <Card className=\"overflow-hidden relative group bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 active:scale-[0.98] touch-manipulation\">\r\n        {/* Premium glow effect on hover */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none\" />\r\n        <div \r\n          className=\"absolute top-3 left-3 z-10\" \r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 bg-primary/20 blur-md rounded opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n            <Checkbox\r\n              checked={isSelected}\r\n              onCheckedChange={(checked) => {\r\n                onToggleSelection(product.id);\r\n              }}\r\n              className=\"relative bg-background/95 backdrop-blur-sm border-2 border-primary/30 w-5 h-5 sm:w-6 sm:h-6 shadow-lg cursor-pointer\"\r\n            />\r\n          </div>\r\n        </div>\r\n      {images.length > 0 ? (\r\n        <div \r\n          className=\"aspect-square overflow-hidden bg-muted relative group\"\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <OptimizedImage\r\n            src={images[currentImageIndex]}\r\n            alt={`${product.name} - Image ${currentImageIndex + 1}`}\r\n            className=\"w-full h-full object-cover transition-all duration-300\"\r\n            width={400}\r\n            height={400}\r\n          />\r\n          {images.length > 1 && (\r\n            <>\r\n              <button\r\n                onClick={prevImage}\r\n                className=\"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation\"\r\n                aria-label=\"Previous image\"\r\n              >\r\n                <ChevronLeft className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n              </button>\r\n              <button\r\n                onClick={nextImage}\r\n                className=\"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation\"\r\n                aria-label=\"Next image\"\r\n              >\r\n                <ChevronRight className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n              </button>\r\n              <div className=\"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 sm:gap-2 bg-background/80 backdrop-blur-sm px-2 sm:px-3 py-1 sm:py-1.5 rounded-full\">\r\n                {images.map((_, idx) => (\r\n                  <button\r\n                    key={idx}\r\n                    onClick={() => setCurrentImageIndex(idx)}\r\n                    className={`transition-all duration-300 rounded-full touch-manipulation ${\r\n                      idx === currentImageIndex \r\n                        ? 'bg-primary w-5 sm:w-6 h-1.5 sm:h-2' \r\n                        : 'bg-muted-foreground/40 w-1.5 sm:w-2 h-1.5 sm:h-2 active:bg-muted-foreground/60'\r\n                    }`}\r\n                    aria-label={`Go to image ${idx + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n              {/* Image counter badge */}\r\n              <div className=\"absolute top-2 sm:top-3 right-2 sm:right-3 bg-background/90 backdrop-blur-sm px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium shadow-sm\">\r\n                {currentImageIndex + 1} / {images.length}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"aspect-square overflow-hidden bg-muted flex items-center justify-center\">\r\n          <Gem className=\"h-24 w-24 text-muted-foreground/30\" />\r\n        </div>\r\n      )}\r\n      <CardHeader className=\"p-4 sm:p-6 relative\">\r\n        <h3 className=\"font-serif text-lg sm:text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300\">{product.name}</h3>\r\n        {product.sku && (\r\n          <p className=\"text-xs sm:text-sm text-muted-foreground/80 mb-3 font-medium\">SKU: {product.sku}</p>\r\n        )}\r\n        <div className=\"space-y-1.5 sm:space-y-2 text-xs sm:text-sm border-t border-border/50 pt-3 sm:pt-4 bg-gradient-to-b from-transparent to-muted/20 -mx-4 sm:-mx-6 px-4 sm:px-6 pb-2\">\r\n          {product.diamond_color && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Diamond Color:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.diamond_color}</span>\r\n            </div>\r\n          )}\r\n          {product.clarity && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Diamond Clarity:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.clarity}</span>\r\n            </div>\r\n          )}\r\n          {product.diamond_weight && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">T DWT:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.diamond_weight}g</span>\r\n            </div>\r\n          )}\r\n          {product.weight_grams && (\r\n            <>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground font-medium\">Gross Weight:</span>\r\n                <span className=\"text-foreground font-semibold\">{product.weight_grams}g</span>\r\n              </div>\r\n              {product.net_weight && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-muted-foreground font-medium\">NET WT:</span>\r\n                  <span className=\"text-foreground font-semibold\">{product.net_weight}g</span>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n          {product.metal_type && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Metal Type:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.metal_type}</span>\r\n            </div>\r\n          )}\r\n          {product.purity_fraction_used && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Metal Purity:</span>\r\n              <span className=\"text-foreground font-semibold\">{(product.purity_fraction_used * 100).toFixed(0)}%</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"p-3 sm:p-6\">\r\n        {product.description && (\r\n          <p className=\"text-xs sm:text-sm text-muted-foreground mb-2 sm:mb-3 line-clamp-2\">\r\n            {product.description}\r\n          </p>\r\n        )}\r\n        {product.category && (\r\n          <div className=\"text-xs sm:text-sm\">\r\n            <span className=\"text-muted-foreground\">Category:</span> <span className=\"text-foreground font-medium\">{product.category}</span>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n      <CardFooter className=\"flex flex-col gap-3.5 border-t border-border/50 p-4 sm:p-6 pt-4 sm:pt-5 bg-gradient-to-b from-muted/5 to-transparent\">\r\n        {/* Delivery Badge */}\r\n        {product.delivery_type && (\r\n          <div className=\"w-full\">\r\n            {product.delivery_type === 'immediate delivery' ? (\r\n              <Badge variant=\"secondary\" className=\"w-full justify-center gap-2 py-2 bg-gradient-to-r from-emerald-500/20 via-green-500/20 to-emerald-500/20 border-emerald-500/40 text-emerald-700 dark:text-emerald-400 hover:from-emerald-500/30 hover:to-green-500/30 shadow-sm font-semibold\">\r\n                <Zap className=\"h-3.5 w-3.5\" />\r\n                <span className=\"text-xs\">Immediate Dispatch</span>\r\n              </Badge>\r\n            ) : (\r\n              <Badge variant=\"outline\" className=\"w-full justify-center gap-2 py-2 border-primary/40 text-primary hover:bg-primary/10 shadow-sm font-semibold\">\r\n                <Calendar className=\"h-3.5 w-3.5\" />\r\n                <span className=\"text-xs\">{product.delivery_type}</span>\r\n              </Badge>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Price and Stock */}\r\n        <div className=\"flex justify-between w-full items-end\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">Retail Price</p>\r\n            <div className=\"relative\">\r\n              <p className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm\">\r\n                ₹{product.retail_price.toLocaleString('en-IN')}\r\n              </p>\r\n              <div className=\"absolute -inset-1 bg-gradient-to-r from-primary/20 to-accent/20 blur-lg opacity-30 -z-10\" />\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground font-medium\">${(product.retail_price / usdRate).toLocaleString('en-US', { maximumFractionDigits: 0 })}</p>\r\n          </div>\r\n          <div className=\"text-right space-y-1\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">Stock</p>\r\n            <p className=\"text-xl sm:text-2xl font-bold text-foreground\">{product.stock_quantity}</p>\r\n          </div>\r\n        </div>\r\n      </CardFooter>\r\n    </Card>\r\n    </motion.div>\r\n  );\r\n};\r\n","import { Card } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nexport const ProductCardSkeleton = () => {\r\n  return (\r\n    <Card className=\"overflow-hidden bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg\">\r\n      <Skeleton className=\"aspect-square w-full\" />\r\n      <div className=\"p-4 sm:p-6 space-y-4\">\r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-6 w-3/4\" />\r\n          <Skeleton className=\"h-4 w-1/2\" />\r\n        </div>\r\n        <div className=\"space-y-2 border-t border-border/50 pt-3\">\r\n          <Skeleton className=\"h-3 w-full\" />\r\n          <Skeleton className=\"h-3 w-full\" />\r\n          <Skeleton className=\"h-3 w-2/3\" />\r\n        </div>\r\n        <div className=\"border-t border-border/50 pt-4\">\r\n          <Skeleton className=\"h-10 w-full mb-3\" />\r\n          <div className=\"flex justify-between items-end\">\r\n            <div className=\"space-y-2\">\r\n              <Skeleton className=\"h-3 w-16\" />\r\n              <Skeleton className=\"h-8 w-24\" />\r\n            </div>\r\n            <div className=\"space-y-2 text-right\">\r\n              <Skeleton className=\"h-3 w-12\" />\r\n              <Skeleton className=\"h-8 w-12\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n","/**\r\n * Smart product categorization utility\r\n * Uses pattern matching on product names and SKUs to suggest categories\r\n */\r\n\r\ninterface CategoryPattern {\r\n  category: string;\r\n  patterns: RegExp[];\r\n  priority: number; // Higher priority patterns checked first\r\n}\r\n\r\n// Define category patterns with common keywords and SKU prefixes\r\nconst CATEGORY_PATTERNS: CategoryPattern[] = [\r\n  {\r\n    category: \"Ladies Rings\",\r\n    patterns: [\r\n      /\\bCLR\\d+/i,\r\n      /ladies?\\s*rings?/i,\r\n      /women'?s?\\s*rings?/i,\r\n      /female\\s*rings?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Gents Rings\",\r\n    patterns: [\r\n      /\\bCGR\\d+/i,\r\n      /gents?\\s*rings?/i,\r\n      /men'?s?\\s*rings?/i,\r\n      /male\\s*rings?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Rings\",\r\n    patterns: [/\\brings?\\b/i, /\\bband\\b/i, /\\bwedding\\s*band/i],\r\n    priority: 5,\r\n  },\r\n  {\r\n    category: \"Ladies Bangles\",\r\n    patterns: [\r\n      /\\bCLB\\d+/i,\r\n      /ladies?\\s*bangles?/i,\r\n      /women'?s?\\s*bangles?/i,\r\n      /kadas?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Gents Bangles\",\r\n    patterns: [/\\bCGB\\d+/i, /gents?\\s*bangles?/i, /men'?s?\\s*bangles?/i],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Bangles\",\r\n    patterns: [/\\bbangles?\\b/i, /\\bbracelets?\\b/i],\r\n    priority: 5,\r\n  },\r\n  {\r\n    category: \"Bracelets\",\r\n    patterns: [\r\n      /\\bCBR\\d+/i,\r\n      /\\bbracelets?\\b/i,\r\n      /\\bwrist\\s*band/i,\r\n      /\\bchain\\s*bracelet/i,\r\n    ],\r\n    priority: 8,\r\n  },\r\n  {\r\n    category: \"Necklaces\",\r\n    patterns: [\r\n      /\\bCLN\\d+/i,\r\n      /\\bnecklaces?\\b/i,\r\n      /\\bhaar\\b/i,\r\n      /\\bmangalsutra/i,\r\n      /\\bchoker/i,\r\n      /\\bcollar\\b/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Earrings\",\r\n    patterns: [\r\n      /\\bCLE\\d+/i,\r\n      /\\bearrings?\\b/i,\r\n      /\\bstuds?\\b/i,\r\n      /\\bhoops?\\b/i,\r\n      /\\bdrops?\\b/i,\r\n      /\\bjhumka/i,\r\n      /\\bjhumki/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Pendants\",\r\n    patterns: [\r\n      /\\bCLP\\d+/i,\r\n      /\\bpendants?\\b/i,\r\n      /\\blockets?\\b/i,\r\n      /\\bcharm\\b/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Chains\",\r\n    patterns: [\r\n      /\\bCLC\\d+/i,\r\n      /\\bchains?\\b/i,\r\n      /\\bgold\\s*chain/i,\r\n      /\\bsilver\\s*chain/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Toe Rings\",\r\n    patterns: [/\\btoe\\s*rings?/i, /\\bmetti/i, /\\bfoot\\s*rings?/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Nose Pins\",\r\n    patterns: [/\\bnose\\s*pins?/i, /\\bnath\\b/i, /\\bbullak/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Mangalsutra\",\r\n    patterns: [/\\bmangalsutra/i, /\\bthali/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Anklets\",\r\n    patterns: [/\\banklets?/i, /\\bpayal/i, /\\bpajeb/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Sets\",\r\n    patterns: [\r\n      /\\bsets?\\b/i,\r\n      /\\bcomplete\\s*set/i,\r\n      /\\bbridal\\s*set/i,\r\n      /\\bjewel(?:le)?ry\\s*set/i,\r\n    ],\r\n    priority: 8,\r\n  },\r\n];\r\n\r\nexport interface CategorySuggestion {\r\n  productId: string;\r\n  productName: string;\r\n  currentCategory: string | null;\r\n  suggestedCategory: string;\r\n  confidence: \"high\" | \"medium\" | \"low\";\r\n  matchedPattern: string;\r\n}\r\n\r\n/**\r\n * Analyze a product and suggest a category based on name and SKU\r\n */\r\nexport function suggestCategory(\r\n  productName: string,\r\n  sku: string | null\r\n): { category: string; confidence: \"high\" | \"medium\" | \"low\"; pattern: string } | null {\r\n  const searchText = `${productName} ${sku || \"\"}`;\r\n  \r\n  // Sort patterns by priority (highest first)\r\n  const sortedPatterns = [...CATEGORY_PATTERNS].sort((a, b) => b.priority - a.priority);\r\n  \r\n  for (const { category, patterns, priority } of sortedPatterns) {\r\n    for (const pattern of patterns) {\r\n      if (pattern.test(searchText)) {\r\n        // Determine confidence based on priority and match quality\r\n        let confidence: \"high\" | \"medium\" | \"low\";\r\n        if (priority >= 10) {\r\n          confidence = \"high\";\r\n        } else if (priority >= 7) {\r\n          confidence = \"medium\";\r\n        } else {\r\n          confidence = \"low\";\r\n        }\r\n        \r\n        return {\r\n          category,\r\n          confidence,\r\n          pattern: pattern.source,\r\n        };\r\n      }\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Analyze multiple products and generate category suggestions\r\n */\r\nexport function analyzeCatalog(\r\n  products: Array<{\r\n    id: string;\r\n    name: string;\r\n    sku: string | null;\r\n    category: string | null;\r\n  }>\r\n): CategorySuggestion[] {\r\n  const suggestions: CategorySuggestion[] = [];\r\n  \r\n  for (const product of products) {\r\n    // Skip if already has a category (unless we want to suggest changes)\r\n    // For now, only suggest for products without categories\r\n    if (product.category) continue;\r\n    \r\n    const suggestion = suggestCategory(product.name, product.sku);\r\n    \r\n    if (suggestion) {\r\n      suggestions.push({\r\n        productId: product.id,\r\n        productName: product.name,\r\n        currentCategory: product.category,\r\n        suggestedCategory: suggestion.category,\r\n        confidence: suggestion.confidence,\r\n        matchedPattern: suggestion.pattern,\r\n      });\r\n    }\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * Get statistics about suggestions\r\n */\r\nexport function getSuggestionStats(suggestions: CategorySuggestion[]) {\r\n  const byCategory = suggestions.reduce((acc, s) => {\r\n    acc[s.suggestedCategory] = (acc[s.suggestedCategory] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n  \r\n  const byConfidence = suggestions.reduce((acc, s) => {\r\n    acc[s.confidence] = (acc[s.confidence] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n  \r\n  return {\r\n    total: suggestions.length,\r\n    byCategory,\r\n    byConfidence,\r\n  };\r\n}\r\n","import { useState } from \"react\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Sparkles, TrendingUp, CheckCircle2 } from \"lucide-react\";\r\nimport { CategorySuggestion, getSuggestionStats } from \"@/utils/productCategorization\";\r\n\r\ninterface AutoCategorizationDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  suggestions: CategorySuggestion[];\r\n  onApply: (selectedIds: string[]) => Promise<void>;\r\n}\r\n\r\nexport function AutoCategorizationDialog({\r\n  open,\r\n  onOpenChange,\r\n  suggestions,\r\n  onApply,\r\n}: AutoCategorizationDialogProps) {\r\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(\r\n    new Set(suggestions.map(s => s.productId))\r\n  );\r\n  const [isApplying, setIsApplying] = useState(false);\r\n\r\n  const stats = getSuggestionStats(suggestions);\r\n  \r\n  const toggleSelection = (id: string) => {\r\n    const newSelected = new Set(selectedIds);\r\n    if (newSelected.has(id)) {\r\n      newSelected.delete(id);\r\n    } else {\r\n      newSelected.add(id);\r\n    }\r\n    setSelectedIds(newSelected);\r\n  };\r\n\r\n  const toggleAll = () => {\r\n    if (selectedIds.size === suggestions.length) {\r\n      setSelectedIds(new Set());\r\n    } else {\r\n      setSelectedIds(new Set(suggestions.map(s => s.productId)));\r\n    }\r\n  };\r\n\r\n  const handleApply = async () => {\r\n    setIsApplying(true);\r\n    try {\r\n      await onApply(Array.from(selectedIds));\r\n      onOpenChange(false);\r\n    } finally {\r\n      setIsApplying(false);\r\n    }\r\n  };\r\n\r\n  const getConfidenceBadge = (confidence: string) => {\r\n    switch (confidence) {\r\n      case \"high\":\r\n        return <Badge className=\"bg-green-500/20 text-green-700 dark:text-green-400\">High</Badge>;\r\n      case \"medium\":\r\n        return <Badge className=\"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400\">Medium</Badge>;\r\n      case \"low\":\r\n        return <Badge className=\"bg-orange-500/20 text-orange-700 dark:text-orange-400\">Low</Badge>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[80vh]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Sparkles className=\"h-5 w-5 text-primary\" />\r\n            Smart Category Suggestions\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Found {stats.total} products that can be auto-categorized based on their names and SKUs\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {/* Stats Overview */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 py-4\">\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-primary\">{stats.total}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Total Suggestions</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-green-600\">{stats.byConfidence.high || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">High Confidence</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-yellow-600\">{stats.byConfidence.medium || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Medium Confidence</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-orange-600\">{stats.byConfidence.low || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Low Confidence</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Category Breakdown */}\r\n        <div className=\"py-2\">\r\n          <div className=\"text-sm font-medium mb-2 flex items-center gap-2\">\r\n            <TrendingUp className=\"h-4 w-4\" />\r\n            Categories Found\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {Object.entries(stats.byCategory).map(([category, count]) => (\r\n              <Badge key={category} variant=\"secondary\">\r\n                {category}: {count}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Suggestions List */}\r\n        <ScrollArea className=\"h-[300px] border rounded-lg\">\r\n          <div className=\"p-4 space-y-3\">\r\n            <div className=\"flex items-center gap-2 pb-2 border-b sticky top-0 bg-background\">\r\n              <Checkbox\r\n                checked={selectedIds.size === suggestions.length}\r\n                onCheckedChange={toggleAll}\r\n              />\r\n              <span className=\"text-sm font-medium\">\r\n                Select All ({selectedIds.size}/{suggestions.length})\r\n              </span>\r\n            </div>\r\n            \r\n            {suggestions.map((suggestion) => (\r\n              <div\r\n                key={suggestion.productId}\r\n                className=\"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors\"\r\n              >\r\n                <Checkbox\r\n                  checked={selectedIds.has(suggestion.productId)}\r\n                  onCheckedChange={() => toggleSelection(suggestion.productId)}\r\n                />\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"font-medium truncate\">{suggestion.productName}</div>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <span className=\"text-xs text-muted-foreground\">→</span>\r\n                    <Badge variant=\"outline\" className=\"text-xs\">\r\n                      {suggestion.suggestedCategory}\r\n                    </Badge>\r\n                    {getConfidenceBadge(suggestion.confidence)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </ScrollArea>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={handleApply}\r\n            disabled={selectedIds.size === 0 || isApplying}\r\n          >\r\n            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n            Apply {selectedIds.size} Categories\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface PlanLimits {\r\n  subscription_plan: 'starter' | 'professional' | 'enterprise' | 'essentials';\r\n  max_products: number;\r\n  max_share_links: number;\r\n  max_team_members: number;\r\n  max_product_images: number;\r\n}\r\n\r\ninterface Usage {\r\n  products_count: number;\r\n  share_links_count: number;\r\n}\r\n\r\ninterface PlanLimitStatus {\r\n  canAddProducts: boolean;\r\n  canAddShareLinks: boolean;\r\n  productsRemaining: number;\r\n  shareLinksRemaining: number;\r\n  productUsagePercent: number;\r\n  shareLinksUsagePercent: number;\r\n  loading: boolean;\r\n}\r\n\r\nexport const usePlanLimits = (): PlanLimitStatus => {\r\n  const [limits, setLimits] = useState<PlanLimits | null>(null);\r\n  const [usage, setUsage] = useState<Usage | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchLimitsAndUsage();\r\n  }, []);\r\n\r\n  const fetchLimitsAndUsage = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      // Fetch vendor permissions (includes limits)\r\n      const { data: permissions, error: permError } = await supabase\r\n        .from(\"vendor_permissions\")\r\n        .select(\"subscription_plan, max_products, max_share_links, max_team_members, max_product_images\")\r\n        .eq(\"user_id\", user.id)\r\n        .single();\r\n\r\n      if (permError) throw permError;\r\n\r\n      // Fetch current usage\r\n      const { data: products, error: prodError } = await supabase\r\n        .from(\"products\")\r\n        .select(\"id\")\r\n        .eq(\"user_id\", user.id)\r\n        .is(\"deleted_at\", null);\r\n\r\n      if (prodError) throw prodError;\r\n\r\n      const { data: shareLinks, error: shareError } = await supabase\r\n        .from(\"share_links\")\r\n        .select(\"id\")\r\n        .eq(\"user_id\", user.id);\r\n\r\n      if (shareError) throw shareError;\r\n\r\n      setLimits(permissions);\r\n      setUsage({\r\n        products_count: products?.length || 0,\r\n        share_links_count: shareLinks?.length || 0,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching limits:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!limits || !usage) {\r\n    return {\r\n      canAddProducts: true,\r\n      canAddShareLinks: true,\r\n      productsRemaining: 0,\r\n      shareLinksRemaining: 0,\r\n      productUsagePercent: 0,\r\n      shareLinksUsagePercent: 0,\r\n      loading,\r\n    };\r\n  }\r\n\r\n  const productUsagePercent = (usage.products_count / limits.max_products) * 100;\r\n  const shareLinksUsagePercent = (usage.share_links_count / limits.max_share_links) * 100;\r\n\r\n  // Check if unlimited (999999 is the unlimited indicator)\r\n  const hasUnlimitedProducts = limits.max_products === 999999;\r\n  const hasUnlimitedShareLinks = limits.max_share_links === 999999;\r\n\r\n  return {\r\n    canAddProducts: hasUnlimitedProducts || usage.products_count < limits.max_products,\r\n    canAddShareLinks: hasUnlimitedShareLinks || usage.share_links_count < limits.max_share_links,\r\n    productsRemaining: hasUnlimitedProducts ? Infinity : limits.max_products - usage.products_count,\r\n    shareLinksRemaining: hasUnlimitedShareLinks ? Infinity : limits.max_share_links - usage.share_links_count,\r\n    productUsagePercent,\r\n    shareLinksUsagePercent,\r\n    loading,\r\n  };\r\n};\r\n","import jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\n\r\ninterface VendorProfile {\r\n  business_name?: string;\r\n  address_line1?: string;\r\n  address_line2?: string;\r\n  city?: string;\r\n  state?: string;\r\n  pincode?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  whatsapp_number?: string;\r\n}\r\n\r\ninterface Product {\r\n  sku?: string;\r\n  name: string;\r\n  diamond_color?: string;\r\n  clarity?: string;\r\n  d_wt_1?: number;\r\n  d_wt_2?: number;\r\n  diamond_weight?: number;\r\n  weight_grams?: number;\r\n  net_weight?: number;\r\n  purity_fraction_used?: number;\r\n  d_rate_1?: number;\r\n  pointer_diamond?: number;\r\n  d_value?: number;\r\n  gemstone?: string;\r\n  mkg?: number;\r\n  certification_cost?: number;\r\n  gemstone_cost?: number;\r\n  retail_price: number;\r\n  total_usd?: number;\r\n}\r\n\r\nexport const exportCatalogToPDF = (\r\n  products: Product[],\r\n  vendorProfile: VendorProfile | null,\r\n  usdRate: number,\r\n  goldRate: number,\r\n  totalINR: number,\r\n  totalUSD: number\r\n) => {\r\n  const doc = new jsPDF('landscape', 'mm', 'a4');\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  \r\n  // Add vendor header\r\n  doc.setFontSize(20);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(vendorProfile?.business_name || \"Product Catalog\", pageWidth / 2, 20, { align: \"center\" });\r\n  \r\n  // Add vendor details\r\n  if (vendorProfile) {\r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    let yPos = 30;\r\n    \r\n    if (vendorProfile.address_line1) {\r\n      doc.text(\r\n        `${vendorProfile.address_line1}${vendorProfile.address_line2 ? ', ' + vendorProfile.address_line2 : ''}`,\r\n        pageWidth / 2,\r\n        yPos,\r\n        { align: \"center\" }\r\n      );\r\n      yPos += 5;\r\n    }\r\n    \r\n    if (vendorProfile.city) {\r\n      doc.text(\r\n        `${vendorProfile.city}, ${vendorProfile.state} ${vendorProfile.pincode}`,\r\n        pageWidth / 2,\r\n        yPos,\r\n        { align: \"center\" }\r\n      );\r\n      yPos += 5;\r\n    }\r\n    \r\n    const contactInfo = [];\r\n    if (vendorProfile.email) contactInfo.push(`Email: ${vendorProfile.email}`);\r\n    if (vendorProfile.phone) contactInfo.push(`Phone: ${vendorProfile.phone}`);\r\n    if (vendorProfile.whatsapp_number) contactInfo.push(`WhatsApp: ${vendorProfile.whatsapp_number}`);\r\n    \r\n    if (contactInfo.length > 0) {\r\n      doc.text(contactInfo.join(' | '), pageWidth / 2, yPos, { align: \"center\" });\r\n    }\r\n  }\r\n  \r\n  // Add date, exchange rate, and gold rate with professional styling\r\n  doc.setFillColor(248, 250, 252);\r\n  doc.rect(0, 45, pageWidth, 8, 'F');\r\n  \r\n  doc.setFontSize(8.5);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(70, 70, 80);\r\n  doc.text(\r\n    `Date: ${new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' })} | Exchange Rate: 1 USD = Rs.${usdRate.toFixed(2)} | Gold Rate (24K): Rs.${goldRate.toLocaleString('en-IN')}/g`,\r\n    pageWidth / 2,\r\n    49,\r\n    { align: 'center' }\r\n  );\r\n  \r\n  // Prepare table data\r\n  const tableData = products.map((product, index) => [\r\n    product.sku || `${index + 1}`,\r\n    product.name,\r\n    product.diamond_color || '-',\r\n    product.clarity || '-',\r\n    product.d_wt_1 ? `${product.d_wt_1}` : '-',\r\n    product.d_wt_2 ? `${product.d_wt_2}` : '-',\r\n    product.diamond_weight ? `${product.diamond_weight}` : '-',\r\n    product.weight_grams ? `${product.weight_grams}` : '-',\r\n    product.net_weight ? `${product.net_weight}` : '-',\r\n    product.purity_fraction_used ? `${product.purity_fraction_used}%` : '-',\r\n    product.d_rate_1 ? `${product.d_rate_1.toLocaleString('en-IN')}` : '-',\r\n    product.pointer_diamond ? `${product.pointer_diamond.toLocaleString('en-IN')}` : '-',\r\n    product.d_value ? `${product.d_value.toLocaleString('en-IN')}` : '-',\r\n    product.gemstone || 'NONE',\r\n    product.mkg ? `${product.mkg.toLocaleString('en-IN', { maximumFractionDigits: 2 })}` : '-',\r\n    product.certification_cost ? `${product.certification_cost.toLocaleString('en-IN')}` : '-',\r\n    product.gemstone_cost ? `${product.gemstone_cost.toLocaleString('en-IN')}` : '-',\r\n    product.retail_price.toLocaleString('en-IN', { maximumFractionDigits: 0 }),\r\n    product.total_usd ? product.total_usd.toFixed(2) : (product.retail_price / usdRate).toFixed(2)\r\n  ]);\r\n  \r\n  // Add table with enhanced professional styling\r\n  autoTable(doc, {\r\n    head: [[\r\n      'SKU', \r\n      'PRODUCT NAME', \r\n      'DIAMOND\\nCOLOR',\r\n      'CLARITY', \r\n      'D.WT 1\\n(ct)', \r\n      'D.WT 2\\n(ct)', \r\n      'TOTAL\\nD.WT (ct)', \r\n      'GROSS\\nWT (g)', \r\n      'NET\\nWT (g)', \r\n      'PURITY\\n%', \r\n      'D RATE 1\\n(Rs/ct)', \r\n      'POINTER\\nDIAMOND', \r\n      'D VALUE\\n(Rs)',\r\n      'GEMSTONE\\nTYPE',\r\n      'MKG\\n(Rs)',\r\n      'CERT\\nCOST (Rs)',\r\n      'GEM\\nCOST (Rs)',\r\n      'TOTAL\\n(Rs)',\r\n      'TOTAL\\n(USD)'\r\n    ]],\r\n    body: tableData,\r\n    startY: 53,\r\n    styles: { \r\n      fontSize: 8, \r\n      cellPadding: 3, \r\n      lineColor: [220, 220, 220], \r\n      lineWidth: 0.15,\r\n      overflow: 'linebreak',\r\n      halign: 'left',\r\n      valign: 'middle',\r\n      textColor: [50, 50, 50]\r\n    },\r\n    headStyles: { \r\n      fillColor: [41, 128, 185],\r\n      textColor: [255, 255, 255], \r\n      fontStyle: 'bold', \r\n      halign: 'center',\r\n      fontSize: 7.5,\r\n      minCellHeight: 14,\r\n      valign: 'middle',\r\n      cellPadding: 3\r\n    },\r\n    alternateRowStyles: { fillColor: [250, 252, 255] },\r\n    columnStyles: {\r\n      0: { cellWidth: 15, halign: 'left' },\r\n      1: { cellWidth: 32, halign: 'left' },\r\n      2: { cellWidth: 12, halign: 'center' },\r\n      3: { cellWidth: 12, halign: 'center' },\r\n      4: { cellWidth: 12, halign: 'right' },\r\n      5: { cellWidth: 12, halign: 'right' },\r\n      6: { cellWidth: 14, halign: 'right' },\r\n      7: { cellWidth: 12, halign: 'right' },\r\n      8: { cellWidth: 12, halign: 'right' },\r\n      9: { cellWidth: 12, halign: 'right' },\r\n      10: { cellWidth: 14, halign: 'right' },\r\n      11: { cellWidth: 14, halign: 'right' },\r\n      12: { cellWidth: 14, halign: 'right' },\r\n      13: { cellWidth: 16, halign: 'center' },\r\n      14: { cellWidth: 14, halign: 'right' },\r\n      15: { cellWidth: 13, halign: 'right' },\r\n      16: { cellWidth: 13, halign: 'right' },\r\n      17: { cellWidth: 22, halign: 'right', fontStyle: 'bold', textColor: [30, 64, 175] },\r\n      18: { cellWidth: 18, halign: 'right', fontStyle: 'bold', textColor: [30, 64, 175] }\r\n    },\r\n    margin: { top: 53, left: 5, right: 5 },\r\n    tableWidth: 'auto',\r\n    didParseCell: function(data: any) {\r\n      if (data.column.index === 17 && data.section === 'body') {\r\n        data.cell.text = [`Rs. ${data.cell.text[0]}`];\r\n      }\r\n      if (data.column.index === 18 && data.section === 'body') {\r\n        data.cell.text = [`$ ${data.cell.text[0]}`];\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Add totals with enhanced design\r\n  const finalY = (doc as any).lastAutoTable.finalY || 50;\r\n  \r\n  doc.setFillColor(250, 252, 255);\r\n  doc.roundedRect(14, finalY + 6, pageWidth - 28, 20, 2, 2, 'F');\r\n  doc.setDrawColor(41, 128, 185);\r\n  doc.setLineWidth(0.5);\r\n  doc.roundedRect(14, finalY + 6, pageWidth - 28, 20, 2, 2, 'S');\r\n  \r\n  doc.setFontSize(11);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(41, 128, 185);\r\n  doc.text(\r\n    `Total: Rs.${totalINR.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} | USD $${totalUSD.toFixed(2)}`,\r\n    pageWidth / 2,\r\n    finalY + 13,\r\n    { align: \"center\" }\r\n  );\r\n  doc.setTextColor(50, 50, 60);\r\n  doc.setFontSize(9);\r\n  doc.text(\r\n    `Total Products: ${products.length}`,\r\n    pageWidth / 2,\r\n    finalY + 20,\r\n    { align: \"center\" }\r\n  );\r\n  \r\n  // Save PDF\r\n  const fileName = `catalog_${vendorProfile?.business_name?.replace(/\\s+/g, '_') || 'products'}_${new Date().toLocaleDateString('en-IN').replace(/\\//g, '-')}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n","import { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { AlertCircle, TrendingUp } from \"lucide-react\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\n\r\nexport const PlanUsageBanner = () => {\r\n  const {\r\n    productUsagePercent,\r\n    shareLinksUsagePercent,\r\n    productsRemaining,\r\n    shareLinksRemaining,\r\n    loading\r\n  } = usePlanLimits();\r\n\r\n  if (loading) return null;\r\n\r\n  const isProductsUnlimited = productsRemaining === Infinity;\r\n  const isShareLinksUnlimited = shareLinksRemaining === Infinity;\r\n  \r\n  const isAnyLimitHigh = productUsagePercent >= 80 || shareLinksUsagePercent >= 80;\r\n  const isAnyLimitExhausted = productUsagePercent >= 100 || shareLinksUsagePercent >= 100;\r\n\r\n  if (!isAnyLimitHigh) return null;\r\n\r\n  return (\r\n    <Alert className={`mb-6 ${isAnyLimitExhausted ? 'border-destructive bg-destructive/5' : 'border-warning bg-warning/5'}`}>\r\n      <div className=\"flex items-start gap-3\">\r\n        {isAnyLimitExhausted ? (\r\n          <AlertCircle className=\"h-5 w-5 text-destructive mt-0.5\" />\r\n        ) : (\r\n          <TrendingUp className=\"h-5 w-5 text-warning mt-0.5\" />\r\n        )}\r\n        <div className=\"flex-1 space-y-3\">\r\n          <AlertDescription className=\"font-medium\">\r\n            {isAnyLimitExhausted ? 'Plan Limits Reached' : 'Approaching Plan Limits'}\r\n          </AlertDescription>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Products Usage */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Products</span>\r\n                <span className=\"font-medium\">\r\n                  {isProductsUnlimited ? 'Unlimited' : `${productsRemaining} remaining`}\r\n                </span>\r\n              </div>\r\n              {!isProductsUnlimited && (\r\n                <Progress \r\n                  value={Math.min(productUsagePercent, 100)} \r\n                  className={productUsagePercent >= 100 ? '[&>div]:bg-destructive' : productUsagePercent >= 80 ? '[&>div]:bg-warning' : ''}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            {/* Share Links Usage */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Share Links</span>\r\n                <span className=\"font-medium\">\r\n                  {isShareLinksUnlimited ? 'Unlimited' : `${shareLinksRemaining} remaining`}\r\n                </span>\r\n              </div>\r\n              {!isShareLinksUnlimited && (\r\n                <Progress \r\n                  value={Math.min(shareLinksUsagePercent, 100)} \r\n                  className={shareLinksUsagePercent >= 100 ? '[&>div]:bg-destructive' : shareLinksUsagePercent >= 80 ? '[&>div]:bg-warning' : ''}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Alert>\r\n  );\r\n};\r\n","import {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Check, Sparkles } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface UpgradePromptDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  limitType?: 'products' | 'share_links';\r\n}\r\n\r\nexport const UpgradePromptDialog = ({ open, onOpenChange, limitType }: UpgradePromptDialogProps) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleUpgrade = () => {\r\n    onOpenChange(false);\r\n    navigate('/pricing');\r\n  };\r\n\r\n  const getLimitMessage = () => {\r\n    switch (limitType) {\r\n      case 'products':\r\n        return 'You\\'ve reached your product limit';\r\n      case 'share_links':\r\n        return 'You\\'ve reached your share link limit';\r\n      default:\r\n        return 'You\\'ve reached your plan limit';\r\n    }\r\n  };\r\n\r\n  const plans = [\r\n    {\r\n      name: 'Professional',\r\n      price: '₹2,999/mo',\r\n      features: [\r\n        '1,000 Products',\r\n        '10 Share Links',\r\n        '3 Team Members',\r\n        'Unlimited Product Images',\r\n        'Custom Orders',\r\n        'Import Data',\r\n        'Priority Support'\r\n      ]\r\n    },\r\n    {\r\n      name: 'Enterprise',\r\n      price: 'Custom',\r\n      features: [\r\n        'Unlimited Products',\r\n        'Unlimited Share Links',\r\n        'Unlimited Team Members',\r\n        'Unlimited Product Images',\r\n        'All Professional Features',\r\n        'Dedicated Account Manager',\r\n        'Custom Integrations'\r\n      ],\r\n      highlight: true\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl flex items-center gap-2\">\r\n            <Sparkles className=\"h-6 w-6 text-primary\" />\r\n            Upgrade Your Plan\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-base\">\r\n            {getLimitMessage()}. Upgrade to continue growing your business.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid md:grid-cols-2 gap-6 mt-6\">\r\n          {plans.map((plan) => (\r\n            <div\r\n              key={plan.name}\r\n              className={`relative rounded-lg border-2 p-6 ${\r\n                plan.highlight\r\n                  ? 'border-primary bg-primary/5'\r\n                  : 'border-border'\r\n              }`}\r\n            >\r\n              {plan.highlight && (\r\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold\">\r\n                  RECOMMENDED\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold\">{plan.name}</h3>\r\n                  <p className=\"text-3xl font-bold mt-2\">{plan.price}</p>\r\n                </div>\r\n\r\n                <ul className=\"space-y-3\">\r\n                  {plan.features.map((feature) => (\r\n                    <li key={feature} className=\"flex items-start gap-2\">\r\n                      <Check className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\r\n                      <span className=\"text-sm\">{feature}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                <Button\r\n                  onClick={handleUpgrade}\r\n                  className=\"w-full\"\r\n                  variant={plan.highlight ? 'default' : 'outline'}\r\n                >\r\n                  {plan.name === 'Enterprise' ? 'Contact Sales' : 'Upgrade Now'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","// Celebration sound effects using Web Audio API\r\nexport const playCelebrationSound = () => {\r\n  try {\r\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    \r\n    // Create a cheerful ascending arpeggio\r\n    const notes = [523.25, 659.25, 783.99, 1046.50]; // C, E, G, C (major chord)\r\n    const duration = 0.15;\r\n    \r\n    notes.forEach((frequency, index) => {\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n      \r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      \r\n      oscillator.frequency.value = frequency;\r\n      oscillator.type = 'sine';\r\n      \r\n      const startTime = audioContext.currentTime + (index * duration);\r\n      \r\n      gainNode.gain.setValueAtTime(0.3, startTime);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);\r\n      \r\n      oscillator.start(startTime);\r\n      oscillator.stop(startTime + duration);\r\n    });\r\n  } catch (error) {\r\n    console.log('Audio not supported');\r\n  }\r\n};\r\n\r\nexport const playSuccessChime = () => {\r\n  try {\r\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    \r\n    // Two-tone success chime\r\n    const notes = [783.99, 1046.50]; // G, C\r\n    \r\n    notes.forEach((frequency, index) => {\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n      \r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      \r\n      oscillator.frequency.value = frequency;\r\n      oscillator.type = 'triangle';\r\n      \r\n      const startTime = audioContext.currentTime + (index * 0.2);\r\n      \r\n      gainNode.gain.setValueAtTime(0.4, startTime);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.3);\r\n      \r\n      oscillator.start(startTime);\r\n      oscillator.stop(startTime + 0.3);\r\n    });\r\n  } catch (error) {\r\n    console.log('Audio not supported');\r\n  }\r\n};\r\n\r\nexport const playReferralSound = () => {\r\n  try {\r\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    \r\n    // Fun bouncy sound for referrals\r\n    const notes = [659.25, 783.99, 659.25, 1046.50]; // E, G, E, C\r\n    const duration = 0.12;\r\n    \r\n    notes.forEach((frequency, index) => {\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n      \r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      \r\n      oscillator.frequency.value = frequency;\r\n      oscillator.type = 'square';\r\n      \r\n      const startTime = audioContext.currentTime + (index * duration);\r\n      \r\n      gainNode.gain.setValueAtTime(0.2, startTime);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);\r\n      \r\n      oscillator.start(startTime);\r\n      oscillator.stop(startTime + duration);\r\n    });\r\n  } catch (error) {\r\n    console.log('Audio not supported');\r\n  }\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Sparkles, Trophy, Zap, Star } from \"lucide-react\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { playCelebrationSound } from \"@/utils/celebrationSounds\";\r\n\r\ninterface PlanUpgradeCelebrationProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  planName: string;\r\n}\r\n\r\nexport const PlanUpgradeCelebration = ({ open, onOpenChange, planName }: PlanUpgradeCelebrationProps) => {\r\n  const [showContent, setShowContent] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      // Play celebration sound\r\n      playCelebrationSound();\r\n      \r\n      // Trigger confetti\r\n      const duration = 3000;\r\n      const animationEnd = Date.now() + duration;\r\n      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };\r\n\r\n      function randomInRange(min: number, max: number) {\r\n        return Math.random() * (max - min) + min;\r\n      }\r\n\r\n      const interval: any = setInterval(function() {\r\n        const timeLeft = animationEnd - Date.now();\r\n\r\n        if (timeLeft <= 0) {\r\n          return clearInterval(interval);\r\n        }\r\n\r\n        const particleCount = 50 * (timeLeft / duration);\r\n        \r\n        // Fire confetti from both sides\r\n        confetti({\r\n          ...defaults,\r\n          particleCount,\r\n          origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }\r\n        });\r\n        confetti({\r\n          ...defaults,\r\n          particleCount,\r\n          origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }\r\n        });\r\n      }, 250);\r\n\r\n      // Show content after brief delay\r\n      setTimeout(() => setShowContent(true), 300);\r\n\r\n      return () => {\r\n        clearInterval(interval);\r\n        setShowContent(false);\r\n      };\r\n    }\r\n  }, [open]);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-md border-0 bg-gradient-to-br from-primary/10 via-background to-accent/10 overflow-hidden\">\r\n        <AnimatePresence>\r\n          {showContent && (\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8, y: -20 }}\r\n              transition={{ duration: 0.5, type: \"spring\", bounce: 0.4 }}\r\n              className=\"relative py-8 text-center\"\r\n            >\r\n              {/* Floating Icons */}\r\n              <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n                {[...Array(8)].map((_, i) => (\r\n                  <motion.div\r\n                    key={i}\r\n                    initial={{ \r\n                      x: `${Math.random() * 100}%`, \r\n                      y: \"100%\", \r\n                      opacity: 0,\r\n                      rotate: 0\r\n                    }}\r\n                    animate={{ \r\n                      y: \"-20%\", \r\n                      opacity: [0, 1, 1, 0],\r\n                      rotate: 360,\r\n                      x: `${Math.random() * 100}%`\r\n                    }}\r\n                    transition={{ \r\n                      duration: 3, \r\n                      delay: i * 0.2,\r\n                      repeat: Infinity,\r\n                      repeatDelay: 1\r\n                    }}\r\n                    className=\"absolute\"\r\n                  >\r\n                    {i % 4 === 0 && <Star className=\"h-6 w-6 text-primary\" />}\r\n                    {i % 4 === 1 && <Sparkles className=\"h-5 w-5 text-accent\" />}\r\n                    {i % 4 === 2 && <Zap className=\"h-5 w-5 text-primary\" />}\r\n                    {i % 4 === 3 && <Star className=\"h-4 w-4 text-accent\" fill=\"currentColor\" />}\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Main Trophy Icon */}\r\n              <motion.div\r\n                initial={{ scale: 0, rotate: -180 }}\r\n                animate={{ scale: 1, rotate: 0 }}\r\n                transition={{ \r\n                  type: \"spring\", \r\n                  bounce: 0.6, \r\n                  duration: 0.8,\r\n                  delay: 0.2\r\n                }}\r\n                className=\"inline-flex items-center justify-center mb-6\"\r\n              >\r\n                <div className=\"relative\">\r\n                  <motion.div\r\n                    animate={{ \r\n                      scale: [1, 1.2, 1],\r\n                      rotate: [0, -10, 10, -10, 0]\r\n                    }}\r\n                    transition={{ \r\n                      duration: 2, \r\n                      repeat: Infinity,\r\n                      repeatDelay: 1\r\n                    }}\r\n                    className=\"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-2xl\"\r\n                  >\r\n                    <Trophy className=\"h-12 w-12 text-primary-foreground\" />\r\n                  </motion.div>\r\n                  \r\n                  {/* Pulse rings */}\r\n                  {[...Array(3)].map((_, i) => (\r\n                    <motion.div\r\n                      key={i}\r\n                      initial={{ scale: 1, opacity: 0.5 }}\r\n                      animate={{ scale: 2, opacity: 0 }}\r\n                      transition={{ \r\n                        duration: 2, \r\n                        repeat: Infinity,\r\n                        delay: i * 0.6\r\n                      }}\r\n                      className=\"absolute inset-0 rounded-full border-4 border-primary\"\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </motion.div>\r\n\r\n              {/* Success Text */}\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.5, duration: 0.5 }}\r\n              >\r\n                <motion.h2\r\n                  animate={{ \r\n                    scale: [1, 1.05, 1],\r\n                  }}\r\n                  transition={{ \r\n                    duration: 1.5, \r\n                    repeat: Infinity,\r\n                    repeatDelay: 0.5\r\n                  }}\r\n                  className=\"text-3xl font-bold bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent mb-3\"\r\n                >\r\n                  🎉 Congratulations! 🎉\r\n                </motion.h2>\r\n                \r\n                <p className=\"text-xl font-semibold text-foreground mb-2\">\r\n                  Welcome to {planName}!\r\n                </p>\r\n                \r\n                <p className=\"text-muted-foreground max-w-sm mx-auto\">\r\n                  Your account has been upgraded successfully. Enjoy your new features and expanded limits!\r\n                </p>\r\n              </motion.div>\r\n\r\n              {/* Sparkle Effects */}\r\n              <div className=\"absolute top-4 right-4\">\r\n                <motion.div\r\n                  animate={{ \r\n                    rotate: 360,\r\n                    scale: [1, 1.2, 1]\r\n                  }}\r\n                  transition={{ \r\n                    duration: 3, \r\n                    repeat: Infinity \r\n                  }}\r\n                >\r\n                  <Sparkles className=\"h-8 w-8 text-primary\" />\r\n                </motion.div>\r\n              </div>\r\n              \r\n              <div className=\"absolute bottom-4 left-4\">\r\n                <motion.div\r\n                  animate={{ \r\n                    rotate: -360,\r\n                    scale: [1, 1.3, 1]\r\n                  }}\r\n                  transition={{ \r\n                    duration: 2.5, \r\n                    repeat: Infinity \r\n                  }}\r\n                >\r\n                  <Zap className=\"h-8 w-8 text-accent\" />\r\n                </motion.div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Check, Sparkles } from \"lucide-react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface Benefit {\r\n  title: string;\r\n  description: string;\r\n  icon?: string;\r\n}\r\n\r\ninterface PlanBenefitsShowcaseProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  planName: string;\r\n  benefits: Benefit[];\r\n}\r\n\r\nexport const PlanBenefitsShowcase = ({ \r\n  open, \r\n  onOpenChange, \r\n  planName, \r\n  benefits \r\n}: PlanBenefitsShowcaseProps) => {\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-2xl\">\r\n            <Sparkles className=\"h-6 w-6 text-primary\" />\r\n            Welcome to {planName}!\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4 py-4\">\r\n          <p className=\"text-muted-foreground\">\r\n            Here's what you've just unlocked:\r\n          </p>\r\n\r\n          <div className=\"grid gap-3\">\r\n            {benefits.map((benefit, index) => (\r\n              <motion.div\r\n                key={benefit.title}\r\n                initial={{ opacity: 0, x: -20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                transition={{ delay: index * 0.1, duration: 0.4 }}\r\n                className=\"relative group\"\r\n              >\r\n                <div className=\"flex items-start gap-3 p-4 rounded-lg border border-border bg-gradient-to-r from-primary/5 to-transparent hover:from-primary/10 transition-all duration-300\">\r\n                  {/* Animated check icon */}\r\n                  <motion.div\r\n                    initial={{ scale: 0, rotate: -180 }}\r\n                    animate={{ scale: 1, rotate: 0 }}\r\n                    transition={{ delay: index * 0.1 + 0.2, type: \"spring\", bounce: 0.5 }}\r\n                    className=\"flex-shrink-0 w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center\"\r\n                  >\r\n                    <Check className=\"h-5 w-5 text-primary\" />\r\n                  </motion.div>\r\n\r\n                  <div className=\"flex-1 space-y-1\">\r\n                    <motion.h4\r\n                      initial={{ opacity: 0 }}\r\n                      animate={{ opacity: 1 }}\r\n                      transition={{ delay: index * 0.1 + 0.3 }}\r\n                      className=\"font-semibold text-foreground\"\r\n                    >\r\n                      {benefit.title}\r\n                    </motion.h4>\r\n                    <motion.p\r\n                      initial={{ opacity: 0 }}\r\n                      animate={{ opacity: 1 }}\r\n                      transition={{ delay: index * 0.1 + 0.4 }}\r\n                      className=\"text-sm text-muted-foreground\"\r\n                    >\r\n                      {benefit.description}\r\n                    </motion.p>\r\n                  </div>\r\n\r\n                  {/* Sparkle effect on hover */}\r\n                  <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    whileHover={{ opacity: 1 }}\r\n                    className=\"absolute top-2 right-2\"\r\n                  >\r\n                    <Sparkles className=\"h-4 w-4 text-primary\" />\r\n                  </motion.div>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: benefits.length * 0.1 + 0.5 }}\r\n            className=\"flex justify-center pt-4\"\r\n          >\r\n            <Button onClick={() => onOpenChange(false)} size=\"lg\">\r\n              Start Exploring\r\n            </Button>\r\n          </motion.div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Users, Heart, Gift, Star } from \"lucide-react\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { playReferralSound } from \"@/utils/celebrationSounds\";\r\n\r\ninterface ReferralCelebrationProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  referralType: 'team_member' | 'customer';\r\n  referredName?: string;\r\n}\r\n\r\nexport const ReferralCelebration = ({ \r\n  open, \r\n  onOpenChange, \r\n  referralType,\r\n  referredName \r\n}: ReferralCelebrationProps) => {\r\n  const [showContent, setShowContent] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      // Play referral sound\r\n      playReferralSound();\r\n      \r\n      // Trigger confetti with custom colors\r\n      const duration = 2500;\r\n      const animationEnd = Date.now() + duration;\r\n      const colors = ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6'];\r\n\r\n      function randomInRange(min: number, max: number) {\r\n        return Math.random() * (max - min) + min;\r\n      }\r\n\r\n      const interval: any = setInterval(function() {\r\n        const timeLeft = animationEnd - Date.now();\r\n\r\n        if (timeLeft <= 0) {\r\n          return clearInterval(interval);\r\n        }\r\n\r\n        const particleCount = 30 * (timeLeft / duration);\r\n        \r\n        confetti({\r\n          particleCount,\r\n          startVelocity: 25,\r\n          spread: 360,\r\n          ticks: 50,\r\n          zIndex: 9999,\r\n          origin: { x: randomInRange(0.2, 0.8), y: Math.random() - 0.1 },\r\n          colors: colors\r\n        });\r\n      }, 200);\r\n\r\n      setTimeout(() => setShowContent(true), 200);\r\n\r\n      return () => {\r\n        clearInterval(interval);\r\n        setShowContent(false);\r\n      };\r\n    }\r\n  }, [open]);\r\n\r\n  const content = referralType === 'team_member' ? {\r\n    icon: Users,\r\n    title: \"Team Member Added! 🎉\",\r\n    subtitle: referredName ? `${referredName} joined your team` : \"New team member joined\",\r\n    message: \"Your team is growing! Collaboration makes everything better.\",\r\n    color: \"text-blue-500\"\r\n  } : {\r\n    icon: Heart,\r\n    title: \"New Customer! 🎊\",\r\n    subtitle: referredName ? `${referredName} joined` : \"New customer signed up\",\r\n    message: \"Your referrals are helping grow the community!\",\r\n    color: \"text-pink-500\"\r\n  };\r\n\r\n  const IconComponent = content.icon;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-md border-0 bg-gradient-to-br from-background via-primary/5 to-accent/5 overflow-hidden\">\r\n        <AnimatePresence>\r\n          {showContent && (\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.8 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n              transition={{ duration: 0.4, type: \"spring\", bounce: 0.4 }}\r\n              className=\"relative py-6 text-center\"\r\n            >\r\n              {/* Floating stars */}\r\n              <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n                {[...Array(6)].map((_, i) => (\r\n                  <motion.div\r\n                    key={i}\r\n                    initial={{ \r\n                      x: `${Math.random() * 100}%`, \r\n                      y: \"100%\", \r\n                      opacity: 0,\r\n                      rotate: 0\r\n                    }}\r\n                    animate={{ \r\n                      y: \"-10%\", \r\n                      opacity: [0, 1, 1, 0],\r\n                      rotate: 180,\r\n                      x: `${(Math.random() * 100)}%`\r\n                    }}\r\n                    transition={{ \r\n                      duration: 2.5, \r\n                      delay: i * 0.15,\r\n                      repeat: Infinity,\r\n                      repeatDelay: 0.5\r\n                    }}\r\n                    className=\"absolute\"\r\n                  >\r\n                    {i % 3 === 0 && <Star className=\"h-5 w-5 text-yellow-500\" fill=\"currentColor\" />}\r\n                    {i % 3 === 1 && <Gift className=\"h-4 w-4 text-primary\" />}\r\n                    {i % 3 === 2 && <Heart className=\"h-4 w-4 text-pink-500\" />}\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Main Icon */}\r\n              <motion.div\r\n                initial={{ scale: 0, rotate: -90 }}\r\n                animate={{ scale: 1, rotate: 0 }}\r\n                transition={{ \r\n                  type: \"spring\", \r\n                  bounce: 0.5, \r\n                  duration: 0.6\r\n                }}\r\n                className=\"inline-flex items-center justify-center mb-4\"\r\n              >\r\n                <motion.div\r\n                  animate={{ \r\n                    scale: [1, 1.1, 1],\r\n                    rotate: [0, -5, 5, -5, 0]\r\n                  }}\r\n                  transition={{ \r\n                    duration: 1.5, \r\n                    repeat: Infinity,\r\n                    repeatDelay: 0.5\r\n                  }}\r\n                  className={`w-20 h-20 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center shadow-lg`}\r\n                >\r\n                  <IconComponent className={`h-10 w-10 ${content.color}`} />\r\n                </motion.div>\r\n              </motion.div>\r\n\r\n              {/* Success Text */}\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3, duration: 0.4 }}\r\n              >\r\n                <h2 className=\"text-2xl font-bold text-foreground mb-2\">\r\n                  {content.title}\r\n                </h2>\r\n                \r\n                <p className=\"text-lg font-semibold text-primary mb-1\">\r\n                  {content.subtitle}\r\n                </p>\r\n                \r\n                <p className=\"text-sm text-muted-foreground max-w-xs mx-auto\">\r\n                  {content.message}\r\n                </p>\r\n              </motion.div>\r\n\r\n              {/* Bonus badge */}\r\n              <motion.div\r\n                initial={{ opacity: 0, scale: 0 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                transition={{ delay: 0.5, type: \"spring\", bounce: 0.6 }}\r\n                className=\"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 border border-primary/30\"\r\n              >\r\n                <Gift className=\"h-4 w-4 text-primary\" />\r\n                <span className=\"text-sm font-semibold text-foreground\">\r\n                  Referral Bonus Earned!\r\n                </span>\r\n              </motion.div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Trophy, Package, Share2, Eye, Star, TrendingUp } from \"lucide-react\";\r\nimport confetti from \"canvas-confetti\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { playSuccessChime } from \"@/utils/celebrationSounds\";\r\n\r\ninterface MilestoneCelebrationProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  milestoneType: string;\r\n  milestoneValue: number;\r\n  pointsAwarded: number;\r\n}\r\n\r\nconst getMilestoneDetails = (type: string, value: number) => {\r\n  const details: Record<string, any> = {\r\n    'products_added': {\r\n      icon: Package,\r\n      title: `${value} Products Milestone! 🎉`,\r\n      message: `You've added ${value} products to your catalog!`,\r\n      color: \"text-blue-500\",\r\n      gradient: \"from-blue-500/20 to-blue-500/5\"\r\n    },\r\n    'first_share_link': {\r\n      icon: Share2,\r\n      title: \"First Share Link! 🚀\",\r\n      message: \"You've created your first shareable catalog link!\",\r\n      color: \"text-green-500\",\r\n      gradient: \"from-green-500/20 to-green-500/5\"\r\n    },\r\n    'share_links_created': {\r\n      icon: Share2,\r\n      title: `${value} Share Links! 📈`,\r\n      message: `You've created ${value} share links!`,\r\n      color: \"text-green-500\",\r\n      gradient: \"from-green-500/20 to-green-500/5\"\r\n    },\r\n    'total_views': {\r\n      icon: Eye,\r\n      title: `${value} Views Milestone! 👀`,\r\n      message: `Your catalogs have reached ${value} views!`,\r\n      color: \"text-purple-500\",\r\n      gradient: \"from-purple-500/20 to-purple-500/5\"\r\n    },\r\n    'first_sale': {\r\n      icon: TrendingUp,\r\n      title: \"First Sale! 💰\",\r\n      message: \"Congratulations on your first sale!\",\r\n      color: \"text-yellow-500\",\r\n      gradient: \"from-yellow-500/20 to-yellow-500/5\"\r\n    }\r\n  };\r\n\r\n  return details[type] || {\r\n    icon: Star,\r\n    title: \"Milestone Achieved! ⭐\",\r\n    message: \"You've reached a new milestone!\",\r\n    color: \"text-primary\",\r\n    gradient: \"from-primary/20 to-primary/5\"\r\n  };\r\n};\r\n\r\nexport const MilestoneCelebration = ({ \r\n  open, \r\n  onOpenChange, \r\n  milestoneType,\r\n  milestoneValue,\r\n  pointsAwarded\r\n}: MilestoneCelebrationProps) => {\r\n  const [showContent, setShowContent] = useState(false);\r\n  const details = getMilestoneDetails(milestoneType, milestoneValue);\r\n  const IconComponent = details.icon;\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      // Play success sound\r\n      playSuccessChime();\r\n      \r\n      // Trigger confetti\r\n      const duration = 2000;\r\n      const animationEnd = Date.now() + duration;\r\n\r\n      function randomInRange(min: number, max: number) {\r\n        return Math.random() * (max - min) + min;\r\n      }\r\n\r\n      const interval: any = setInterval(function() {\r\n        const timeLeft = animationEnd - Date.now();\r\n\r\n        if (timeLeft <= 0) {\r\n          return clearInterval(interval);\r\n        }\r\n\r\n        const particleCount = 40 * (timeLeft / duration);\r\n        \r\n        confetti({\r\n          particleCount,\r\n          startVelocity: 30,\r\n          spread: 360,\r\n          ticks: 60,\r\n          zIndex: 9999,\r\n          origin: { x: randomInRange(0.3, 0.7), y: Math.random() - 0.1 }\r\n        });\r\n      }, 250);\r\n\r\n      setTimeout(() => setShowContent(true), 200);\r\n\r\n      return () => {\r\n        clearInterval(interval);\r\n        setShowContent(false);\r\n      };\r\n    }\r\n  }, [open]);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-md border-0 bg-gradient-to-br from-background via-primary/5 to-accent/5 overflow-hidden\">\r\n        <AnimatePresence>\r\n          {showContent && (\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.8 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n              transition={{ duration: 0.4, type: \"spring\", bounce: 0.4 }}\r\n              className=\"relative py-6 text-center\"\r\n            >\r\n              {/* Floating stars */}\r\n              <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <motion.div\r\n                    key={i}\r\n                    initial={{ \r\n                      x: `${Math.random() * 100}%`, \r\n                      y: \"100%\", \r\n                      opacity: 0,\r\n                      scale: 0\r\n                    }}\r\n                    animate={{ \r\n                      y: \"-10%\", \r\n                      opacity: [0, 1, 1, 0],\r\n                      scale: [0, 1, 1, 0],\r\n                      rotate: 360\r\n                    }}\r\n                    transition={{ \r\n                      duration: 2, \r\n                      delay: i * 0.1,\r\n                      repeat: Infinity,\r\n                      repeatDelay: 1\r\n                    }}\r\n                    className=\"absolute\"\r\n                  >\r\n                    <Star className=\"h-6 w-6 text-primary\" fill=\"currentColor\" />\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Trophy Icon */}\r\n              <motion.div\r\n                initial={{ scale: 0, rotate: -180 }}\r\n                animate={{ scale: 1, rotate: 0 }}\r\n                transition={{ \r\n                  type: \"spring\", \r\n                  bounce: 0.6, \r\n                  duration: 0.7\r\n                }}\r\n                className=\"inline-flex items-center justify-center mb-5\"\r\n              >\r\n                <motion.div\r\n                  animate={{ \r\n                    scale: [1, 1.1, 1],\r\n                    rotate: [0, -5, 5, 0]\r\n                  }}\r\n                  transition={{ \r\n                    duration: 1.5, \r\n                    repeat: Infinity,\r\n                    repeatDelay: 0.5\r\n                  }}\r\n                  className={`w-20 h-20 rounded-full bg-gradient-to-br ${details.gradient} flex items-center justify-center shadow-lg border border-border/50`}\r\n                >\r\n                  <IconComponent className={`h-10 w-10 ${details.color}`} />\r\n                </motion.div>\r\n              </motion.div>\r\n\r\n              {/* Milestone Text */}\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3, duration: 0.4 }}\r\n              >\r\n                <h2 className=\"text-2xl font-bold text-foreground mb-2\">\r\n                  {details.title}\r\n                </h2>\r\n                \r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  {details.message}\r\n                </p>\r\n              </motion.div>\r\n\r\n              {/* Points Badge */}\r\n              <motion.div\r\n                initial={{ opacity: 0, scale: 0 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                transition={{ delay: 0.5, type: \"spring\", bounce: 0.6 }}\r\n                className=\"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 border border-primary/30\"\r\n              >\r\n                <Trophy className=\"h-5 w-5 text-primary\" />\r\n                <span className=\"text-lg font-bold text-foreground\">\r\n                  +{pointsAwarded} Points\r\n                </span>\r\n              </motion.div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Trophy, Star, TrendingUp, Clock } from \"lucide-react\";\r\nimport { useRewardsSystem } from \"@/hooks/useRewardsSystem\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\nconst getTierColor = (tier: string) => {\r\n  const colors: Record<string, string> = {\r\n    bronze: \"text-orange-600 bg-orange-100 dark:bg-orange-900/20\",\r\n    silver: \"text-gray-600 bg-gray-100 dark:bg-gray-800/20\",\r\n    gold: \"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20\",\r\n    platinum: \"text-purple-600 bg-purple-100 dark:bg-purple-900/20\",\r\n  };\r\n  return colors[tier] || colors.bronze;\r\n};\r\n\r\nconst getNextTier = (currentTier: string) => {\r\n  const tiers = {\r\n    bronze: { next: 'silver', points: 500 },\r\n    silver: { next: 'gold', points: 2000 },\r\n    gold: { next: 'platinum', points: 5000 },\r\n    platinum: { next: 'legend', points: 10000 }\r\n  };\r\n  return tiers[currentTier as keyof typeof tiers] || { next: 'silver', points: 500 };\r\n};\r\n\r\nexport const RewardsWidget = () => {\r\n  const { points, loading } = useRewardsSystem();\r\n  const [expiringPoints, setExpiringPoints] = useState<{ points: number; expires_at: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (points) {\r\n      fetchExpiringPoints();\r\n    }\r\n  }, [points]);\r\n\r\n  const fetchExpiringPoints = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n\r\n    const { data, error } = await supabase.rpc('get_expiring_points', { \r\n      user_id_param: user.id \r\n    });\r\n\r\n    if (!error && data && data.length > 0) {\r\n      setExpiringPoints(data[0]);\r\n    }\r\n  };\r\n\r\n  if (loading || !points) {\r\n    return (\r\n      <Card className=\"p-4 animate-pulse\">\r\n        <div className=\"h-20 bg-muted rounded\"></div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const nextTierInfo = getNextTier(points.current_tier);\r\n  const progressToNext = (points.total_points / nextTierInfo.points) * 100;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.4 }}\r\n    >\r\n      <Card className=\"p-5 bg-gradient-to-br from-primary/5 via-background to-accent/5 border-primary/20\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center\">\r\n              <Trophy className=\"h-6 w-6 text-primary-foreground\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-foreground\">Rewards</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {points.total_points.toLocaleString()} points\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <Badge className={getTierColor(points.current_tier)}>\r\n            {points.current_tier.toUpperCase()}\r\n          </Badge>\r\n        </div>\r\n\r\n        {points.current_tier !== 'platinum' && (\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <span className=\"text-muted-foreground\">\r\n                Next tier: {nextTierInfo.next}\r\n              </span>\r\n              <span className=\"font-medium text-foreground\">\r\n                {nextTierInfo.points - points.total_points} points\r\n              </span>\r\n            </div>\r\n            <Progress value={Math.min(progressToNext, 100)} className=\"h-2\" />\r\n          </div>\r\n        )}\r\n\r\n        {points.current_tier === 'platinum' && (\r\n          <div className=\"flex items-center gap-2 text-sm text-purple-600 dark:text-purple-400\">\r\n            <Star className=\"h-4 w-4\" fill=\"currentColor\" />\r\n            <span className=\"font-medium\">Maximum tier achieved!</span>\r\n          </div>\r\n        )}\r\n\r\n        {expiringPoints && (\r\n          <div className=\"mt-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <Clock className=\"h-4 w-4 text-orange-600 dark:text-orange-400 mt-0.5\" />\r\n              <div className=\"text-sm\">\r\n                <p className=\"font-medium text-orange-900 dark:text-orange-100\">\r\n                  {expiringPoints.points} points expiring soon\r\n                </p>\r\n                <p className=\"text-xs text-orange-700 dark:text-orange-300\">\r\n                  Expires {formatDistanceToNow(new Date(expiringPoints.expires_at), { addSuffix: true })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Sparkles, TrendingUp, X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface GoldRateDialogProps {\r\n  currentGoldRate: number;\r\n  onUpdate: (newRate: number) => Promise<void>;\r\n  onSkip: () => void;\r\n}\r\n\r\nexport const GoldRateDialog = ({ currentGoldRate, onUpdate, onSkip }: GoldRateDialogProps) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [goldRate, setGoldRate] = useState(currentGoldRate.toString());\r\n  const [updating, setUpdating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check if we should show the dialog\r\n    const lastSkipTimestamp = localStorage.getItem(\"gold_rate_skip_timestamp\");\r\n    const lastPromptDate = localStorage.getItem(\"gold_rate_last_prompt\");\r\n    const now = new Date();\r\n    const today = now.toDateString();\r\n\r\n    // If user skipped, check if 24 hours have passed\r\n    if (lastSkipTimestamp) {\r\n      const skipTime = new Date(parseInt(lastSkipTimestamp));\r\n      const hoursSinceSkip = (now.getTime() - skipTime.getTime()) / (1000 * 60 * 60);\r\n      \r\n      if (hoursSinceSkip < 24) {\r\n        // Less than 24 hours since skip, don't show\r\n        return;\r\n      }\r\n    }\r\n\r\n    // If user updated today, don't show\r\n    if (lastPromptDate === today) {\r\n      return;\r\n    }\r\n\r\n    // Show dialog after a slight delay\r\n    setTimeout(() => setOpen(true), 1000);\r\n  }, []);\r\n\r\n  const handleUpdate = async () => {\r\n    const newRate = parseFloat(goldRate);\r\n\r\n    if (!goldRate || goldRate.trim() === \"\") {\r\n      toast.error(\"Please enter a gold rate\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(newRate) || newRate <= 0) {\r\n      toast.error(\"Please enter a valid positive number\");\r\n      return;\r\n    }\r\n\r\n    if (newRate < 1000 || newRate > 200000) {\r\n      toast.error(\"Gold rate must be between ₹1,000 and ₹2,00,000 per gram\");\r\n      return;\r\n    }\r\n\r\n    setUpdating(true);\r\n\r\n    try {\r\n      await onUpdate(newRate);\r\n      const today = new Date().toDateString();\r\n      localStorage.setItem(\"gold_rate_last_prompt\", today);\r\n      // Clear skip timestamp since rate was updated\r\n      localStorage.removeItem(\"gold_rate_skip_timestamp\");\r\n      setOpen(false);\r\n      toast.success(\"Gold rate updated successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error updating gold rate:\", error);\r\n      toast.error(\"Failed to update gold rate\");\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    const now = new Date();\r\n    // Store timestamp for 24-hour tracking\r\n    localStorage.setItem(\"gold_rate_skip_timestamp\", now.getTime().toString());\r\n    // Also store date to prevent multiple prompts on same day\r\n    localStorage.setItem(\"gold_rate_last_prompt\", now.toDateString());\r\n    setOpen(false);\r\n    onSkip();\r\n    toast.info(\"Gold rate update skipped. You won't be asked again for 24 hours.\");\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogContent className=\"sm:max-w-md border-2 border-primary/20 shadow-2xl\">\r\n        <button\r\n          onClick={handleSkip}\r\n          className=\"absolute right-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-accent hover:scale-110 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\"\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n          <span className=\"sr-only\">Close</span>\r\n        </button>\r\n\r\n        <DialogHeader className=\"space-y-4\">\r\n          <motion.div\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            transition={{ type: \"spring\", stiffness: 260, damping: 20 }}\r\n            className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border-2 border-amber-500/30 shadow-lg\"\r\n          >\r\n            <TrendingUp className=\"h-8 w-8 text-amber-600\" />\r\n          </motion.div>\r\n\r\n          <div className=\"space-y-2 text-center\">\r\n            <DialogTitle className=\"text-2xl font-bold bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent\">\r\n              Update Gold Rate\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-base\">\r\n              Start your day by updating today's 24K gold rate\r\n            </DialogDescription>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          className=\"space-y-5 pt-4\"\r\n        >\r\n          {/* Current Rate Display */}\r\n          <div className=\"bg-muted/50 rounded-lg p-4 border border-border/50\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground mb-1\">Current Rate</p>\r\n                <p className=\"text-xl font-bold text-amber-600\">\r\n                  ₹{currentGoldRate.toLocaleString('en-IN')}/g\r\n                </p>\r\n              </div>\r\n              <Sparkles className=\"h-6 w-6 text-amber-500/50\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* New Rate Input */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"goldRate\" className=\"text-sm font-medium\">\r\n              New Gold Rate (per gram)\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-medium\">\r\n                ₹\r\n              </span>\r\n              <Input\r\n                id=\"goldRate\"\r\n                type=\"number\"\r\n                value={goldRate}\r\n                onChange={(e) => setGoldRate(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && !updating) {\r\n                    handleUpdate();\r\n                  }\r\n                }}\r\n                placeholder={currentGoldRate.toString()}\r\n                min=\"1000\"\r\n                max=\"200000\"\r\n                step=\"100\"\r\n                disabled={updating}\r\n                className=\"pl-8 h-12 text-lg font-semibold border-2 focus:border-amber-500 focus:ring-amber-500\"\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              This will automatically recalculate prices for all products with weight\r\n            </p>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col gap-2 pt-2\">\r\n            <Button\r\n              onClick={handleUpdate}\r\n              disabled={updating}\r\n              size=\"lg\"\r\n              className=\"w-full h-12 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all\"\r\n            >\r\n              {updating ? (\r\n                <>\r\n                  <motion.div\r\n                    animate={{ rotate: 360 }}\r\n                    transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                    className=\"mr-2\"\r\n                  >\r\n                    <TrendingUp className=\"h-5 w-5\" />\r\n                  </motion.div>\r\n                  Updating...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <TrendingUp className=\"h-5 w-5 mr-2\" />\r\n                  Update Gold Rate\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={handleSkip}\r\n              disabled={updating}\r\n              variant=\"ghost\"\r\n              size=\"lg\"\r\n              className=\"w-full\"\r\n            >\r\n              Skip for Today\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Info Note */}\r\n          <div className=\"bg-amber-500/5 border border-amber-500/20 rounded-lg p-3\">\r\n            <p className=\"text-xs text-center text-muted-foreground leading-relaxed\">\r\n              💡 <strong>Pro Tip:</strong> Update your gold rate daily to keep your pricing accurate and competitive\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Plus, Share2, FileDown, Zap, X, ShoppingCart, Trophy, Sparkles, FileText, History, Calculator } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useKeyboardHeight } from \"@/hooks/useKeyboardHeight\";\r\nimport { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { UpgradePromptDialog } from \"@/components/UpgradePromptDialog\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\ninterface QuickActionsMenuProps {\r\n  onExportPDF: () => void;\r\n  onAutoCategorize?: () => void;\r\n}\r\nexport const QuickActionsMenu = ({\r\n  onExportPDF,\r\n  onAutoCategorize\r\n}: QuickActionsMenuProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [isUpgradeDialogOpen, setIsUpgradeDialogOpen] = useState(false);\r\n  const [upgradeLimitType, setUpgradeLimitType] = useState<'products' | 'share_links' | undefined>();\r\n  const {\r\n    keyboardHeight,\r\n    isKeyboardVisible\r\n  } = useKeyboardHeight();\r\n  const { canAddProducts, canAddShareLinks, productsRemaining, shareLinksRemaining } = usePlanLimits();\r\n  const handleAddProduct = () => {\r\n    if (!canAddProducts) {\r\n      setUpgradeLimitType('products');\r\n      setIsUpgradeDialogOpen(true);\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n    navigate(\"/add-product\");\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleShareCatalog = () => {\r\n    if (!canAddShareLinks) {\r\n      setUpgradeLimitType('share_links');\r\n      setIsUpgradeDialogOpen(true);\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n    navigate(\"/share\");\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const getProductLabel = () => {\r\n    if (!canAddProducts) return \"Add Product (Limit reached)\";\r\n    if (productsRemaining !== Infinity && productsRemaining < 100) {\r\n      return `Add Product (${productsRemaining} left)`;\r\n    }\r\n    return \"Add Product\";\r\n  };\r\n\r\n  const getShareLabel = () => {\r\n    if (!canAddShareLinks) return \"Share Catalog (Limit reached)\";\r\n    if (shareLinksRemaining !== Infinity && shareLinksRemaining < 100) {\r\n      return `Share Catalog (${shareLinksRemaining} left)`;\r\n    }\r\n    return \"Share Catalog\";\r\n  };\r\n\r\n  const actions = [{\r\n    icon: Plus,\r\n    label: getProductLabel(),\r\n    onClick: handleAddProduct,\r\n    gradient: \"from-primary/20 to-primary/5\",\r\n    iconColor: \"text-primary\",\r\n    disabled: !canAddProducts,\r\n    tooltip: !canAddProducts ? \"Product limit reached\" : undefined\r\n  }, {\r\n    icon: Share2,\r\n    label: getShareLabel(),\r\n    onClick: handleShareCatalog,\r\n    gradient: \"from-blue-500/20 to-blue-500/5\",\r\n    iconColor: \"text-blue-500\",\r\n    disabled: !canAddShareLinks,\r\n    tooltip: !canAddShareLinks ? \"Share link limit reached\" : undefined\r\n  }, ...(onAutoCategorize ? [{\r\n    icon: Sparkles,\r\n    label: \"Auto-Categorize\",\r\n    onClick: () => {\r\n      onAutoCategorize();\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-violet-500/20 to-violet-500/5\",\r\n    iconColor: \"text-violet-500\",\r\n    disabled: false,\r\n    tooltip: \"Automatically categorize products\"\r\n  }] : []), {\r\n    icon: ShoppingCart,\r\n    label: \"Purchase Inquiries\",\r\n    onClick: () => {\r\n      navigate(\"/purchase-inquiries\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-purple-500/20 to-purple-500/5\",\r\n    iconColor: \"text-purple-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: Trophy,\r\n    label: \"Rewards\",\r\n    onClick: () => {\r\n      navigate(\"/rewards\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-yellow-500/20 to-yellow-500/5\",\r\n    iconColor: \"text-yellow-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: FileText,\r\n    label: \"Create Invoice\",\r\n    onClick: () => {\r\n      navigate(\"/invoice-generator\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-orange-500/20 to-orange-500/5\",\r\n    iconColor: \"text-orange-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: History,\r\n    label: \"View Invoices\",\r\n    onClick: () => {\r\n      navigate(\"/invoice-history\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-amber-500/20 to-amber-500/5\",\r\n    iconColor: \"text-amber-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: Calculator,\r\n    label: \"Create Estimate\",\r\n    onClick: () => {\r\n      navigate(\"/manufacturing-cost\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-emerald-500/20 to-emerald-500/5\",\r\n    iconColor: \"text-emerald-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: History,\r\n    label: \"View Estimates\",\r\n    onClick: () => {\r\n      navigate(\"/estimate-history\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-cyan-500/20 to-cyan-500/5\",\r\n    iconColor: \"text-cyan-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: FileDown,\r\n    label: \"Export PDF\",\r\n    onClick: () => {\r\n      onExportPDF();\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-green-500/20 to-green-500/5\",\r\n    iconColor: \"text-green-500\",\r\n    disabled: false\r\n  }];\r\n\r\n  // Calculate dynamic bottom position based on keyboard\r\n  const bottomPosition = isKeyboardVisible ? `${keyboardHeight + 16}px` : '2rem';\r\n  return (\r\n    <>\r\n      <motion.div className=\"fixed right-8 z-50\" animate={{\r\n    bottom: bottomPosition\r\n  }} transition={{\r\n    duration: 0.3,\r\n    ease: \"easeOut\"\r\n  }}>\r\n      <AnimatePresence>\r\n        {isOpen && <motion.div initial={{\r\n        opacity: 0,\r\n        scale: 0.8,\r\n        y: 20\r\n      }} animate={{\r\n        opacity: 1,\r\n        scale: 1,\r\n        y: 0\r\n      }} exit={{\r\n        opacity: 0,\r\n        scale: 0.8,\r\n        y: 20\r\n      }} transition={{\r\n        duration: 0.2\r\n      }} className=\"absolute bottom-20 right-0 flex flex-col gap-3 mb-2\">\r\n            {actions.map((action, index) => {\r\n              const buttonContent = (\r\n                <motion.button \r\n                  key={action.label} \r\n                  initial={{\r\n                    opacity: 0,\r\n                    x: 20\r\n                  }} \r\n                  animate={{\r\n                    opacity: 1,\r\n                    x: 0\r\n                  }} \r\n                  exit={{\r\n                    opacity: 0,\r\n                    x: 20\r\n                  }} \r\n                  transition={{\r\n                    delay: index * 0.05\r\n                  }} \r\n                  onClick={() => {\r\n                    if (!action.disabled) {\r\n                      action.onClick();\r\n                      setIsOpen(false);\r\n                    }\r\n                  }} \r\n                  disabled={action.disabled}\r\n                  className={`\r\n                    group relative flex items-center gap-3 px-4 py-3 rounded-xl\r\n                    bg-gradient-to-br ${action.gradient} backdrop-blur-sm\r\n                    border border-border/50 shadow-lg hover:shadow-xl\r\n                    transition-all duration-300 hover:scale-105\r\n                    ${action.disabled ? 'opacity-50 cursor-not-allowed hover:scale-100' : ''}\r\n                  `}\r\n                >\r\n                  <div className={`\r\n                    w-10 h-10 rounded-lg bg-background/50 flex items-center justify-center\r\n                    ${action.iconColor} group-hover:scale-110 transition-transform duration-300\r\n                    ${action.disabled ? 'group-hover:scale-100' : ''}\r\n                  `}>\r\n                    <action.icon className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"font-medium text-foreground pr-2 whitespace-nowrap\">\r\n                    {action.label}\r\n                  </span>\r\n                </motion.button>\r\n              );\r\n\r\n              return action.tooltip ? (\r\n                <TooltipProvider key={action.label}>\r\n                  <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                      {buttonContent}\r\n                    </TooltipTrigger>\r\n                    <TooltipContent side=\"left\">\r\n                      <p>{action.tooltip}</p>\r\n                    </TooltipContent>\r\n                  </Tooltip>\r\n                </TooltipProvider>\r\n              ) : buttonContent;\r\n            })}\r\n          </motion.div>}\r\n      </AnimatePresence>\r\n\r\n      {/* Main toggle button */}\r\n      <motion.button whileHover={{\r\n      scale: 1.1\r\n    }} whileTap={{\r\n      scale: 0.95\r\n    }} onClick={() => setIsOpen(!isOpen)} className={`\r\n          relative w-16 h-16 rounded-full\r\n          bg-gradient-to-br from-primary to-primary/80\r\n          text-primary-foreground shadow-xl hover:shadow-2xl\r\n          transition-all duration-300\r\n          ${isOpen ? \"rotate-45\" : \"\"}\r\n        `}>\r\n        {/* Pulse animation when closed */}\r\n        {!isOpen && <span className=\"absolute inset-0 rounded-full bg-primary animate-ping opacity-20\" />}\r\n        \r\n        \r\n      </motion.button>\r\n\r\n      {/* Tooltip */}\r\n      <AnimatePresence>\r\n        {!isOpen && <motion.div initial={{\r\n        opacity: 0,\r\n        x: 10\r\n      }} animate={{\r\n        opacity: 1,\r\n        x: 0\r\n      }} exit={{\r\n        opacity: 0,\r\n        x: 10\r\n      }} className=\"absolute right-full mr-4 top-1/2 -translate-y-1/2 whitespace-nowrap\r\n              px-3 py-2 rounded-lg bg-background/95 backdrop-blur-sm\r\n              border border-border/50 shadow-lg text-sm font-medium\r\n              pointer-events-none\">\r\n            Quick Actions\r\n          </motion.div>}\r\n      </AnimatePresence>\r\n    </motion.div>\r\n    \r\n    <UpgradePromptDialog\r\n      open={isUpgradeDialogOpen}\r\n      onOpenChange={setIsUpgradeDialogOpen}\r\n      limitType={upgradeLimitType}\r\n    />\r\n  </>\r\n  );\r\n};","import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Award, CheckCircle2, Building2 } from \"lucide-react\";\r\n\r\ninterface BrandShowcaseProps {\r\n  vendorProfile: {\r\n    business_name?: string;\r\n    logo_url?: string;\r\n    business_story?: string;\r\n    certifications?: string[];\r\n    awards?: string[];\r\n  } | null;\r\n}\r\n\r\nexport const BrandShowcase = ({ vendorProfile }: BrandShowcaseProps) => {\r\n  if (!vendorProfile) return null;\r\n\r\n  const { business_story, certifications, awards } = vendorProfile;\r\n  \r\n  // Don't render if no content to show\r\n  if (!business_story && (!certifications || certifications.length === 0) && (!awards || awards.length === 0)) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Card className=\"mt-8 bg-gradient-to-br from-card via-card to-muted/20 border-border/50\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2 text-2xl\">\r\n          <Building2 className=\"h-6 w-6 text-primary\" />\r\n          About {vendorProfile.business_name || \"Our Brand\"}\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {business_story && (\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-3 text-foreground\">Our Story</h3>\r\n            <p className=\"text-muted-foreground leading-relaxed\">{business_story}</p>\r\n          </div>\r\n        )}\r\n\r\n        {certifications && certifications.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2 text-foreground\">\r\n              <CheckCircle2 className=\"h-5 w-5 text-primary\" />\r\n              Certifications\r\n            </h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {certifications.map((cert, index) => (\r\n                <Badge\r\n                  key={index}\r\n                  variant=\"secondary\"\r\n                  className=\"bg-primary/10 text-primary hover:bg-primary/20\"\r\n                >\r\n                  {cert}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {awards && awards.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-3 flex items-center gap-2 text-foreground\">\r\n              <Award className=\"h-5 w-5 text-primary\" />\r\n              Awards & Recognition\r\n            </h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {awards.map((award, index) => (\r\n                <Badge\r\n                  key={index}\r\n                  variant=\"secondary\"\r\n                  className=\"bg-accent/10 text-accent-foreground hover:bg-accent/20\"\r\n                >\r\n                  {award}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Percent, ArrowRight, ChevronLeft, Eye } from \"lucide-react\";\r\nimport { z } from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface BulkEditDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onUpdate: (updates: Record<string, any>) => Promise<void>;\r\n  selectedCount: number;\r\n  selectedProductIds: string[];\r\n}\r\n\r\ninterface ProductPreview {\r\n  id: string;\r\n  name: string;\r\n  sku: string;\r\n  changes: Array<{\r\n    field: string;\r\n    oldValue: any;\r\n    newValue: any;\r\n  }>;\r\n}\r\n\r\n// Validation schema\r\nconst bulkUpdateSchema = z.object({\r\n  category: z.string().max(100).optional(),\r\n  metal_type: z.string().max(50).optional(),\r\n  delivery_type: z.enum(['immediate', 'scheduled']).optional(),\r\n  dispatches_in_days: z.number().int().min(0).max(365).optional(),\r\n  status: z.string().max(50).optional(),\r\n  stock_quantity: z.number().int().min(0).optional(),\r\n  description: z.string().max(1000).optional(),\r\n  cost_price: z.number().min(0).optional(),\r\n  retail_price: z.number().min(0).optional(),\r\n  weight_grams: z.number().min(0).optional(),\r\n  diamond_color: z.string().max(50).optional(),\r\n  clarity: z.string().max(50).optional(),\r\n  gemstone: z.string().max(100).optional(),\r\n  gemstone_type: z.string().max(100).optional(),\r\n  certification: z.string().max(100).optional(),\r\n  cut: z.string().max(50).optional(),\r\n  polish: z.string().max(50).optional(),\r\n  symmetry: z.string().max(50).optional(),\r\n  purity_fraction_used: z.number().min(0).max(1).optional(),\r\n  pricingAdjustment: z.object({\r\n    type: z.enum(['markup', 'discount']),\r\n    percentage: z.number().min(0).max(100)\r\n  }).optional()\r\n});\r\n\r\nexport function BulkEditDialog({ open, onOpenChange, onUpdate, selectedCount, selectedProductIds }: BulkEditDialogProps) {\r\n  const [updating, setUpdating] = useState(false);\r\n  const [updates, setUpdates] = useState<Record<string, any>>({});\r\n  const [priceAdjustmentType, setPriceAdjustmentType] = useState<'markup' | 'discount'>('markup');\r\n  const [priceAdjustmentPercent, setPriceAdjustmentPercent] = useState(\"\");\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [productPreviews, setProductPreviews] = useState<ProductPreview[]>([]);\r\n  const [loadingPreview, setLoadingPreview] = useState(false);\r\n\r\n  const generatePreview = async () => {\r\n    setLoadingPreview(true);\r\n    try {\r\n      // Validate inputs first\r\n      const validationData: any = { ...updates };\r\n      \r\n      if (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0) {\r\n        validationData.pricingAdjustment = {\r\n          type: priceAdjustmentType,\r\n          percentage: parseFloat(priceAdjustmentPercent)\r\n        };\r\n      }\r\n\r\n      // Validate with zod\r\n      try {\r\n        bulkUpdateSchema.parse(validationData);\r\n      } catch (validationError: any) {\r\n        toast.error(`Validation error: ${validationError.errors[0]?.message || 'Invalid input'}`);\r\n        setLoadingPreview(false);\r\n        return;\r\n      }\r\n\r\n      // Fetch current product data\r\n      const { data: products, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\"id, name, sku, category, metal_type, delivery_type, dispatches_in_days, status, stock_quantity, description, cost_price, retail_price, weight_grams, diamond_color, clarity, cut, polish, symmetry, gemstone, gemstone_type, certification, purity_fraction_used\")\r\n        .in(\"id\", selectedProductIds);\r\n\r\n      if (error) throw error;\r\n      if (!products) {\r\n        toast.error(\"Failed to fetch product data\");\r\n        return;\r\n      }\r\n\r\n      // Calculate changes for each product\r\n      const previews: ProductPreview[] = products.map(product => {\r\n        const changes: Array<{ field: string; oldValue: any; newValue: any }> = [];\r\n\r\n        // Field mapping for display\r\n        const fieldNames: Record<string, string> = {\r\n          category: \"Category\",\r\n          metal_type: \"Metal Type\",\r\n          delivery_type: \"Delivery Type\",\r\n          dispatches_in_days: \"Dispatch Days\",\r\n          status: \"Status\",\r\n          stock_quantity: \"Stock Quantity\",\r\n          description: \"Description\",\r\n          cost_price: \"Cost Price\",\r\n          retail_price: \"Retail Price\",\r\n          weight_grams: \"Weight\",\r\n          diamond_color: \"Diamond Color\",\r\n          clarity: \"Clarity\",\r\n          cut: \"Cut\",\r\n          polish: \"Polish\",\r\n          symmetry: \"Symmetry\",\r\n          gemstone: \"Gemstone\",\r\n          gemstone_type: \"Gemstone Type\",\r\n          certification: \"Certification\",\r\n          purity_fraction_used: \"Purity Fraction\"\r\n        };\r\n\r\n        // Check each field for changes\r\n        Object.entries(updates).forEach(([key, value]) => {\r\n          if (value !== \"\" && value !== null && value !== \"no-change\") {\r\n            const oldValue = product[key as keyof typeof product];\r\n            if (oldValue !== value) {\r\n              changes.push({\r\n                field: fieldNames[key] || key,\r\n                oldValue: oldValue || \"—\",\r\n                newValue: value\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        // Handle pricing adjustments\r\n        if (validationData.pricingAdjustment && validationData.pricingAdjustment.percentage > 0) {\r\n          const multiplier = validationData.pricingAdjustment.type === 'markup'\r\n            ? (1 + validationData.pricingAdjustment.percentage / 100)\r\n            : (1 - validationData.pricingAdjustment.percentage / 100);\r\n\r\n          const newCostPrice = Math.max(0, product.cost_price * multiplier);\r\n          const newRetailPrice = Math.max(0, product.retail_price * multiplier);\r\n\r\n          // Only add if not overridden by fixed prices\r\n          if (!updates.cost_price) {\r\n            changes.push({\r\n              field: \"Cost Price\",\r\n              oldValue: `₹${product.cost_price.toFixed(2)}`,\r\n              newValue: `₹${newCostPrice.toFixed(2)}`\r\n            });\r\n          }\r\n\r\n          if (!updates.retail_price) {\r\n            changes.push({\r\n              field: \"Retail Price\",\r\n              oldValue: `₹${product.retail_price.toFixed(2)}`,\r\n              newValue: `₹${newRetailPrice.toFixed(2)}`\r\n            });\r\n          }\r\n        }\r\n\r\n        return {\r\n          id: product.id,\r\n          name: product.name,\r\n          sku: product.sku || \"N/A\",\r\n          changes\r\n        };\r\n      });\r\n\r\n      setProductPreviews(previews.filter(p => p.changes.length > 0));\r\n      setShowPreview(true);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to generate preview:\", error);\r\n      toast.error(`Failed to generate preview: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setLoadingPreview(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    setUpdating(true);\r\n    try {\r\n      const validationData: any = { ...updates };\r\n      \r\n      if (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0) {\r\n        validationData.pricingAdjustment = {\r\n          type: priceAdjustmentType,\r\n          percentage: parseFloat(priceAdjustmentPercent)\r\n        };\r\n      }\r\n\r\n      await onUpdate(validationData);\r\n      setUpdates({});\r\n      setPriceAdjustmentPercent(\"\");\r\n      setShowPreview(false);\r\n      onOpenChange(false);\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setShowPreview(false);\r\n  };\r\n\r\n  // Reset state when dialog closes\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setShowPreview(false);\r\n      setProductPreviews([]);\r\n      setUpdates({});\r\n      setPriceAdjustmentPercent(\"\");\r\n    }\r\n  }, [open]);\r\n\r\n  const handleFieldChange = (field: string, value: string) => {\r\n    if (value === \"\" || value === \"no-change\") {\r\n      const newUpdates = { ...updates };\r\n      delete newUpdates[field];\r\n      setUpdates(newUpdates);\r\n    } else {\r\n      setUpdates({ ...updates, [field]: value });\r\n    }\r\n  };\r\n\r\n  const hasChanges = Object.keys(updates).length > 0 || (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            {showPreview && (\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleBack} className=\"mr-2 -ml-2\">\r\n                <ChevronLeft className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n            {showPreview ? \"Preview Changes\" : \"Bulk Edit Products\"}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {showPreview \r\n              ? `Review changes for ${productPreviews.length} product${productPreviews.length !== 1 ? 's' : ''} before applying`\r\n              : `Update ${selectedCount} selected product${selectedCount !== 1 ? 's' : ''}. Leave fields empty to keep existing values.`\r\n            }\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {showPreview ? (\r\n          <div className=\"flex-1 overflow-hidden flex flex-col\">\r\n            {productPreviews.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <p className=\"text-muted-foreground\">No changes detected for any products.</p>\r\n              </div>\r\n            ) : (\r\n              <ScrollArea className=\"flex-1 pr-4\">\r\n                <div className=\"space-y-6 pb-4\">\r\n                  {productPreviews.map((preview, idx) => (\r\n                    <div key={preview.id} className=\"border rounded-lg p-4 bg-muted/30\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-sm\">{preview.name}</h4>\r\n                          <p className=\"text-xs text-muted-foreground\">SKU: {preview.sku}</p>\r\n                        </div>\r\n                        <Badge variant=\"secondary\" className=\"text-xs\">\r\n                          {preview.changes.length} change{preview.changes.length !== 1 ? 's' : ''}\r\n                        </Badge>\r\n                      </div>\r\n                      \r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead className=\"w-[30%]\">Field</TableHead>\r\n                            <TableHead className=\"w-[35%]\">Current Value</TableHead>\r\n                            <TableHead className=\"w-[35%]\">New Value</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {preview.changes.map((change, changeIdx) => (\r\n                            <TableRow key={changeIdx}>\r\n                              <TableCell className=\"font-medium text-sm\">{change.field}</TableCell>\r\n                              <TableCell className=\"text-sm text-muted-foreground\">\r\n                                {typeof change.oldValue === 'number' \r\n                                  ? change.oldValue.toLocaleString()\r\n                                  : change.oldValue}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-sm font-medium flex items-center gap-2\">\r\n                                <ArrowRight className=\"h-3 w-3 text-primary\" />\r\n                                {typeof change.newValue === 'number'\r\n                                  ? change.newValue.toLocaleString()\r\n                                  : change.newValue}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </ScrollArea>\r\n            )}\r\n          </div>\r\n        ) : (\r\n\r\n        <Tabs defaultValue=\"basic\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n            <TabsTrigger value=\"jewelry\">Jewelry Details</TabsTrigger>\r\n            <TabsTrigger value=\"pricing\">Pricing</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"basic\" className=\"space-y-4 mt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={100}\r\n                  value={updates.category || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"category\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"metal_type\">Metal Type</Label>\r\n                <Select\r\n                  value={updates.metal_type || \"no-change\"}\r\n                  onValueChange={(value) => handleFieldChange(\"metal_type\", value)}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"No change\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"no-change\">No change</SelectItem>\r\n                    <SelectItem value=\"Gold\">Gold</SelectItem>\r\n                    <SelectItem value=\"Silver\">Silver</SelectItem>\r\n                    <SelectItem value=\"Platinum\">Platinum</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"delivery_type\">Delivery Type</Label>\r\n                <Select\r\n                  value={updates.delivery_type || \"no-change\"}\r\n                  onValueChange={(value) => handleFieldChange(\"delivery_type\", value)}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"No change\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"no-change\">No change</SelectItem>\r\n                    <SelectItem value=\"immediate\">Immediate</SelectItem>\r\n                    <SelectItem value=\"scheduled\">Scheduled</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dispatches_in_days\">Dispatch Days</Label>\r\n                <Input\r\n                  id=\"dispatches_in_days\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max=\"365\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  value={updates.dispatches_in_days || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"dispatches_in_days\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"status\">Status</Label>\r\n                <Input\r\n                  id=\"status\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.status || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"status\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"stock_quantity\">Stock Quantity</Label>\r\n                <Input\r\n                  id=\"stock_quantity\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  value={updates.stock_quantity || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"stock_quantity\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"description\">Description</Label>\r\n              <Input\r\n                id=\"description\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={1000}\r\n                value={updates.description || \"\"}\r\n                onChange={(e) => handleFieldChange(\"description\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"weight_grams\">Weight (g)</Label>\r\n              <Input\r\n                id=\"weight_grams\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                placeholder=\"Leave empty\"\r\n                value={updates.weight_grams || \"\"}\r\n                onChange={(e) => handleFieldChange(\"weight_grams\", e.target.value)}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"jewelry\" className=\"space-y-4 mt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"diamond_color\">Diamond Color</Label>\r\n                <Input\r\n                  id=\"diamond_color\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.diamond_color || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"diamond_color\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"clarity\">Clarity</Label>\r\n                <Input\r\n                  id=\"clarity\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.clarity || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"clarity\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"cut\">Cut</Label>\r\n                <Input\r\n                  id=\"cut\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.cut || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"cut\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"polish\">Polish</Label>\r\n                <Input\r\n                  id=\"polish\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.polish || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"polish\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"symmetry\">Symmetry</Label>\r\n              <Input\r\n                id=\"symmetry\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={50}\r\n                value={updates.symmetry || \"\"}\r\n                onChange={(e) => handleFieldChange(\"symmetry\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"gemstone\">Gemstone</Label>\r\n              <Input\r\n                id=\"gemstone\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.gemstone || \"\"}\r\n                onChange={(e) => handleFieldChange(\"gemstone\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"gemstone_type\">Gemstone Type</Label>\r\n              <Input\r\n                id=\"gemstone_type\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.gemstone_type || \"\"}\r\n                onChange={(e) => handleFieldChange(\"gemstone_type\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"certification\">Certification</Label>\r\n              <Input\r\n                id=\"certification\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.certification || \"\"}\r\n                onChange={(e) => handleFieldChange(\"certification\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"purity_fraction_used\">Purity Fraction (0-1)</Label>\r\n              <Input\r\n                id=\"purity_fraction_used\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                max=\"1\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                value={updates.purity_fraction_used || \"\"}\r\n                onChange={(e) => handleFieldChange(\"purity_fraction_used\", e.target.value)}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"pricing\" className=\"space-y-4 mt-4\">\r\n            <div className=\"bg-muted/50 p-4 rounded-lg space-y-4\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <Percent className=\"h-5 w-5 text-primary\" />\r\n                <h4 className=\"font-semibold\">Percentage-Based Price Adjustment</h4>\r\n              </div>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Apply a percentage markup or discount to all selected products\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"adjustment_type\">Adjustment Type</Label>\r\n                  <Select\r\n                    value={priceAdjustmentType}\r\n                    onValueChange={(value: 'markup' | 'discount') => setPriceAdjustmentType(value)}\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"markup\">Markup (Increase Price)</SelectItem>\r\n                      <SelectItem value=\"discount\">Discount (Decrease Price)</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"adjustment_percent\">Percentage (%)</Label>\r\n                  <Input\r\n                    id=\"adjustment_percent\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    placeholder=\"e.g., 10 for 10%\"\r\n                    value={priceAdjustmentPercent}\r\n                    onChange={(e) => setPriceAdjustmentPercent(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0 && (\r\n                <div className=\"bg-background p-3 rounded border border-border\">\r\n                  <p className=\"text-sm font-medium\">\r\n                    {priceAdjustmentType === 'markup' ? '↑' : '↓'} \r\n                    {' '}{priceAdjustmentType === 'markup' ? 'Increase' : 'Decrease'} prices by {priceAdjustmentPercent}%\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    Example: ₹1,000 → ₹{priceAdjustmentType === 'markup' \r\n                      ? (1000 * (1 + parseFloat(priceAdjustmentPercent) / 100)).toFixed(0)\r\n                      : (1000 * (1 - parseFloat(priceAdjustmentPercent) / 100)).toFixed(0)}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h4 className=\"font-semibold mb-3\">Or Set Fixed Prices</h4>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"cost_price\">Cost Price (₹)</Label>\r\n                  <Input\r\n                    id=\"cost_price\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    placeholder=\"Leave empty\"\r\n                    value={updates.cost_price || \"\"}\r\n                    onChange={(e) => handleFieldChange(\"cost_price\", e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"retail_price\">Retail Price (₹)</Label>\r\n                  <Input\r\n                    id=\"retail_price\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    placeholder=\"Leave empty\"\r\n                    value={updates.retail_price || \"\"}\r\n                    onChange={(e) => handleFieldChange(\"retail_price\", e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mt-2\">\r\n                Note: Fixed prices will override percentage adjustments\r\n              </p>\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n        )}\r\n\r\n        <DialogFooter className=\"mt-4\">\r\n          {showPreview ? (\r\n            <>\r\n              <Button variant=\"outline\" onClick={handleBack} disabled={updating}>\r\n                Back to Edit\r\n              </Button>\r\n              <Button \r\n                onClick={handleUpdate} \r\n                disabled={updating || productPreviews.length === 0}\r\n                className=\"bg-primary\"\r\n              >\r\n                {updating && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Confirm & Apply Changes\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={loadingPreview}>\r\n                Cancel\r\n              </Button>\r\n              <Button \r\n                onClick={generatePreview} \r\n                disabled={loadingPreview || !hasChanges}\r\n              >\r\n                {loadingPreview ? (\r\n                  <>\r\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    Loading Preview...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Eye className=\"mr-2 h-4 w-4\" />\r\n                    Preview Changes\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { AlertTriangle } from \"lucide-react\";\r\n\r\ninterface DeleteConfirmationDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: () => void;\r\n  products: Array<{ id: string; name: string; sku?: string }>;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport const DeleteConfirmationDialog = ({\r\n  open,\r\n  onOpenChange,\r\n  onConfirm,\r\n  products,\r\n  isDeleting = false\r\n}: DeleteConfirmationDialogProps) => {\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent className=\"max-w-2xl\">\r\n        <AlertDialogHeader>\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-destructive\" />\r\n            <AlertDialogTitle>Delete Selected Products?</AlertDialogTitle>\r\n          </div>\r\n          <AlertDialogDescription>\r\n            You are about to delete <strong>{products.length} product(s)</strong>. This action cannot be undone.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        \r\n        <div className=\"my-4\">\r\n          <p className=\"text-sm font-medium mb-2\">Products to be deleted:</p>\r\n          <ScrollArea className=\"h-[200px] w-full border rounded-md p-4\">\r\n            <div className=\"space-y-2\">\r\n              {products.map((product, index) => (\r\n                <div \r\n                  key={product.id} \r\n                  className=\"flex items-start gap-2 py-2 border-b last:border-0\"\r\n                >\r\n                  <span className=\"text-xs text-muted-foreground min-w-[20px]\">\r\n                    {index + 1}.\r\n                  </span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium\">{product.name}</p>\r\n                    {product.sku && (\r\n                      <p className=\"text-xs text-muted-foreground\">SKU: {product.sku}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </ScrollArea>\r\n        </div>\r\n\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={onConfirm} \r\n            disabled={isDeleting}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n          >\r\n            {isDeleting ? \"Deleting...\" : `Delete ${products.length} Product${products.length > 1 ? 's' : ''}`}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Breadcrumb = React.forwardRef<\r\n  HTMLElement,\r\n  React.ComponentPropsWithoutRef<\"nav\"> & {\r\n    separator?: React.ReactNode;\r\n  }\r\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />);\r\nBreadcrumb.displayName = \"Breadcrumb\";\r\n\r\nconst BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<\"ol\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <ol\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nBreadcrumbList.displayName = \"BreadcrumbList\";\r\n\r\nconst BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<\"li\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <li ref={ref} className={cn(\"inline-flex items-center gap-1.5\", className)} {...props} />\r\n  ),\r\n);\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\";\r\n\r\nconst BreadcrumbLink = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentPropsWithoutRef<\"a\"> & {\r\n    asChild?: boolean;\r\n  }\r\n>(({ asChild, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\";\r\n\r\n  return <Comp ref={ref} className={cn(\"transition-colors hover:text-foreground\", className)} {...props} />;\r\n});\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\";\r\n\r\nconst BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<\"span\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <span\r\n      ref={ref}\r\n      role=\"link\"\r\n      aria-disabled=\"true\"\r\n      aria-current=\"page\"\r\n      className={cn(\"font-normal text-foreground\", className)}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\";\r\n\r\nconst BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<\"li\">) => (\r\n  <li role=\"presentation\" aria-hidden=\"true\" className={cn(\"[&>svg]:size-3.5\", className)} {...props}>\r\n    {children ?? <ChevronRight />}\r\n  </li>\r\n);\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\";\r\n\r\nconst BreadcrumbEllipsis = ({ className, ...props }: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More</span>\r\n  </span>\r\n);\r\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\";\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbEllipsis,\r\n};\r\n","import { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { ApprovalGuard } from \"@/components/ApprovalGuard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ProductCard } from \"@/components/ProductCard\";\r\nimport { ProductCardSkeleton } from \"@/components/ProductCardSkeleton\";\r\nimport { CatalogFilters, FilterState } from \"@/components/CatalogFilters\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { toast } from \"sonner\";\r\nimport { Gem, Plus, LogOut, Share2, FileSpreadsheet, Trash2, Heart, Users, LayoutDashboard, Menu, Building2, Shield, FileDown, Edit, Loader2, X, Upload, Video, ShoppingCart, Sparkles } from \"lucide-react\";\r\nimport { AutoCategorizationDialog } from \"@/components/AutoCategorizationDialog\";\r\nimport { analyzeCatalog, CategorySuggestion } from \"@/utils/productCategorization\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useVendorPermissions } from \"@/hooks/useVendorPermissions\";\r\nimport { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { exportCatalogToPDF } from \"@/utils/pdfExport\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { PlanLimitWarning } from \"@/components/PlanLimitWarning\";\r\nimport { PlanUsageBanner } from \"@/components/PlanUsageBanner\";\r\nimport { UpgradePromptDialog } from \"@/components/UpgradePromptDialog\";\r\nimport { PlanUpgradeCelebration } from \"@/components/PlanUpgradeCelebration\";\r\nimport { PlanBenefitsShowcase } from \"@/components/PlanBenefitsShowcase\";\r\nimport { ReferralCelebration } from \"@/components/ReferralCelebration\";\r\nimport { MilestoneCelebration } from \"@/components/MilestoneCelebration\";\r\nimport { RewardsWidget } from \"@/components/RewardsWidget\";\r\nimport { useMilestones } from \"@/hooks/useMilestones\";\r\nimport { useRewardsSystem } from \"@/hooks/useRewardsSystem\";\r\nimport { GoldRateDialog } from \"@/components/GoldRateDialog\";\r\nimport { FloatingQRCodes } from \"@/components/FloatingQRCodes\";\r\nimport { ProductShowcaseCarousel } from \"@/components/ProductShowcaseCarousel\";\r\nimport { QuickActionsMenu } from \"@/components/QuickActionsMenu\";\r\nimport { BrandShowcase } from \"@/components/BrandShowcase\";\r\nimport { BulkEditDialog } from \"@/components/BulkEditDialog\";\r\nimport { DeleteConfirmationDialog } from \"@/components/DeleteConfirmationDialog\";\r\nimport { BackToHomeButton } from \"@/components/BackToHomeButton\";\r\nimport { Breadcrumb, BreadcrumbList, BreadcrumbItem, BreadcrumbLink, BreadcrumbSeparator, BreadcrumbPage } from \"@/components/ui/breadcrumb\";\r\nimport { NavLink } from \"@/components/NavLink\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nconst Catalog = () => {\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [allProducts, setAllProducts] = useState<any[]>([]); // Store all products for counting\r\n  const [loading, setLoading] = useState(true);\r\n  const [transitioning, setTransitioning] = useState(false); // For smooth transitions\r\n  const [usdRate, setUsdRate] = useState(87.67);\r\n  const [goldRate, setGoldRate] = useState(85000);\r\n  const [editingGoldRate, setEditingGoldRate] = useState(false);\r\n  const [updatingGoldRate, setUpdatingGoldRate] = useState(false);\r\n  const [tempGoldRate, setTempGoldRate] = useState(\"\");\r\n  const [selectedProducts, setSelectedProducts] = useState<Set<string>>(new Set());\r\n  const [vendorProfile, setVendorProfile] = useState<any>(null);\r\n  const [selectedProductType, setSelectedProductType] = useState<string>(\"Jewellery\");\r\n  const [approvedCategories, setApprovedCategories] = useState<string[]>([\"Jewellery\"]);\r\n  const [isUpgradeDialogOpen, setIsUpgradeDialogOpen] = useState(false);\r\n  const [upgradeLimitType, setUpgradeLimitType] = useState<'products' | 'share_links' | undefined>();\r\n  const [showCelebration, setShowCelebration] = useState(false);\r\n  const [celebrationPlan, setCelebrationPlan] = useState(\"\");\r\n  const [showBenefits, setShowBenefits] = useState(false);\r\n  const [showReferralCelebration, setShowReferralCelebration] = useState(false);\r\n  const [referralType, setReferralType] = useState<'team_member' | 'customer'>('team_member');\r\n  const [referredName, setReferredName] = useState(\"\");\r\n  const [bulkEditOpen, setBulkEditOpen] = useState(false);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [autoCategorizationOpen, setAutoCategorizationOpen] = useState(false);\r\n  const [categorySuggestions, setCategorySuggestions] = useState<CategorySuggestion[]>([]);\r\n  \r\n  // Rewards and milestones\r\n  const { awardPoints } = useRewardsSystem();\r\n  const { latestMilestone, clearLatestMilestone } = useMilestones();\r\n  const [filters, setFilters] = useState<FilterState>({\r\n    category: \"\",\r\n    metalType: \"\",\r\n    minPrice: \"\",\r\n    maxPrice: \"\",\r\n    diamondColor: \"\",\r\n    diamondClarity: \"\",\r\n    searchQuery: \"\",\r\n    deliveryType: \"\",\r\n    gemstoneType: \"\",\r\n    color: \"\",\r\n    clarity: \"\",\r\n    cut: \"\",\r\n    minCarat: \"\",\r\n    maxCarat: \"\",\r\n    diamondType: \"\",\r\n    shape: \"\",\r\n    polish: \"\",\r\n    symmetry: \"\",\r\n    fluorescence: \"\",\r\n    lab: \"\"\r\n  });\r\n  const navigate = useNavigate();\r\n  const {\r\n    isAdmin,\r\n    isTeamMember,\r\n    loading: roleLoading\r\n  } = useUserRole();\r\n  const {\r\n    permissions,\r\n    loading: permissionsLoading\r\n  } = useVendorPermissions();\r\n  const { canAddProducts, canAddShareLinks, productsRemaining, shareLinksRemaining } = usePlanLimits();\r\n\r\n  // Load more pagination state\r\n  const [displayCount, setDisplayCount] = useState(100);\r\n  const LOAD_MORE_COUNT = 100;\r\n  \r\n  // Setup real-time listener for plan upgrades\r\n  const setupPlanUpgradeListener = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n\r\n    // Get current plan to compare\r\n    const { data: currentPermissions } = await supabase\r\n      .from(\"vendor_permissions\")\r\n      .select(\"subscription_plan\")\r\n      .eq(\"user_id\", user.id)\r\n      .single();\r\n\r\n    if (!currentPermissions) return;\r\n\r\n    // Store current plan in session storage\r\n    const storedPlan = sessionStorage.getItem('current_plan');\r\n    if (!storedPlan) {\r\n      sessionStorage.setItem('current_plan', currentPermissions.subscription_plan);\r\n    }\r\n\r\n    // Subscribe to changes\r\n    const channel = supabase\r\n      .channel('plan-changes')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'UPDATE',\r\n          schema: 'public',\r\n          table: 'vendor_permissions',\r\n          filter: `user_id=eq.${user.id}`\r\n        },\r\n        (payload: any) => {\r\n          const newPlan = payload.new.subscription_plan;\r\n          const oldPlan = sessionStorage.getItem('current_plan');\r\n          \r\n          // Plan hierarchy for comparison\r\n          const planLevels: Record<string, number> = {\r\n            'starter': 1,\r\n            'professional': 2,\r\n            'enterprise': 3\r\n          };\r\n\r\n          // Check if it's an upgrade\r\n          if (oldPlan && planLevels[newPlan] > planLevels[oldPlan]) {\r\n            // Store new plan\r\n            sessionStorage.setItem('current_plan', newPlan);\r\n            \r\n            // Show celebration\r\n            const planNames: Record<string, string> = {\r\n              'professional': 'Professional Plan',\r\n              'enterprise': 'Enterprise Plan'\r\n            };\r\n            setCelebrationPlan(planNames[newPlan] || newPlan);\r\n            setShowCelebration(true);\r\n            \r\n            // Show benefits after celebration\r\n            setTimeout(() => {\r\n              setShowCelebration(false);\r\n              setShowBenefits(true);\r\n            }, 3500);\r\n            \r\n            // Refresh data to get new limits\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 8000);\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  };\r\n\r\n  // Setup referral celebration listener\r\n  const setupReferralListener = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n\r\n    // Only setup for admins/owners who can see team additions\r\n    const { data: roleData } = await supabase\r\n      .from('user_roles')\r\n      .select('role')\r\n      .eq('user_id', user.id)\r\n      .single();\r\n\r\n    if (!roleData || roleData.role !== 'admin') return;\r\n\r\n    // Listen for new user approval statuses (new signups)\r\n    const referralChannel = supabase\r\n      .channel('referral-additions')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'INSERT',\r\n          schema: 'public',\r\n          table: 'user_approval_status',\r\n        },\r\n        async (payload: any) => {\r\n          // Show celebration for new user signups\r\n          if (payload.new.email) {\r\n            setReferredName(payload.new.email.split('@')[0]);\r\n            setReferralType('customer');\r\n            setShowReferralCelebration(true);\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(referralChannel);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!roleLoading && isAdmin) {\r\n      navigate(\"/admin\");\r\n    }\r\n  }, [isAdmin, roleLoading, navigate]);\r\n  useEffect(() => {\r\n    const cachedRate = sessionStorage.getItem('usd_rate');\r\n    const cachedTime = sessionStorage.getItem('usd_rate_time');\r\n    if (cachedRate && cachedTime && Date.now() - parseInt(cachedTime) < 3600000) {\r\n      setUsdRate(parseFloat(cachedRate));\r\n    } else {\r\n      fetchUSDRate();\r\n    }\r\n    \r\n    // Run all queries in parallel for faster loading\r\n    Promise.all([\r\n      fetchAllProducts(),\r\n      fetchProducts(),\r\n      fetchVendorProfile(),\r\n      fetchApprovedCategories(),\r\n    ]).then(() => {\r\n      // Setup listeners after data is loaded\r\n      setupPlanUpgradeListener();\r\n      setupReferralListener();\r\n    });\r\n  }, []);\r\n  const fetchApprovedCategories = async () => {\r\n    try {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      const {\r\n        data,\r\n        error\r\n      } = await supabase.from(\"user_approval_status\").select(\"approved_categories\").eq(\"user_id\", user.id).single();\r\n      if (error) throw error;\r\n      const approved = data?.approved_categories || [\"Jewellery\"];\r\n      setApprovedCategories(approved);\r\n      setSelectedProductType(approved[0]);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch approved categories:\", error);\r\n    }\r\n  };\r\n  const fetchUSDRate = async () => {\r\n    try {\r\n      const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');\r\n      const data = await response.json();\r\n      if (data.rates?.INR) {\r\n        setUsdRate(data.rates.INR);\r\n        sessionStorage.setItem('usd_rate', data.rates.INR.toString());\r\n        sessionStorage.setItem('usd_rate_time', Date.now().toString());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch USD rate:\", error);\r\n    }\r\n  };\r\n  const fetchVendorProfile = async () => {\r\n    try {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      const {\r\n        data,\r\n        error\r\n      } = await supabase.from(\"vendor_profiles\").select(\"*\").eq(\"user_id\", user.id).maybeSingle();\r\n      if (error && error.code !== 'PGRST116') {\r\n        console.error(\"Error fetching vendor profile:\", error);\r\n      } else if (data) {\r\n        setVendorProfile(data);\r\n        if (data.gold_rate_24k_per_gram) {\r\n          setGoldRate(data.gold_rate_24k_per_gram);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch vendor profile:\", error);\r\n    }\r\n  };\r\n  const handleUpdateGoldRate = async (newRate: number) => {\r\n    const {\r\n      data: {\r\n        user\r\n      }\r\n    } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n    const {\r\n      error: profileError\r\n    } = await supabase.from(\"vendor_profiles\").update({\r\n      gold_rate_24k_per_gram: newRate,\r\n      gold_rate_updated_at: new Date().toISOString()\r\n    }).eq(\"user_id\", user.id);\r\n    if (profileError) throw profileError;\r\n    const purity = 0.76;\r\n    const updatedProducts = products.filter(p => p.weight_grams).map(product => {\r\n      const oldGoldValue = product.weight_grams * purity * goldRate;\r\n      const newGoldValue = product.weight_grams * purity * newRate;\r\n      const goldValueDifference = newGoldValue - oldGoldValue;\r\n      return {\r\n        id: product.id,\r\n        cost_price: Math.max(0, product.cost_price + goldValueDifference),\r\n        retail_price: Math.max(0, product.retail_price + goldValueDifference)\r\n      };\r\n    });\r\n    let successCount = 0;\r\n    for (const update of updatedProducts) {\r\n      const {\r\n        error\r\n      } = await supabase.from(\"products\").update({\r\n        cost_price: update.cost_price,\r\n        retail_price: update.retail_price\r\n      }).eq(\"id\", update.id);\r\n      if (!error) successCount++;\r\n    }\r\n    setGoldRate(newRate);\r\n    await fetchProducts();\r\n    toast.success(`Gold rate updated to ₹${newRate.toLocaleString('en-IN')}/g and ${successCount} product prices recalculated!`);\r\n  };\r\n  const handleUpdateGoldRateManual = async () => {\r\n    const newRate = parseFloat(tempGoldRate);\r\n    if (!tempGoldRate || tempGoldRate.trim() === \"\") {\r\n      toast.error(\"Please enter a gold rate\");\r\n      return;\r\n    }\r\n    if (isNaN(newRate) || newRate <= 0) {\r\n      toast.error(\"Please enter a valid positive number for gold rate\");\r\n      return;\r\n    }\r\n    if (newRate < 1000 || newRate > 200000) {\r\n      toast.error(\"Gold rate must be between ₹1,000 and ₹2,00,000 per gram\");\r\n      return;\r\n    }\r\n    setUpdatingGoldRate(true);\r\n    try {\r\n      await handleUpdateGoldRate(newRate);\r\n      setEditingGoldRate(false);\r\n      setTempGoldRate(\"\");\r\n      setTimeout(() => {\r\n        setUpdatingGoldRate(false);\r\n        window.location.reload();\r\n      }, 1500);\r\n    } catch (error) {\r\n      console.error(\"Failed to update gold rate:\", error);\r\n      toast.error(\"Failed to update gold rate. Please try again.\");\r\n      setUpdatingGoldRate(false);\r\n    }\r\n  };\r\n\r\n  // Predefined categories\r\n  const predefinedCategories = [\r\n    \"CVD BANGLE\",\r\n    \"CVD BRACELET\",\r\n    \"CVD GENTS RING\",\r\n    \"CVD LADIES RING\",\r\n    \"CVD PANDENT\",\r\n    \"CVD TOPS\",\r\n    \"DIAMOND BRACELET\", \r\n    \"DIAMOND GENTS RING\",\r\n    \"DIAMOND LADIES RING\", \r\n    \"DIAMOND PANDENT\",\r\n    \"DIAMOND PANDENT SET\", \r\n    \"DIAMOND SET\", \r\n    \"DIAMOND TOPS\", \r\n    \"GOLD BRACELET\",\r\n    \"GOLD PANDENT\",\r\n    \"GOLD TOPS\",\r\n    \"LAB-GROWN DIAMOND\",\r\n    \"MOISSANITE JEWELLERY\",\r\n    \"MOISSANITE PENDANT\",\r\n    \"MOISSANITE RING\"\r\n  ];\r\n\r\n  // Extract unique filter values and merge with predefined\r\n  const categories = useMemo(() => {\r\n    const productCategories = products.map(p => p.category).filter(Boolean);\r\n    const allCategories = [...new Set([...predefinedCategories, ...productCategories])];\r\n    return allCategories.sort();\r\n  }, [products]);\r\n  \r\n  // Calculate category counts based on current filters (excluding category filter itself)\r\n  const categoryCounts = useMemo(() => {\r\n    // First, filter products by all criteria EXCEPT category\r\n    const productsMatchingOtherFilters = products.filter(product => {\r\n      // Search query\r\n      if (filters.searchQuery) {\r\n        const query = filters.searchQuery.toLowerCase().trim();\r\n        const searchableFields = [\r\n          product.product_type, product.diamond_color, product.d_wt_1?.toString(), \r\n          product.d_wt_2?.toString(), product.purity_fraction_used?.toString(), \r\n          product.d_rate_1?.toString(), product.pointer_diamond?.toString(), \r\n          product.d_value?.toString(), product.mkg?.toString(), \r\n          product.certification_cost?.toString(), product.gemstone_cost?.toString(), \r\n          product.total_usd?.toString(), product.name, product.category, product.sku, \r\n          product.description, product.metal_type, product.gemstone, product.color, \r\n          product.clarity, product.weight_grams?.toString(), product.diamond_weight?.toString(), \r\n          product.net_weight?.toString(), product.cost_price?.toString(), \r\n          product.retail_price?.toString(), product.per_carat_price?.toString(), \r\n          product.gold_per_gram_price?.toString()\r\n        ].filter(Boolean);\r\n        const matchFound = searchableFields.some(field => field?.toLowerCase().includes(query));\r\n        if (!matchFound) return false;\r\n      }\r\n      \r\n      // Skip category filter here - we count per category below\r\n      \r\n      if (filters.metalType && product.metal_type?.toUpperCase().trim() !== filters.metalType.toUpperCase().trim()) return false;\r\n      if (filters.minPrice) {\r\n        const minPrice = parseFloat(filters.minPrice);\r\n        if (product.retail_price < minPrice) return false;\r\n      }\r\n      if (filters.maxPrice) {\r\n        const maxPrice = parseFloat(filters.maxPrice);\r\n        if (product.retail_price > maxPrice) return false;\r\n      }\r\n      if (filters.diamondColor) {\r\n        const color = product.gemstone?.split(' ')[0];\r\n        if (color?.toUpperCase().trim() !== filters.diamondColor.toUpperCase().trim()) return false;\r\n      }\r\n      if (filters.diamondClarity) {\r\n        const clarity = product.gemstone?.split(' ')[1];\r\n        if (clarity?.toUpperCase().trim() !== filters.diamondClarity.toUpperCase().trim()) return false;\r\n      }\r\n      if (filters.deliveryType && product.delivery_type !== filters.deliveryType) return false;\r\n      \r\n      return true;\r\n    });\r\n\r\n    // Now count how many products in each category match the other filters\r\n    const counts: Record<string, number> = {\r\n      all: productsMatchingOtherFilters.length\r\n    };\r\n    \r\n    categories.forEach(cat => {\r\n      counts[cat] = productsMatchingOtherFilters.filter(p => {\r\n        const categoryMatch = p.category?.toUpperCase().trim() === cat.toUpperCase().trim();\r\n        const nameMatch = p.name?.toUpperCase().trim().includes(cat.toUpperCase().trim());\r\n        return categoryMatch || nameMatch;\r\n      }).length;\r\n    });\r\n    \r\n    return counts;\r\n  }, [products, categories, filters]);\r\n  \r\n  const metalTypes = useMemo(() => [...new Set(products.map(p => p.metal_type).filter(Boolean))].sort(), [products]);\r\n  const diamondColors = useMemo(() => [...new Set(products.map(p => p.gemstone?.split(' ')[0]).filter(Boolean))].sort(), [products]);\r\n  const diamondClarities = useMemo(() => [...new Set(products.map(p => p.gemstone?.split(' ')[1]).filter(Boolean))].sort(), [products]);\r\n  const deliveryTypes = useMemo(() => [...new Set(products.map(p => p.delivery_type).filter(Boolean))].sort(), [products]);\r\n\r\n  // Filter products\r\n  const filteredProducts = useMemo(() => {\r\n    const filtered = products.filter(product => {\r\n      // Search query - searches across multiple fields\r\n      if (filters.searchQuery) {\r\n        const query = filters.searchQuery.toLowerCase().trim();\r\n        const searchableFields = [product.product_type, product.diamond_color, product.d_wt_1?.toString(), product.d_wt_2?.toString(), product.purity_fraction_used?.toString(), product.d_rate_1?.toString(), product.pointer_diamond?.toString(), product.d_value?.toString(), product.mkg?.toString(), product.certification_cost?.toString(), product.gemstone_cost?.toString(), product.total_usd?.toString(), product.name, product.category, product.sku, product.description, product.metal_type, product.gemstone, product.color, product.clarity, product.weight_grams?.toString(), product.diamond_weight?.toString(), product.net_weight?.toString(), product.cost_price?.toString(), product.retail_price?.toString(), product.per_carat_price?.toString(), product.gold_per_gram_price?.toString()].filter(Boolean);\r\n        const matchFound = searchableFields.some(field => field?.toLowerCase().includes(query));\r\n        if (!matchFound) return false;\r\n      }\r\n      if (filters.category) {\r\n        const categoryMatch = product.category?.toUpperCase().trim() === filters.category.toUpperCase().trim();\r\n        const nameMatch = product.name?.toUpperCase().trim().includes(filters.category.toUpperCase().trim());\r\n        if (!categoryMatch && !nameMatch) return false;\r\n      }\r\n      if (filters.metalType && product.metal_type?.toUpperCase().trim() !== filters.metalType.toUpperCase().trim()) return false;\r\n      if (filters.minPrice) {\r\n        const minPrice = parseFloat(filters.minPrice);\r\n        if (product.retail_price < minPrice) return false;\r\n      }\r\n      if (filters.maxPrice) {\r\n        const maxPrice = parseFloat(filters.maxPrice);\r\n        if (product.retail_price > maxPrice) return false;\r\n      }\r\n      if (filters.diamondColor) {\r\n        const color = product.gemstone?.split(' ')[0];\r\n        if (color?.toUpperCase().trim() !== filters.diamondColor.toUpperCase().trim()) return false;\r\n      }\r\n      if (filters.diamondClarity) {\r\n        const clarity = product.gemstone?.split(' ')[1];\r\n        if (clarity?.toUpperCase().trim() !== filters.diamondClarity.toUpperCase().trim()) return false;\r\n      }\r\n      if (filters.deliveryType && product.delivery_type !== filters.deliveryType) return false;\r\n      return true;\r\n    });\r\n    return filtered;\r\n  }, [products, filters]);\r\n\r\n  // Display products with load more functionality\r\n  const displayedProducts = useMemo(() => {\r\n    return filteredProducts.slice(0, displayCount);\r\n  }, [filteredProducts, displayCount]);\r\n  const hasMoreProducts = filteredProducts.length > displayCount;\r\n\r\n  // Reset display count when filters change or category changes\r\n  useEffect(() => {\r\n    setDisplayCount(100);\r\n  }, [filters, selectedProductType]);\r\n  const loadMoreProducts = () => {\r\n    setDisplayCount(prev => prev + LOAD_MORE_COUNT);\r\n  };\r\n\r\n  // Calculate totals based on filtered products\r\n  const totalINR = filteredProducts.reduce((sum, p) => sum + (p.retail_price || 0), 0);\r\n  const totalUSD = totalINR / usdRate;\r\n  const exportToPDF = useCallback(async () => {\r\n    try {\r\n      exportCatalogToPDF(filteredProducts, vendorProfile, usdRate, goldRate, totalINR, totalUSD);\r\n      toast.success(\"Catalog exported to PDF successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error exporting to PDF:\", error);\r\n      toast.error(\"Failed to export catalog to PDF\");\r\n    }\r\n  }, [filteredProducts, vendorProfile, usdRate, goldRate, totalINR, totalUSD]);\r\n\r\n  // Fetch all products for category counts\r\n  const fetchAllProducts = async () => {\r\n    try {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      \r\n      // Optimized: only fetch id and product_type for counting, not all columns\r\n      const {\r\n        data,\r\n        error\r\n      } = await supabase\r\n        .from(\"products\")\r\n        .select(\"id, product_type\")\r\n        .eq(\"user_id\", user.id)\r\n        .is(\"deleted_at\", null);\r\n        \r\n      if (error) throw error;\r\n      setAllProducts(data || []);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to load all products:\", error);\r\n    }\r\n  };\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      const {\r\n        data: {\r\n          user\r\n        }\r\n      } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      \r\n      // Optimized query: only fetch needed columns and limit results\r\n      let query = supabase\r\n        .from(\"products\")\r\n        .select(\"id, name, sku, image_url, image_url_2, image_url_3, cost_price, retail_price, stock_quantity, category, metal_type, gemstone, color, diamond_color, clarity, delivery_type, product_type, weight_grams, gemstone_type, carat_weight, cut, diamond_type, shape, carat, polish, symmetry, fluorescence, lab, created_at\")\r\n        .eq(\"user_id\", user.id)\r\n        .is(\"deleted_at\", null);\r\n\r\n      // Filter by product type, treating NULL as Jewellery for backward compatibility\r\n      if (selectedProductType === 'Jewellery') {\r\n        query = query.or(`product_type.eq.${selectedProductType},product_type.is.null`);\r\n      } else {\r\n        query = query.eq(\"product_type\", selectedProductType);\r\n      }\r\n      \r\n      const {\r\n        data,\r\n        error\r\n      } = await query\r\n        .order(\"created_at\", { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setProducts(data || []);\r\n    } catch (error: any) {\r\n      toast.error(\"Failed to load products\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [selectedProductType]);\r\n\r\n  // Re-fetch products when category changes with transition\r\n  useEffect(() => {\r\n    if (selectedProductType) {\r\n      setTransitioning(true);\r\n      setLoading(true);\r\n\r\n      // Fetch products and clear transition state\r\n      fetchProducts().finally(() => {\r\n        setTimeout(() => {\r\n          setTransitioning(false);\r\n        }, 200);\r\n      });\r\n    }\r\n  }, [selectedProductType, fetchProducts]);\r\n\r\n  // Calculate product counts per category\r\n  const getCategoryCount = useCallback((category: string) => {\r\n    if (category === 'Jewellery') {\r\n      return allProducts.filter(p => p.product_type === 'Jewellery' || p.product_type === null).length;\r\n    }\r\n    return allProducts.filter(p => p.product_type === category).length;\r\n  }, [allProducts]);\r\n  const handleDeleteSelected = useCallback(async () => {\r\n    setIsDeleting(true);\r\n    try {\r\n      // Get current user\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        toast.error(\"You must be logged in to delete products\");\r\n        return;\r\n      }\r\n      \r\n      // Perform soft delete by setting deleted_at\r\n      const { error } = await supabase\r\n        .from(\"products\")\r\n        .update({ deleted_at: new Date().toISOString() })\r\n        .in(\"id\", Array.from(selectedProducts))\r\n        .eq(\"user_id\", user.id); // Ensure we only update user's own products\r\n      \r\n      if (error) {\r\n        console.error(\"Delete error:\", error);\r\n        throw error;\r\n      }\r\n      \r\n      toast.success(`${selectedProducts.size} product(s) deleted successfully`);\r\n      setSelectedProducts(new Set());\r\n      setDeleteDialogOpen(false);\r\n      \r\n      // Refresh both product lists\r\n      await Promise.all([fetchProducts(), fetchAllProducts()]);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to delete products:\", error);\r\n      toast.error(`Failed to delete: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  }, [selectedProducts, fetchProducts, fetchAllProducts]);\r\n\r\n  // Get selected products data for delete confirmation\r\n  const selectedProductsData = useMemo(() => {\r\n    return products\r\n      .filter(p => selectedProducts.has(p.id))\r\n      .map(p => ({\r\n        id: p.id,\r\n        name: p.name,\r\n        sku: p.sku\r\n      }));\r\n  }, [products, selectedProducts]);\r\n\r\n  const handleBulkUpdate = useCallback(async (updates: Record<string, any>) => {\r\n    if (selectedProducts.size === 0) {\r\n      toast.error(\"No products selected\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n\r\n      // Handle pricing adjustment separately if present\r\n      const pricingAdjustment = updates.pricingAdjustment;\r\n      delete updates.pricingAdjustment;\r\n\r\n      // Convert string values to appropriate types\r\n      const formattedUpdates: Record<string, any> = {};\r\n      \r\n      Object.entries(updates).forEach(([key, value]) => {\r\n        if (value === \"\" || value === null) return;\r\n        \r\n        // Numeric fields\r\n        if (['cost_price', 'retail_price', 'weight_grams', 'stock_quantity', 'dispatches_in_days'].includes(key)) {\r\n          const numValue = parseFloat(value as string);\r\n          if (!isNaN(numValue) && numValue >= 0) {\r\n            formattedUpdates[key] = numValue;\r\n          }\r\n        } else {\r\n          formattedUpdates[key] = value;\r\n        }\r\n      });\r\n\r\n      // Apply percentage-based pricing if specified\r\n      if (pricingAdjustment && pricingAdjustment.percentage > 0) {\r\n        // Fetch current products to calculate new prices\r\n        const { data: currentProducts, error: fetchError } = await supabase\r\n          .from(\"products\")\r\n          .select(\"id, cost_price, retail_price\")\r\n          .in(\"id\", Array.from(selectedProducts))\r\n          .eq(\"user_id\", user.id);\r\n\r\n        if (fetchError) throw fetchError;\r\n\r\n        if (currentProducts) {\r\n          // Update each product individually with calculated prices\r\n          const updatePromises = currentProducts.map(async (product) => {\r\n            const multiplier = pricingAdjustment.type === 'markup' \r\n              ? (1 + pricingAdjustment.percentage / 100)\r\n              : (1 - pricingAdjustment.percentage / 100);\r\n\r\n            const newCostPrice = Math.max(0, product.cost_price * multiplier);\r\n            const newRetailPrice = Math.max(0, product.retail_price * multiplier);\r\n\r\n            // Merge with other updates, but price adjustments take precedence unless fixed prices are set\r\n            const productUpdate = {\r\n              ...formattedUpdates,\r\n              cost_price: formattedUpdates.cost_price || newCostPrice,\r\n              retail_price: formattedUpdates.retail_price || newRetailPrice,\r\n            };\r\n\r\n            return supabase\r\n              .from(\"products\")\r\n              .update(productUpdate)\r\n              .eq(\"id\", product.id)\r\n              .eq(\"user_id\", user.id);\r\n          });\r\n\r\n          const results = await Promise.all(updatePromises);\r\n          const hasErrors = results.some(r => r.error);\r\n          \r\n          if (hasErrors) {\r\n            throw new Error(\"Some products failed to update\");\r\n          }\r\n\r\n          toast.success(`${selectedProducts.size} product(s) updated with ${pricingAdjustment.type} of ${pricingAdjustment.percentage}%`);\r\n        }\r\n      } else {\r\n        // Regular update without pricing adjustment\r\n        if (Object.keys(formattedUpdates).length === 0) {\r\n          toast.error(\"No changes to update\");\r\n          return;\r\n        }\r\n\r\n        const { error } = await supabase\r\n          .from(\"products\")\r\n          .update(formattedUpdates)\r\n          .in(\"id\", Array.from(selectedProducts))\r\n          .eq(\"user_id\", user.id);\r\n        \r\n        if (error) {\r\n          console.error(\"Update error:\", error);\r\n          throw error;\r\n        }\r\n        \r\n        toast.success(`${selectedProducts.size} product(s) updated successfully`);\r\n      }\r\n      \r\n      setSelectedProducts(new Set());\r\n      \r\n      // Refresh product lists\r\n      await Promise.all([fetchProducts(), fetchAllProducts()]);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to update products:\", error);\r\n      toast.error(`Failed to update: ${error.message || 'Unknown error'}`);\r\n    }\r\n  }, [selectedProducts, fetchProducts, fetchAllProducts]);\r\n\r\n  const handleAutoCategorizationClick = () => {\r\n    if (!products || products.length === 0) {\r\n      toast.info(\"No products found in catalog\");\r\n      return;\r\n    }\r\n    \r\n    const suggestions = analyzeCatalog(\r\n      products.map(p => ({\r\n        id: p.id,\r\n        name: p.name,\r\n        sku: p.sku,\r\n        category: p.category,\r\n      }))\r\n    );\r\n    \r\n    if (suggestions.length === 0) {\r\n      toast.info(\"No uncategorized products found or all products already have categories\");\r\n      return;\r\n    }\r\n    \r\n    setCategorySuggestions(suggestions);\r\n    setAutoCategorizationOpen(true);\r\n  };\r\n\r\n  const handleApplyCategorization = async (selectedIds: string[]) => {\r\n    try {\r\n      // Group updates by category for efficiency\r\n      const updatesByCategory = categorySuggestions\r\n        .filter(s => selectedIds.includes(s.productId))\r\n        .reduce((acc, s) => {\r\n          if (!acc[s.suggestedCategory]) {\r\n            acc[s.suggestedCategory] = [];\r\n          }\r\n          acc[s.suggestedCategory].push(s.productId);\r\n          return acc;\r\n        }, {} as Record<string, string[]>);\r\n\r\n      // Apply updates category by category\r\n      for (const [category, productIds] of Object.entries(updatesByCategory)) {\r\n        const { error } = await supabase\r\n          .from(\"products\")\r\n          .update({ category })\r\n          .in(\"id\", productIds);\r\n\r\n        if (error) throw error;\r\n      }\r\n\r\n      toast.success(`Successfully categorized ${selectedIds.length} products!`);\r\n      await fetchProducts();\r\n      await fetchAllProducts();\r\n    } catch (error) {\r\n      console.error(\"Error applying categorization:\", error);\r\n      toast.error(\"Failed to apply categorization\");\r\n      throw error;\r\n    }\r\n  };\r\n  \r\n  const toggleProductSelection = useCallback((productId: string) => {\r\n    setSelectedProducts(prev => {\r\n      const newSelected = new Set(prev);\r\n      if (newSelected.has(productId)) {\r\n        newSelected.delete(productId);\r\n      } else {\r\n        newSelected.add(productId);\r\n      }\r\n      return newSelected;\r\n    });\r\n  }, []);\r\n  const toggleSelectAll = useCallback(() => {\r\n    setSelectedProducts(prev => prev.size === products.length ? new Set() : new Set(products.map(p => p.id)));\r\n  }, [products]);\r\n  const handleSignOut = useCallback(async () => {\r\n    await supabase.auth.signOut();\r\n    navigate(\"/auth\");\r\n  }, [navigate]);\r\n  return <ApprovalGuard>\r\n      {/* Daily Gold Rate Prompt */}\r\n      <GoldRateDialog currentGoldRate={goldRate} onUpdate={handleUpdateGoldRate} onSkip={() => {}} />\r\n\r\n      {/* Floating QR Codes */}\r\n      <FloatingQRCodes instagramQrUrl={vendorProfile?.instagram_qr_url} whatsappQrUrl={vendorProfile?.whatsapp_qr_url} />\r\n\r\n      {/* Quick Actions Menu */}\r\n      <QuickActionsMenu onExportPDF={exportToPDF} onAutoCategorize={handleAutoCategorizationClick} />\r\n\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background relative overflow-hidden\">\r\n        {/* Premium Background Effects */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none\" />\r\n        <div className=\"absolute top-0 left-0 w-96 h-96 bg-primary/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none\" />\r\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none\" />\r\n        \r\n        {/* Back to Home Button */}\r\n        <div className=\"absolute top-4 left-4 z-20\">\r\n          <BackToHomeButton />\r\n        </div>\r\n\r\n        {/* Breadcrumb Navigation */}\r\n        <div className=\"relative bg-background/50 backdrop-blur-sm border-b border-border/30 z-10\">\r\n          <div className=\"container mx-auto px-4 py-3\">\r\n            <Breadcrumb>\r\n              <BreadcrumbList>\r\n                <BreadcrumbItem>\r\n                  <BreadcrumbLink asChild>\r\n                    <NavLink to=\"/\">Home</NavLink>\r\n                  </BreadcrumbLink>\r\n                </BreadcrumbItem>\r\n                <BreadcrumbSeparator />\r\n                <BreadcrumbItem>\r\n                  <BreadcrumbPage>Catalog</BreadcrumbPage>\r\n                </BreadcrumbItem>\r\n              </BreadcrumbList>\r\n            </Breadcrumb>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile-Optimized Header */}\r\n        <header className=\"relative border-b border-border/50 bg-card/95 backdrop-blur-xl shadow-xl z-10\">\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-accent/5 pointer-events-none\" />\r\n          <div className=\"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 max-w-[1800px] relative z-10\">\r\n            {/* Vendor Details Section - Enhanced with Logo */}\r\n            {vendorProfile && <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 lg:gap-6 mb-4 pb-4 border-b border-border/30\">\r\n                {/* Left: Logo & Business Info */}\r\n                <div className=\"flex items-start gap-3 sm:gap-4 flex-1 w-full lg:w-auto\">\r\n                  {/* Brand Logo */}\r\n                  {vendorProfile.logo_url && (\r\n                    <div className=\"flex-shrink-0 relative group/logo\">\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 rounded-xl blur-lg group-hover/logo:blur-xl transition-all duration-300\" />\r\n                      <div className=\"relative w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 rounded-xl overflow-hidden border-2 border-primary/20 shadow-lg group-hover/logo:border-primary/40 group-hover/logo:scale-105 transition-all duration-300 bg-background\">\r\n                        <img \r\n                          src={vendorProfile.logo_url} \r\n                          alt={vendorProfile.business_name || \"Vendor Logo\"} \r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex-1 w-full\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <Gem className=\"h-5 w-5 sm:h-6 sm:w-6 text-primary animate-pulse\" />\r\n                      <h1 className=\"text-xl sm:text-2xl lg:text-3xl font-serif font-bold bg-gradient-to-r from-primary via-primary/90 to-accent bg-clip-text text-transparent leading-tight drop-shadow-sm\">\r\n                        {vendorProfile.business_name || \"My Jewelry Business\"}\r\n                      </h1>\r\n                    </div>\r\n                    {vendorProfile.address_line1 && <div className=\"text-xs sm:text-sm text-muted-foreground mb-2 leading-relaxed\">\r\n                        <span className=\"block sm:inline\">\r\n                          {vendorProfile.address_line1}\r\n                          {vendorProfile.address_line2 && `, ${vendorProfile.address_line2}`}\r\n                        </span>\r\n                        {vendorProfile.city && <span className=\"block sm:inline sm:ml-2\">\r\n                            <span className=\"hidden sm:inline\">• </span>\r\n                            {vendorProfile.city}, {vendorProfile.state} {vendorProfile.pincode}\r\n                          </span>}\r\n                      </div>}\r\n                    <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-4 text-xs sm:text-sm\">\r\n                      {vendorProfile.email && <span className=\"text-primary/90 font-medium truncate flex items-center gap-1\">\r\n                          <span className=\"opacity-70\">Email:</span> {vendorProfile.email}\r\n                        </span>}\r\n                      {vendorProfile.phone && <span className=\"text-primary/90 font-medium flex items-center gap-1\">\r\n                          <span className=\"opacity-70\">Phone:</span> {vendorProfile.phone}\r\n                        </span>}\r\n                      {vendorProfile.whatsapp_number && <span className=\"text-primary/90 font-medium flex items-center gap-1\">\r\n                          <span className=\"opacity-70\">WhatsApp:</span> {vendorProfile.whatsapp_number}\r\n                        </span>}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Right: Rates & Inventory */}\r\n                <div className=\"flex flex-col items-start lg:items-end gap-3 w-full lg:w-auto\">\r\n                  <div className=\"flex flex-wrap items-center gap-2 sm:gap-3 w-full lg:w-auto\">\r\n                    {/* USD Rate Badge */}\r\n                    <div className=\"group relative text-xs sm:text-sm bg-gradient-to-br from-muted/90 to-muted/70 px-3 sm:px-4 py-2 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-300 backdrop-blur-sm\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"font-semibold text-foreground\">1 USD = ₹{usdRate.toFixed(2)}</span>\r\n                        <span className=\"text-muted-foreground text-xs\">• {new Date().toLocaleDateString('en-IN', {\r\n                        day: 'numeric',\r\n                        month: 'short'\r\n                      })}</span>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Gold Rate Editor/Display */}\r\n                    {editingGoldRate ? <div className=\"flex items-center gap-2 bg-amber-500/10 px-3 py-2 rounded-lg border border-amber-500/30 shadow-sm w-full sm:w-auto\">\r\n                        <input type=\"number\" value={tempGoldRate} onChange={e => setTempGoldRate(e.target.value)} onKeyDown={e => {\r\n                    if (e.key === 'Enter' && !updatingGoldRate) {\r\n                      handleUpdateGoldRateManual();\r\n                    } else if (e.key === 'Escape' && !updatingGoldRate) {\r\n                      setEditingGoldRate(false);\r\n                      setTempGoldRate(\"\");\r\n                    }\r\n                  }} placeholder={goldRate.toString()} min=\"1000\" max=\"200000\" step=\"100\" disabled={updatingGoldRate} className=\"w-24 sm:w-32 px-3 py-1.5 text-sm bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed\" autoFocus />\r\n                        <Button size=\"sm\" onClick={handleUpdateGoldRateManual} disabled={updatingGoldRate} className=\"h-8 px-3 text-xs bg-amber-600 hover:bg-amber-700 disabled:opacity-50\">\r\n                          {updatingGoldRate ? <>\r\n                              <Loader2 className=\"h-3 w-3 animate-spin mr-1\" />\r\n                              <span className=\"hidden sm:inline\">Updating...</span>\r\n                            </> : 'Save'}\r\n                        </Button>\r\n                        <Button size=\"sm\" variant=\"ghost\" onClick={() => {\r\n                    setEditingGoldRate(false);\r\n                    setTempGoldRate(\"\");\r\n                  }} disabled={updatingGoldRate} className=\"h-8 px-2 text-xs disabled:opacity-50\">\r\n                          <X className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div> : <button onClick={() => {\r\n                  setEditingGoldRate(true);\r\n                  setTempGoldRate(goldRate.toString());\r\n                }} className=\"group relative text-xs sm:text-sm bg-gradient-to-br from-amber-500/20 via-amber-600/15 to-amber-500/20 px-3 sm:px-4 py-2 rounded-xl border border-amber-500/40 hover:border-amber-500/60 shadow-md hover:shadow-lg transition-all duration-300 active:scale-95 backdrop-blur-sm\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"font-bold text-amber-700 dark:text-amber-400\">24K Gold: ₹{goldRate.toLocaleString('en-IN')}/g</span>\r\n                          <Edit className=\"h-3.5 w-3.5 text-amber-600 dark:text-amber-500 group-hover:rotate-12 transition-transform\" />\r\n                        </div>\r\n                      </button>}\r\n                  </div>\r\n\r\n                  {/* Total Inventory Card */}\r\n                  {products.length > 0 && <div className=\"relative flex flex-col items-start lg:items-end gap-1 px-4 sm:px-5 py-3 bg-gradient-to-br from-primary/15 via-primary/10 to-primary/5 rounded-xl border border-primary/30 shadow-lg hover:shadow-xl transition-all duration-300 w-full lg:w-auto overflow-hidden group\">\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\r\n                      <div className=\"relative z-10 text-[10px] sm:text-xs text-muted-foreground font-semibold uppercase tracking-wider\">Total Inventory Value</div>\r\n                      <div className=\"relative z-10 text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm\">\r\n                        ₹{totalINR.toLocaleString('en-IN', {\r\n                    maximumFractionDigits: 0\r\n                  })}\r\n                      </div>\r\n                      <div className=\"relative z-10 text-sm sm:text-base text-muted-foreground font-semibold\">${totalUSD.toLocaleString('en-US', {\r\n                    maximumFractionDigits: 0\r\n                  })}</div>\r\n                      {filteredProducts.length !== products.length && <div className=\"relative z-10 text-[10px] sm:text-xs text-muted-foreground mt-1\">\r\n                          Showing {filteredProducts.length} of {products.length} products\r\n                        </div>}\r\n                    </div>}\r\n                </div>\r\n              </div>}\r\n\r\n            {/* Action Buttons Section */}\r\n            <div className=\"flex items-center justify-center gap-2 sm:gap-3\">\r\n              {/* Desktop Menu */}\r\n              <div className=\"hidden lg:flex items-center flex-wrap gap-2 justify-center\">\r\n                {(permissions.can_view_interests || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/interests\")}>\r\n                    <Heart className=\"h-4 w-4 mr-2\" />\r\n                    Interests\r\n                  </Button>}\r\n                {(permissions.can_view_interests || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/video-requests\")}>\r\n                    <Video className=\"h-4 w-4 mr-2\" />\r\n                    Video Requests\r\n                  </Button>}\r\n                {(permissions.can_edit_profile || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/vendor-profile\")}>\r\n                    <Building2 className=\"h-4 w-4 mr-2\" />\r\n                    Profile\r\n                  </Button>}\r\n                {(permissions.can_share_catalog || isAdmin) && <TooltipProvider>\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <Button \r\n                          variant=\"outline\" \r\n                          size=\"sm\" \r\n                          onClick={() => {\r\n                            if (!canAddShareLinks && !isAdmin) {\r\n                              setUpgradeLimitType('share_links');\r\n                              setIsUpgradeDialogOpen(true);\r\n                              return;\r\n                            }\r\n                            navigate(\"/share\");\r\n                          }}\r\n                          disabled={!canAddShareLinks && !isAdmin}\r\n                        >\r\n                          <Share2 className=\"h-4 w-4 mr-2\" />\r\n                          Share\r\n                          {!isAdmin && shareLinksRemaining !== Infinity && shareLinksRemaining < 100 && (\r\n                            <span className=\"ml-1 text-xs text-muted-foreground\">\r\n                              ({shareLinksRemaining} left)\r\n                            </span>\r\n                          )}\r\n                        </Button>\r\n                      </TooltipTrigger>\r\n                      {!canAddShareLinks && !isAdmin && (\r\n                        <TooltipContent>\r\n                          <p>Share link limit reached</p>\r\n                        </TooltipContent>\r\n                      )}\r\n                    </Tooltip>\r\n                  </TooltipProvider>}\r\n                {isAdmin && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/admin\")}>\r\n                    <LayoutDashboard className=\"h-4 w-4 mr-2\" />\r\n                    Admin\r\n                  </Button>}\r\n                {(permissions.can_add_products || isAdmin) && <TooltipProvider>\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <Button \r\n                          variant=\"outline\" \r\n                          size=\"sm\" \r\n                          onClick={() => {\r\n                            if (!canAddProducts && !isAdmin) {\r\n                              setUpgradeLimitType('products');\r\n                              setIsUpgradeDialogOpen(true);\r\n                              return;\r\n                            }\r\n                            navigate(\"/add-product\");\r\n                          }}\r\n                          disabled={!canAddProducts && !isAdmin}\r\n                        >\r\n                          <Plus className=\"h-4 w-4 mr-2\" />\r\n                          Add\r\n                          {!isAdmin && productsRemaining !== Infinity && productsRemaining < 100 && (\r\n                            <span className=\"ml-1 text-xs text-muted-foreground\">\r\n                              ({productsRemaining} left)\r\n                            </span>\r\n                          )}\r\n                        </Button>\r\n                      </TooltipTrigger>\r\n                      {!canAddProducts && !isAdmin && (\r\n                        <TooltipContent>\r\n                          <p>Product limit reached</p>\r\n                        </TooltipContent>\r\n                      )}\r\n                    </Tooltip>\r\n                  </TooltipProvider>}\r\n                {(permissions.can_import_data || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/import\")}>\r\n                    <FileSpreadsheet className=\"h-4 w-4 mr-2\" />\r\n                    Import\r\n                  </Button>}\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={exportToPDF}>\r\n                    <FileDown className=\"h-4 w-4 mr-2\" />\r\n                    Export PDF\r\n                  </Button>\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/migrate-images\")}>\r\n                    <Upload className=\"h-4 w-4 mr-2\" />\r\n                    Migrate Images\r\n                  </Button>\r\n                  {(permissions.can_manage_team || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/team\")}>\r\n                      <Users className=\"h-4 w-4 mr-2\" />\r\n                      Team\r\n                    </Button>}\r\n                {(permissions.can_delete_products || isAdmin) && selectedProducts.size > 0 && <>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => setBulkEditOpen(true)}>\r\n                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                      Update ({selectedProducts.size})\r\n                    </Button>\r\n                    <Button \r\n                      variant=\"destructive\" \r\n                      size=\"sm\"\r\n                      onClick={() => setDeleteDialogOpen(true)}\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                      Delete ({selectedProducts.size})\r\n                    </Button>\r\n                  </>}\r\n                {(permissions.can_view_sessions || isAdmin) && <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/active-sessions\")}>\r\n                    <Shield className=\"h-4 w-4 mr-2\" />\r\n                    Sessions\r\n                  </Button>}\r\n                <Button variant=\"ghost\" size=\"sm\" onClick={handleSignOut}>\r\n                  <LogOut className=\"h-4 w-4 mr-2\" />\r\n                  Sign Out\r\n                </Button>\r\n              </div>\r\n\r\n\r\n              {/* Mobile Menu */}\r\n              <div className=\"lg:hidden w-full\">\r\n                <DropdownMenu>\r\n                  <DropdownMenuTrigger asChild>\r\n                    <Button variant=\"outline\" size=\"default\" className=\"w-full touch-manipulation h-11 shadow-sm hover:shadow-md transition-shadow\">\r\n                      <Menu className=\"h-5 w-5 mr-2\" />\r\n                      <span className=\"font-medium\">Menu</span>\r\n                    </Button>\r\n                  </DropdownMenuTrigger>\r\n                  <DropdownMenuContent align=\"center\" className=\"w-[calc(100vw-2rem)] sm:w-80 bg-card border-border/50 shadow-xl z-50 max-h-[70vh] overflow-y-auto\">\r\n                    {(permissions.can_view_interests || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/interests\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <Heart className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">View Interests</span>\r\n                      </DropdownMenuItem>}\r\n                    {(permissions.can_view_interests || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/video-requests\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <Video className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Video Requests</span>\r\n                      </DropdownMenuItem>}\r\n                    {(permissions.can_view_interests || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/purchase-inquiries\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <ShoppingCart className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Purchase Inquiries</span>\r\n                      </DropdownMenuItem>}\r\n                    {(permissions.can_edit_profile || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/vendor-profile\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <Building2 className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Vendor Profile</span>\r\n                      </DropdownMenuItem>}\r\n                    {(permissions.can_share_catalog || isAdmin) && <DropdownMenuItem \r\n                        onClick={() => {\r\n                          if (!canAddShareLinks && !isAdmin) {\r\n                            setUpgradeLimitType('share_links');\r\n                            setIsUpgradeDialogOpen(true);\r\n                            return;\r\n                          }\r\n                          navigate(\"/share\");\r\n                        }}\r\n                        disabled={!canAddShareLinks && !isAdmin}\r\n                        className=\"py-3 cursor-pointer hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        <Share2 className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Share Catalog</span>\r\n                        {!isAdmin && shareLinksRemaining !== Infinity && shareLinksRemaining < 100 && (\r\n                          <span className=\"ml-auto text-xs text-muted-foreground\">\r\n                            ({shareLinksRemaining} left)\r\n                          </span>\r\n                        )}\r\n                        {!canAddShareLinks && !isAdmin && <span className=\"ml-auto text-xs text-destructive\">(Limit reached)</span>}\r\n                      </DropdownMenuItem>}\r\n                    {isAdmin && <>\r\n                        <DropdownMenuSeparator className=\"my-2\" />\r\n                        <DropdownMenuItem onClick={() => navigate(\"/admin\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                          <LayoutDashboard className=\"h-5 w-5 mr-3 text-primary\" />\r\n                          <span className=\"font-medium\">Admin Dashboard</span>\r\n                        </DropdownMenuItem>\r\n                      </>}\r\n                    <DropdownMenuSeparator className=\"my-2\" />\r\n                    {(permissions.can_add_products || isAdmin) && <DropdownMenuItem \r\n                        onClick={() => {\r\n                          if (!canAddProducts && !isAdmin) {\r\n                            setUpgradeLimitType('products');\r\n                            setIsUpgradeDialogOpen(true);\r\n                            return;\r\n                          }\r\n                          navigate(\"/add-product\");\r\n                        }}\r\n                        disabled={!canAddProducts && !isAdmin}\r\n                        className=\"py-3 cursor-pointer hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        <Plus className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Add Product</span>\r\n                        {!isAdmin && productsRemaining !== Infinity && productsRemaining < 100 && (\r\n                          <span className=\"ml-auto text-xs text-muted-foreground\">\r\n                            ({productsRemaining} left)\r\n                          </span>\r\n                        )}\r\n                        {!canAddProducts && !isAdmin && <span className=\"ml-auto text-xs text-destructive\">(Limit reached)</span>}\r\n                      </DropdownMenuItem>}\r\n                    {(permissions.can_import_data || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/import\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <FileSpreadsheet className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Import Data</span>\r\n                      </DropdownMenuItem>}\r\n                    <DropdownMenuItem onClick={exportToPDF} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                      <FileDown className=\"h-5 w-5 mr-3 text-primary\" />\r\n                      <span className=\"font-medium\">Export PDF</span>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuItem onClick={() => navigate(\"/migrate-images\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                      <Upload className=\"h-5 w-5 mr-3 text-primary\" />\r\n                      <span className=\"font-medium\">Migrate Images</span>\r\n                    </DropdownMenuItem>\r\n                    {(permissions.can_manage_team || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/team\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <Users className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Manage Team</span>\r\n                      </DropdownMenuItem>}\r\n                    <DropdownMenuSeparator className=\"my-2\" />\r\n                    {(permissions.can_view_sessions || isAdmin) && <DropdownMenuItem onClick={() => navigate(\"/active-sessions\")} className=\"py-3 cursor-pointer hover:bg-muted/50\">\r\n                        <Shield className=\"h-5 w-5 mr-3 text-primary\" />\r\n                        <span className=\"font-medium\">Active Sessions</span>\r\n                      </DropdownMenuItem>}\r\n                    <DropdownMenuItem onClick={handleSignOut} className=\"py-3 cursor-pointer hover:bg-destructive/10 text-destructive\">\r\n                      <LogOut className=\"h-5 w-5 mr-3\" />\r\n                      <span className=\"font-medium\">Sign Out</span>\r\n                    </DropdownMenuItem>\r\n                  </DropdownMenuContent>\r\n                </DropdownMenu>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"container mx-auto px-3 sm:px-4 lg:px-6 py-6 sm:py-8 lg:py-10 max-w-[1800px]\">\r\n          {/* Plan Limit Warning */}\r\n          <div className=\"mb-6\">\r\n            <PlanLimitWarning />\r\n            <PlanUsageBanner />\r\n          </div>\r\n          \r\n          {/* Rewards Widget */}\r\n          <div className=\"mb-6\">\r\n            <RewardsWidget />\r\n          </div>\r\n          {loading ? <div className=\"space-y-8 animate-fade-in\">\r\n              {/* Loading Skeletons */}\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-5 lg:gap-6\">\r\n                {Array.from({\r\n              length: 10\r\n            }).map((_, index) => <div key={index} className=\"animate-scale-in\" style={{\r\n              animationDelay: `${index * 50}ms`\r\n            }}>\r\n                    <ProductCardSkeleton />\r\n                  </div>)}\r\n              </div>\r\n            </div> : <div className=\"animate-fade-in\">\r\n              {/* Elegant Category Selector - Always visible */}\r\n              {approvedCategories.length > 1 && <div className=\"mb-6 flex gap-2 overflow-x-auto justify-start md:justify-center pb-2 px-2 scrollbar-hide\">\r\n                  {approvedCategories.map(category => {\r\n              const isSelected = selectedProductType === category;\r\n              const categoryKey = category.toLowerCase().replace(/\\s+/g, '-');\r\n\r\n              // Define category-specific colors and icons\r\n              const categoryStyles: Record<string, any> = {\r\n                'jewellery': {\r\n                  gradient: 'from-category-jewellery/20 to-category-jewellery/5',\r\n                  border: 'border-category-jewellery/40',\r\n                  text: 'text-category-jewellery',\r\n                  glow: 'shadow-[0_0_20px_hsl(var(--category-jewellery)/0.3)]',\r\n                  icon: '💍'\r\n                },\r\n                'gemstones': {\r\n                  gradient: 'from-category-gemstone/20 to-category-gemstone/5',\r\n                  border: 'border-category-gemstone/40',\r\n                  text: 'text-category-gemstone',\r\n                  glow: 'shadow-[0_0_20px_hsl(var(--category-gemstone)/0.3)]',\r\n                  icon: '💎'\r\n                },\r\n                'loose-gemstones': {\r\n                  gradient: 'from-category-gemstone/20 to-category-gemstone/5',\r\n                  border: 'border-category-gemstone/40',\r\n                  text: 'text-category-gemstone',\r\n                  glow: 'shadow-[0_0_20px_hsl(var(--category-gemstone)/0.3)]',\r\n                  icon: '💎'\r\n                },\r\n                'loose-diamonds': {\r\n                  gradient: 'from-category-diamond/20 to-category-diamond/5',\r\n                  border: 'border-category-diamond/40',\r\n                  text: 'text-category-diamond',\r\n                  glow: 'shadow-[0_0_20px_hsl(var(--category-diamond)/0.3)]',\r\n                  icon: '✨'\r\n                }\r\n              };\r\n              const style = categoryStyles[categoryKey] || categoryStyles['jewellery'];\r\n              const count = getCategoryCount(category);\r\n              return <button key={category} onClick={() => setSelectedProductType(category)} disabled={transitioning} className={`\r\n                          group relative overflow-hidden flex-shrink-0\r\n                          px-3 py-2 sm:px-6 sm:py-3 md:px-8 md:py-4 rounded-xl md:rounded-2xl\r\n                          font-serif text-sm sm:text-base md:text-lg font-semibold\r\n                          transition-all duration-500 ease-out\r\n                          disabled:opacity-50 disabled:cursor-wait\r\n                          ${isSelected ? `bg-gradient-to-br ${style.gradient} border-2 ${style.border} ${style.glow} scale-105` : 'bg-card/50 border-2 border-border/30 hover:border-border/60 hover:scale-102'}\r\n                        `}>\r\n                        {/* Animated background shine effect */}\r\n                        <div className={`\r\n                          absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent\r\n                          -translate-x-full group-hover:translate-x-full\r\n                          transition-transform duration-1000 ease-out\r\n                        `} />\r\n                        \r\n                        {/* Content */}\r\n                        <span className={`\r\n                          relative flex items-center gap-2 sm:gap-2.5 md:gap-3\r\n                          ${isSelected ? style.text : 'text-muted-foreground group-hover:text-foreground'}\r\n                          transition-colors duration-300\r\n                        `}>\r\n                          <span className=\"text-lg sm:text-xl md:text-2xl\">{style.icon}</span>\r\n                          <div className=\"flex flex-col items-start\">\r\n                            <span className=\"tracking-wide whitespace-nowrap\">{category}</span>\r\n                            <span className={`\r\n                              text-[10px] sm:text-xs font-normal opacity-70\r\n                              ${isSelected ? '' : 'text-muted-foreground/60'}\r\n                            `}>\r\n                              {count} {count === 1 ? 'item' : 'items'}\r\n                            </span>\r\n                          </div>\r\n                        </span>\r\n                        \r\n                        {/* Bottom accent line for selected state */}\r\n                        {isSelected && <div className={`\r\n                            absolute bottom-0 left-1/2 -translate-x-1/2\r\n                            h-1 w-3/4 rounded-full\r\n                            bg-gradient-to-r ${style.gradient}\r\n                            animate-pulse\r\n                          `} />}\r\n                      </button>;\r\n            })}\r\n                </div>}\r\n\r\n              {/* Product Showcase Carousel */}\r\n              {filteredProducts.length > 0 && <motion.div initial={{\r\n            opacity: 0,\r\n            y: 20\r\n          }} animate={{\r\n            opacity: 1,\r\n            y: 0\r\n          }} transition={{\r\n            delay: 0.2\r\n          }} className=\"mb-8\">\r\n                  <ProductShowcaseCarousel products={filteredProducts} usdRate={usdRate} />\r\n                </motion.div>}\r\n\r\n              {products.length === 0 ? <div className=\"text-center py-16 sm:py-20\">\r\n                  <div className=\"inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-primary/10 mb-6\">\r\n                    <Gem className=\"h-10 w-10 sm:h-12 sm:h-12 text-primary\" />\r\n                  </div>\r\n                  <h2 className=\"text-2xl sm:text-3xl font-serif font-bold mb-3 text-foreground\">No products yet</h2>\r\n                  <p className=\"text-muted-foreground text-base sm:text-lg mb-8 max-w-md mx-auto\">Start building your stunning jewelry catalog and showcase your collection</p>\r\n                  <Button \r\n                    onClick={() => {\r\n                      if (!canAddProducts && !isAdmin) {\r\n                        setUpgradeLimitType('products');\r\n                        setIsUpgradeDialogOpen(true);\r\n                        return;\r\n                      }\r\n                      navigate(\"/add-product\");\r\n                    }}\r\n                    disabled={!canAddProducts && !isAdmin}\r\n                    size=\"lg\" \r\n                    className=\"shadow-lg hover:shadow-xl transition-all duration-300 h-12 px-8\"\r\n                  >\r\n                    <Plus className=\"h-5 w-5 mr-2\" />\r\n                    Add Your First Product\r\n                  </Button>\r\n                </div> : <>\r\n\r\n              {/* Filters - Always visible, not affected by transition */}\r\n              <div key={`filters-${selectedProductType}`} className=\"mb-6 sm:mb-8 animate-slide-in-right\">\r\n                <CatalogFilters \r\n                  filters={filters} \r\n                  onFilterChange={setFilters} \r\n                  productType={selectedProductType} \r\n                  categories={categories} \r\n                  metalTypes={metalTypes} \r\n                  diamondColors={diamondColors} \r\n                  diamondClarities={diamondClarities} \r\n                  deliveryTypes={deliveryTypes} \r\n                  categoryCounts={categoryCounts}\r\n                  gemstoneTypes={[]} \r\n                  colors={[]} \r\n                  clarities={[]} \r\n                  cuts={[]} \r\n                  shapes={[]} \r\n                  polishes={[]} \r\n                  symmetries={[]} \r\n                  fluorescences={[]} \r\n                  labs={[]} \r\n                />\r\n              </div>\r\n\r\n              {/* Select All Checkbox */}\r\n              {(permissions.can_delete_products || isAdmin) && filteredProducts.length > 0 && <div className=\"mb-6 flex items-center gap-3 pb-4 border-b border-border/30\">\r\n                  <Checkbox id=\"select-all\" checked={selectedProducts.size === filteredProducts.length && filteredProducts.length > 0} onCheckedChange={toggleSelectAll} className=\"h-5 w-5\" />\r\n                  <label htmlFor=\"select-all\" className=\"text-sm sm:text-base font-medium cursor-pointer select-none\">\r\n                    Select All ({filteredProducts.length} {filteredProducts.length === 1 ? 'product' : 'products'})\r\n                  </label>\r\n                </div>}\r\n\r\n              {/* Products Grid or Empty State */}\r\n              {filteredProducts.length === 0 ? <div className=\"text-center py-16 sm:py-20\">\r\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-muted/50 mb-6\">\r\n                    <Gem className=\"h-8 w-8 sm:h-10 sm:w-10 text-muted-foreground\" />\r\n                  </div>\r\n                  <h3 className=\"text-xl sm:text-2xl font-semibold mb-3 text-foreground\">No products match your filters</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">Try adjusting your search criteria</p>\r\n                  <Button variant=\"outline\" onClick={() => setFilters({\r\n                category: \"\",\r\n                metalType: \"\",\r\n                minPrice: \"\",\r\n                maxPrice: \"\",\r\n                diamondColor: \"\",\r\n                diamondClarity: \"\",\r\n                searchQuery: \"\",\r\n                deliveryType: \"\",\r\n                gemstoneType: \"\",\r\n                color: \"\",\r\n                clarity: \"\",\r\n                cut: \"\",\r\n                minCarat: \"\",\r\n                maxCarat: \"\",\r\n                diamondType: \"\",\r\n                shape: \"\",\r\n                polish: \"\",\r\n                symmetry: \"\",\r\n                fluorescence: \"\",\r\n                lab: \"\"\r\n              })} className=\"shadow-sm hover:shadow-md transition-all\">\r\n                    Clear All Filters\r\n                  </Button>\r\n                </div> : <>\r\n                  <div key={selectedProductType} className={`\r\n                      grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-5 lg:gap-6\r\n                      transition-opacity duration-300\r\n                      ${transitioning ? 'opacity-0' : 'opacity-100 animate-fade-in'}\r\n                    `}>\r\n                    {displayedProducts.map((product, index) => <div key={product.id} className=\"animate-scale-in\" style={{\r\n                  animationDelay: `${index * 30}ms`\r\n                }}>\r\n                        <ProductCard \r\n                          product={product} \r\n                          isSelected={selectedProducts.has(product.id)} \r\n                          onToggleSelection={permissions.can_delete_products || isAdmin ? toggleProductSelection : () => {}} \r\n                          usdRate={usdRate}\r\n                          vendorLogoUrl={vendorProfile?.logo_url}\r\n                        />\r\n                      </div>)}\r\n                  </div>\r\n                  \r\n                  {/* Load More Button */}\r\n                  {hasMoreProducts && <motion.div initial={{\r\n                opacity: 0,\r\n                y: 20\r\n              }} animate={{\r\n                opacity: 1,\r\n                y: 0\r\n              }} className=\"mt-12 flex justify-center\">\r\n                      <Button onClick={loadMoreProducts} size=\"lg\" className=\"px-8 py-6 text-base font-semibold shadow-lg hover:shadow-xl transition-all\">\r\n                        Load More Products\r\n                        <span className=\"ml-2 text-sm opacity-75\">\r\n                          ({filteredProducts.length - displayCount} remaining)\r\n                        </span>\r\n                      </Button>\r\n                    </motion.div>}\r\n                  \r\n                  {/* Product count info */}\r\n                  <div className=\"mt-6 text-center text-sm text-muted-foreground\">\r\n                    Showing <span className=\"font-semibold text-foreground\">{Math.min(displayCount, filteredProducts.length)}</span> of{' '}\r\n                    <span className=\"font-semibold text-foreground\">{filteredProducts.length}</span> products\r\n                  </div>\r\n                  \r\n                  {/* Brand Showcase Section */}\r\n                  <BrandShowcase vendorProfile={vendorProfile} />\r\n                </>}\r\n            </>}\r\n        </div>}\r\n    </main>\r\n      </div>\r\n      \r\n      <UpgradePromptDialog\r\n        open={isUpgradeDialogOpen}\r\n        onOpenChange={setIsUpgradeDialogOpen}\r\n        limitType={upgradeLimitType}\r\n      />\r\n      \r\n      <PlanUpgradeCelebration\r\n        open={showCelebration}\r\n        onOpenChange={setShowCelebration}\r\n        planName={celebrationPlan}\r\n      />\r\n      \r\n      <PlanBenefitsShowcase\r\n        open={showBenefits}\r\n        onOpenChange={setShowBenefits}\r\n        planName={celebrationPlan}\r\n        benefits={\r\n          celebrationPlan === \"Professional Plan\" ? [\r\n            {\r\n              title: \"1,000 Products\",\r\n              description: \"Expand your catalog with up to 1,000 products\"\r\n            },\r\n            {\r\n              title: \"10 Share Links\",\r\n              description: \"Create up to 10 shareable catalog links\"\r\n            },\r\n            {\r\n              title: \"3 Team Members\",\r\n              description: \"Invite up to 3 team members to collaborate\"\r\n            },\r\n            {\r\n              title: \"Unlimited Product Images\",\r\n              description: \"Add as many images as you need to showcase your products\"\r\n            },\r\n            {\r\n              title: \"Custom Orders Management\",\r\n              description: \"Manage custom order requests from customers\"\r\n            },\r\n            {\r\n              title: \"Data Import Tools\",\r\n              description: \"Easily import your product data from Excel files\"\r\n            }\r\n          ] : [\r\n            {\r\n              title: \"Unlimited Products\",\r\n              description: \"No limits on the number of products you can add\"\r\n            },\r\n            {\r\n              title: \"Unlimited Share Links\",\r\n              description: \"Create as many shareable catalog links as you need\"\r\n            },\r\n            {\r\n              title: \"Unlimited Team Members\",\r\n              description: \"Invite unlimited team members to collaborate\"\r\n            },\r\n            {\r\n              title: \"Advanced Analytics\",\r\n              description: \"Detailed insights into your catalog performance\"\r\n            },\r\n            {\r\n              title: \"Priority Support\",\r\n              description: \"Get dedicated support from our team\"\r\n            },\r\n            {\r\n              title: \"Custom Integrations\",\r\n              description: \"Connect with your existing business tools\"\r\n            }\r\n          ]\r\n        }\r\n      />\r\n      \r\n      <ReferralCelebration\r\n        open={showReferralCelebration}\r\n        onOpenChange={setShowReferralCelebration}\r\n        referralType={referralType}\r\n        referredName={referredName}\r\n      />\r\n      \r\n      <MilestoneCelebration\r\n        open={!!latestMilestone}\r\n        onOpenChange={(open) => !open && clearLatestMilestone()}\r\n        milestoneType={latestMilestone?.milestone_type || ''}\r\n        milestoneValue={latestMilestone?.milestone_value || 0}\r\n        pointsAwarded={latestMilestone?.points_awarded || 0}\r\n      />\r\n      \r\n      <BulkEditDialog\r\n        open={bulkEditOpen}\r\n        onOpenChange={setBulkEditOpen}\r\n        onUpdate={handleBulkUpdate}\r\n        selectedCount={selectedProducts.size}\r\n        selectedProductIds={Array.from(selectedProducts)}\r\n      />\r\n      \r\n      <DeleteConfirmationDialog\r\n        open={deleteDialogOpen}\r\n        onOpenChange={setDeleteDialogOpen}\r\n        onConfirm={handleDeleteSelected}\r\n        products={selectedProductsData}\r\n        isDeleting={isDeleting}\r\n      />\r\n\r\n      <AutoCategorizationDialog\r\n        open={autoCategorizationOpen}\r\n        onOpenChange={setAutoCategorizationOpen}\r\n        suggestions={categorySuggestions}\r\n        onApply={handleApplyCategorization}\r\n      />\r\n    </ApprovalGuard>;\r\n};\r\nexport default Catalog;"],"names":["ProductCard","product","isSelected","onToggleSelection","usdRate","vendorLogoUrl","images","currentImageIndex","setCurrentImageIndex","useState","isHovering","setIsHovering","nextImage","prev","prevImage","handleMouseEnter","handleMouseLeave","jsx","motion","jsxs","Card","e","Checkbox","checked","OptimizedImage","Fragment","ChevronLeft","ChevronRight","_","idx","Gem","CardHeader","CardContent","CardFooter","Badge","Zap","Calendar","ProductCardSkeleton","Skeleton","CATEGORY_PATTERNS","suggestCategory","productName","sku","searchText","sortedPatterns","a","b","category","patterns","priority","pattern","confidence","analyzeCatalog","products","suggestions","suggestion","getSuggestionStats","byCategory","acc","s","byConfidence","AutoCategorizationDialog","open","onOpenChange","onApply","selectedIds","setSelectedIds","isApplying","setIsApplying","stats","toggleSelection","id","newSelected","toggleAll","handleApply","getConfidenceBadge","Dialog","DialogContent","DialogHeader","DialogTitle","Sparkles","DialogDescription","TrendingUp","count","ScrollArea","DialogFooter","Button","CheckCircle2","usePlanLimits","limits","setLimits","usage","setUsage","loading","setLoading","useEffect","fetchLimitsAndUsage","user","supabase","permissions","permError","prodError","shareLinks","shareError","error","productUsagePercent","shareLinksUsagePercent","hasUnlimitedProducts","hasUnlimitedShareLinks","exportCatalogToPDF","vendorProfile","goldRate","totalINR","totalUSD","doc","jsPDF","pageWidth","yPos","contactInfo","tableData","index","autoTable","data","finalY","fileName","_a","PlanUsageBanner","productsRemaining","shareLinksRemaining","isProductsUnlimited","isShareLinksUnlimited","isAnyLimitHigh","isAnyLimitExhausted","Alert","AlertCircle","AlertDescription","Progress","UpgradePromptDialog","limitType","navigate","useNavigate","handleUpgrade","getLimitMessage","plans","plan","feature","Check","playCelebrationSound","audioContext","notes","duration","frequency","oscillator","gainNode","startTime","playSuccessChime","playReferralSound","PlanUpgradeCelebration","planName","showContent","setShowContent","randomInRange","min","max","animationEnd","defaults","interval","timeLeft","particleCount","confetti","AnimatePresence","Star","Trophy","PlanBenefitsShowcase","benefits","benefit","ReferralCelebration","referralType","referredName","colors","content","Users","Heart","IconComponent","i","Gift","getMilestoneDetails","type","value","Package","Share2","Eye","MilestoneCelebration","milestoneType","milestoneValue","pointsAwarded","details","getTierColor","tier","getNextTier","currentTier","RewardsWidget","points","useRewardsSystem","expiringPoints","setExpiringPoints","fetchExpiringPoints","nextTierInfo","progressToNext","Clock","formatDistanceToNow","GoldRateDialog","currentGoldRate","onUpdate","onSkip","setOpen","setGoldRate","updating","setUpdating","lastSkipTimestamp","lastPromptDate","now","today","skipTime","handleUpdate","newRate","toast","handleSkip","X","Label","Input","QuickActionsMenu","onExportPDF","onAutoCategorize","isOpen","setIsOpen","isUpgradeDialogOpen","setIsUpgradeDialogOpen","upgradeLimitType","setUpgradeLimitType","keyboardHeight","isKeyboardVisible","useKeyboardHeight","canAddProducts","canAddShareLinks","handleAddProduct","handleShareCatalog","getProductLabel","getShareLabel","actions","Plus","ShoppingCart","FileText","History","Calculator","FileDown","bottomPosition","action","buttonContent","TooltipProvider","Tooltip","TooltipTrigger","TooltipContent","BrandShowcase","business_story","certifications","awards","CardTitle","Building2","cert","Award","award","bulkUpdateSchema","z","BulkEditDialog","selectedCount","selectedProductIds","updates","setUpdates","priceAdjustmentType","setPriceAdjustmentType","priceAdjustmentPercent","setPriceAdjustmentPercent","showPreview","setShowPreview","productPreviews","setProductPreviews","loadingPreview","setLoadingPreview","generatePreview","validationData","validationError","previews","changes","fieldNames","key","oldValue","multiplier","newCostPrice","newRetailPrice","p","handleBack","handleFieldChange","field","newUpdates","hasChanges","preview","Table","TableHeader","TableRow","TableHead","TableBody","change","changeIdx","TableCell","ArrowRight","Tabs","TabsList","TabsTrigger","TabsContent","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Percent","Loader2","DeleteConfirmationDialog","onConfirm","isDeleting","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertTriangle","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Breadcrumb","React.forwardRef","props","ref","BreadcrumbList","className","cn","BreadcrumbItem","BreadcrumbLink","asChild","Comp","Slot","BreadcrumbPage","BreadcrumbSeparator","children","Catalog","setProducts","allProducts","setAllProducts","transitioning","setTransitioning","setUsdRate","editingGoldRate","setEditingGoldRate","updatingGoldRate","setUpdatingGoldRate","tempGoldRate","setTempGoldRate","selectedProducts","setSelectedProducts","setVendorProfile","selectedProductType","setSelectedProductType","approvedCategories","setApprovedCategories","showCelebration","setShowCelebration","celebrationPlan","setCelebrationPlan","showBenefits","setShowBenefits","showReferralCelebration","setShowReferralCelebration","setReferralType","setReferredName","bulkEditOpen","setBulkEditOpen","deleteDialogOpen","setDeleteDialogOpen","setIsDeleting","autoCategorizationOpen","setAutoCategorizationOpen","categorySuggestions","setCategorySuggestions","latestMilestone","clearLatestMilestone","useMilestones","filters","setFilters","isAdmin","roleLoading","useUserRole","useVendorPermissions","displayCount","setDisplayCount","LOAD_MORE_COUNT","setupPlanUpgradeListener","currentPermissions","channel","payload","newPlan","oldPlan","planLevels","setupReferralListener","roleData","referralChannel","cachedRate","cachedTime","fetchUSDRate","fetchAllProducts","fetchProducts","fetchVendorProfile","fetchApprovedCategories","approved","handleUpdateGoldRate","profileError","purity","updatedProducts","oldGoldValue","goldValueDifference","successCount","update","handleUpdateGoldRateManual","predefinedCategories","categories","useMemo","productCategories","categoryCounts","productsMatchingOtherFilters","query","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","minPrice","maxPrice","color","_s","clarity","_t","counts","cat","categoryMatch","nameMatch","metalTypes","diamondColors","diamondClarities","deliveryTypes","filteredProducts","_u","_v","displayedProducts","hasMoreProducts","loadMoreProducts","sum","exportToPDF","useCallback","getCategoryCount","handleDeleteSelected","selectedProductsData","handleBulkUpdate","pricingAdjustment","formattedUpdates","numValue","currentProducts","fetchError","updatePromises","productUpdate","r","handleAutoCategorizationClick","handleApplyCategorization","updatesByCategory","productIds","toggleProductSelection","productId","toggleSelectAll","handleSignOut","ApprovalGuard","FloatingQRCodes","BackToHomeButton","NavLink","Edit","Video","LayoutDashboard","FileSpreadsheet","Upload","Trash2","Shield","LogOut","DropdownMenu","DropdownMenuTrigger","Menu","DropdownMenuContent","DropdownMenuItem","DropdownMenuSeparator","PlanLimitWarning","categoryKey","categoryStyles","style","ProductShowcaseCarousel","CatalogFilters"],"mappings":"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"}