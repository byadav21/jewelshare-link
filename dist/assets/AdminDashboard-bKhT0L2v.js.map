{"version":3,"file":"AdminDashboard-bKhT0L2v.js","sources":["../../src/pages/AdminDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { AdminLayout } from \"@/components/AdminLayout\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { \r\n  FileText, \r\n  Image, \r\n  MessageSquare,\r\n  Mail,\r\n  Users,\r\n  TrendingUp,\r\n  BarChart3,\r\n  ShieldCheck\r\n} from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface DashboardStats {\r\n  blogPosts: number;\r\n  publishedPosts: number;\r\n  brands: number;\r\n  pendingComments: number;\r\n  activeSubscribers: number;\r\n  totalVendors: number;\r\n  pendingApprovals: number;\r\n}\r\n\r\nconst AdminDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    blogPosts: 0,\r\n    publishedPosts: 0,\r\n    brands: 0,\r\n    pendingComments: 0,\r\n    activeSubscribers: 0,\r\n    totalVendors: 0,\r\n    pendingApprovals: 0,\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const [\r\n        { data: blogPosts },\r\n        { data: brands },\r\n        { data: comments },\r\n        { data: subscribers },\r\n        { data: permissions },\r\n        { data: approvals }\r\n      ] = await Promise.all([\r\n        supabase.from(\"blog_posts\").select(\"id, published\"),\r\n        supabase.from(\"brands\").select(\"id\"),\r\n        supabase.from(\"blog_comments\").select(\"id\").eq(\"status\", \"pending\"),\r\n        supabase.from(\"newsletter_subscribers\").select(\"id\").eq(\"is_active\", true),\r\n        supabase.from(\"vendor_permissions\").select(\"id\"),\r\n        supabase.from(\"user_approval_status\").select(\"id\").eq(\"status\", \"pending\"),\r\n      ]);\r\n\r\n      setStats({\r\n        blogPosts: blogPosts?.length || 0,\r\n        publishedPosts: blogPosts?.filter(p => p.published).length || 0,\r\n        brands: brands?.length || 0,\r\n        pendingComments: comments?.length || 0,\r\n        activeSubscribers: subscribers?.length || 0,\r\n        totalVendors: permissions?.length || 0,\r\n        pendingApprovals: approvals?.length || 0,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch stats\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: \"Blog Posts\",\r\n      value: stats.blogPosts,\r\n      description: `${stats.publishedPosts} published`,\r\n      icon: FileText,\r\n      link: \"/admin/blog\",\r\n      color: \"text-blue-500\",\r\n    },\r\n    {\r\n      title: \"Brand Logos\",\r\n      value: stats.brands,\r\n      description: \"Active brands\",\r\n      icon: Image,\r\n      link: \"/admin/brands\",\r\n      color: \"text-purple-500\",\r\n    },\r\n    {\r\n      title: \"Pending Comments\",\r\n      value: stats.pendingComments,\r\n      description: \"Needs moderation\",\r\n      icon: MessageSquare,\r\n      link: \"/admin/comments\",\r\n      color: \"text-orange-500\",\r\n    },\r\n    {\r\n      title: \"Newsletter Subscribers\",\r\n      value: stats.activeSubscribers,\r\n      description: \"Active subscribers\",\r\n      icon: Mail,\r\n      link: \"/admin/newsletter\",\r\n      color: \"text-green-500\",\r\n    },\r\n    {\r\n      title: \"Total Vendors\",\r\n      value: stats.totalVendors,\r\n      description: \"Registered vendors\",\r\n      icon: Users,\r\n      link: \"/vendor-management\",\r\n      color: \"text-indigo-500\",\r\n    },\r\n    {\r\n      title: \"Pending Approvals\",\r\n      value: stats.pendingApprovals,\r\n      description: \"Needs review\",\r\n      icon: ShieldCheck,\r\n      link: \"/vendor-approvals\",\r\n      color: \"text-red-500\",\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <AdminLayout>\r\n        <div className=\"flex min-h-screen items-center justify-center\">\r\n          <div className=\"animate-pulse\">Loading dashboard...</div>\r\n        </div>\r\n      </AdminLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminLayout>\r\n      <div className=\"container mx-auto p-6 space-y-6\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Admin Dashboard</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Overview of your platform's content and activity\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n          {statCards.map((stat) => (\r\n            <Card \r\n              key={stat.title} \r\n              className=\"hover:shadow-lg transition-shadow cursor-pointer\"\r\n              onClick={() => navigate(stat.link)}\r\n            >\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">\r\n                  {stat.title}\r\n                </CardTitle>\r\n                <stat.icon className={`h-5 w-5 ${stat.color}`} />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {stat.description}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          <Card className=\"hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => navigate(\"/analytics-dashboard\")}>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <TrendingUp className=\"h-5 w-5 text-primary\" />\r\n                Analytics Dashboard\r\n              </CardTitle>\r\n              <CardDescription>\r\n                View detailed analytics and engagement metrics\r\n              </CardDescription>\r\n            </CardHeader>\r\n          </Card>\r\n\r\n          <Card className=\"hover:shadow-lg transition-shadow cursor-pointer\" onClick={() => navigate(\"/audit-logs\")}>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <BarChart3 className=\"h-5 w-5 text-primary\" />\r\n                Audit Logs\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Track admin actions and system changes\r\n              </CardDescription>\r\n            </CardHeader>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </AdminLayout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"names":["AdminDashboard","navigate","useNavigate","stats","setStats","useState","loading","setLoading","useEffect","fetchStats","blogPosts","brands","comments","subscribers","permissions","approvals","supabase","p","error","statCards","FileText","Image","MessageSquare","Mail","Users","ShieldCheck","jsx","AdminLayout","jsxs","stat","Card","CardHeader","CardTitle","CardContent","TrendingUp","CardDescription","BarChart3"],"mappings":"0kBA0BA,MAAMA,EAAiB,IAAM,CAC3B,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAOC,CAAQ,EAAIC,WAAyB,CACjD,UAAW,EACX,eAAgB,EAChB,OAAQ,EACR,gBAAiB,EACjB,kBAAmB,EACnB,aAAc,EACd,iBAAkB,CAAA,CACnB,EACK,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CG,EAAAA,UAAU,IAAM,CACdC,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAa,SAAY,CAC7B,GAAI,CACF,KAAM,CACJ,CAAE,KAAMC,CAAA,EACR,CAAE,KAAMC,CAAA,EACR,CAAE,KAAMC,CAAA,EACR,CAAE,KAAMC,CAAA,EACR,CAAE,KAAMC,CAAA,EACR,CAAE,KAAMC,CAAA,CAAU,EAChB,MAAM,QAAQ,IAAI,CACpBC,EAAS,KAAK,YAAY,EAAE,OAAO,eAAe,EAClDA,EAAS,KAAK,QAAQ,EAAE,OAAO,IAAI,EACnCA,EAAS,KAAK,eAAe,EAAE,OAAO,IAAI,EAAE,GAAG,SAAU,SAAS,EAClEA,EAAS,KAAK,wBAAwB,EAAE,OAAO,IAAI,EAAE,GAAG,YAAa,EAAI,EACzEA,EAAS,KAAK,oBAAoB,EAAE,OAAO,IAAI,EAC/CA,EAAS,KAAK,sBAAsB,EAAE,OAAO,IAAI,EAAE,GAAG,SAAU,SAAS,CAAA,CAC1E,EAEDZ,EAAS,CACP,WAAWM,GAAA,YAAAA,EAAW,SAAU,EAChC,gBAAgBA,GAAA,YAAAA,EAAW,UAAYO,EAAE,WAAW,SAAU,EAC9D,QAAQN,GAAA,YAAAA,EAAQ,SAAU,EAC1B,iBAAiBC,GAAA,YAAAA,EAAU,SAAU,EACrC,mBAAmBC,GAAA,YAAAA,EAAa,SAAU,EAC1C,cAAcC,GAAA,YAAAA,EAAa,SAAU,EACrC,kBAAkBC,GAAA,YAAAA,EAAW,SAAU,CAAA,CACxC,CACH,OAASG,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,QAAA,CACEX,EAAW,EAAK,CAClB,CACF,EAEMY,EAAY,CAChB,CACE,MAAO,aACP,MAAOhB,EAAM,UACb,YAAa,GAAGA,EAAM,cAAc,aACpC,KAAMiB,EACN,KAAM,cACN,MAAO,eAAA,EAET,CACE,MAAO,cACP,MAAOjB,EAAM,OACb,YAAa,gBACb,KAAMkB,EACN,KAAM,gBACN,MAAO,iBAAA,EAET,CACE,MAAO,mBACP,MAAOlB,EAAM,gBACb,YAAa,mBACb,KAAMmB,EACN,KAAM,kBACN,MAAO,iBAAA,EAET,CACE,MAAO,yBACP,MAAOnB,EAAM,kBACb,YAAa,qBACb,KAAMoB,EACN,KAAM,oBACN,MAAO,gBAAA,EAET,CACE,MAAO,gBACP,MAAOpB,EAAM,aACb,YAAa,qBACb,KAAMqB,EACN,KAAM,qBACN,MAAO,iBAAA,EAET,CACE,MAAO,oBACP,MAAOrB,EAAM,iBACb,YAAa,eACb,KAAMsB,EACN,KAAM,oBACN,MAAO,cAAA,CACT,EAGF,OAAInB,EAEAoB,EAAAA,IAACC,EAAA,CACC,SAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,sBAAA,CAAoB,CAAA,CACrD,EACF,EAKFA,EAAAA,IAACC,EAAA,CACC,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,kBAAe,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kDAAA,CAErC,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,2CACZ,SAAAP,EAAU,IAAKU,GACdD,EAAAA,KAACE,EAAA,CAEC,UAAU,mDACV,QAAS,IAAM7B,EAAS4B,EAAK,IAAI,EAEjC,SAAA,CAAAD,EAAAA,KAACG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAL,EAAAA,IAACM,EAAA,CAAU,UAAU,sBAClB,SAAAH,EAAK,MACR,EACAH,MAACG,EAAK,KAAL,CAAU,UAAW,WAAWA,EAAK,KAAK,EAAA,CAAI,CAAA,EACjD,SACCI,EAAA,CACC,SAAA,CAAAP,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAsB,SAAAG,EAAK,MAAM,EAChDH,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACV,WAAK,WAAA,CACR,CAAA,CAAA,CACF,CAAA,CAAA,EAfKG,EAAK,KAAA,CAiBb,EACH,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAF,EAAAA,IAACI,EAAA,CAAK,UAAU,mDAAmD,QAAS,IAAM7B,EAAS,sBAAsB,EAC/G,SAAA2B,EAAAA,KAACG,EAAA,CACC,SAAA,CAAAH,EAAAA,KAACI,EAAA,CAAU,UAAU,0BACnB,SAAA,CAAAN,EAAAA,IAACQ,EAAA,CAAW,UAAU,sBAAA,CAAuB,EAAE,qBAAA,EAEjD,EACAR,EAAAA,IAACS,GAAgB,SAAA,gDAAA,CAEjB,CAAA,CAAA,CACF,CAAA,CACF,EAEAT,EAAAA,IAACI,EAAA,CAAK,UAAU,mDAAmD,QAAS,IAAM7B,EAAS,aAAa,EACtG,SAAA2B,EAAAA,KAACG,EAAA,CACC,SAAA,CAAAH,EAAAA,KAACI,EAAA,CAAU,UAAU,0BACnB,SAAA,CAAAN,EAAAA,IAACU,EAAA,CAAU,UAAU,sBAAA,CAAuB,EAAE,YAAA,EAEhD,EACAV,EAAAA,IAACS,GAAgB,SAAA,wCAAA,CAEjB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}