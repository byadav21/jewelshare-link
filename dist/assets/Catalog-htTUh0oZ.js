import{j as e}from"./query-vendor-BLxHmmGk.js";import{r as d,u as _t}from"./react-vendor-BeR0k5Z3.js";import{C as Re,i as Kt,g as Qt,o as Ws,S as X,B as T,s as S,T as pt,q as gt,r as xt,t as ht,k as Ys,f as Me,v as Hs,w as Ks,A as Qs}from"./index-CX6yiz0b.js";import{C as We}from"./checkbox-BEepVNza.js";import{B as ee}from"./badge-45Abp579.js";import{O as Js}from"./OptimizedImage-DQ051bg0.js";import{k as v}from"./proxy-8agjeDDu.js";import{f as Jt,g as Zt,t as Ve,Z as ft,O as Zs,b as de,d as we,i as Xt,a7 as Xs,D as es,e as _e,au as Ke,G as Mt,H as Ye,U as yt,av as ts,m as Ee,P as ea,c as ta,X as ss,u as A,ai as qe,n as as,l as sa,aw as zt,k as aa,ax as bt,a8 as jt,a2 as ra,A as ia,ap as na,a9 as Nt,T as oa,ay as Ot,V as Gt,az as Bt,aA as Vt,q as qt,ar as la,a1 as Wt,at as Yt,aB as ca}from"./ui-vendor-DjQqXt9S.js";import{F as da,P as ma,C as ua}from"./ProductShowcaseCarousel-CdIS3E6Z.js";import{D as me,b as ue,c as ze,d as Oe,e as Qe,f as rs}from"./dialog-KVJ8gRMk.js";import{S as Ct}from"./scroll-area-BorAVKI3.js";import{N as pa,D as ga,a as xa,b as ha,c as J,d as rt}from"./NavLink-Bvq0lq1P.js";import{u as fa}from"./useVendorPermissions-CoV6zMFq.js";import{E as ya,a as ba}from"./jspdf.plugin.autotable-41Os2KV8.js";import{P as ja}from"./PlanLimitWarning-BlkgAHMZ.js";import{P as vt}from"./progress-CjUz6kiI.js";import{A as Na,a as va}from"./alert-DIsJjuyH.js";import{c as He}from"./confetti.module-B5JVzsfH.js";import{A as $e}from"./index-BkbA5Y1F.js";import{u as is}from"./useRewardsSystem-d5GTIiEP.js";import{f as wa}from"./formatDistanceToNow-DhgZmTNt.js";import{u as _a}from"./useMilestones-Bt2TalEd.js";import{I as z}from"./input-CiHC6UAI.js";import{L as R}from"./label-DbIM3Eg1.js";import{u as Ca}from"./useKeyboardHeight-DHIJz8gT.js";import{S as it,a as nt,b as ot,c as lt,d as ie}from"./select-CYWHo3cU.js";import{T as Sa,a as ka,b as ct,c as dt}from"./tabs-30ai4xjf.js";import{T as Da,a as Ta,b as Ht,c as mt,d as Pa,e as ut}from"./table-CYMzKz5T.js";import{z as U}from"./index-ibl8YJur.js";import{A as Aa,a as Ia,b as La,c as Fa,d as Ua,e as Ra,f as Ea,g as $a}from"./alert-dialog-Co4VP2kw.js";import{B as Ma}from"./BackToHomeButton-C1MOpu96.js";import"./supabase-vendor-VSDMYZ1k.js";import"./index-DjQc2W_p.js";import"./index-DhS5fNEb.js";import"./index-D6fUEw85.js";import"./index-BC78nHQ6.js";import"./index-BdQq_4o_.js";import"./index-DVcnno33.js";import"./en-US-DWrl2lTx.js";import"./endOfMonth-DIWrT0r0.js";const za=({product:t,isSelected:r,onToggleSelection:o,usdRate:m,vendorLogoUrl:u})=>{const c=[t.image_url,t.image_url_2,t.image_url_3].filter(Boolean),[i,n]=d.useState(0),[f,y]=d.useState(!1),w=()=>{n(b=>(b+1)%c.length)},x=()=>{n(b=>(b-1+c.length)%c.length)},p=()=>{y(!0),c.length>1&&w()},g=()=>{y(!1),n(0)};return e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},whileHover:{y:-8,transition:{duration:.3,ease:"easeOut"}},children:e.jsxs(Re,{className:"overflow-hidden relative group bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 active:scale-[0.98] touch-manipulation",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",onClick:b=>b.stopPropagation(),children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-md rounded opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx(We,{checked:r,onCheckedChange:b=>{o(t.id)},className:"relative bg-background/95 backdrop-blur-sm border-2 border-primary/30 w-5 h-5 sm:w-6 sm:h-6 shadow-lg cursor-pointer"})]})}),c.length>0?e.jsxs("div",{className:"aspect-square overflow-hidden bg-muted relative group",onMouseEnter:p,onMouseLeave:g,children:[e.jsx(Js,{src:c[i],alt:`${t.name} - Image ${i+1}`,className:"w-full h-full object-cover transition-all duration-300",width:400,height:400}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation","aria-label":"Previous image",children:e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("button",{onClick:w,className:"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation","aria-label":"Next image",children:e.jsx(Zt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("div",{className:"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 sm:gap-2 bg-background/80 backdrop-blur-sm px-2 sm:px-3 py-1 sm:py-1.5 rounded-full",children:c.map((b,E)=>e.jsx("button",{onClick:()=>n(E),className:`transition-all duration-300 rounded-full touch-manipulation ${E===i?"bg-primary w-5 sm:w-6 h-1.5 sm:h-2":"bg-muted-foreground/40 w-1.5 sm:w-2 h-1.5 sm:h-2 active:bg-muted-foreground/60"}`,"aria-label":`Go to image ${E+1}`},E))}),e.jsxs("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 bg-background/90 backdrop-blur-sm px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium shadow-sm",children:[i+1," / ",c.length]})]})]}):e.jsx("div",{className:"aspect-square overflow-hidden bg-muted flex items-center justify-center",children:e.jsx(Ve,{className:"h-24 w-24 text-muted-foreground/30"})}),e.jsxs(Kt,{className:"p-4 sm:p-6 relative",children:[e.jsx("h3",{className:"font-serif text-lg sm:text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300",children:t.name}),t.sku&&e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground/80 mb-3 font-medium",children:["SKU: ",t.sku]}),e.jsxs("div",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm border-t border-border/50 pt-3 sm:pt-4 bg-gradient-to-b from-transparent to-muted/20 -mx-4 sm:-mx-6 px-4 sm:px-6 pb-2",children:[t.diamond_color&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Diamond Color:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.diamond_color})]}),t.clarity&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Diamond Clarity:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.clarity})]}),t.diamond_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"T DWT:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.diamond_weight,"g"]})]}),t.weight_grams&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Gross Weight:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.weight_grams,"g"]})]}),t.net_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"NET WT:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[t.net_weight,"g"]})]})]}),t.metal_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Metal Type:"}),e.jsx("span",{className:"text-foreground font-semibold",children:t.metal_type})]}),t.purity_fraction_used&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:"Metal Purity:"}),e.jsxs("span",{className:"text-foreground font-semibold",children:[(t.purity_fraction_used*100).toFixed(0),"%"]})]})]})]}),e.jsxs(Qt,{className:"p-3 sm:p-6",children:[t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 sm:mb-3 line-clamp-2",children:t.description}),t.category&&e.jsxs("div",{className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",e.jsx("span",{className:"text-foreground font-medium",children:t.category})]})]}),e.jsxs(Ws,{className:"flex flex-col gap-3.5 border-t border-border/50 p-4 sm:p-6 pt-4 sm:pt-5 bg-gradient-to-b from-muted/5 to-transparent",children:[t.delivery_type&&e.jsx("div",{className:"w-full",children:t.delivery_type==="immediate delivery"?e.jsxs(ee,{variant:"secondary",className:"w-full justify-center gap-2 py-2 bg-gradient-to-r from-emerald-500/20 via-green-500/20 to-emerald-500/20 border-emerald-500/40 text-emerald-700 dark:text-emerald-400 hover:from-emerald-500/30 hover:to-green-500/30 shadow-sm font-semibold",children:[e.jsx(ft,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:"Immediate Dispatch"})]}):e.jsxs(ee,{variant:"outline",className:"w-full justify-center gap-2 py-2 border-primary/40 text-primary hover:bg-primary/10 shadow-sm font-semibold",children:[e.jsx(Zs,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:t.delivery_type})]})}),e.jsxs("div",{className:"flex justify-between w-full items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Retail Price"}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm",children:["â‚¹",t.retail_price.toLocaleString("en-IN")]}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary/20 to-accent/20 blur-lg opacity-30 -z-10"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:["$",(t.retail_price/m).toLocaleString("en-US",{maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:t.stock_quantity})]})]})]})]})})},Oa=()=>e.jsxs(Re,{className:"overflow-hidden bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg",children:[e.jsx(X,{className:"aspect-square w-full"}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{className:"h-6 w-3/4"}),e.jsx(X,{className:"h-4 w-1/2"})]}),e.jsxs("div",{className:"space-y-2 border-t border-border/50 pt-3",children:[e.jsx(X,{className:"h-3 w-full"}),e.jsx(X,{className:"h-3 w-full"}),e.jsx(X,{className:"h-3 w-2/3"})]}),e.jsxs("div",{className:"border-t border-border/50 pt-4",children:[e.jsx(X,{className:"h-10 w-full mb-3"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{className:"h-3 w-16"}),e.jsx(X,{className:"h-8 w-24"})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(X,{className:"h-3 w-12"}),e.jsx(X,{className:"h-8 w-12"})]})]})]})]})]}),Ga=[{category:"Ladies Rings",patterns:[/\bCLR\d+/i,/ladies?\s*rings?/i,/women'?s?\s*rings?/i,/female\s*rings?/i],priority:10},{category:"Gents Rings",patterns:[/\bCGR\d+/i,/gents?\s*rings?/i,/men'?s?\s*rings?/i,/male\s*rings?/i],priority:10},{category:"Rings",patterns:[/\brings?\b/i,/\bband\b/i,/\bwedding\s*band/i],priority:5},{category:"Ladies Bangles",patterns:[/\bCLB\d+/i,/ladies?\s*bangles?/i,/women'?s?\s*bangles?/i,/kadas?/i],priority:10},{category:"Gents Bangles",patterns:[/\bCGB\d+/i,/gents?\s*bangles?/i,/men'?s?\s*bangles?/i],priority:10},{category:"Bangles",patterns:[/\bbangles?\b/i,/\bbracelets?\b/i],priority:5},{category:"Bracelets",patterns:[/\bCBR\d+/i,/\bbracelets?\b/i,/\bwrist\s*band/i,/\bchain\s*bracelet/i],priority:8},{category:"Necklaces",patterns:[/\bCLN\d+/i,/\bnecklaces?\b/i,/\bhaar\b/i,/\bmangalsutra/i,/\bchoker/i,/\bcollar\b/i],priority:9},{category:"Earrings",patterns:[/\bCLE\d+/i,/\bearrings?\b/i,/\bstuds?\b/i,/\bhoops?\b/i,/\bdrops?\b/i,/\bjhumka/i,/\bjhumki/i],priority:9},{category:"Pendants",patterns:[/\bCLP\d+/i,/\bpendants?\b/i,/\blockets?\b/i,/\bcharm\b/i],priority:9},{category:"Chains",patterns:[/\bCLC\d+/i,/\bchains?\b/i,/\bgold\s*chain/i,/\bsilver\s*chain/i],priority:9},{category:"Toe Rings",patterns:[/\btoe\s*rings?/i,/\bmetti/i,/\bfoot\s*rings?/i],priority:9},{category:"Nose Pins",patterns:[/\bnose\s*pins?/i,/\bnath\b/i,/\bbullak/i],priority:9},{category:"Mangalsutra",patterns:[/\bmangalsutra/i,/\bthali/i],priority:9},{category:"Anklets",patterns:[/\banklets?/i,/\bpayal/i,/\bpajeb/i],priority:9},{category:"Sets",patterns:[/\bsets?\b/i,/\bcomplete\s*set/i,/\bbridal\s*set/i,/\bjewel(?:le)?ry\s*set/i],priority:8}];function Ba(t,r){const o=`${t} ${r||""}`,m=[...Ga].sort((u,c)=>c.priority-u.priority);for(const{category:u,patterns:c,priority:i}of m)for(const n of c)if(n.test(o)){let f;return i>=10?f="high":i>=7?f="medium":f="low",{category:u,confidence:f,pattern:n.source}}return null}function Va(t){const r=[];for(const o of t){if(o.category)continue;const m=Ba(o.name,o.sku);m&&r.push({productId:o.id,productName:o.name,currentCategory:o.category,suggestedCategory:m.category,confidence:m.confidence,matchedPattern:m.pattern})}return r}function qa(t){const r=t.reduce((m,u)=>(m[u.suggestedCategory]=(m[u.suggestedCategory]||0)+1,m),{}),o=t.reduce((m,u)=>(m[u.confidence]=(m[u.confidence]||0)+1,m),{});return{total:t.length,byCategory:r,byConfidence:o}}function Wa({open:t,onOpenChange:r,suggestions:o,onApply:m}){const[u,c]=d.useState(new Set(o.map(g=>g.productId))),[i,n]=d.useState(!1),f=qa(o),y=g=>{const b=new Set(u);b.has(g)?b.delete(g):b.add(g),c(b)},w=()=>{u.size===o.length?c(new Set):c(new Set(o.map(g=>g.productId)))},x=async()=>{n(!0);try{await m(Array.from(u)),r(!1)}finally{n(!1)}},p=g=>{switch(g){case"high":return e.jsx(ee,{className:"bg-green-500/20 text-green-700 dark:text-green-400",children:"High"});case"medium":return e.jsx(ee,{className:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",children:"Medium"});case"low":return e.jsx(ee,{className:"bg-orange-500/20 text-orange-700 dark:text-orange-400",children:"Low"});default:return null}};return e.jsx(me,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"max-w-4xl max-h-[80vh]",children:[e.jsxs(ze,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Smart Category Suggestions"]}),e.jsxs(Qe,{children:["Found ",f.total," products that can be auto-categorized based on their names and SKUs"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 py-4",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:f.total}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Suggestions"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.byConfidence.high||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"High Confidence"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:f.byConfidence.medium||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Medium Confidence"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.byConfidence.low||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Low Confidence"})]})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Categories Found"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(f.byCategory).map(([g,b])=>e.jsxs(ee,{variant:"secondary",children:[g,": ",b]},g))})]}),e.jsx(Ct,{className:"h-[300px] border rounded-lg",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b sticky top-0 bg-background",children:[e.jsx(We,{checked:u.size===o.length,onCheckedChange:w}),e.jsxs("span",{className:"text-sm font-medium",children:["Select All (",u.size,"/",o.length,")"]})]}),o.map(g=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors",children:[e.jsx(We,{checked:u.has(g.productId),onCheckedChange:()=>y(g.productId)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:g.productName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"â†’"}),e.jsx(ee,{variant:"outline",className:"text-xs",children:g.suggestedCategory}),p(g.confidence)]})]})]},g.productId))]})}),e.jsxs(rs,{children:[e.jsx(T,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(T,{onClick:x,disabled:u.size===0||i,children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Apply ",u.size," Categories"]})]})]})})}const St=()=>{const[t,r]=d.useState(null),[o,m]=d.useState(null),[u,c]=d.useState(!0);d.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:{user:x}}=await S.auth.getUser();if(!x)return;const{data:p,error:g}=await S.from("vendor_permissions").select("subscription_plan, max_products, max_share_links, max_team_members, max_product_images").eq("user_id",x.id).single();if(g)throw g;const{data:b,error:E}=await S.from("products").select("id").eq("user_id",x.id).is("deleted_at",null);if(E)throw E;const{data:H,error:K}=await S.from("share_links").select("id").eq("user_id",x.id);if(K)throw K;r(p),m({products_count:(b==null?void 0:b.length)||0,share_links_count:(H==null?void 0:H.length)||0})}catch(x){console.error("Error fetching limits:",x)}finally{c(!1)}};if(!t||!o)return{canAddProducts:!0,canAddShareLinks:!0,productsRemaining:0,shareLinksRemaining:0,productUsagePercent:0,shareLinksUsagePercent:0,loading:u};const n=o.products_count/t.max_products*100,f=o.share_links_count/t.max_share_links*100,y=t.max_products===999999,w=t.max_share_links===999999;return{canAddProducts:y||o.products_count<t.max_products,canAddShareLinks:w||o.share_links_count<t.max_share_links,productsRemaining:y?1/0:t.max_products-o.products_count,shareLinksRemaining:w?1/0:t.max_share_links-o.share_links_count,productUsagePercent:n,shareLinksUsagePercent:f,loading:u}},Ya=(t,r,o,m,u,c)=>{var x;const i=new ya("landscape","mm","a4"),n=i.internal.pageSize.getWidth();if(i.setFontSize(20),i.setFont("helvetica","bold"),i.text((r==null?void 0:r.business_name)||"Product Catalog",n/2,20,{align:"center"}),r){i.setFontSize(10),i.setFont("helvetica","normal");let p=30;r.address_line1&&(i.text(`${r.address_line1}${r.address_line2?", "+r.address_line2:""}`,n/2,p,{align:"center"}),p+=5),r.city&&(i.text(`${r.city}, ${r.state} ${r.pincode}`,n/2,p,{align:"center"}),p+=5);const g=[];r.email&&g.push(`Email: ${r.email}`),r.phone&&g.push(`Phone: ${r.phone}`),r.whatsapp_number&&g.push(`WhatsApp: ${r.whatsapp_number}`),g.length>0&&i.text(g.join(" | "),n/2,p,{align:"center"})}i.setFillColor(248,250,252),i.rect(0,45,n,8,"F"),i.setFontSize(8.5),i.setFont("helvetica","bold"),i.setTextColor(70,70,80),i.text(`Date: ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})} | Exchange Rate: 1 USD = Rs.${o.toFixed(2)} | Gold Rate (24K): Rs.${m.toLocaleString("en-IN")}/g`,n/2,49,{align:"center"});const f=t.map((p,g)=>[p.sku||`${g+1}`,p.name,p.diamond_color||"-",p.clarity||"-",p.d_wt_1?`${p.d_wt_1}`:"-",p.d_wt_2?`${p.d_wt_2}`:"-",p.diamond_weight?`${p.diamond_weight}`:"-",p.weight_grams?`${p.weight_grams}`:"-",p.net_weight?`${p.net_weight}`:"-",p.purity_fraction_used?`${p.purity_fraction_used}%`:"-",p.d_rate_1?`${p.d_rate_1.toLocaleString("en-IN")}`:"-",p.pointer_diamond?`${p.pointer_diamond.toLocaleString("en-IN")}`:"-",p.d_value?`${p.d_value.toLocaleString("en-IN")}`:"-",p.gemstone||"NONE",p.mkg?`${p.mkg.toLocaleString("en-IN",{maximumFractionDigits:2})}`:"-",p.certification_cost?`${p.certification_cost.toLocaleString("en-IN")}`:"-",p.gemstone_cost?`${p.gemstone_cost.toLocaleString("en-IN")}`:"-",p.retail_price.toLocaleString("en-IN",{maximumFractionDigits:0}),p.total_usd?p.total_usd.toFixed(2):(p.retail_price/o).toFixed(2)]);ba(i,{head:[["SKU","PRODUCT NAME",`DIAMOND
COLOR`,"CLARITY",`D.WT 1
(ct)`,`D.WT 2
(ct)`,`TOTAL
D.WT (ct)`,`GROSS
WT (g)`,`NET
WT (g)`,`PURITY
%`,`D RATE 1
(Rs/ct)`,`POINTER
DIAMOND`,`D VALUE
(Rs)`,`GEMSTONE
TYPE`,`MKG
(Rs)`,`CERT
COST (Rs)`,`GEM
COST (Rs)`,`TOTAL
(Rs)`,`TOTAL
(USD)`]],body:f,startY:53,styles:{fontSize:8,cellPadding:3,lineColor:[220,220,220],lineWidth:.15,overflow:"linebreak",halign:"left",valign:"middle",textColor:[50,50,50]},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontStyle:"bold",halign:"center",fontSize:7.5,minCellHeight:14,valign:"middle",cellPadding:3},alternateRowStyles:{fillColor:[250,252,255]},columnStyles:{0:{cellWidth:15,halign:"left"},1:{cellWidth:32,halign:"left"},2:{cellWidth:12,halign:"center"},3:{cellWidth:12,halign:"center"},4:{cellWidth:12,halign:"right"},5:{cellWidth:12,halign:"right"},6:{cellWidth:14,halign:"right"},7:{cellWidth:12,halign:"right"},8:{cellWidth:12,halign:"right"},9:{cellWidth:12,halign:"right"},10:{cellWidth:14,halign:"right"},11:{cellWidth:14,halign:"right"},12:{cellWidth:14,halign:"right"},13:{cellWidth:16,halign:"center"},14:{cellWidth:14,halign:"right"},15:{cellWidth:13,halign:"right"},16:{cellWidth:13,halign:"right"},17:{cellWidth:22,halign:"right",fontStyle:"bold",textColor:[30,64,175]},18:{cellWidth:18,halign:"right",fontStyle:"bold",textColor:[30,64,175]}},margin:{top:53,left:5,right:5},tableWidth:"auto",didParseCell:function(p){p.column.index===17&&p.section==="body"&&(p.cell.text=[`Rs. ${p.cell.text[0]}`]),p.column.index===18&&p.section==="body"&&(p.cell.text=[`$ ${p.cell.text[0]}`])}});const y=i.lastAutoTable.finalY||50;i.setFillColor(250,252,255),i.roundedRect(14,y+6,n-28,20,2,2,"F"),i.setDrawColor(41,128,185),i.setLineWidth(.5),i.roundedRect(14,y+6,n-28,20,2,2,"S"),i.setFontSize(11),i.setFont("helvetica","bold"),i.setTextColor(41,128,185),i.text(`Total: Rs.${u.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})} | USD $${c.toFixed(2)}`,n/2,y+13,{align:"center"}),i.setTextColor(50,50,60),i.setFontSize(9),i.text(`Total Products: ${t.length}`,n/2,y+20,{align:"center"});const w=`catalog_${((x=r==null?void 0:r.business_name)==null?void 0:x.replace(/\s+/g,"_"))||"products"}_${new Date().toLocaleDateString("en-IN").replace(/\//g,"-")}.pdf`;i.save(w)},Ha=()=>{const{productUsagePercent:t,shareLinksUsagePercent:r,productsRemaining:o,shareLinksRemaining:m,loading:u}=St();if(u)return null;const c=o===1/0,i=m===1/0,n=t>=80||r>=80,f=t>=100||r>=100;return n?e.jsx(Na,{className:`mb-6 ${f?"border-destructive bg-destructive/5":"border-warning bg-warning/5"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[f?e.jsx(Xs,{className:"h-5 w-5 text-destructive mt-0.5"}):e.jsx(we,{className:"h-5 w-5 text-warning mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx(va,{className:"font-medium",children:f?"Plan Limits Reached":"Approaching Plan Limits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Products"}),e.jsx("span",{className:"font-medium",children:c?"Unlimited":`${o} remaining`})]}),!c&&e.jsx(vt,{value:Math.min(t,100),className:t>=100?"[&>div]:bg-destructive":t>=80?"[&>div]:bg-warning":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Share Links"}),e.jsx("span",{className:"font-medium",children:i?"Unlimited":`${m} remaining`})]}),!i&&e.jsx(vt,{value:Math.min(r,100),className:r>=100?"[&>div]:bg-destructive":r>=80?"[&>div]:bg-warning":""})]})]})]})]})}):null},ns=({open:t,onOpenChange:r,limitType:o})=>{const m=_t(),u=()=>{r(!1),m("/pricing")},c=()=>{switch(o){case"products":return"You've reached your product limit";case"share_links":return"You've reached your share link limit";default:return"You've reached your plan limit"}},i=[{name:"Professional",price:"â‚¹2,999/mo",features:["1,000 Products","10 Share Links","3 Team Members","Unlimited Product Images","Custom Orders","Import Data","Priority Support"]},{name:"Enterprise",price:"Custom",features:["Unlimited Products","Unlimited Share Links","Unlimited Team Members","Unlimited Product Images","All Professional Features","Dedicated Account Manager","Custom Integrations"],highlight:!0}];return e.jsx(me,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ze,{children:[e.jsxs(Oe,{className:"text-2xl flex items-center gap-2",children:[e.jsx(de,{className:"h-6 w-6 text-primary"}),"Upgrade Your Plan"]}),e.jsxs(Qe,{className:"text-base",children:[c(),". Upgrade to continue growing your business."]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:i.map(n=>e.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${n.highlight?"border-primary bg-primary/5":"border-border"}`,children:[n.highlight&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:"RECOMMENDED"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:n.name}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:n.price})]}),e.jsx("ul",{className:"space-y-3",children:n.features.map(f=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f})]},f))}),e.jsx(T,{onClick:u,className:"w-full",variant:n.highlight?"default":"outline",children:n.name==="Enterprise"?"Contact Sales":"Upgrade Now"})]})]},n.name))})]})})},Ka=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),r=[523.25,659.25,783.99,1046.5],o=.15;r.forEach((m,u)=>{const c=t.createOscillator(),i=t.createGain();c.connect(i),i.connect(t.destination),c.frequency.value=m,c.type="sine";const n=t.currentTime+u*o;i.gain.setValueAtTime(.3,n),i.gain.exponentialRampToValueAtTime(.01,n+o),c.start(n),c.stop(n+o)})}catch{console.log("Audio not supported")}},Qa=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext);[783.99,1046.5].forEach((o,m)=>{const u=t.createOscillator(),c=t.createGain();u.connect(c),c.connect(t.destination),u.frequency.value=o,u.type="triangle";const i=t.currentTime+m*.2;c.gain.setValueAtTime(.4,i),c.gain.exponentialRampToValueAtTime(.01,i+.3),u.start(i),u.stop(i+.3)})}catch{console.log("Audio not supported")}},Ja=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),r=[659.25,783.99,659.25,1046.5],o=.12;r.forEach((m,u)=>{const c=t.createOscillator(),i=t.createGain();c.connect(i),i.connect(t.destination),c.frequency.value=m,c.type="square";const n=t.currentTime+u*o;i.gain.setValueAtTime(.2,n),i.gain.exponentialRampToValueAtTime(.01,n+o),c.start(n),c.stop(n+o)})}catch{console.log("Audio not supported")}},Za=({open:t,onOpenChange:r,planName:o})=>{const[m,u]=d.useState(!1);return d.useEffect(()=>{if(t){let c=function(w,x){return Math.random()*(x-w)+w};Ka();const i=3e3,n=Date.now()+i,f={startVelocity:30,spread:360,ticks:60,zIndex:9999},y=setInterval(function(){const w=n-Date.now();if(w<=0)return clearInterval(y);const x=50*(w/i);He({...f,particleCount:x,origin:{x:c(.1,.3),y:Math.random()-.2}}),He({...f,particleCount:x,origin:{x:c(.7,.9),y:Math.random()-.2}})},250);return setTimeout(()=>u(!0),300),()=>{clearInterval(y),u(!1)}}},[t]),e.jsx(me,{open:t,onOpenChange:r,children:e.jsx(ue,{className:"max-w-md border-0 bg-gradient-to-br from-primary/10 via-background to-accent/10 overflow-hidden",children:e.jsx($e,{children:m&&e.jsxs(v.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{duration:.5,type:"spring",bounce:.4},className:"relative py-8 text-center",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(8)].map((c,i)=>e.jsxs(v.div,{initial:{x:`${Math.random()*100}%`,y:"100%",opacity:0,rotate:0},animate:{y:"-20%",opacity:[0,1,1,0],rotate:360,x:`${Math.random()*100}%`},transition:{duration:3,delay:i*.2,repeat:1/0,repeatDelay:1},className:"absolute",children:[i%4===0&&e.jsx(_e,{className:"h-6 w-6 text-primary"}),i%4===1&&e.jsx(de,{className:"h-5 w-5 text-accent"}),i%4===2&&e.jsx(ft,{className:"h-5 w-5 text-primary"}),i%4===3&&e.jsx(_e,{className:"h-4 w-4 text-accent",fill:"currentColor"})]},i))}),e.jsx(v.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",bounce:.6,duration:.8,delay:.2},className:"inline-flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(v.div,{animate:{scale:[1,1.2,1],rotate:[0,-10,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:1},className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-2xl",children:e.jsx(Ke,{className:"h-12 w-12 text-primary-foreground"})}),[...Array(3)].map((c,i)=>e.jsx(v.div,{initial:{scale:1,opacity:.5},animate:{scale:2,opacity:0},transition:{duration:2,repeat:1/0,delay:i*.6},className:"absolute inset-0 rounded-full border-4 border-primary"},i))]})}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:[e.jsx(v.h2,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5},className:"text-3xl font-bold bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent mb-3",children:"ðŸŽ‰ Congratulations! ðŸŽ‰"}),e.jsxs("p",{className:"text-xl font-semibold text-foreground mb-2",children:["Welcome to ",o,"!"]}),e.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto",children:"Your account has been upgraded successfully. Enjoy your new features and expanded limits!"})]}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(v.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{duration:3,repeat:1/0},children:e.jsx(de,{className:"h-8 w-8 text-primary"})})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsx(v.div,{animate:{rotate:-360,scale:[1,1.3,1]},transition:{duration:2.5,repeat:1/0},children:e.jsx(ft,{className:"h-8 w-8 text-accent"})})})]})})})})},Xa=({open:t,onOpenChange:r,planName:o,benefits:m})=>e.jsx(me,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"max-w-2xl",children:[e.jsx(ze,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(de,{className:"h-6 w-6 text-primary"}),"Welcome to ",o,"!"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Here's what you've just unlocked:"}),e.jsx("div",{className:"grid gap-3",children:m.map((u,c)=>e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1,duration:.4},className:"relative group",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-border bg-gradient-to-r from-primary/5 to-transparent hover:from-primary/10 transition-all duration-300",children:[e.jsx(v.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:c*.1+.2,type:"spring",bounce:.5},className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(es,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(v.h4,{initial:{opacity:0},animate:{opacity:1},transition:{delay:c*.1+.3},className:"font-semibold text-foreground",children:u.title}),e.jsx(v.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:c*.1+.4},className:"text-sm text-muted-foreground",children:u.description})]}),e.jsx(v.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute top-2 right-2",children:e.jsx(de,{className:"h-4 w-4 text-primary"})})]})},u.title))}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m.length*.1+.5},className:"flex justify-center pt-4",children:e.jsx(T,{onClick:()=>r(!1),size:"lg",children:"Start Exploring"})})]})]})}),er=({open:t,onOpenChange:r,referralType:o,referredName:m})=>{const[u,c]=d.useState(!1);d.useEffect(()=>{if(t){let f=function(g,b){return Math.random()*(b-g)+g};Ja();const y=2500,w=Date.now()+y,x=["#f59e0b","#10b981","#3b82f6","#8b5cf6"],p=setInterval(function(){const g=w-Date.now();if(g<=0)return clearInterval(p);const b=30*(g/y);He({particleCount:b,startVelocity:25,spread:360,ticks:50,zIndex:9999,origin:{x:f(.2,.8),y:Math.random()-.1},colors:x})},200);return setTimeout(()=>c(!0),200),()=>{clearInterval(p),c(!1)}}},[t]);const i=o==="team_member"?{icon:yt,title:"Team Member Added! ðŸŽ‰",subtitle:m?`${m} joined your team`:"New team member joined",message:"Your team is growing! Collaboration makes everything better.",color:"text-blue-500"}:{icon:Ye,title:"New Customer! ðŸŽŠ",subtitle:m?`${m} joined`:"New customer signed up",message:"Your referrals are helping grow the community!",color:"text-pink-500"},n=i.icon;return e.jsx(me,{open:t,onOpenChange:r,children:e.jsx(ue,{className:"max-w-md border-0 bg-gradient-to-br from-background via-primary/5 to-accent/5 overflow-hidden",children:e.jsx($e,{children:u&&e.jsxs(v.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.4,type:"spring",bounce:.4},className:"relative py-6 text-center",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(6)].map((f,y)=>e.jsxs(v.div,{initial:{x:`${Math.random()*100}%`,y:"100%",opacity:0,rotate:0},animate:{y:"-10%",opacity:[0,1,1,0],rotate:180,x:`${Math.random()*100}%`},transition:{duration:2.5,delay:y*.15,repeat:1/0,repeatDelay:.5},className:"absolute",children:[y%3===0&&e.jsx(_e,{className:"h-5 w-5 text-yellow-500",fill:"currentColor"}),y%3===1&&e.jsx(Mt,{className:"h-4 w-4 text-primary"}),y%3===2&&e.jsx(Ye,{className:"h-4 w-4 text-pink-500"})]},y))}),e.jsx(v.div,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",bounce:.5,duration:.6},className:"inline-flex items-center justify-center mb-4",children:e.jsx(v.div,{animate:{scale:[1,1.1,1],rotate:[0,-5,5,-5,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5},className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center shadow-lg",children:e.jsx(n,{className:`h-10 w-10 ${i.color}`})})}),e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:i.title}),e.jsx("p",{className:"text-lg font-semibold text-primary mb-1",children:i.subtitle}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:i.message})]}),e.jsxs(v.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring",bounce:.6},className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 border border-primary/30",children:[e.jsx(Mt,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Referral Bonus Earned!"})]})]})})})})},tr=(t,r)=>({products_added:{icon:ea,title:`${r} Products Milestone! ðŸŽ‰`,message:`You've added ${r} products to your catalog!`,color:"text-blue-500",gradient:"from-blue-500/20 to-blue-500/5"},first_share_link:{icon:Ee,title:"First Share Link! ðŸš€",message:"You've created your first shareable catalog link!",color:"text-green-500",gradient:"from-green-500/20 to-green-500/5"},share_links_created:{icon:Ee,title:`${r} Share Links! ðŸ“ˆ`,message:`You've created ${r} share links!`,color:"text-green-500",gradient:"from-green-500/20 to-green-500/5"},total_views:{icon:ts,title:`${r} Views Milestone! ðŸ‘€`,message:`Your catalogs have reached ${r} views!`,color:"text-purple-500",gradient:"from-purple-500/20 to-purple-500/5"},first_sale:{icon:we,title:"First Sale! ðŸ’°",message:"Congratulations on your first sale!",color:"text-yellow-500",gradient:"from-yellow-500/20 to-yellow-500/5"}})[t]||{icon:_e,title:"Milestone Achieved! â­",message:"You've reached a new milestone!",color:"text-primary",gradient:"from-primary/20 to-primary/5"},sr=({open:t,onOpenChange:r,milestoneType:o,milestoneValue:m,pointsAwarded:u})=>{const[c,i]=d.useState(!1),n=tr(o,m),f=n.icon;return d.useEffect(()=>{if(t){let y=function(g,b){return Math.random()*(b-g)+g};Qa();const w=2e3,x=Date.now()+w,p=setInterval(function(){const g=x-Date.now();if(g<=0)return clearInterval(p);const b=40*(g/w);He({particleCount:b,startVelocity:30,spread:360,ticks:60,zIndex:9999,origin:{x:y(.3,.7),y:Math.random()-.1}})},250);return setTimeout(()=>i(!0),200),()=>{clearInterval(p),i(!1)}}},[t]),e.jsx(me,{open:t,onOpenChange:r,children:e.jsx(ue,{className:"max-w-md border-0 bg-gradient-to-br from-background via-primary/5 to-accent/5 overflow-hidden",children:e.jsx($e,{children:c&&e.jsxs(v.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.4,type:"spring",bounce:.4},className:"relative py-6 text-center",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(5)].map((y,w)=>e.jsx(v.div,{initial:{x:`${Math.random()*100}%`,y:"100%",opacity:0,scale:0},animate:{y:"-10%",opacity:[0,1,1,0],scale:[0,1,1,0],rotate:360},transition:{duration:2,delay:w*.1,repeat:1/0,repeatDelay:1},className:"absolute",children:e.jsx(_e,{className:"h-6 w-6 text-primary",fill:"currentColor"})},w))}),e.jsx(v.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",bounce:.6,duration:.7},className:"inline-flex items-center justify-center mb-5",children:e.jsx(v.div,{animate:{scale:[1,1.1,1],rotate:[0,-5,5,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5},className:`w-20 h-20 rounded-full bg-gradient-to-br ${n.gradient} flex items-center justify-center shadow-lg border border-border/50`,children:e.jsx(f,{className:`h-10 w-10 ${n.color}`})})}),e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:n.title}),e.jsx("p",{className:"text-muted-foreground mb-4",children:n.message})]}),e.jsxs(v.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring",bounce:.6},className:"inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 border border-primary/30",children:[e.jsx(Ke,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"text-lg font-bold text-foreground",children:["+",u," Points"]})]})]})})})})},ar=t=>{const r={bronze:"text-orange-600 bg-orange-100 dark:bg-orange-900/20",silver:"text-gray-600 bg-gray-100 dark:bg-gray-800/20",gold:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20",platinum:"text-purple-600 bg-purple-100 dark:bg-purple-900/20"};return r[t]||r.bronze},rr=t=>({bronze:{next:"silver",points:500},silver:{next:"gold",points:2e3},gold:{next:"platinum",points:5e3},platinum:{next:"legend",points:1e4}})[t]||{next:"silver",points:500},ir=()=>{const{points:t,loading:r}=is(),[o,m]=d.useState(null);d.useEffect(()=>{t&&u()},[t]);const u=async()=>{const{data:{user:n}}=await S.auth.getUser();if(!n)return;const{data:f,error:y}=await S.rpc("get_expiring_points",{user_id_param:n.id});!y&&f&&f.length>0&&m(f[0])};if(r||!t)return e.jsx(Re,{className:"p-4 animate-pulse",children:e.jsx("div",{className:"h-20 bg-muted rounded"})});const c=rr(t.current_tier),i=t.total_points/c.points*100;return e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(Re,{className:"p-5 bg-gradient-to-br from-primary/5 via-background to-accent/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:e.jsx(Ke,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Rewards"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.total_points.toLocaleString()," points"]})]})]}),e.jsx(ee,{className:ar(t.current_tier),children:t.current_tier.toUpperCase()})]}),t.current_tier!=="platinum"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Next tier: ",c.next]}),e.jsxs("span",{className:"font-medium text-foreground",children:[c.points-t.total_points," points"]})]}),e.jsx(vt,{value:Math.min(i,100),className:"h-2"})]}),t.current_tier==="platinum"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-600 dark:text-purple-400",children:[e.jsx(_e,{className:"h-4 w-4",fill:"currentColor"}),e.jsx("span",{className:"font-medium",children:"Maximum tier achieved!"})]}),o&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ta,{className:"h-4 w-4 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium text-orange-900 dark:text-orange-100",children:[o.points," points expiring soon"]}),e.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:["Expires ",wa(new Date(o.expires_at),{addSuffix:!0})]})]})]})})]})})},nr=({currentGoldRate:t,onUpdate:r,onSkip:o})=>{const[m,u]=d.useState(!1),[c,i]=d.useState(t.toString()),[n,f]=d.useState(!1);d.useEffect(()=>{const x=localStorage.getItem("gold_rate_skip_timestamp"),p=localStorage.getItem("gold_rate_last_prompt"),g=new Date,b=g.toDateString();if(x){const E=new Date(parseInt(x));if((g.getTime()-E.getTime())/(1e3*60*60)<24)return}p!==b&&setTimeout(()=>u(!0),1e3)},[]);const y=async()=>{const x=parseFloat(c);if(!c||c.trim()===""){A.error("Please enter a gold rate");return}if(isNaN(x)||x<=0){A.error("Please enter a valid positive number");return}if(x<1e3||x>2e5){A.error("Gold rate must be between â‚¹1,000 and â‚¹2,00,000 per gram");return}f(!0);try{await r(x);const p=new Date().toDateString();localStorage.setItem("gold_rate_last_prompt",p),localStorage.removeItem("gold_rate_skip_timestamp"),u(!1),A.success("Gold rate updated successfully!")}catch(p){console.error("Error updating gold rate:",p),A.error("Failed to update gold rate")}finally{f(!1)}},w=()=>{const x=new Date;localStorage.setItem("gold_rate_skip_timestamp",x.getTime().toString()),localStorage.setItem("gold_rate_last_prompt",x.toDateString()),u(!1),o(),A.info("Gold rate update skipped. You won't be asked again for 24 hours.")};return e.jsx(me,{open:m,onOpenChange:u,children:e.jsxs(ue,{className:"sm:max-w-md border-2 border-primary/20 shadow-2xl",children:[e.jsxs("button",{onClick:w,className:"absolute right-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-accent hover:scale-110 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs(ze,{className:"space-y-4",children:[e.jsx(v.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border-2 border-amber-500/30 shadow-lg",children:e.jsx(we,{className:"h-8 w-8 text-amber-600"})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(Oe,{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent",children:"Update Gold Rate"}),e.jsx(Qe,{className:"text-base",children:"Start your day by updating today's 24K gold rate"})]})]}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-5 pt-4",children:[e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Current Rate"}),e.jsxs("p",{className:"text-xl font-bold text-amber-600",children:["â‚¹",t.toLocaleString("en-IN"),"/g"]})]}),e.jsx(de,{className:"h-6 w-6 text-amber-500/50"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"goldRate",className:"text-sm font-medium",children:"New Gold Rate (per gram)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-medium",children:"â‚¹"}),e.jsx(z,{id:"goldRate",type:"number",value:c,onChange:x=>i(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&y()},placeholder:t.toString(),min:"1000",max:"200000",step:"100",disabled:n,className:"pl-8 h-12 text-lg font-semibold border-2 focus:border-amber-500 focus:ring-amber-500",autoFocus:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will automatically recalculate prices for all products with weight"})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[e.jsx(T,{onClick:y,disabled:n,size:"lg",className:"w-full h-12 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:n?e.jsxs(e.Fragment,{children:[e.jsx(v.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mr-2",children:e.jsx(we,{className:"h-5 w-5"})}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),"Update Gold Rate"]})}),e.jsx(T,{onClick:w,disabled:n,variant:"ghost",size:"lg",className:"w-full",children:"Skip for Today"})]}),e.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground leading-relaxed",children:["ðŸ’¡ ",e.jsx("strong",{children:"Pro Tip:"})," Update your gold rate daily to keep your pricing accurate and competitive"]})})]})]})})},or=({onExportPDF:t,onAutoCategorize:r})=>{const[o,m]=d.useState(!1),u=_t(),[c,i]=d.useState(!1),[n,f]=d.useState(),{keyboardHeight:y,isKeyboardVisible:w}=Ca(),{canAddProducts:x,canAddShareLinks:p,productsRemaining:g,shareLinksRemaining:b}=St(),E=()=>{if(!x){f("products"),i(!0),m(!1);return}u("/add-product"),m(!1)},H=()=>{if(!p){f("share_links"),i(!0),m(!1);return}u("/share"),m(!1)},K=()=>x?g!==1/0&&g<100?`Add Product (${g} left)`:"Add Product":"Add Product (Limit reached)",F=()=>p?b!==1/0&&b<100?`Share Catalog (${b} left)`:"Share Catalog":"Share Catalog (Limit reached)",ne=[{icon:qe,label:K(),onClick:E,gradient:"from-primary/20 to-primary/5",iconColor:"text-primary",disabled:!x,tooltip:x?void 0:"Product limit reached"},{icon:Ee,label:F(),onClick:H,gradient:"from-blue-500/20 to-blue-500/5",iconColor:"text-blue-500",disabled:!p,tooltip:p?void 0:"Share link limit reached"},...r?[{icon:de,label:"Auto-Categorize",onClick:()=>{r(),m(!1)},gradient:"from-violet-500/20 to-violet-500/5",iconColor:"text-violet-500",disabled:!1,tooltip:"Automatically categorize products"}]:[],{icon:as,label:"Purchase Inquiries",onClick:()=>{u("/purchase-inquiries"),m(!1)},gradient:"from-purple-500/20 to-purple-500/5",iconColor:"text-purple-500",disabled:!1},{icon:Ke,label:"Rewards",onClick:()=>{u("/rewards"),m(!1)},gradient:"from-yellow-500/20 to-yellow-500/5",iconColor:"text-yellow-500",disabled:!1},{icon:sa,label:"Create Invoice",onClick:()=>{u("/invoice-generator"),m(!1)},gradient:"from-orange-500/20 to-orange-500/5",iconColor:"text-orange-500",disabled:!1},{icon:zt,label:"View Invoices",onClick:()=>{u("/invoice-history"),m(!1)},gradient:"from-amber-500/20 to-amber-500/5",iconColor:"text-amber-500",disabled:!1},{icon:aa,label:"Create Estimate",onClick:()=>{u("/manufacturing-cost"),m(!1)},gradient:"from-emerald-500/20 to-emerald-500/5",iconColor:"text-emerald-500",disabled:!1},{icon:zt,label:"View Estimates",onClick:()=>{u("/estimate-history"),m(!1)},gradient:"from-cyan-500/20 to-cyan-500/5",iconColor:"text-cyan-500",disabled:!1},{icon:bt,label:"Export PDF",onClick:()=>{t(),m(!1)},gradient:"from-green-500/20 to-green-500/5",iconColor:"text-green-500",disabled:!1}],_=w?`${y+16}px`:"2rem";return e.jsxs(e.Fragment,{children:[e.jsxs(v.div,{className:"fixed right-8 z-50",animate:{bottom:_},transition:{duration:.3,ease:"easeOut"},children:[e.jsx($e,{children:o&&e.jsx(v.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{duration:.2},className:"absolute bottom-20 right-0 flex flex-col gap-3 mb-2",children:ne.map((O,k)=>{const pe=e.jsxs(v.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:k*.05},onClick:()=>{O.disabled||(O.onClick(),m(!1))},disabled:O.disabled,className:`
                    group relative flex items-center gap-3 px-4 py-3 rounded-xl
                    bg-gradient-to-br ${O.gradient} backdrop-blur-sm
                    border border-border/50 shadow-lg hover:shadow-xl
                    transition-all duration-300 hover:scale-105
                    ${O.disabled?"opacity-50 cursor-not-allowed hover:scale-100":""}
                  `,children:[e.jsx("div",{className:`
                    w-10 h-10 rounded-lg bg-background/50 flex items-center justify-center
                    ${O.iconColor} group-hover:scale-110 transition-transform duration-300
                    ${O.disabled?"group-hover:scale-100":""}
                  `,children:e.jsx(O.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium text-foreground pr-2 whitespace-nowrap",children:O.label})]},O.label);return O.tooltip?e.jsx(pt,{children:e.jsxs(gt,{children:[e.jsx(xt,{asChild:!0,children:pe}),e.jsx(ht,{side:"left",children:e.jsx("p",{children:O.tooltip})})]})},O.label):pe})})}),e.jsx(v.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>m(!o),className:`
          relative w-16 h-16 rounded-full
          bg-gradient-to-br from-primary to-primary/80
          text-primary-foreground shadow-xl hover:shadow-2xl
          transition-all duration-300
          ${o?"rotate-45":""}
        `,children:!o&&e.jsx("span",{className:"absolute inset-0 rounded-full bg-primary animate-ping opacity-20"})}),e.jsx($e,{children:!o&&e.jsx(v.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`absolute right-full mr-4 top-1/2 -translate-y-1/2 whitespace-nowrap\r
              px-3 py-2 rounded-lg bg-background/95 backdrop-blur-sm\r
              border border-border/50 shadow-lg text-sm font-medium\r
              pointer-events-none`,children:"Quick Actions"})})]}),e.jsx(ns,{open:c,onOpenChange:i,limitType:n})]})},lr=({vendorProfile:t})=>{if(!t)return null;const{business_story:r,certifications:o,awards:m}=t;return!r&&(!o||o.length===0)&&(!m||m.length===0)?null:e.jsxs(Re,{className:"mt-8 bg-gradient-to-br from-card via-card to-muted/20 border-border/50",children:[e.jsx(Kt,{children:e.jsxs(Ys,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(jt,{className:"h-6 w-6 text-primary"}),"About ",t.business_name||"Our Brand"]})}),e.jsxs(Qt,{className:"space-y-6",children:[r&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Our Story"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:r})]}),o&&o.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-foreground",children:[e.jsx(Xt,{className:"h-5 w-5 text-primary"}),"Certifications"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((u,c)=>e.jsx(ee,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20",children:u},c))})]}),m&&m.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-foreground",children:[e.jsx(ra,{className:"h-5 w-5 text-primary"}),"Awards & Recognition"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((u,c)=>e.jsx(ee,{variant:"secondary",className:"bg-accent/10 text-accent-foreground hover:bg-accent/20",children:u},c))})]})]})]})},cr=U.object({category:U.string().max(100).optional(),metal_type:U.string().max(50).optional(),delivery_type:U.enum(["immediate","scheduled"]).optional(),dispatches_in_days:U.number().int().min(0).max(365).optional(),status:U.string().max(50).optional(),stock_quantity:U.number().int().min(0).optional(),description:U.string().max(1e3).optional(),cost_price:U.number().min(0).optional(),retail_price:U.number().min(0).optional(),weight_grams:U.number().min(0).optional(),diamond_color:U.string().max(50).optional(),clarity:U.string().max(50).optional(),gemstone:U.string().max(100).optional(),gemstone_type:U.string().max(100).optional(),certification:U.string().max(100).optional(),cut:U.string().max(50).optional(),polish:U.string().max(50).optional(),symmetry:U.string().max(50).optional(),purity_fraction_used:U.number().min(0).max(1).optional(),pricingAdjustment:U.object({type:U.enum(["markup","discount"]),percentage:U.number().min(0).max(100)}).optional()});function dr({open:t,onOpenChange:r,onUpdate:o,selectedCount:m,selectedProductIds:u}){const[c,i]=d.useState(!1),[n,f]=d.useState({}),[y,w]=d.useState("markup"),[x,p]=d.useState(""),[g,b]=d.useState(!1),[E,H]=d.useState([]),[K,F]=d.useState(!1),ne=async()=>{var h;F(!0);try{const B={...n};x&&parseFloat(x)>0&&(B.pricingAdjustment={type:y,percentage:parseFloat(x)});try{cr.parse(B)}catch(G){A.error(`Validation error: ${((h=G.errors[0])==null?void 0:h.message)||"Invalid input"}`),F(!1);return}const{data:Y,error:Z}=await S.from("products").select("id, name, sku, category, metal_type, delivery_type, dispatches_in_days, status, stock_quantity, description, cost_price, retail_price, weight_grams, diamond_color, clarity, cut, polish, symmetry, gemstone, gemstone_type, certification, purity_fraction_used").in("id",u);if(Z)throw Z;if(!Y){A.error("Failed to fetch product data");return}const Je=Y.map(G=>{const fe=[],Ce={category:"Category",metal_type:"Metal Type",delivery_type:"Delivery Type",dispatches_in_days:"Dispatch Days",status:"Status",stock_quantity:"Stock Quantity",description:"Description",cost_price:"Cost Price",retail_price:"Retail Price",weight_grams:"Weight",diamond_color:"Diamond Color",clarity:"Clarity",cut:"Cut",polish:"Polish",symmetry:"Symmetry",gemstone:"Gemstone",gemstone_type:"Gemstone Type",certification:"Certification",purity_fraction_used:"Purity Fraction"};if(Object.entries(n).forEach(([te,ae])=>{if(ae!==""&&ae!==null&&ae!=="no-change"){const ye=G[te];ye!==ae&&fe.push({field:Ce[te]||te,oldValue:ye||"â€”",newValue:ae})}}),B.pricingAdjustment&&B.pricingAdjustment.percentage>0){const te=B.pricingAdjustment.type==="markup"?1+B.pricingAdjustment.percentage/100:1-B.pricingAdjustment.percentage/100,ae=Math.max(0,G.cost_price*te),ye=Math.max(0,G.retail_price*te);n.cost_price||fe.push({field:"Cost Price",oldValue:`â‚¹${G.cost_price.toFixed(2)}`,newValue:`â‚¹${ae.toFixed(2)}`}),n.retail_price||fe.push({field:"Retail Price",oldValue:`â‚¹${G.retail_price.toFixed(2)}`,newValue:`â‚¹${ye.toFixed(2)}`})}return{id:G.id,name:G.name,sku:G.sku||"N/A",changes:fe}});H(Je.filter(G=>G.changes.length>0)),b(!0)}catch(B){console.error("Failed to generate preview:",B),A.error(`Failed to generate preview: ${B.message||"Unknown error"}`)}finally{F(!1)}},_=async()=>{i(!0);try{const h={...n};x&&parseFloat(x)>0&&(h.pricingAdjustment={type:y,percentage:parseFloat(x)}),await o(h),f({}),p(""),b(!1),r(!1)}finally{i(!1)}},O=()=>{b(!1)};d.useEffect(()=>{t||(b(!1),H([]),f({}),p(""))},[t]);const k=(h,B)=>{if(B===""||B==="no-change"){const Y={...n};delete Y[h],f(Y)}else f({...n,[h]:B})},pe=Object.keys(n).length>0||x&&parseFloat(x)>0;return e.jsx(me,{open:t,onOpenChange:r,children:e.jsxs(ue,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(ze,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[g&&e.jsx(T,{variant:"ghost",size:"sm",onClick:O,className:"mr-2 -ml-2",children:e.jsx(Jt,{className:"h-4 w-4"})}),g?"Preview Changes":"Bulk Edit Products"]}),e.jsx(Qe,{children:g?`Review changes for ${E.length} product${E.length!==1?"s":""} before applying`:`Update ${m} selected product${m!==1?"s":""}. Leave fields empty to keep existing values.`})]}),g?e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:E.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No changes detected for any products."})}):e.jsx(Ct,{className:"flex-1 pr-4",children:e.jsx("div",{className:"space-y-6 pb-4",children:E.map((h,B)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm",children:h.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["SKU: ",h.sku]})]}),e.jsxs(ee,{variant:"secondary",className:"text-xs",children:[h.changes.length," change",h.changes.length!==1?"s":""]})]}),e.jsxs(Da,{children:[e.jsx(Ta,{children:e.jsxs(Ht,{children:[e.jsx(mt,{className:"w-[30%]",children:"Field"}),e.jsx(mt,{className:"w-[35%]",children:"Current Value"}),e.jsx(mt,{className:"w-[35%]",children:"New Value"})]})}),e.jsx(Pa,{children:h.changes.map((Y,Z)=>e.jsxs(Ht,{children:[e.jsx(ut,{className:"font-medium text-sm",children:Y.field}),e.jsx(ut,{className:"text-sm text-muted-foreground",children:typeof Y.oldValue=="number"?Y.oldValue.toLocaleString():Y.oldValue}),e.jsxs(ut,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ia,{className:"h-3 w-3 text-primary"}),typeof Y.newValue=="number"?Y.newValue.toLocaleString():Y.newValue]})]},Z))})]})]},h.id))})})}):e.jsxs(Sa,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ka,{className:"grid w-full grid-cols-3",children:[e.jsx(ct,{value:"basic",children:"Basic Info"}),e.jsx(ct,{value:"jewelry",children:"Jewelry Details"}),e.jsx(ct,{value:"pricing",children:"Pricing"})]}),e.jsxs(dt,{value:"basic",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"category",children:"Category"}),e.jsx(z,{id:"category",placeholder:"Leave empty to keep current",maxLength:100,value:n.category||"",onChange:h=>k("category",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"metal_type",children:"Metal Type"}),e.jsxs(it,{value:n.metal_type||"no-change",onValueChange:h=>k("metal_type",h),children:[e.jsx(nt,{children:e.jsx(ot,{placeholder:"No change"})}),e.jsxs(lt,{children:[e.jsx(ie,{value:"no-change",children:"No change"}),e.jsx(ie,{value:"Gold",children:"Gold"}),e.jsx(ie,{value:"Silver",children:"Silver"}),e.jsx(ie,{value:"Platinum",children:"Platinum"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"delivery_type",children:"Delivery Type"}),e.jsxs(it,{value:n.delivery_type||"no-change",onValueChange:h=>k("delivery_type",h),children:[e.jsx(nt,{children:e.jsx(ot,{placeholder:"No change"})}),e.jsxs(lt,{children:[e.jsx(ie,{value:"no-change",children:"No change"}),e.jsx(ie,{value:"immediate",children:"Immediate"}),e.jsx(ie,{value:"scheduled",children:"Scheduled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"dispatches_in_days",children:"Dispatch Days"}),e.jsx(z,{id:"dispatches_in_days",type:"number",min:"0",max:"365",placeholder:"Leave empty to keep current",value:n.dispatches_in_days||"",onChange:h=>k("dispatches_in_days",h.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"status",children:"Status"}),e.jsx(z,{id:"status",placeholder:"Leave empty to keep current",maxLength:50,value:n.status||"",onChange:h=>k("status",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"stock_quantity",children:"Stock Quantity"}),e.jsx(z,{id:"stock_quantity",type:"number",min:"0",placeholder:"Leave empty to keep current",value:n.stock_quantity||"",onChange:h=>k("stock_quantity",h.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"description",children:"Description"}),e.jsx(z,{id:"description",placeholder:"Leave empty to keep current",maxLength:1e3,value:n.description||"",onChange:h=>k("description",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"weight_grams",children:"Weight (g)"}),e.jsx(z,{id:"weight_grams",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.weight_grams||"",onChange:h=>k("weight_grams",h.target.value)})]})]}),e.jsxs(dt,{value:"jewelry",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"diamond_color",children:"Diamond Color"}),e.jsx(z,{id:"diamond_color",placeholder:"Leave empty to keep current",maxLength:50,value:n.diamond_color||"",onChange:h=>k("diamond_color",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"clarity",children:"Clarity"}),e.jsx(z,{id:"clarity",placeholder:"Leave empty to keep current",maxLength:50,value:n.clarity||"",onChange:h=>k("clarity",h.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"cut",children:"Cut"}),e.jsx(z,{id:"cut",placeholder:"Leave empty to keep current",maxLength:50,value:n.cut||"",onChange:h=>k("cut",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"polish",children:"Polish"}),e.jsx(z,{id:"polish",placeholder:"Leave empty to keep current",maxLength:50,value:n.polish||"",onChange:h=>k("polish",h.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"symmetry",children:"Symmetry"}),e.jsx(z,{id:"symmetry",placeholder:"Leave empty to keep current",maxLength:50,value:n.symmetry||"",onChange:h=>k("symmetry",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"gemstone",children:"Gemstone"}),e.jsx(z,{id:"gemstone",placeholder:"Leave empty to keep current",maxLength:100,value:n.gemstone||"",onChange:h=>k("gemstone",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"gemstone_type",children:"Gemstone Type"}),e.jsx(z,{id:"gemstone_type",placeholder:"Leave empty to keep current",maxLength:100,value:n.gemstone_type||"",onChange:h=>k("gemstone_type",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"certification",children:"Certification"}),e.jsx(z,{id:"certification",placeholder:"Leave empty to keep current",maxLength:100,value:n.certification||"",onChange:h=>k("certification",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"purity_fraction_used",children:"Purity Fraction (0-1)"}),e.jsx(z,{id:"purity_fraction_used",type:"number",step:"0.01",min:"0",max:"1",placeholder:"Leave empty to keep current",value:n.purity_fraction_used||"",onChange:h=>k("purity_fraction_used",h.target.value)})]})]}),e.jsxs(dt,{value:"pricing",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(na,{className:"h-5 w-5 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"Percentage-Based Price Adjustment"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Apply a percentage markup or discount to all selected products"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"adjustment_type",children:"Adjustment Type"}),e.jsxs(it,{value:y,onValueChange:h=>w(h),children:[e.jsx(nt,{children:e.jsx(ot,{})}),e.jsxs(lt,{children:[e.jsx(ie,{value:"markup",children:"Markup (Increase Price)"}),e.jsx(ie,{value:"discount",children:"Discount (Decrease Price)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"adjustment_percent",children:"Percentage (%)"}),e.jsx(z,{id:"adjustment_percent",type:"number",min:"0",max:"100",step:"0.1",placeholder:"e.g., 10 for 10%",value:x,onChange:h=>p(h.target.value)})]})]}),x&&parseFloat(x)>0&&e.jsxs("div",{className:"bg-background p-3 rounded border border-border",children:[e.jsxs("p",{className:"text-sm font-medium",children:[y==="markup"?"â†‘":"â†“"," ",y==="markup"?"Increase":"Decrease"," prices by ",x,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Example: â‚¹1,000 â†’ â‚¹",y==="markup"?(1e3*(1+parseFloat(x)/100)).toFixed(0):(1e3*(1-parseFloat(x)/100)).toFixed(0)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Or Set Fixed Prices"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"cost_price",children:"Cost Price (â‚¹)"}),e.jsx(z,{id:"cost_price",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.cost_price||"",onChange:h=>k("cost_price",h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"retail_price",children:"Retail Price (â‚¹)"}),e.jsx(z,{id:"retail_price",type:"number",step:"0.01",min:"0",placeholder:"Leave empty",value:n.retail_price||"",onChange:h=>k("retail_price",h.target.value)})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Note: Fixed prices will override percentage adjustments"})]})]})]}),e.jsx(rs,{className:"mt-4",children:g?e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"outline",onClick:O,disabled:c,children:"Back to Edit"}),e.jsxs(T,{onClick:_,disabled:c||E.length===0,className:"bg-primary",children:[c&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm & Apply Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"outline",onClick:()=>r(!1),disabled:K,children:"Cancel"}),e.jsx(T,{onClick:ne,disabled:K||!pe,children:K?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading Preview..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Preview Changes"]})})]})})]})})}const mr=({open:t,onOpenChange:r,onConfirm:o,products:m,isDeleting:u=!1})=>e.jsx(Aa,{open:t,onOpenChange:r,children:e.jsxs(Ia,{className:"max-w-2xl",children:[e.jsxs(La,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oa,{className:"h-5 w-5 text-destructive"}),e.jsx(Fa,{children:"Delete Selected Products?"})]}),e.jsxs(Ua,{children:["You are about to delete ",e.jsxs("strong",{children:[m.length," product(s)"]}),". This action cannot be undone."]})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Products to be deleted:"}),e.jsx(Ct,{className:"h-[200px] w-full border rounded-md p-4",children:e.jsx("div",{className:"space-y-2",children:m.map((c,i)=>e.jsxs("div",{className:"flex items-start gap-2 py-2 border-b last:border-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground min-w-[20px]",children:[i+1,"."]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:c.name}),c.sku&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["SKU: ",c.sku]})]})]},c.id))})})]}),e.jsxs(Ra,{children:[e.jsx(Ea,{disabled:u,children:"Cancel"}),e.jsx($a,{onClick:o,disabled:u,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u?"Deleting...":`Delete ${m.length} Product${m.length>1?"s":""}`})]})]})}),os=d.forwardRef(({...t},r)=>e.jsx("nav",{ref:r,"aria-label":"breadcrumb",...t}));os.displayName="Breadcrumb";const ls=d.forwardRef(({className:t,...r},o)=>e.jsx("ol",{ref:o,className:Me("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...r}));ls.displayName="BreadcrumbList";const wt=d.forwardRef(({className:t,...r},o)=>e.jsx("li",{ref:o,className:Me("inline-flex items-center gap-1.5",t),...r}));wt.displayName="BreadcrumbItem";const cs=d.forwardRef(({asChild:t,className:r,...o},m)=>{const u=t?Hs:"a";return e.jsx(u,{ref:m,className:Me("transition-colors hover:text-foreground",r),...o})});cs.displayName="BreadcrumbLink";const ds=d.forwardRef(({className:t,...r},o)=>e.jsx("span",{ref:o,role:"link","aria-disabled":"true","aria-current":"page",className:Me("font-normal text-foreground",t),...r}));ds.displayName="BreadcrumbPage";const ms=({children:t,className:r,...o})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:Me("[&>svg]:size-3.5",r),...o,children:t??e.jsx(Zt,{})});ms.displayName="BreadcrumbSeparator";const Zr=()=>{const[t,r]=d.useState([]),[o,m]=d.useState([]),[u,c]=d.useState(!0),[i,n]=d.useState(!1),[f,y]=d.useState(87.67),[w,x]=d.useState(85e3),[p,g]=d.useState(!1),[b,E]=d.useState(!1),[H,K]=d.useState(""),[F,ne]=d.useState(new Set),[_,O]=d.useState(null),[k,pe]=d.useState("Jewellery"),[h,B]=d.useState(["Jewellery"]),[Y,Z]=d.useState(!1),[Je,G]=d.useState(),[fe,Ce]=d.useState(!1),[te,ae]=d.useState(""),[ye,kt]=d.useState(!1),[us,Dt]=d.useState(!1),[ps,gs]=d.useState("team_member"),[xs,hs]=d.useState(""),[fs,Tt]=d.useState(!1),[ys,Ze]=d.useState(!1),[bs,Pt]=d.useState(!1),[js,At]=d.useState(!1),[It,Ns]=d.useState([]);is();const{latestMilestone:se,clearLatestMilestone:vs}=_a(),[C,Lt]=d.useState({category:"",metalType:"",minPrice:"",maxPrice:"",diamondColor:"",diamondClarity:"",searchQuery:"",deliveryType:"",gemstoneType:"",color:"",clarity:"",cut:"",minCarat:"",maxCarat:"",diamondType:"",shape:"",polish:"",symmetry:"",fluorescence:"",lab:""}),I=_t(),{isAdmin:j,loading:Ft}=Ks(),{permissions:$}=fa(),{canAddProducts:oe,canAddShareLinks:be,productsRemaining:je,shareLinksRemaining:Ne}=St(),[Se,Ut]=d.useState(100),ws=100,_s=async()=>{const{data:{user:a}}=await S.auth.getUser();if(!a)return;const{data:s}=await S.from("vendor_permissions").select("subscription_plan").eq("user_id",a.id).single();if(!s)return;sessionStorage.getItem("current_plan")||sessionStorage.setItem("current_plan",s.subscription_plan);const N=S.channel("plan-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"vendor_permissions",filter:`user_id=eq.${a.id}`},D=>{const L=D.new.subscription_plan,P=sessionStorage.getItem("current_plan"),V={starter:1,professional:2,enterprise:3};P&&V[L]>V[P]&&(sessionStorage.setItem("current_plan",L),ae({professional:"Professional Plan",enterprise:"Enterprise Plan"}[L]||L),Ce(!0),setTimeout(()=>{Ce(!1),kt(!0)},3500),setTimeout(()=>{window.location.reload()},8e3))}).subscribe();return()=>{S.removeChannel(N)}},Cs=async()=>{const{data:{user:a}}=await S.auth.getUser();if(!a)return;const{data:s}=await S.from("user_roles").select("role").eq("user_id",a.id).single();if(!s||s.role!=="admin")return;const l=S.channel("referral-additions").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_approval_status"},async N=>{N.new.email&&(hs(N.new.email.split("@")[0]),gs("customer"),Dt(!0))}).subscribe();return()=>{S.removeChannel(l)}};d.useEffect(()=>{!Ft&&j&&I("/admin")},[j,Ft,I]),d.useEffect(()=>{const a=sessionStorage.getItem("usd_rate"),s=sessionStorage.getItem("usd_rate_time");a&&s&&Date.now()-parseInt(s)<36e5?y(parseFloat(a)):ks(),Promise.all([ve(),re(),Ds(),Ss()]).then(()=>{_s(),Cs()})},[]);const Ss=async()=>{try{const{data:{user:a}}=await S.auth.getUser();if(!a)return;const{data:s,error:l}=await S.from("user_approval_status").select("approved_categories").eq("user_id",a.id).single();if(l)throw l;const N=(s==null?void 0:s.approved_categories)||["Jewellery"];B(N),pe(N[0])}catch(a){console.error("Failed to fetch approved categories:",a)}},ks=async()=>{var a;try{const l=await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json();(a=l.rates)!=null&&a.INR&&(y(l.rates.INR),sessionStorage.setItem("usd_rate",l.rates.INR.toString()),sessionStorage.setItem("usd_rate_time",Date.now().toString()))}catch(s){console.error("Failed to fetch USD rate:",s)}},Ds=async()=>{try{const{data:{user:a}}=await S.auth.getUser();if(!a)return;const{data:s,error:l}=await S.from("vendor_profiles").select("*").eq("user_id",a.id).maybeSingle();l&&l.code!=="PGRST116"?console.error("Error fetching vendor profile:",l):s&&(O(s),s.gold_rate_24k_per_gram&&x(s.gold_rate_24k_per_gram))}catch(a){console.error("Failed to fetch vendor profile:",a)}},Rt=async a=>{const{data:{user:s}}=await S.auth.getUser();if(!s)return;const{error:l}=await S.from("vendor_profiles").update({gold_rate_24k_per_gram:a,gold_rate_updated_at:new Date().toISOString()}).eq("user_id",s.id);if(l)throw l;const N=.76,D=t.filter(P=>P.weight_grams).map(P=>{const V=P.weight_grams*N*w,Q=P.weight_grams*N*a-V;return{id:P.id,cost_price:Math.max(0,P.cost_price+Q),retail_price:Math.max(0,P.retail_price+Q)}});let L=0;for(const P of D){const{error:V}=await S.from("products").update({cost_price:P.cost_price,retail_price:P.retail_price}).eq("id",P.id);V||L++}x(a),await re(),A.success(`Gold rate updated to â‚¹${a.toLocaleString("en-IN")}/g and ${L} product prices recalculated!`)},Et=async()=>{const a=parseFloat(H);if(!H||H.trim()===""){A.error("Please enter a gold rate");return}if(isNaN(a)||a<=0){A.error("Please enter a valid positive number for gold rate");return}if(a<1e3||a>2e5){A.error("Gold rate must be between â‚¹1,000 and â‚¹2,00,000 per gram");return}E(!0);try{await Rt(a),g(!1),K(""),setTimeout(()=>{E(!1),window.location.reload()},1500)}catch(s){console.error("Failed to update gold rate:",s),A.error("Failed to update gold rate. Please try again."),E(!1)}},Ts=["CVD BANGLE","CVD BRACELET","CVD GENTS RING","CVD LADIES RING","CVD PANDENT","CVD TOPS","DIAMOND BRACELET","DIAMOND GENTS RING","DIAMOND LADIES RING","DIAMOND PANDENT","DIAMOND PANDENT SET","DIAMOND SET","DIAMOND TOPS","GOLD BRACELET","GOLD PANDENT","GOLD TOPS","LAB-GROWN DIAMOND","MOISSANITE JEWELLERY","MOISSANITE PENDANT","MOISSANITE RING"],Xe=d.useMemo(()=>{const a=t.map(l=>l.category).filter(Boolean);return[...new Set([...Ts,...a])].sort()},[t]),Ps=d.useMemo(()=>{const a=t.filter(l=>{var N,D,L,P,V,le,Q,ce,ge,xe,he,ke,De,Te,Pe,Ae,Ie,Le,Fe,Ue;if(C.searchQuery){const q=C.searchQuery.toLowerCase().trim();if(![l.product_type,l.diamond_color,(N=l.d_wt_1)==null?void 0:N.toString(),(D=l.d_wt_2)==null?void 0:D.toString(),(L=l.purity_fraction_used)==null?void 0:L.toString(),(P=l.d_rate_1)==null?void 0:P.toString(),(V=l.pointer_diamond)==null?void 0:V.toString(),(le=l.d_value)==null?void 0:le.toString(),(Q=l.mkg)==null?void 0:Q.toString(),(ce=l.certification_cost)==null?void 0:ce.toString(),(ge=l.gemstone_cost)==null?void 0:ge.toString(),(xe=l.total_usd)==null?void 0:xe.toString(),l.name,l.category,l.sku,l.description,l.metal_type,l.gemstone,l.color,l.clarity,(he=l.weight_grams)==null?void 0:he.toString(),(ke=l.diamond_weight)==null?void 0:ke.toString(),(De=l.net_weight)==null?void 0:De.toString(),(Te=l.cost_price)==null?void 0:Te.toString(),(Pe=l.retail_price)==null?void 0:Pe.toString(),(Ae=l.per_carat_price)==null?void 0:Ae.toString(),(Ie=l.gold_per_gram_price)==null?void 0:Ie.toString()].filter(Boolean).some(Be=>Be==null?void 0:Be.toLowerCase().includes(q)))return!1}if(C.metalType&&((Le=l.metal_type)==null?void 0:Le.toUpperCase().trim())!==C.metalType.toUpperCase().trim())return!1;if(C.minPrice){const q=parseFloat(C.minPrice);if(l.retail_price<q)return!1}if(C.maxPrice){const q=parseFloat(C.maxPrice);if(l.retail_price>q)return!1}if(C.diamondColor){const q=(Fe=l.gemstone)==null?void 0:Fe.split(" ")[0];if((q==null?void 0:q.toUpperCase().trim())!==C.diamondColor.toUpperCase().trim())return!1}if(C.diamondClarity){const q=(Ue=l.gemstone)==null?void 0:Ue.split(" ")[1];if((q==null?void 0:q.toUpperCase().trim())!==C.diamondClarity.toUpperCase().trim())return!1}return!(C.deliveryType&&l.delivery_type!==C.deliveryType)}),s={all:a.length};return Xe.forEach(l=>{s[l]=a.filter(N=>{var P,V;const D=((P=N.category)==null?void 0:P.toUpperCase().trim())===l.toUpperCase().trim(),L=(V=N.name)==null?void 0:V.toUpperCase().trim().includes(l.toUpperCase().trim());return D||L}).length}),s},[t,Xe,C]),As=d.useMemo(()=>[...new Set(t.map(a=>a.metal_type).filter(Boolean))].sort(),[t]),Is=d.useMemo(()=>[...new Set(t.map(a=>{var s;return(s=a.gemstone)==null?void 0:s.split(" ")[0]}).filter(Boolean))].sort(),[t]),Ls=d.useMemo(()=>[...new Set(t.map(a=>{var s;return(s=a.gemstone)==null?void 0:s.split(" ")[1]}).filter(Boolean))].sort(),[t]),Fs=d.useMemo(()=>[...new Set(t.map(a=>a.delivery_type).filter(Boolean))].sort(),[t]),M=d.useMemo(()=>t.filter(s=>{var l,N,D,L,P,V,le,Q,ce,ge,xe,he,ke,De,Te,Pe,Ae,Ie,Le,Fe,Ue,q;if(C.searchQuery){const W=C.searchQuery.toLowerCase().trim();if(![s.product_type,s.diamond_color,(l=s.d_wt_1)==null?void 0:l.toString(),(N=s.d_wt_2)==null?void 0:N.toString(),(D=s.purity_fraction_used)==null?void 0:D.toString(),(L=s.d_rate_1)==null?void 0:L.toString(),(P=s.pointer_diamond)==null?void 0:P.toString(),(V=s.d_value)==null?void 0:V.toString(),(le=s.mkg)==null?void 0:le.toString(),(Q=s.certification_cost)==null?void 0:Q.toString(),(ce=s.gemstone_cost)==null?void 0:ce.toString(),(ge=s.total_usd)==null?void 0:ge.toString(),s.name,s.category,s.sku,s.description,s.metal_type,s.gemstone,s.color,s.clarity,(xe=s.weight_grams)==null?void 0:xe.toString(),(he=s.diamond_weight)==null?void 0:he.toString(),(ke=s.net_weight)==null?void 0:ke.toString(),(De=s.cost_price)==null?void 0:De.toString(),(Te=s.retail_price)==null?void 0:Te.toString(),(Pe=s.per_carat_price)==null?void 0:Pe.toString(),(Ae=s.gold_per_gram_price)==null?void 0:Ae.toString()].filter(Boolean).some(at=>at==null?void 0:at.toLowerCase().includes(W)))return!1}if(C.category){const W=((Ie=s.category)==null?void 0:Ie.toUpperCase().trim())===C.category.toUpperCase().trim(),st=(Le=s.name)==null?void 0:Le.toUpperCase().trim().includes(C.category.toUpperCase().trim());if(!W&&!st)return!1}if(C.metalType&&((Fe=s.metal_type)==null?void 0:Fe.toUpperCase().trim())!==C.metalType.toUpperCase().trim())return!1;if(C.minPrice){const W=parseFloat(C.minPrice);if(s.retail_price<W)return!1}if(C.maxPrice){const W=parseFloat(C.maxPrice);if(s.retail_price>W)return!1}if(C.diamondColor){const W=(Ue=s.gemstone)==null?void 0:Ue.split(" ")[0];if((W==null?void 0:W.toUpperCase().trim())!==C.diamondColor.toUpperCase().trim())return!1}if(C.diamondClarity){const W=(q=s.gemstone)==null?void 0:q.split(" ")[1];if((W==null?void 0:W.toUpperCase().trim())!==C.diamondClarity.toUpperCase().trim())return!1}return!(C.deliveryType&&s.delivery_type!==C.deliveryType)}),[t,C]),Us=d.useMemo(()=>M.slice(0,Se),[M,Se]),Rs=M.length>Se;d.useEffect(()=>{Ut(100)},[C,k]);const Es=()=>{Ut(a=>a+ws)},Ge=M.reduce((a,s)=>a+(s.retail_price||0),0),et=Ge/f,tt=d.useCallback(async()=>{try{Ya(M,_,f,w,Ge,et),A.success("Catalog exported to PDF successfully!")}catch(a){console.error("Error exporting to PDF:",a),A.error("Failed to export catalog to PDF")}},[M,_,f,w,Ge,et]),ve=async()=>{try{const{data:{user:a}}=await S.auth.getUser();if(!a)return;const{data:s,error:l}=await S.from("products").select("id, product_type").eq("user_id",a.id).is("deleted_at",null);if(l)throw l;m(s||[])}catch(a){console.error("Failed to load all products:",a)}},re=d.useCallback(async()=>{try{const{data:{user:a}}=await S.auth.getUser();if(!a)return;let s=S.from("products").select("id, name, sku, image_url, image_url_2, image_url_3, cost_price, retail_price, stock_quantity, category, metal_type, gemstone, color, diamond_color, clarity, delivery_type, product_type, weight_grams, gemstone_type, carat_weight, cut, diamond_type, shape, carat, polish, symmetry, fluorescence, lab, created_at").eq("user_id",a.id).is("deleted_at",null);k==="Jewellery"?s=s.or(`product_type.eq.${k},product_type.is.null`):s=s.eq("product_type",k);const{data:l,error:N}=await s.order("created_at",{ascending:!1});if(N)throw N;r(l||[])}catch{A.error("Failed to load products")}finally{c(!1)}},[k]);d.useEffect(()=>{k&&(n(!0),c(!0),re().finally(()=>{setTimeout(()=>{n(!1)},200)}))},[k,re]);const $s=d.useCallback(a=>a==="Jewellery"?o.filter(s=>s.product_type==="Jewellery"||s.product_type===null).length:o.filter(s=>s.product_type===a).length,[o]),Ms=d.useCallback(async()=>{Pt(!0);try{const{data:{user:a}}=await S.auth.getUser();if(!a){A.error("You must be logged in to delete products");return}const{error:s}=await S.from("products").update({deleted_at:new Date().toISOString()}).in("id",Array.from(F)).eq("user_id",a.id);if(s)throw console.error("Delete error:",s),s;A.success(`${F.size} product(s) deleted successfully`),ne(new Set),Ze(!1),await Promise.all([re(),ve()])}catch(a){console.error("Failed to delete products:",a),A.error(`Failed to delete: ${a.message||"Unknown error"}`)}finally{Pt(!1)}},[F,re,ve]),zs=d.useMemo(()=>t.filter(a=>F.has(a.id)).map(a=>({id:a.id,name:a.name,sku:a.sku})),[t,F]),Os=d.useCallback(async a=>{if(F.size===0){A.error("No products selected");return}try{const{data:{user:s}}=await S.auth.getUser();if(!s)throw new Error("Not authenticated");const l=a.pricingAdjustment;delete a.pricingAdjustment;const N={};if(Object.entries(a).forEach(([D,L])=>{if(!(L===""||L===null))if(["cost_price","retail_price","weight_grams","stock_quantity","dispatches_in_days"].includes(D)){const P=parseFloat(L);!isNaN(P)&&P>=0&&(N[D]=P)}else N[D]=L}),l&&l.percentage>0){const{data:D,error:L}=await S.from("products").select("id, cost_price, retail_price").in("id",Array.from(F)).eq("user_id",s.id);if(L)throw L;if(D){const P=D.map(async Q=>{const ce=l.type==="markup"?1+l.percentage/100:1-l.percentage/100,ge=Math.max(0,Q.cost_price*ce),xe=Math.max(0,Q.retail_price*ce),he={...N,cost_price:N.cost_price||ge,retail_price:N.retail_price||xe};return S.from("products").update(he).eq("id",Q.id).eq("user_id",s.id)});if((await Promise.all(P)).some(Q=>Q.error))throw new Error("Some products failed to update");A.success(`${F.size} product(s) updated with ${l.type} of ${l.percentage}%`)}}else{if(Object.keys(N).length===0){A.error("No changes to update");return}const{error:D}=await S.from("products").update(N).in("id",Array.from(F)).eq("user_id",s.id);if(D)throw console.error("Update error:",D),D;A.success(`${F.size} product(s) updated successfully`)}ne(new Set),await Promise.all([re(),ve()])}catch(s){console.error("Failed to update products:",s),A.error(`Failed to update: ${s.message||"Unknown error"}`)}},[F,re,ve]),Gs=()=>{if(!t||t.length===0){A.info("No products found in catalog");return}const a=Va(t.map(s=>({id:s.id,name:s.name,sku:s.sku,category:s.category})));if(a.length===0){A.info("No uncategorized products found or all products already have categories");return}Ns(a),At(!0)},Bs=async a=>{try{const s=It.filter(l=>a.includes(l.productId)).reduce((l,N)=>(l[N.suggestedCategory]||(l[N.suggestedCategory]=[]),l[N.suggestedCategory].push(N.productId),l),{});for(const[l,N]of Object.entries(s)){const{error:D}=await S.from("products").update({category:l}).in("id",N);if(D)throw D}A.success(`Successfully categorized ${a.length} products!`),await re(),await ve()}catch(s){throw console.error("Error applying categorization:",s),A.error("Failed to apply categorization"),s}},Vs=d.useCallback(a=>{ne(s=>{const l=new Set(s);return l.has(a)?l.delete(a):l.add(a),l})},[]),qs=d.useCallback(()=>{ne(a=>a.size===t.length?new Set:new Set(t.map(s=>s.id)))},[t]),$t=d.useCallback(async()=>{await S.auth.signOut(),I("/auth")},[I]);return e.jsxs(Qs,{children:[e.jsx(nr,{currentGoldRate:w,onUpdate:Rt,onSkip:()=>{}}),e.jsx(da,{instagramQrUrl:_==null?void 0:_.instagram_qr_url,whatsappQrUrl:_==null?void 0:_.whatsapp_qr_url}),e.jsx(or,{onExportPDF:tt,onAutoCategorize:Gs}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(Ma,{})}),e.jsx("div",{className:"relative bg-background/50 backdrop-blur-sm border-b border-border/30 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsx(os,{children:e.jsxs(ls,{children:[e.jsx(wt,{children:e.jsx(cs,{asChild:!0,children:e.jsx(pa,{to:"/",children:"Home"})})}),e.jsx(ms,{}),e.jsx(wt,{children:e.jsx(ds,{children:"Catalog"})})]})})})}),e.jsxs("header",{className:"relative border-b border-border/50 bg-card/95 backdrop-blur-xl shadow-xl z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-accent/5 pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 max-w-[1800px] relative z-10",children:[_&&e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 lg:gap-6 mb-4 pb-4 border-b border-border/30",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1 w-full lg:w-auto",children:[_.logo_url&&e.jsxs("div",{className:"flex-shrink-0 relative group/logo",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 rounded-xl blur-lg group-hover/logo:blur-xl transition-all duration-300"}),e.jsx("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 rounded-xl overflow-hidden border-2 border-primary/20 shadow-lg group-hover/logo:border-primary/40 group-hover/logo:scale-105 transition-all duration-300 bg-background",children:e.jsx("img",{src:_.logo_url,alt:_.business_name||"Vendor Logo",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary animate-pulse"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-serif font-bold bg-gradient-to-r from-primary via-primary/90 to-accent bg-clip-text text-transparent leading-tight drop-shadow-sm",children:_.business_name||"My Jewelry Business"})]}),_.address_line1&&e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground mb-2 leading-relaxed",children:[e.jsxs("span",{className:"block sm:inline",children:[_.address_line1,_.address_line2&&`, ${_.address_line2}`]}),_.city&&e.jsxs("span",{className:"block sm:inline sm:ml-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"â€¢ "}),_.city,", ",_.state," ",_.pincode]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 text-xs sm:text-sm",children:[_.email&&e.jsxs("span",{className:"text-primary/90 font-medium truncate flex items-center gap-1",children:[e.jsx("span",{className:"opacity-70",children:"Email:"})," ",_.email]}),_.phone&&e.jsxs("span",{className:"text-primary/90 font-medium flex items-center gap-1",children:[e.jsx("span",{className:"opacity-70",children:"Phone:"})," ",_.phone]}),_.whatsapp_number&&e.jsxs("span",{className:"text-primary/90 font-medium flex items-center gap-1",children:[e.jsx("span",{className:"opacity-70",children:"WhatsApp:"})," ",_.whatsapp_number]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-start lg:items-end gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 w-full lg:w-auto",children:[e.jsx("div",{className:"group relative text-xs sm:text-sm bg-gradient-to-br from-muted/90 to-muted/70 px-3 sm:px-4 py-2 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-300 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:["1 USD = â‚¹",f.toFixed(2)]}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:["â€¢ ",new Date().toLocaleDateString("en-IN",{day:"numeric",month:"short"})]})]})}),p?e.jsxs("div",{className:"flex items-center gap-2 bg-amber-500/10 px-3 py-2 rounded-lg border border-amber-500/30 shadow-sm w-full sm:w-auto",children:[e.jsx("input",{type:"number",value:H,onChange:a=>K(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!b?Et():a.key==="Escape"&&!b&&(g(!1),K(""))},placeholder:w.toString(),min:"1000",max:"200000",step:"100",disabled:b,className:"w-24 sm:w-32 px-3 py-1.5 text-sm bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed",autoFocus:!0}),e.jsx(T,{size:"sm",onClick:Et,disabled:b,className:"h-8 px-3 text-xs bg-amber-600 hover:bg-amber-700 disabled:opacity-50",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"h-3 w-3 animate-spin mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Updating..."})]}):"Save"}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>{g(!1),K("")},disabled:b,className:"h-8 px-2 text-xs disabled:opacity-50",children:e.jsx(ss,{className:"h-4 w-4"})})]}):e.jsx("button",{onClick:()=>{g(!0),K(w.toString())},className:"group relative text-xs sm:text-sm bg-gradient-to-br from-amber-500/20 via-amber-600/15 to-amber-500/20 px-3 sm:px-4 py-2 rounded-xl border border-amber-500/40 hover:border-amber-500/60 shadow-md hover:shadow-lg transition-all duration-300 active:scale-95 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-amber-700 dark:text-amber-400",children:["24K Gold: â‚¹",w.toLocaleString("en-IN"),"/g"]}),e.jsx(Ot,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-500 group-hover:rotate-12 transition-transform"})]})})]}),t.length>0&&e.jsxs("div",{className:"relative flex flex-col items-start lg:items-end gap-1 px-4 sm:px-5 py-3 bg-gradient-to-br from-primary/15 via-primary/10 to-primary/5 rounded-xl border border-primary/30 shadow-lg hover:shadow-xl transition-all duration-300 w-full lg:w-auto overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"relative z-10 text-[10px] sm:text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Total Inventory Value"}),e.jsxs("div",{className:"relative z-10 text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm",children:["â‚¹",Ge.toLocaleString("en-IN",{maximumFractionDigits:0})]}),e.jsxs("div",{className:"relative z-10 text-sm sm:text-base text-muted-foreground font-semibold",children:["$",et.toLocaleString("en-US",{maximumFractionDigits:0})]}),M.length!==t.length&&e.jsxs("div",{className:"relative z-10 text-[10px] sm:text-xs text-muted-foreground mt-1",children:["Showing ",M.length," of ",t.length," products"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden lg:flex items-center flex-wrap gap-2 justify-center",children:[($.can_view_interests||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/interests"),children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Interests"]}),($.can_view_interests||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/video-requests"),children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Video Requests"]}),($.can_edit_profile||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/vendor-profile"),children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Profile"]}),($.can_share_catalog||j)&&e.jsx(pt,{children:e.jsxs(gt,{children:[e.jsx(xt,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{if(!be&&!j){G("share_links"),Z(!0);return}I("/share")},disabled:!be&&!j,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Share",!j&&Ne!==1/0&&Ne<100&&e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",Ne," left)"]})]})}),!be&&!j&&e.jsx(ht,{children:e.jsx("p",{children:"Share link limit reached"})})]})}),j&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/admin"),children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Admin"]}),($.can_add_products||j)&&e.jsx(pt,{children:e.jsxs(gt,{children:[e.jsx(xt,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{if(!oe&&!j){G("products"),Z(!0);return}I("/add-product")},disabled:!oe&&!j,children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Add",!j&&je!==1/0&&je<100&&e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",je," left)"]})]})}),!oe&&!j&&e.jsx(ht,{children:e.jsx("p",{children:"Product limit reached"})})]})}),($.can_import_data||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/import"),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:tt,children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/migrate-images"),children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Migrate Images"]}),($.can_manage_team||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/team"),children:[e.jsx(yt,{className:"h-4 w-4 mr-2"}),"Team"]}),($.can_delete_products||j)&&F.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>Tt(!0),children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Update (",F.size,")"]}),e.jsxs(T,{variant:"destructive",size:"sm",onClick:()=>Ze(!0),children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Delete (",F.size,")"]})]}),($.can_view_sessions||j)&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>I("/active-sessions"),children:[e.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Sessions"]}),e.jsxs(T,{variant:"ghost",size:"sm",onClick:$t,children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),e.jsx("div",{className:"lg:hidden w-full",children:e.jsxs(ga,{children:[e.jsx(xa,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"default",className:"w-full touch-manipulation h-11 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(ca,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Menu"})]})}),e.jsxs(ha,{align:"center",className:"w-[calc(100vw-2rem)] sm:w-80 bg-card border-border/50 shadow-xl z-50 max-h-[70vh] overflow-y-auto",children:[($.can_view_interests||j)&&e.jsxs(J,{onClick:()=>I("/interests"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(Ye,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"View Interests"})]}),($.can_view_interests||j)&&e.jsxs(J,{onClick:()=>I("/video-requests"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(Gt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Video Requests"})]}),($.can_view_interests||j)&&e.jsxs(J,{onClick:()=>I("/purchase-inquiries"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(as,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Purchase Inquiries"})]}),($.can_edit_profile||j)&&e.jsxs(J,{onClick:()=>I("/vendor-profile"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(jt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Vendor Profile"})]}),($.can_share_catalog||j)&&e.jsxs(J,{onClick:()=>{if(!be&&!j){G("share_links"),Z(!0);return}I("/share")},disabled:!be&&!j,className:"py-3 cursor-pointer hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ee,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Share Catalog"}),!j&&Ne!==1/0&&Ne<100&&e.jsxs("span",{className:"ml-auto text-xs text-muted-foreground",children:["(",Ne," left)"]}),!be&&!j&&e.jsx("span",{className:"ml-auto text-xs text-destructive",children:"(Limit reached)"})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"my-2"}),e.jsxs(J,{onClick:()=>I("/admin"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(Bt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Admin Dashboard"})]})]}),e.jsx(rt,{className:"my-2"}),($.can_add_products||j)&&e.jsxs(J,{onClick:()=>{if(!oe&&!j){G("products"),Z(!0);return}I("/add-product")},disabled:!oe&&!j,className:"py-3 cursor-pointer hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qe,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Add Product"}),!j&&je!==1/0&&je<100&&e.jsxs("span",{className:"ml-auto text-xs text-muted-foreground",children:["(",je," left)"]}),!oe&&!j&&e.jsx("span",{className:"ml-auto text-xs text-destructive",children:"(Limit reached)"})]}),($.can_import_data||j)&&e.jsxs(J,{onClick:()=>I("/import"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(Vt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Import Data"})]}),e.jsxs(J,{onClick:tt,className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(bt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Export PDF"})]}),e.jsxs(J,{onClick:()=>I("/migrate-images"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(qt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Migrate Images"})]}),($.can_manage_team||j)&&e.jsxs(J,{onClick:()=>I("/team"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(yt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Manage Team"})]}),e.jsx(rt,{className:"my-2"}),($.can_view_sessions||j)&&e.jsxs(J,{onClick:()=>I("/active-sessions"),className:"py-3 cursor-pointer hover:bg-muted/50",children:[e.jsx(Wt,{className:"h-5 w-5 mr-3 text-primary"}),e.jsx("span",{className:"font-medium",children:"Active Sessions"})]}),e.jsxs(J,{onClick:$t,className:"py-3 cursor-pointer hover:bg-destructive/10 text-destructive",children:[e.jsx(Yt,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})})]})]})]}),e.jsxs("main",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-6 sm:py-8 lg:py-10 max-w-[1800px]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(ja,{}),e.jsx(Ha,{})]}),e.jsx("div",{className:"mb-6",children:e.jsx(ir,{})}),u?e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-5 lg:gap-6",children:Array.from({length:10}).map((a,s)=>e.jsx("div",{className:"animate-scale-in",style:{animationDelay:`${s*50}ms`},children:e.jsx(Oa,{})},s))})}):e.jsxs("div",{className:"animate-fade-in",children:[h.length>1&&e.jsx("div",{className:"mb-6 flex gap-2 overflow-x-auto justify-start md:justify-center pb-2 px-2 scrollbar-hide",children:h.map(a=>{const s=k===a,l=a.toLowerCase().replace(/\s+/g,"-"),N={jewellery:{gradient:"from-category-jewellery/20 to-category-jewellery/5",border:"border-category-jewellery/40",text:"text-category-jewellery",glow:"shadow-[0_0_20px_hsl(var(--category-jewellery)/0.3)]",icon:"ðŸ’"},gemstones:{gradient:"from-category-gemstone/20 to-category-gemstone/5",border:"border-category-gemstone/40",text:"text-category-gemstone",glow:"shadow-[0_0_20px_hsl(var(--category-gemstone)/0.3)]",icon:"ðŸ’Ž"},"loose-gemstones":{gradient:"from-category-gemstone/20 to-category-gemstone/5",border:"border-category-gemstone/40",text:"text-category-gemstone",glow:"shadow-[0_0_20px_hsl(var(--category-gemstone)/0.3)]",icon:"ðŸ’Ž"},"loose-diamonds":{gradient:"from-category-diamond/20 to-category-diamond/5",border:"border-category-diamond/40",text:"text-category-diamond",glow:"shadow-[0_0_20px_hsl(var(--category-diamond)/0.3)]",icon:"âœ¨"}},D=N[l]||N.jewellery,L=$s(a);return e.jsxs("button",{onClick:()=>pe(a),disabled:i,className:`
                          group relative overflow-hidden flex-shrink-0
                          px-3 py-2 sm:px-6 sm:py-3 md:px-8 md:py-4 rounded-xl md:rounded-2xl
                          font-serif text-sm sm:text-base md:text-lg font-semibold
                          transition-all duration-500 ease-out
                          disabled:opacity-50 disabled:cursor-wait
                          ${s?`bg-gradient-to-br ${D.gradient} border-2 ${D.border} ${D.glow} scale-105`:"bg-card/50 border-2 border-border/30 hover:border-border/60 hover:scale-102"}
                        `,children:[e.jsx("div",{className:`
                          absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent
                          -translate-x-full group-hover:translate-x-full
                          transition-transform duration-1000 ease-out
                        `}),e.jsxs("span",{className:`
                          relative flex items-center gap-2 sm:gap-2.5 md:gap-3
                          ${s?D.text:"text-muted-foreground group-hover:text-foreground"}
                          transition-colors duration-300
                        `,children:[e.jsx("span",{className:"text-lg sm:text-xl md:text-2xl",children:D.icon}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"tracking-wide whitespace-nowrap",children:a}),e.jsxs("span",{className:`
                              text-[10px] sm:text-xs font-normal opacity-70
                              ${s?"":"text-muted-foreground/60"}
                            `,children:[L," ",L===1?"item":"items"]})]})]}),s&&e.jsx("div",{className:`
                            absolute bottom-0 left-1/2 -translate-x-1/2
                            h-1 w-3/4 rounded-full
                            bg-gradient-to-r ${D.gradient}
                            animate-pulse
                          `})]},a)})}),M.length>0&&e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:e.jsx(ma,{products:M,usdRate:f})}),t.length===0?e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-primary/10 mb-6",children:e.jsx(Ve,{className:"h-10 w-10 sm:h-12 sm:h-12 text-primary"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-serif font-bold mb-3 text-foreground",children:"No products yet"}),e.jsx("p",{className:"text-muted-foreground text-base sm:text-lg mb-8 max-w-md mx-auto",children:"Start building your stunning jewelry catalog and showcase your collection"}),e.jsxs(T,{onClick:()=>{if(!oe&&!j){G("products"),Z(!0);return}I("/add-product")},disabled:!oe&&!j,size:"lg",className:"shadow-lg hover:shadow-xl transition-all duration-300 h-12 px-8",children:[e.jsx(qe,{className:"h-5 w-5 mr-2"}),"Add Your First Product"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 sm:mb-8 animate-slide-in-right",children:e.jsx(ua,{filters:C,onFilterChange:Lt,productType:k,categories:Xe,metalTypes:As,diamondColors:Is,diamondClarities:Ls,deliveryTypes:Fs,categoryCounts:Ps,gemstoneTypes:[],colors:[],clarities:[],cuts:[],shapes:[],polishes:[],symmetries:[],fluorescences:[],labs:[]})},`filters-${k}`),($.can_delete_products||j)&&M.length>0&&e.jsxs("div",{className:"mb-6 flex items-center gap-3 pb-4 border-b border-border/30",children:[e.jsx(We,{id:"select-all",checked:F.size===M.length&&M.length>0,onCheckedChange:qs,className:"h-5 w-5"}),e.jsxs("label",{htmlFor:"select-all",className:"text-sm sm:text-base font-medium cursor-pointer select-none",children:["Select All (",M.length," ",M.length===1?"product":"products",")"]})]}),M.length===0?e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-muted/50 mb-6",children:e.jsx(Ve,{className:"h-8 w-8 sm:h-10 sm:w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-3 text-foreground",children:"No products match your filters"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search criteria"}),e.jsx(T,{variant:"outline",onClick:()=>Lt({category:"",metalType:"",minPrice:"",maxPrice:"",diamondColor:"",diamondClarity:"",searchQuery:"",deliveryType:"",gemstoneType:"",color:"",clarity:"",cut:"",minCarat:"",maxCarat:"",diamondType:"",shape:"",polish:"",symmetry:"",fluorescence:"",lab:""}),className:"shadow-sm hover:shadow-md transition-all",children:"Clear All Filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`
                      grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-5 lg:gap-6
                      transition-opacity duration-300
                      ${i?"opacity-0":"opacity-100 animate-fade-in"}
                    `,children:Us.map((a,s)=>e.jsx("div",{className:"animate-scale-in",style:{animationDelay:`${s*30}ms`},children:e.jsx(za,{product:a,isSelected:F.has(a.id),onToggleSelection:$.can_delete_products||j?Vs:()=>{},usdRate:f,vendorLogoUrl:_==null?void 0:_.logo_url})},a.id))},k),Rs&&e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-12 flex justify-center",children:e.jsxs(T,{onClick:Es,size:"lg",className:"px-8 py-6 text-base font-semibold shadow-lg hover:shadow-xl transition-all",children:["Load More Products",e.jsxs("span",{className:"ml-2 text-sm opacity-75",children:["(",M.length-Se," remaining)"]})]})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-semibold text-foreground",children:Math.min(Se,M.length)})," of"," ",e.jsx("span",{className:"font-semibold text-foreground",children:M.length})," products"]}),e.jsx(lr,{vendorProfile:_})]})]})]})]})]}),e.jsx(ns,{open:Y,onOpenChange:Z,limitType:Je}),e.jsx(Za,{open:fe,onOpenChange:Ce,planName:te}),e.jsx(Xa,{open:ye,onOpenChange:kt,planName:te,benefits:te==="Professional Plan"?[{title:"1,000 Products",description:"Expand your catalog with up to 1,000 products"},{title:"10 Share Links",description:"Create up to 10 shareable catalog links"},{title:"3 Team Members",description:"Invite up to 3 team members to collaborate"},{title:"Unlimited Product Images",description:"Add as many images as you need to showcase your products"},{title:"Custom Orders Management",description:"Manage custom order requests from customers"},{title:"Data Import Tools",description:"Easily import your product data from Excel files"}]:[{title:"Unlimited Products",description:"No limits on the number of products you can add"},{title:"Unlimited Share Links",description:"Create as many shareable catalog links as you need"},{title:"Unlimited Team Members",description:"Invite unlimited team members to collaborate"},{title:"Advanced Analytics",description:"Detailed insights into your catalog performance"},{title:"Priority Support",description:"Get dedicated support from our team"},{title:"Custom Integrations",description:"Connect with your existing business tools"}]}),e.jsx(er,{open:us,onOpenChange:Dt,referralType:ps,referredName:xs}),e.jsx(sr,{open:!!se,onOpenChange:a=>!a&&vs(),milestoneType:(se==null?void 0:se.milestone_type)||"",milestoneValue:(se==null?void 0:se.milestone_value)||0,pointsAwarded:(se==null?void 0:se.points_awarded)||0}),e.jsx(dr,{open:fs,onOpenChange:Tt,onUpdate:Os,selectedCount:F.size,selectedProductIds:Array.from(F)}),e.jsx(mr,{open:ys,onOpenChange:Ze,onConfirm:Ms,products:zs,isDeleting:bs}),e.jsx(Wa,{open:js,onOpenChange:At,suggestions:It,onApply:Bs})]})};export{Zr as default};
//# sourceMappingURL=Catalog-htTUh0oZ.js.map
