{"version":3,"file":"Catalog-9gK1Pmep.js","sources":["../../src/components/ProductCard.tsx","../../src/components/ProductCardSkeleton.tsx","../../src/utils/productCategorization.ts","../../src/components/AutoCategorizationDialog.tsx","../../src/hooks/usePlanLimits.tsx","../../src/utils/pdfExport.ts","../../src/components/PlanUsageBanner.tsx","../../src/components/UpgradePromptDialog.tsx","../../src/components/GoldRateDialog.tsx","../../src/components/MetalRatesCard.tsx","../../src/components/FloatingQRCodes.tsx","../../src/components/QuickActionsMenu.tsx","../../src/components/BulkEditDialog.tsx","../../src/components/DeleteConfirmationDialog.tsx","../../src/components/ui/breadcrumb.tsx","../../src/pages/Catalog.tsx"],"sourcesContent":["import { useState, memo } from \"react\";\r\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { OptimizedImage } from \"@/components/OptimizedImage\";\r\nimport { Gem, ChevronLeft, ChevronRight, Zap, Calendar } from \"lucide-react\";\r\n\r\ninterface ProductCardProps {\r\n  product: any;\r\n  isSelected: boolean;\r\n  onToggleSelection: (id: string) => void;\r\n  usdRate: number;\r\n  vendorLogoUrl?: string;\r\n}\r\n\r\nconst ProductCardComponent = ({ product, isSelected, onToggleSelection, usdRate, vendorLogoUrl }: ProductCardProps) => {\r\n  const images = [product.image_url, product.image_url_2, product.image_url_3].filter(Boolean);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [isHovering, setIsHovering] = useState(false);\r\n\r\n  const nextImage = () => {\r\n    setCurrentImageIndex((prev) => (prev + 1) % images.length);\r\n  };\r\n\r\n  const prevImage = () => {\r\n    setCurrentImageIndex((prev) => (prev - 1 + images.length) % images.length);\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHovering(true);\r\n    if (images.length > 1) {\r\n      nextImage();\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHovering(false);\r\n    setCurrentImageIndex(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"transform hover:-translate-y-2 transition-transform duration-300\">\r\n      <Card className=\"overflow-hidden relative group bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg hover:shadow-2xl hover:shadow-primary/10 transition-all duration-300 active:scale-[0.98] touch-manipulation\">\r\n        {/* Premium glow effect on hover */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none\" />\r\n        <div \r\n          className=\"absolute top-3 left-3 z-10\" \r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 bg-primary/20 blur-md rounded opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n            <Checkbox\r\n              checked={isSelected}\r\n              onCheckedChange={(checked) => {\r\n                onToggleSelection(product.id);\r\n              }}\r\n              className=\"relative bg-background/95 backdrop-blur-sm border-2 border-primary/30 w-5 h-5 sm:w-6 sm:h-6 shadow-lg cursor-pointer\"\r\n            />\r\n          </div>\r\n        </div>\r\n      {images.length > 0 ? (\r\n        <div \r\n          className=\"aspect-square overflow-hidden bg-muted relative group\"\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <OptimizedImage\r\n            src={images[currentImageIndex]}\r\n            alt={`${product.name} - Image ${currentImageIndex + 1}`}\r\n            className=\"w-full h-full object-cover\"\r\n            width={400}\r\n            height={400}\r\n            blurPlaceholder={true}\r\n            priority={false}\r\n          />\r\n          {images.length > 1 && (\r\n            <>\r\n              <button\r\n                onClick={prevImage}\r\n                className=\"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation\"\r\n                aria-label=\"Previous image\"\r\n              >\r\n                <ChevronLeft className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n              </button>\r\n              <button\r\n                onClick={nextImage}\r\n                className=\"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 bg-background/90 hover:bg-background p-1.5 sm:p-2 rounded-full opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-300 active:scale-95 shadow-lg touch-manipulation\"\r\n                aria-label=\"Next image\"\r\n              >\r\n                <ChevronRight className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n              </button>\r\n              <div className=\"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 sm:gap-2 bg-background/80 backdrop-blur-sm px-2 sm:px-3 py-1 sm:py-1.5 rounded-full\">\r\n                {images.map((_, idx) => (\r\n                  <button\r\n                    key={idx}\r\n                    onClick={() => setCurrentImageIndex(idx)}\r\n                    className={`transition-all duration-300 rounded-full touch-manipulation ${\r\n                      idx === currentImageIndex \r\n                        ? 'bg-primary w-5 sm:w-6 h-1.5 sm:h-2' \r\n                        : 'bg-muted-foreground/40 w-1.5 sm:w-2 h-1.5 sm:h-2 active:bg-muted-foreground/60'\r\n                    }`}\r\n                    aria-label={`Go to image ${idx + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n              {/* Image counter badge */}\r\n              <div className=\"absolute top-2 sm:top-3 right-2 sm:right-3 bg-background/90 backdrop-blur-sm px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium shadow-sm\">\r\n                {currentImageIndex + 1} / {images.length}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"aspect-square overflow-hidden bg-muted flex items-center justify-center\">\r\n          <Gem className=\"h-24 w-24 text-muted-foreground/30\" />\r\n        </div>\r\n      )}\r\n      <CardHeader className=\"p-4 sm:p-6 relative\">\r\n        <h3 className=\"font-serif text-lg sm:text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300\">{product.name}</h3>\r\n        {product.sku && (\r\n          <p className=\"text-xs sm:text-sm text-muted-foreground/80 mb-3 font-medium\">SKU: {product.sku}</p>\r\n        )}\r\n        <div className=\"space-y-1.5 sm:space-y-2 text-xs sm:text-sm border-t border-border/50 pt-3 sm:pt-4 bg-gradient-to-b from-transparent to-muted/20 -mx-4 sm:-mx-6 px-4 sm:px-6 pb-2\">\r\n          {product.diamond_color && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Diamond Color:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.diamond_color}</span>\r\n            </div>\r\n          )}\r\n          {product.clarity && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Diamond Clarity:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.clarity}</span>\r\n            </div>\r\n          )}\r\n          {product.diamond_weight && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">T DWT:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.diamond_weight}g</span>\r\n            </div>\r\n          )}\r\n          {product.weight_grams && (\r\n            <>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground font-medium\">Gross Weight:</span>\r\n                <span className=\"text-foreground font-semibold\">{product.weight_grams}g</span>\r\n              </div>\r\n              {product.net_weight && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-muted-foreground font-medium\">NET WT:</span>\r\n                  <span className=\"text-foreground font-semibold\">{product.net_weight}g</span>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n          {product.metal_type && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Metal Type:</span>\r\n              <span className=\"text-foreground font-semibold\">{product.metal_type}</span>\r\n            </div>\r\n          )}\r\n          {product.purity_fraction_used && (\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-muted-foreground font-medium\">Metal Purity:</span>\r\n              <span className=\"text-foreground font-semibold\">{(product.purity_fraction_used * 100).toFixed(0)}%</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"p-3 sm:p-6\">\r\n        {product.description && (\r\n          <p className=\"text-xs sm:text-sm text-muted-foreground mb-2 sm:mb-3 line-clamp-2\">\r\n            {product.description}\r\n          </p>\r\n        )}\r\n        {product.category && (\r\n          <div className=\"text-xs sm:text-sm\">\r\n            <span className=\"text-muted-foreground\">Category:</span> <span className=\"text-foreground font-medium\">{product.category}</span>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n      <CardFooter className=\"flex flex-col gap-3.5 border-t border-border/50 p-4 sm:p-6 pt-4 sm:pt-5 bg-gradient-to-b from-muted/5 to-transparent\">\r\n        {/* Delivery Badge */}\r\n        {product.delivery_type && (\r\n          <div className=\"w-full\">\r\n            {product.delivery_type === 'immediate delivery' ? (\r\n              <Badge variant=\"secondary\" className=\"w-full justify-center gap-2 py-2 bg-gradient-to-r from-emerald-500/20 via-green-500/20 to-emerald-500/20 border-emerald-500/40 text-emerald-700 dark:text-emerald-400 hover:from-emerald-500/30 hover:to-green-500/30 shadow-sm font-semibold\">\r\n                <Zap className=\"h-3.5 w-3.5\" />\r\n                <span className=\"text-xs\">Immediate Dispatch</span>\r\n              </Badge>\r\n            ) : (\r\n              <Badge variant=\"outline\" className=\"w-full justify-center gap-2 py-2 border-primary/40 text-primary hover:bg-primary/10 shadow-sm font-semibold\">\r\n                <Calendar className=\"h-3.5 w-3.5\" />\r\n                <span className=\"text-xs\">{product.delivery_type}</span>\r\n              </Badge>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Price and Stock */}\r\n        <div className=\"flex justify-between w-full items-end\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">Retail Price</p>\r\n            <div className=\"relative\">\r\n              <p className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent drop-shadow-sm\">\r\n                ₹{product.retail_price.toLocaleString('en-IN')}\r\n              </p>\r\n              <div className=\"absolute -inset-1 bg-gradient-to-r from-primary/20 to-accent/20 blur-lg opacity-30 -z-10\" />\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground font-medium\">${(product.retail_price / usdRate).toLocaleString('en-US', { maximumFractionDigits: 0 })}</p>\r\n          </div>\r\n          <div className=\"text-right space-y-1\">\r\n            <p className=\"text-xs text-muted-foreground font-medium\">Stock</p>\r\n            <p className=\"text-xl sm:text-2xl font-bold text-foreground\">{product.stock_quantity}</p>\r\n          </div>\r\n        </div>\r\n      </CardFooter>\r\n    </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Memoize to prevent unnecessary re-renders\r\nexport const ProductCard = memo(ProductCardComponent, (prevProps, nextProps) => {\r\n  return (\r\n    prevProps.product.id === nextProps.product.id &&\r\n    prevProps.isSelected === nextProps.isSelected &&\r\n    prevProps.usdRate === nextProps.usdRate &&\r\n    prevProps.product.retail_price === nextProps.product.retail_price\r\n  );\r\n});\r\n","import { Card } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nexport const ProductCardSkeleton = () => {\r\n  return (\r\n    <Card className=\"overflow-hidden bg-gradient-to-b from-card to-card/95 border-border/50 shadow-lg\">\r\n      <Skeleton className=\"aspect-square w-full\" />\r\n      <div className=\"p-4 sm:p-6 space-y-4\">\r\n        <div className=\"space-y-2\">\r\n          <Skeleton className=\"h-6 w-3/4\" />\r\n          <Skeleton className=\"h-4 w-1/2\" />\r\n        </div>\r\n        <div className=\"space-y-2 border-t border-border/50 pt-3\">\r\n          <Skeleton className=\"h-3 w-full\" />\r\n          <Skeleton className=\"h-3 w-full\" />\r\n          <Skeleton className=\"h-3 w-2/3\" />\r\n        </div>\r\n        <div className=\"border-t border-border/50 pt-4\">\r\n          <Skeleton className=\"h-10 w-full mb-3\" />\r\n          <div className=\"flex justify-between items-end\">\r\n            <div className=\"space-y-2\">\r\n              <Skeleton className=\"h-3 w-16\" />\r\n              <Skeleton className=\"h-8 w-24\" />\r\n            </div>\r\n            <div className=\"space-y-2 text-right\">\r\n              <Skeleton className=\"h-3 w-12\" />\r\n              <Skeleton className=\"h-8 w-12\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n","/**\r\n * Smart product categorization utility\r\n * Uses pattern matching on product names and SKUs to suggest categories\r\n */\r\n\r\ninterface CategoryPattern {\r\n  category: string;\r\n  patterns: RegExp[];\r\n  priority: number; // Higher priority patterns checked first\r\n}\r\n\r\n// Define category patterns with common keywords and SKU prefixes\r\nconst CATEGORY_PATTERNS: CategoryPattern[] = [\r\n  {\r\n    category: \"Ladies Rings\",\r\n    patterns: [\r\n      /\\bCLR\\d+/i,\r\n      /ladies?\\s*rings?/i,\r\n      /women'?s?\\s*rings?/i,\r\n      /female\\s*rings?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Gents Rings\",\r\n    patterns: [\r\n      /\\bCGR\\d+/i,\r\n      /gents?\\s*rings?/i,\r\n      /men'?s?\\s*rings?/i,\r\n      /male\\s*rings?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Rings\",\r\n    patterns: [/\\brings?\\b/i, /\\bband\\b/i, /\\bwedding\\s*band/i],\r\n    priority: 5,\r\n  },\r\n  {\r\n    category: \"Ladies Bangles\",\r\n    patterns: [\r\n      /\\bCLB\\d+/i,\r\n      /ladies?\\s*bangles?/i,\r\n      /women'?s?\\s*bangles?/i,\r\n      /kadas?/i,\r\n    ],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Gents Bangles\",\r\n    patterns: [/\\bCGB\\d+/i, /gents?\\s*bangles?/i, /men'?s?\\s*bangles?/i],\r\n    priority: 10,\r\n  },\r\n  {\r\n    category: \"Bangles\",\r\n    patterns: [/\\bbangles?\\b/i, /\\bbracelets?\\b/i],\r\n    priority: 5,\r\n  },\r\n  {\r\n    category: \"Bracelets\",\r\n    patterns: [\r\n      /\\bCBR\\d+/i,\r\n      /\\bbracelets?\\b/i,\r\n      /\\bwrist\\s*band/i,\r\n      /\\bchain\\s*bracelet/i,\r\n    ],\r\n    priority: 8,\r\n  },\r\n  {\r\n    category: \"Necklaces\",\r\n    patterns: [\r\n      /\\bCLN\\d+/i,\r\n      /\\bnecklaces?\\b/i,\r\n      /\\bhaar\\b/i,\r\n      /\\bmangalsutra/i,\r\n      /\\bchoker/i,\r\n      /\\bcollar\\b/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Earrings\",\r\n    patterns: [\r\n      /\\bCLE\\d+/i,\r\n      /\\bearrings?\\b/i,\r\n      /\\bstuds?\\b/i,\r\n      /\\bhoops?\\b/i,\r\n      /\\bdrops?\\b/i,\r\n      /\\bjhumka/i,\r\n      /\\bjhumki/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Pendants\",\r\n    patterns: [\r\n      /\\bCLP\\d+/i,\r\n      /\\bpendants?\\b/i,\r\n      /\\blockets?\\b/i,\r\n      /\\bcharm\\b/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Chains\",\r\n    patterns: [\r\n      /\\bCLC\\d+/i,\r\n      /\\bchains?\\b/i,\r\n      /\\bgold\\s*chain/i,\r\n      /\\bsilver\\s*chain/i,\r\n    ],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Toe Rings\",\r\n    patterns: [/\\btoe\\s*rings?/i, /\\bmetti/i, /\\bfoot\\s*rings?/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Nose Pins\",\r\n    patterns: [/\\bnose\\s*pins?/i, /\\bnath\\b/i, /\\bbullak/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Mangalsutra\",\r\n    patterns: [/\\bmangalsutra/i, /\\bthali/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Anklets\",\r\n    patterns: [/\\banklets?/i, /\\bpayal/i, /\\bpajeb/i],\r\n    priority: 9,\r\n  },\r\n  {\r\n    category: \"Sets\",\r\n    patterns: [\r\n      /\\bsets?\\b/i,\r\n      /\\bcomplete\\s*set/i,\r\n      /\\bbridal\\s*set/i,\r\n      /\\bjewel(?:le)?ry\\s*set/i,\r\n    ],\r\n    priority: 8,\r\n  },\r\n];\r\n\r\nexport interface CategorySuggestion {\r\n  productId: string;\r\n  productName: string;\r\n  currentCategory: string | null;\r\n  suggestedCategory: string;\r\n  confidence: \"high\" | \"medium\" | \"low\";\r\n  matchedPattern: string;\r\n}\r\n\r\n/**\r\n * Analyze a product and suggest a category based on name and SKU\r\n */\r\nexport function suggestCategory(\r\n  productName: string,\r\n  sku: string | null\r\n): { category: string; confidence: \"high\" | \"medium\" | \"low\"; pattern: string } | null {\r\n  const searchText = `${productName} ${sku || \"\"}`;\r\n  \r\n  // Sort patterns by priority (highest first)\r\n  const sortedPatterns = [...CATEGORY_PATTERNS].sort((a, b) => b.priority - a.priority);\r\n  \r\n  for (const { category, patterns, priority } of sortedPatterns) {\r\n    for (const pattern of patterns) {\r\n      if (pattern.test(searchText)) {\r\n        // Determine confidence based on priority and match quality\r\n        let confidence: \"high\" | \"medium\" | \"low\";\r\n        if (priority >= 10) {\r\n          confidence = \"high\";\r\n        } else if (priority >= 7) {\r\n          confidence = \"medium\";\r\n        } else {\r\n          confidence = \"low\";\r\n        }\r\n        \r\n        return {\r\n          category,\r\n          confidence,\r\n          pattern: pattern.source,\r\n        };\r\n      }\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Analyze multiple products and generate category suggestions\r\n */\r\nexport function analyzeCatalog(\r\n  products: Array<{\r\n    id: string;\r\n    name: string;\r\n    sku: string | null;\r\n    category: string | null;\r\n  }>\r\n): CategorySuggestion[] {\r\n  const suggestions: CategorySuggestion[] = [];\r\n  \r\n  for (const product of products) {\r\n    // Skip if already has a category (unless we want to suggest changes)\r\n    // For now, only suggest for products without categories\r\n    if (product.category) continue;\r\n    \r\n    const suggestion = suggestCategory(product.name, product.sku);\r\n    \r\n    if (suggestion) {\r\n      suggestions.push({\r\n        productId: product.id,\r\n        productName: product.name,\r\n        currentCategory: product.category,\r\n        suggestedCategory: suggestion.category,\r\n        confidence: suggestion.confidence,\r\n        matchedPattern: suggestion.pattern,\r\n      });\r\n    }\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * Get statistics about suggestions\r\n */\r\nexport function getSuggestionStats(suggestions: CategorySuggestion[]) {\r\n  const byCategory = suggestions.reduce((acc, s) => {\r\n    acc[s.suggestedCategory] = (acc[s.suggestedCategory] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n  \r\n  const byConfidence = suggestions.reduce((acc, s) => {\r\n    acc[s.confidence] = (acc[s.confidence] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n  \r\n  return {\r\n    total: suggestions.length,\r\n    byCategory,\r\n    byConfidence,\r\n  };\r\n}\r\n","import { useState } from \"react\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Sparkles, TrendingUp, CheckCircle2 } from \"lucide-react\";\r\nimport { CategorySuggestion, getSuggestionStats } from \"@/utils/productCategorization\";\r\n\r\ninterface AutoCategorizationDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  suggestions: CategorySuggestion[];\r\n  onApply: (selectedIds: string[]) => Promise<void>;\r\n}\r\n\r\nexport function AutoCategorizationDialog({\r\n  open,\r\n  onOpenChange,\r\n  suggestions,\r\n  onApply,\r\n}: AutoCategorizationDialogProps) {\r\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(\r\n    new Set(suggestions.map(s => s.productId))\r\n  );\r\n  const [isApplying, setIsApplying] = useState(false);\r\n\r\n  const stats = getSuggestionStats(suggestions);\r\n  \r\n  const toggleSelection = (id: string) => {\r\n    const newSelected = new Set(selectedIds);\r\n    if (newSelected.has(id)) {\r\n      newSelected.delete(id);\r\n    } else {\r\n      newSelected.add(id);\r\n    }\r\n    setSelectedIds(newSelected);\r\n  };\r\n\r\n  const toggleAll = () => {\r\n    if (selectedIds.size === suggestions.length) {\r\n      setSelectedIds(new Set());\r\n    } else {\r\n      setSelectedIds(new Set(suggestions.map(s => s.productId)));\r\n    }\r\n  };\r\n\r\n  const handleApply = async () => {\r\n    setIsApplying(true);\r\n    try {\r\n      await onApply(Array.from(selectedIds));\r\n      onOpenChange(false);\r\n    } finally {\r\n      setIsApplying(false);\r\n    }\r\n  };\r\n\r\n  const getConfidenceBadge = (confidence: string) => {\r\n    switch (confidence) {\r\n      case \"high\":\r\n        return <Badge className=\"bg-green-500/20 text-green-700 dark:text-green-400\">High</Badge>;\r\n      case \"medium\":\r\n        return <Badge className=\"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400\">Medium</Badge>;\r\n      case \"low\":\r\n        return <Badge className=\"bg-orange-500/20 text-orange-700 dark:text-orange-400\">Low</Badge>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[80vh]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Sparkles className=\"h-5 w-5 text-primary\" />\r\n            Smart Category Suggestions\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Found {stats.total} products that can be auto-categorized based on their names and SKUs\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {/* Stats Overview */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 py-4\">\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-primary\">{stats.total}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Total Suggestions</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-green-600\">{stats.byConfidence.high || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">High Confidence</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-yellow-600\">{stats.byConfidence.medium || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Medium Confidence</div>\r\n          </div>\r\n          <div className=\"bg-muted/50 rounded-lg p-3\">\r\n            <div className=\"text-2xl font-bold text-orange-600\">{stats.byConfidence.low || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Low Confidence</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Category Breakdown */}\r\n        <div className=\"py-2\">\r\n          <div className=\"text-sm font-medium mb-2 flex items-center gap-2\">\r\n            <TrendingUp className=\"h-4 w-4\" />\r\n            Categories Found\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {Object.entries(stats.byCategory).map(([category, count]) => (\r\n              <Badge key={category} variant=\"secondary\">\r\n                {category}: {count}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Suggestions List */}\r\n        <ScrollArea className=\"h-[300px] border rounded-lg\">\r\n          <div className=\"p-4 space-y-3\">\r\n            <div className=\"flex items-center gap-2 pb-2 border-b sticky top-0 bg-background\">\r\n              <Checkbox\r\n                checked={selectedIds.size === suggestions.length}\r\n                onCheckedChange={toggleAll}\r\n              />\r\n              <span className=\"text-sm font-medium\">\r\n                Select All ({selectedIds.size}/{suggestions.length})\r\n              </span>\r\n            </div>\r\n            \r\n            {suggestions.map((suggestion) => (\r\n              <div\r\n                key={suggestion.productId}\r\n                className=\"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors\"\r\n              >\r\n                <Checkbox\r\n                  checked={selectedIds.has(suggestion.productId)}\r\n                  onCheckedChange={() => toggleSelection(suggestion.productId)}\r\n                />\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"font-medium truncate\">{suggestion.productName}</div>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <span className=\"text-xs text-muted-foreground\">→</span>\r\n                    <Badge variant=\"outline\" className=\"text-xs\">\r\n                      {suggestion.suggestedCategory}\r\n                    </Badge>\r\n                    {getConfidenceBadge(suggestion.confidence)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </ScrollArea>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={handleApply}\r\n            disabled={selectedIds.size === 0 || isApplying}\r\n          >\r\n            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n            Apply {selectedIds.size} Categories\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { getCachedUser } from \"@/lib/authCache\";\r\n\r\ninterface PlanLimits {\r\n  subscription_plan: 'starter' | 'professional' | 'enterprise' | 'essentials';\r\n  max_products: number;\r\n  max_share_links: number;\r\n  max_team_members: number;\r\n  max_product_images: number;\r\n}\r\n\r\ninterface Usage {\r\n  products_count: number;\r\n  share_links_count: number;\r\n}\r\n\r\ninterface PlanLimitStatus {\r\n  canAddProducts: boolean;\r\n  canAddShareLinks: boolean;\r\n  productsRemaining: number;\r\n  shareLinksRemaining: number;\r\n  productUsagePercent: number;\r\n  shareLinksUsagePercent: number;\r\n  loading: boolean;\r\n}\r\n\r\nexport const usePlanLimits = (): PlanLimitStatus => {\r\n  const [limits, setLimits] = useState<PlanLimits | null>(null);\r\n  const [usage, setUsage] = useState<Usage | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchLimitsAndUsage();\r\n  }, []);\r\n\r\n  const fetchLimitsAndUsage = async () => {\r\n    try {\r\n      const user = await getCachedUser();\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Parallel fetch for all data with count queries for efficiency\r\n      const [permissionsResult, productsResult, shareLinksResult] = await Promise.all([\r\n        supabase\r\n          .from(\"vendor_permissions\")\r\n          .select(\"subscription_plan, max_products, max_share_links, max_team_members, max_product_images\")\r\n          .eq(\"user_id\", user.id)\r\n          .single(),\r\n        supabase\r\n          .from(\"products\")\r\n          .select(\"id\", { count: 'exact', head: true })\r\n          .eq(\"user_id\", user.id)\r\n          .is(\"deleted_at\", null),\r\n        supabase\r\n          .from(\"share_links\")\r\n          .select(\"id\", { count: 'exact', head: true })\r\n          .eq(\"user_id\", user.id)\r\n      ]);\r\n\r\n      if (permissionsResult.error) throw permissionsResult.error;\r\n\r\n      setLimits(permissionsResult.data);\r\n      setUsage({\r\n        products_count: productsResult.count || 0,\r\n        share_links_count: shareLinksResult.count || 0,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching limits:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!limits || !usage) {\r\n    return {\r\n      canAddProducts: true,\r\n      canAddShareLinks: true,\r\n      productsRemaining: 0,\r\n      shareLinksRemaining: 0,\r\n      productUsagePercent: 0,\r\n      shareLinksUsagePercent: 0,\r\n      loading,\r\n    };\r\n  }\r\n\r\n  const productUsagePercent = (usage.products_count / limits.max_products) * 100;\r\n  const shareLinksUsagePercent = (usage.share_links_count / limits.max_share_links) * 100;\r\n\r\n  // Check if unlimited (999999 is the unlimited indicator)\r\n  const hasUnlimitedProducts = limits.max_products === 999999;\r\n  const hasUnlimitedShareLinks = limits.max_share_links === 999999;\r\n\r\n  return {\r\n    canAddProducts: hasUnlimitedProducts || usage.products_count < limits.max_products,\r\n    canAddShareLinks: hasUnlimitedShareLinks || usage.share_links_count < limits.max_share_links,\r\n    productsRemaining: hasUnlimitedProducts ? Infinity : limits.max_products - usage.products_count,\r\n    shareLinksRemaining: hasUnlimitedShareLinks ? Infinity : limits.max_share_links - usage.share_links_count,\r\n    productUsagePercent,\r\n    shareLinksUsagePercent,\r\n    loading,\r\n  };\r\n};\r\n","import jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\n\r\ninterface VendorProfile {\r\n  business_name?: string;\r\n  address_line1?: string;\r\n  address_line2?: string;\r\n  city?: string;\r\n  state?: string;\r\n  pincode?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  whatsapp_number?: string;\r\n}\r\n\r\ninterface Product {\r\n  sku?: string;\r\n  name: string;\r\n  diamond_color?: string;\r\n  clarity?: string;\r\n  d_wt_1?: number;\r\n  d_wt_2?: number;\r\n  diamond_weight?: number;\r\n  weight_grams?: number;\r\n  net_weight?: number;\r\n  purity_fraction_used?: number;\r\n  d_rate_1?: number;\r\n  pointer_diamond?: number;\r\n  d_value?: number;\r\n  gemstone?: string;\r\n  mkg?: number;\r\n  certification_cost?: number;\r\n  gemstone_cost?: number;\r\n  retail_price: number;\r\n  total_usd?: number;\r\n}\r\n\r\nexport const exportCatalogToPDF = (\r\n  products: Product[],\r\n  vendorProfile: VendorProfile | null,\r\n  usdRate: number,\r\n  goldRate: number,\r\n  totalINR: number,\r\n  totalUSD: number\r\n) => {\r\n  const doc = new jsPDF('landscape', 'mm', 'a4');\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  \r\n  // Add vendor header\r\n  doc.setFontSize(20);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(vendorProfile?.business_name || \"Product Catalog\", pageWidth / 2, 20, { align: \"center\" });\r\n  \r\n  // Add vendor details\r\n  if (vendorProfile) {\r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    let yPos = 30;\r\n    \r\n    if (vendorProfile.address_line1) {\r\n      doc.text(\r\n        `${vendorProfile.address_line1}${vendorProfile.address_line2 ? ', ' + vendorProfile.address_line2 : ''}`,\r\n        pageWidth / 2,\r\n        yPos,\r\n        { align: \"center\" }\r\n      );\r\n      yPos += 5;\r\n    }\r\n    \r\n    if (vendorProfile.city) {\r\n      doc.text(\r\n        `${vendorProfile.city}, ${vendorProfile.state} ${vendorProfile.pincode}`,\r\n        pageWidth / 2,\r\n        yPos,\r\n        { align: \"center\" }\r\n      );\r\n      yPos += 5;\r\n    }\r\n    \r\n    const contactInfo = [];\r\n    if (vendorProfile.email) contactInfo.push(`Email: ${vendorProfile.email}`);\r\n    if (vendorProfile.phone) contactInfo.push(`Phone: ${vendorProfile.phone}`);\r\n    if (vendorProfile.whatsapp_number) contactInfo.push(`WhatsApp: ${vendorProfile.whatsapp_number}`);\r\n    \r\n    if (contactInfo.length > 0) {\r\n      doc.text(contactInfo.join(' | '), pageWidth / 2, yPos, { align: \"center\" });\r\n    }\r\n  }\r\n  \r\n  // Add date, exchange rate, and gold rate with professional styling\r\n  doc.setFillColor(248, 250, 252);\r\n  doc.rect(0, 45, pageWidth, 8, 'F');\r\n  \r\n  doc.setFontSize(8.5);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(70, 70, 80);\r\n  doc.text(\r\n    `Date: ${new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' })} | Exchange Rate: 1 USD = Rs.${usdRate.toFixed(2)} | Gold Rate (24K): Rs.${goldRate.toLocaleString('en-IN')}/g`,\r\n    pageWidth / 2,\r\n    49,\r\n    { align: 'center' }\r\n  );\r\n  \r\n  // Prepare table data\r\n  const tableData = products.map((product, index) => [\r\n    product.sku || `${index + 1}`,\r\n    product.name,\r\n    product.diamond_color || '-',\r\n    product.clarity || '-',\r\n    product.d_wt_1 ? `${product.d_wt_1}` : '-',\r\n    product.d_wt_2 ? `${product.d_wt_2}` : '-',\r\n    product.diamond_weight ? `${product.diamond_weight}` : '-',\r\n    product.weight_grams ? `${product.weight_grams}` : '-',\r\n    product.net_weight ? `${product.net_weight}` : '-',\r\n    product.purity_fraction_used ? `${product.purity_fraction_used > 1 ? product.purity_fraction_used : (product.purity_fraction_used * 100).toFixed(0)}%` : '-',\r\n    product.d_rate_1 ? `${product.d_rate_1.toLocaleString('en-IN')}` : '-',\r\n    product.pointer_diamond ? `${product.pointer_diamond.toLocaleString('en-IN')}` : '-',\r\n    product.d_value ? `${product.d_value.toLocaleString('en-IN')}` : '-',\r\n    product.gemstone || 'NONE',\r\n    product.mkg ? `${product.mkg.toLocaleString('en-IN', { maximumFractionDigits: 2 })}` : '-',\r\n    product.certification_cost ? `${product.certification_cost.toLocaleString('en-IN')}` : '-',\r\n    product.gemstone_cost ? `${product.gemstone_cost.toLocaleString('en-IN')}` : '-',\r\n    product.retail_price.toLocaleString('en-IN', { maximumFractionDigits: 0 }),\r\n    product.total_usd ? product.total_usd.toFixed(2) : (product.retail_price / usdRate).toFixed(2)\r\n  ]);\r\n  \r\n  // Add table with enhanced professional styling\r\n  autoTable(doc, {\r\n    head: [[\r\n      'SKU', \r\n      'PRODUCT NAME', \r\n      'DIAMOND\\nCOLOR',\r\n      'CLARITY', \r\n      'D.WT 1\\n(ct)', \r\n      'D.WT 2\\n(ct)', \r\n      'TOTAL\\nD.WT (ct)', \r\n      'GROSS\\nWT (g)', \r\n      'NET\\nWT (g)', \r\n      'PURITY\\n%', \r\n      'D RATE 1\\n(Rs/ct)', \r\n      'POINTER\\nDIAMOND', \r\n      'D VALUE\\n(Rs)',\r\n      'GEMSTONE\\nTYPE',\r\n      'MKG\\n(Rs)',\r\n      'CERT\\nCOST (Rs)',\r\n      'GEM\\nCOST (Rs)',\r\n      'TOTAL\\n(Rs)',\r\n      'TOTAL\\n(USD)'\r\n    ]],\r\n    body: tableData,\r\n    startY: 53,\r\n    styles: { \r\n      fontSize: 8, \r\n      cellPadding: 3, \r\n      lineColor: [220, 220, 220], \r\n      lineWidth: 0.15,\r\n      overflow: 'linebreak',\r\n      halign: 'left',\r\n      valign: 'middle',\r\n      textColor: [50, 50, 50]\r\n    },\r\n    headStyles: { \r\n      fillColor: [41, 128, 185],\r\n      textColor: [255, 255, 255], \r\n      fontStyle: 'bold', \r\n      halign: 'center',\r\n      fontSize: 7.5,\r\n      minCellHeight: 14,\r\n      valign: 'middle',\r\n      cellPadding: 3\r\n    },\r\n    alternateRowStyles: { fillColor: [250, 252, 255] },\r\n    columnStyles: {\r\n      0: { cellWidth: 15, halign: 'left' },\r\n      1: { cellWidth: 32, halign: 'left' },\r\n      2: { cellWidth: 12, halign: 'center' },\r\n      3: { cellWidth: 12, halign: 'center' },\r\n      4: { cellWidth: 12, halign: 'right' },\r\n      5: { cellWidth: 12, halign: 'right' },\r\n      6: { cellWidth: 14, halign: 'right' },\r\n      7: { cellWidth: 12, halign: 'right' },\r\n      8: { cellWidth: 12, halign: 'right' },\r\n      9: { cellWidth: 12, halign: 'right' },\r\n      10: { cellWidth: 14, halign: 'right' },\r\n      11: { cellWidth: 14, halign: 'right' },\r\n      12: { cellWidth: 14, halign: 'right' },\r\n      13: { cellWidth: 16, halign: 'center' },\r\n      14: { cellWidth: 14, halign: 'right' },\r\n      15: { cellWidth: 13, halign: 'right' },\r\n      16: { cellWidth: 13, halign: 'right' },\r\n      17: { cellWidth: 22, halign: 'right', fontStyle: 'bold', textColor: [30, 64, 175] },\r\n      18: { cellWidth: 18, halign: 'right', fontStyle: 'bold', textColor: [30, 64, 175] }\r\n    },\r\n    margin: { top: 53, left: 5, right: 5 },\r\n    tableWidth: 'auto',\r\n    didParseCell: function(data: any) {\r\n      if (data.column.index === 17 && data.section === 'body') {\r\n        data.cell.text = [`Rs. ${data.cell.text[0]}`];\r\n      }\r\n      if (data.column.index === 18 && data.section === 'body') {\r\n        data.cell.text = [`$ ${data.cell.text[0]}`];\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Add totals with enhanced design\r\n  const finalY = (doc as any).lastAutoTable.finalY || 50;\r\n  \r\n  doc.setFillColor(250, 252, 255);\r\n  doc.roundedRect(14, finalY + 6, pageWidth - 28, 20, 2, 2, 'F');\r\n  doc.setDrawColor(41, 128, 185);\r\n  doc.setLineWidth(0.5);\r\n  doc.roundedRect(14, finalY + 6, pageWidth - 28, 20, 2, 2, 'S');\r\n  \r\n  doc.setFontSize(11);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(41, 128, 185);\r\n  doc.text(\r\n    `Total: Rs.${totalINR.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} | USD $${totalUSD.toFixed(2)}`,\r\n    pageWidth / 2,\r\n    finalY + 13,\r\n    { align: \"center\" }\r\n  );\r\n  doc.setTextColor(50, 50, 60);\r\n  doc.setFontSize(9);\r\n  doc.text(\r\n    `Total Products: ${products.length}`,\r\n    pageWidth / 2,\r\n    finalY + 20,\r\n    { align: \"center\" }\r\n  );\r\n  \r\n  // Save PDF\r\n  const fileName = `catalog_${vendorProfile?.business_name?.replace(/\\s+/g, '_') || 'products'}_${new Date().toLocaleDateString('en-IN').replace(/\\//g, '-')}.pdf`;\r\n  doc.save(fileName);\r\n};\r\n","import { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { AlertCircle, TrendingUp } from \"lucide-react\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\n\r\nexport const PlanUsageBanner = () => {\r\n  const {\r\n    productUsagePercent,\r\n    shareLinksUsagePercent,\r\n    productsRemaining,\r\n    shareLinksRemaining,\r\n    loading\r\n  } = usePlanLimits();\r\n\r\n  if (loading) return null;\r\n\r\n  const isProductsUnlimited = productsRemaining === Infinity;\r\n  const isShareLinksUnlimited = shareLinksRemaining === Infinity;\r\n  \r\n  const isAnyLimitHigh = productUsagePercent >= 80 || shareLinksUsagePercent >= 80;\r\n  const isAnyLimitExhausted = productUsagePercent >= 100 || shareLinksUsagePercent >= 100;\r\n\r\n  if (!isAnyLimitHigh) return null;\r\n\r\n  return (\r\n    <Alert className={`mb-6 ${isAnyLimitExhausted ? 'border-destructive bg-destructive/5' : 'border-warning bg-warning/5'}`}>\r\n      <div className=\"flex items-start gap-3\">\r\n        {isAnyLimitExhausted ? (\r\n          <AlertCircle className=\"h-5 w-5 text-destructive mt-0.5\" />\r\n        ) : (\r\n          <TrendingUp className=\"h-5 w-5 text-warning mt-0.5\" />\r\n        )}\r\n        <div className=\"flex-1 space-y-3\">\r\n          <AlertDescription className=\"font-medium\">\r\n            {isAnyLimitExhausted ? 'Plan Limits Reached' : 'Approaching Plan Limits'}\r\n          </AlertDescription>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Products Usage */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Products</span>\r\n                <span className=\"font-medium\">\r\n                  {isProductsUnlimited ? 'Unlimited' : `${productsRemaining} remaining`}\r\n                </span>\r\n              </div>\r\n              {!isProductsUnlimited && (\r\n                <Progress \r\n                  value={Math.min(productUsagePercent, 100)} \r\n                  className={productUsagePercent >= 100 ? '[&>div]:bg-destructive' : productUsagePercent >= 80 ? '[&>div]:bg-warning' : ''}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            {/* Share Links Usage */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Share Links</span>\r\n                <span className=\"font-medium\">\r\n                  {isShareLinksUnlimited ? 'Unlimited' : `${shareLinksRemaining} remaining`}\r\n                </span>\r\n              </div>\r\n              {!isShareLinksUnlimited && (\r\n                <Progress \r\n                  value={Math.min(shareLinksUsagePercent, 100)} \r\n                  className={shareLinksUsagePercent >= 100 ? '[&>div]:bg-destructive' : shareLinksUsagePercent >= 80 ? '[&>div]:bg-warning' : ''}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Alert>\r\n  );\r\n};\r\n","import {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Check, Sparkles } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface UpgradePromptDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  limitType?: 'products' | 'share_links';\r\n}\r\n\r\nexport const UpgradePromptDialog = ({ open, onOpenChange, limitType }: UpgradePromptDialogProps) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleUpgrade = () => {\r\n    onOpenChange(false);\r\n    navigate('/pricing');\r\n  };\r\n\r\n  const getLimitMessage = () => {\r\n    switch (limitType) {\r\n      case 'products':\r\n        return 'You\\'ve reached your product limit';\r\n      case 'share_links':\r\n        return 'You\\'ve reached your share link limit';\r\n      default:\r\n        return 'You\\'ve reached your plan limit';\r\n    }\r\n  };\r\n\r\n  const plans = [\r\n    {\r\n      name: 'Professional',\r\n      price: '₹2,999/mo',\r\n      features: [\r\n        '1,000 Products',\r\n        '10 Share Links',\r\n        '3 Team Members',\r\n        'Unlimited Product Images',\r\n        'Custom Orders',\r\n        'Import Data',\r\n        'Priority Support'\r\n      ]\r\n    },\r\n    {\r\n      name: 'Enterprise',\r\n      price: 'Custom',\r\n      features: [\r\n        'Unlimited Products',\r\n        'Unlimited Share Links',\r\n        'Unlimited Team Members',\r\n        'Unlimited Product Images',\r\n        'All Professional Features',\r\n        'Dedicated Account Manager',\r\n        'Custom Integrations'\r\n      ],\r\n      highlight: true\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl flex items-center gap-2\">\r\n            <Sparkles className=\"h-6 w-6 text-primary\" />\r\n            Upgrade Your Plan\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-base\">\r\n            {getLimitMessage()}. Upgrade to continue growing your business.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid md:grid-cols-2 gap-6 mt-6\">\r\n          {plans.map((plan) => (\r\n            <div\r\n              key={plan.name}\r\n              className={`relative rounded-lg border-2 p-6 ${\r\n                plan.highlight\r\n                  ? 'border-primary bg-primary/5'\r\n                  : 'border-border'\r\n              }`}\r\n            >\r\n              {plan.highlight && (\r\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold\">\r\n                  RECOMMENDED\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold\">{plan.name}</h3>\r\n                  <p className=\"text-3xl font-bold mt-2\">{plan.price}</p>\r\n                </div>\r\n\r\n                <ul className=\"space-y-3\">\r\n                  {plan.features.map((feature) => (\r\n                    <li key={feature} className=\"flex items-start gap-2\">\r\n                      <Check className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\r\n                      <span className=\"text-sm\">{feature}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                <Button\r\n                  onClick={handleUpgrade}\r\n                  className=\"w-full\"\r\n                  variant={plan.highlight ? 'default' : 'outline'}\r\n                >\r\n                  {plan.name === 'Enterprise' ? 'Contact Sales' : 'Upgrade Now'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Sparkles, TrendingUp, X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface GoldRateDialogProps {\r\n  currentGoldRate: number;\r\n  onUpdate: (newRate: number) => Promise<void>;\r\n  onSkip: () => void;\r\n}\r\n\r\nexport const GoldRateDialog = ({ currentGoldRate, onUpdate, onSkip }: GoldRateDialogProps) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [goldRate, setGoldRate] = useState(\"\"); // Start with blank input\r\n  const [updating, setUpdating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const today = new Date().toDateString();\r\n    const lastPromptDate = localStorage.getItem(\"gold_rate_last_prompt\");\r\n\r\n    // If already prompted today (either updated or skipped), don't show again\r\n    if (lastPromptDate === today) {\r\n      return;\r\n    }\r\n\r\n    // Show dialog after a slight delay\r\n    setTimeout(() => setOpen(true), 1000);\r\n  }, []);\r\n\r\n  const handleUpdate = async () => {\r\n    const newRate = parseFloat(goldRate);\r\n\r\n    if (!goldRate || goldRate.trim() === \"\") {\r\n      toast.error(\"Please enter a gold rate\");\r\n      return;\r\n    }\r\n\r\n    if (isNaN(newRate) || newRate <= 0) {\r\n      toast.error(\"Please enter a valid positive number\");\r\n      return;\r\n    }\r\n\r\n    if (newRate < 1000 || newRate > 200000) {\r\n      toast.error(\"Gold rate must be between ₹1,000 and ₹2,00,000 per gram\");\r\n      return;\r\n    }\r\n\r\n    setUpdating(true);\r\n\r\n    try {\r\n      await onUpdate(newRate);\r\n      const today = new Date().toDateString();\r\n      localStorage.setItem(\"gold_rate_last_prompt\", today);\r\n      // Clear skip timestamp since rate was updated\r\n      localStorage.removeItem(\"gold_rate_skip_timestamp\");\r\n      setOpen(false);\r\n      toast.success(\"Gold rate updated successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error updating gold rate:\", error);\r\n      toast.error(\"Failed to update gold rate\");\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    const today = new Date().toDateString();\r\n    localStorage.setItem(\"gold_rate_last_prompt\", today);\r\n    setOpen(false);\r\n    onSkip();\r\n    toast.info(\"Gold rate update skipped for today.\");\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogContent className=\"sm:max-w-md border-2 border-primary/20 shadow-2xl\">\r\n        <button\r\n          onClick={handleSkip}\r\n          className=\"absolute right-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-accent hover:scale-110 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\"\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n          <span className=\"sr-only\">Close</span>\r\n        </button>\r\n\r\n        <DialogHeader className=\"space-y-4\">\r\n          <motion.div\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            transition={{ type: \"spring\", stiffness: 260, damping: 20 }}\r\n            className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border-2 border-amber-500/30 shadow-lg\"\r\n          >\r\n            <TrendingUp className=\"h-8 w-8 text-amber-600\" />\r\n          </motion.div>\r\n\r\n          <div className=\"space-y-2 text-center\">\r\n            <DialogTitle className=\"text-2xl font-bold bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent\">\r\n              Update Gold Rate\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-base\">\r\n              Start your day by updating today's 24K gold rate\r\n            </DialogDescription>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          className=\"space-y-5 pt-4\"\r\n        >\r\n          {/* Current Rate Display */}\r\n          <div className=\"bg-muted/50 rounded-lg p-4 border border-border/50\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground mb-1\">Current Rate</p>\r\n                <p className=\"text-xl font-bold text-amber-600\">\r\n                  ₹{currentGoldRate.toLocaleString('en-IN')}/g\r\n                </p>\r\n              </div>\r\n              <Sparkles className=\"h-6 w-6 text-amber-500/50\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* New Rate Input */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"goldRate\" className=\"text-sm font-medium\">\r\n              New Gold Rate (per gram)\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-medium\">\r\n                ₹\r\n              </span>\r\n              <Input\r\n                id=\"goldRate\"\r\n                type=\"number\"\r\n                value={goldRate}\r\n                onChange={(e) => setGoldRate(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && !updating) {\r\n                    handleUpdate();\r\n                  }\r\n                }}\r\n                placeholder=\"Enter today's rate\"\r\n                min=\"1000\"\r\n                max=\"200000\"\r\n                step=\"100\"\r\n                disabled={updating}\r\n                className=\"pl-8 h-12 text-lg font-semibold border-2 focus:border-amber-500 focus:ring-amber-500\"\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              This will automatically recalculate prices for all products with weight\r\n            </p>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col gap-2 pt-2\">\r\n            <Button\r\n              onClick={handleUpdate}\r\n              disabled={updating}\r\n              size=\"lg\"\r\n              className=\"w-full h-12 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white font-semibold shadow-lg hover:shadow-xl transition-all\"\r\n            >\r\n              {updating ? (\r\n                <>\r\n                  <motion.div\r\n                    animate={{ rotate: 360 }}\r\n                    transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                    className=\"mr-2\"\r\n                  >\r\n                    <TrendingUp className=\"h-5 w-5\" />\r\n                  </motion.div>\r\n                  Updating...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <TrendingUp className=\"h-5 w-5 mr-2\" />\r\n                  Update Gold Rate\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={handleSkip}\r\n              disabled={updating}\r\n              variant=\"ghost\"\r\n              size=\"lg\"\r\n              className=\"w-full\"\r\n            >\r\n              Skip for Today\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Info Note */}\r\n          <div className=\"bg-amber-500/5 border border-amber-500/20 rounded-lg p-3\">\r\n            <p className=\"text-xs text-center text-muted-foreground leading-relaxed\">\r\n              💡 <strong>Pro Tip:</strong> Update your gold rate daily to keep your pricing accurate and competitive\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { TrendingUp, Sparkles, Save } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface MetalRatesCardProps {\r\n  goldRate: number;\r\n  silverRate: number;\r\n  platinumRate: number;\r\n  onRatesUpdated: (rates: { goldRate: number; silverRate: number; platinumRate: number }) => void;\r\n}\r\n\r\nexport const MetalRatesCard = ({ \r\n  goldRate, \r\n  silverRate, \r\n  platinumRate, \r\n  onRatesUpdated \r\n}: MetalRatesCardProps) => {\r\n  const [newGoldRate, setNewGoldRate] = useState(goldRate.toString());\r\n  const [newSilverRate, setNewSilverRate] = useState(silverRate.toString());\r\n  const [newPlatinumRate, setNewPlatinumRate] = useState(platinumRate.toString());\r\n  const [updating, setUpdating] = useState(false);\r\n\r\n  const handleUpdate = async () => {\r\n    const gold = parseFloat(newGoldRate);\r\n    const silver = parseFloat(newSilverRate);\r\n    const platinum = parseFloat(newPlatinumRate);\r\n\r\n    if (isNaN(gold) || gold <= 0 || isNaN(silver) || silver <= 0 || isNaN(platinum) || platinum <= 0) {\r\n      toast.error(\"Please enter valid positive rates\");\r\n      return;\r\n    }\r\n\r\n    setUpdating(true);\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        toast.error(\"Please sign in to update rates\");\r\n        return;\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from(\"vendor_profiles\")\r\n        .update({\r\n          gold_rate_24k_per_gram: gold,\r\n          silver_rate_per_gram: silver,\r\n          platinum_rate_per_gram: platinum,\r\n          gold_rate_updated_at: new Date().toISOString()\r\n        })\r\n        .eq(\"user_id\", user.id);\r\n\r\n      if (error) throw error;\r\n\r\n      onRatesUpdated({ goldRate: gold, silverRate: silver, platinumRate: platinum });\r\n      toast.success(\"Metal rates updated successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error updating rates:\", error);\r\n      toast.error(\"Failed to update metal rates\");\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"border-2 border-amber-500/20 bg-gradient-to-br from-amber-500/5 to-transparent\">\r\n      <CardHeader className=\"pb-3\">\r\n        <CardTitle className=\"flex items-center gap-2 text-base\">\r\n          <motion.div\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            transition={{ type: \"spring\", stiffness: 260, damping: 20 }}\r\n            className=\"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-amber-500/20 to-amber-600/20 border border-amber-500/30\"\r\n          >\r\n            <TrendingUp className=\"h-4 w-4 text-amber-600\" />\r\n          </motion.div>\r\n          <span className=\"bg-gradient-to-r from-amber-600 to-amber-500 bg-clip-text text-transparent font-semibold\">\r\n            Today's Metal Rates\r\n          </span>\r\n          <Sparkles className=\"h-4 w-4 text-amber-500/50 ml-auto\" />\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-3 gap-3\">\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"goldRate\" className=\"text-xs font-medium text-amber-700\">\r\n              Gold (24K/g)\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">₹</span>\r\n              <Input\r\n                id=\"goldRate\"\r\n                type=\"number\"\r\n                value={newGoldRate}\r\n                onChange={(e) => setNewGoldRate(e.target.value)}\r\n                className=\"pl-5 h-9 text-sm border-amber-500/30 focus:border-amber-500\"\r\n                placeholder=\"Gold\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"silverRate\" className=\"text-xs font-medium text-slate-600\">\r\n              Silver (/g)\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">₹</span>\r\n              <Input\r\n                id=\"silverRate\"\r\n                type=\"number\"\r\n                value={newSilverRate}\r\n                onChange={(e) => setNewSilverRate(e.target.value)}\r\n                className=\"pl-5 h-9 text-sm border-slate-400/30 focus:border-slate-500\"\r\n                placeholder=\"Silver\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"platinumRate\" className=\"text-xs font-medium text-slate-500\">\r\n              Platinum (/g)\r\n            </Label>\r\n            <div className=\"relative\">\r\n              <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">₹</span>\r\n              <Input\r\n                id=\"platinumRate\"\r\n                type=\"number\"\r\n                value={newPlatinumRate}\r\n                onChange={(e) => setNewPlatinumRate(e.target.value)}\r\n                className=\"pl-5 h-9 text-sm border-slate-400/30 focus:border-slate-500\"\r\n                placeholder=\"Platinum\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Button\r\n          onClick={handleUpdate}\r\n          disabled={updating}\r\n          size=\"sm\"\r\n          className=\"w-full bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-700 hover:to-amber-600 text-white\"\r\n        >\r\n          {updating ? (\r\n            <>\r\n              <motion.div\r\n                animate={{ rotate: 360 }}\r\n                transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                className=\"mr-2\"\r\n              >\r\n                <TrendingUp className=\"h-4 w-4\" />\r\n              </motion.div>\r\n              Updating...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Save className=\"h-4 w-4 mr-2\" />\r\n              Update Rates\r\n            </>\r\n          )}\r\n        </Button>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { QrCode, X, ChevronRight, Instagram, MessageCircle } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useKeyboardHeight } from \"@/hooks/useKeyboardHeight\";\r\n\r\ninterface FloatingQRCodesProps {\r\n  instagramQrUrl?: string | null;\r\n  whatsappQrUrl?: string | null;\r\n}\r\n\r\nexport const FloatingQRCodes = ({ instagramQrUrl, whatsappQrUrl }: FloatingQRCodesProps) => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const { keyboardHeight, isKeyboardVisible } = useKeyboardHeight();\r\n\r\n  // Don't render if no QR codes available\r\n  if (!instagramQrUrl && !whatsappQrUrl) {\r\n    return null;\r\n  }\r\n\r\n  // Calculate dynamic bottom position based on keyboard\r\n  const bottomPosition = isKeyboardVisible \r\n    ? `${keyboardHeight + 16}px` \r\n    : '1.5rem';\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <motion.div \r\n        className=\"fixed left-6 z-50\"\r\n        animate={{ bottom: bottomPosition }}\r\n        transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n      >\r\n        <AnimatePresence mode=\"wait\">\r\n          {!isExpanded ? (\r\n            // Collapsed state - Floating button\r\n            <motion.div\r\n              key=\"collapsed\"\r\n              initial={{ scale: 0, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0, opacity: 0 }}\r\n              transition={{ type: \"spring\", stiffness: 260, damping: 20 }}\r\n            >\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    onClick={() => setIsExpanded(true)}\r\n                    size=\"lg\"\r\n                    className=\"h-16 w-16 rounded-full shadow-2xl bg-gradient-to-br from-primary to-primary/80 hover:from-primary/90 hover:to-primary hover:scale-110 transition-all duration-300 relative overflow-hidden group\"\r\n                  >\r\n                    {/* Animated pulse ring */}\r\n                    <span className=\"absolute inset-0 rounded-full bg-primary/30 animate-ping\" />\r\n                    \r\n                    <QrCode className=\"h-7 w-7 text-primary-foreground relative z-10 group-hover:rotate-12 transition-transform\" />\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent side=\"right\" className=\"font-medium\">\r\n                  <p>Connect with us</p>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </motion.div>\r\n          ) : (\r\n            // Expanded state - QR codes display\r\n            <motion.div\r\n              key=\"expanded\"\r\n              initial={{ scale: 0.8, opacity: 0, y: 20 }}\r\n              animate={{ scale: 1, opacity: 1, y: 0 }}\r\n              exit={{ scale: 0.8, opacity: 0, y: 20 }}\r\n              transition={{ type: \"spring\", stiffness: 260, damping: 20 }}\r\n            >\r\n              <Card className=\"p-4 shadow-2xl border-2 border-primary/20 bg-card/95 backdrop-blur-xl\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between mb-4 pb-3 border-b border-border\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <QrCode className=\"h-5 w-5 text-primary\" />\r\n                    <h3 className=\"font-semibold text-foreground\">Connect With Us</h3>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setIsExpanded(false)}\r\n                    className=\"h-8 w-8 p-0 hover:bg-destructive/10 hover:text-destructive transition-colors\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* QR Codes */}\r\n                <div className=\"flex gap-4\">\r\n                  {instagramQrUrl && (\r\n                    <motion.div\r\n                      initial={{ x: -20, opacity: 0 }}\r\n                      animate={{ x: 0, opacity: 1 }}\r\n                      transition={{ delay: 0.1 }}\r\n                      className=\"group cursor-pointer\"\r\n                    >\r\n                      <div className=\"relative\">\r\n                        {/* QR Code Image */}\r\n                        <div className=\"w-32 h-32 rounded-2xl overflow-hidden border-2 border-primary/30 shadow-lg group-hover:border-primary/60 transition-all duration-300 group-hover:shadow-xl group-hover:scale-105\">\r\n                          <img\r\n                            src={instagramQrUrl}\r\n                            alt=\"Instagram QR Code\"\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        </div>\r\n                        \r\n                        {/* Label */}\r\n                        <div className=\"mt-2 flex items-center justify-center gap-1.5 text-sm font-medium text-muted-foreground group-hover:text-primary transition-colors\">\r\n                          <Instagram className=\"h-4 w-4\" />\r\n                          <span>Instagram</span>\r\n                        </div>\r\n\r\n                        {/* Scan indicator */}\r\n                        <motion.div\r\n                          className=\"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-pink-500 shadow-lg\"\r\n                          animate={{\r\n                            scale: [1, 1.2, 1],\r\n                            opacity: [1, 0.8, 1],\r\n                          }}\r\n                          transition={{\r\n                            duration: 2,\r\n                            repeat: Infinity,\r\n                            ease: \"easeInOut\",\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n\r\n                  {whatsappQrUrl && (\r\n                    <motion.div\r\n                      initial={{ x: 20, opacity: 0 }}\r\n                      animate={{ x: 0, opacity: 1 }}\r\n                      transition={{ delay: 0.2 }}\r\n                      className=\"group cursor-pointer\"\r\n                    >\r\n                      <div className=\"relative\">\r\n                        {/* QR Code Image */}\r\n                        <div className=\"w-32 h-32 rounded-2xl overflow-hidden border-2 border-primary/30 shadow-lg group-hover:border-primary/60 transition-all duration-300 group-hover:shadow-xl group-hover:scale-105\">\r\n                          <img\r\n                            src={whatsappQrUrl}\r\n                            alt=\"WhatsApp QR Code\"\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        </div>\r\n                        \r\n                        {/* Label */}\r\n                        <div className=\"mt-2 flex items-center justify-center gap-1.5 text-sm font-medium text-muted-foreground group-hover:text-primary transition-colors\">\r\n                          <MessageCircle className=\"h-4 w-4\" />\r\n                          <span>WhatsApp</span>\r\n                        </div>\r\n\r\n                        {/* Scan indicator */}\r\n                        <motion.div\r\n                          className=\"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-green-500 shadow-lg\"\r\n                          animate={{\r\n                            scale: [1, 1.2, 1],\r\n                            opacity: [1, 0.8, 1],\r\n                          }}\r\n                          transition={{\r\n                            duration: 2,\r\n                            repeat: Infinity,\r\n                            ease: \"easeInOut\",\r\n                            delay: 0.5,\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Footer hint */}\r\n                <motion.p\r\n                  initial={{ opacity: 0 }}\r\n                  animate={{ opacity: 1 }}\r\n                  transition={{ delay: 0.3 }}\r\n                  className=\"text-xs text-center text-muted-foreground mt-4 pt-3 border-t border-border\"\r\n                >\r\n                  Scan to connect instantly\r\n                </motion.p>\r\n              </Card>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </motion.div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Plus, Share2, FileDown, Zap, X, ShoppingCart, Trophy, Sparkles, FileText, History, Calculator } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useKeyboardHeight } from \"@/hooks/useKeyboardHeight\";\r\nimport { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { UpgradePromptDialog } from \"@/components/UpgradePromptDialog\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\ninterface QuickActionsMenuProps {\r\n  onExportPDF: () => void;\r\n  onAutoCategorize?: () => void;\r\n}\r\nexport const QuickActionsMenu = ({\r\n  onExportPDF,\r\n  onAutoCategorize\r\n}: QuickActionsMenuProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [isUpgradeDialogOpen, setIsUpgradeDialogOpen] = useState(false);\r\n  const [upgradeLimitType, setUpgradeLimitType] = useState<'products' | 'share_links' | undefined>();\r\n  const {\r\n    keyboardHeight,\r\n    isKeyboardVisible\r\n  } = useKeyboardHeight();\r\n  const { canAddProducts, canAddShareLinks, productsRemaining, shareLinksRemaining } = usePlanLimits();\r\n  const handleAddProduct = () => {\r\n    if (!canAddProducts) {\r\n      setUpgradeLimitType('products');\r\n      setIsUpgradeDialogOpen(true);\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n    navigate(\"/add-product\");\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleShareCatalog = () => {\r\n    if (!canAddShareLinks) {\r\n      setUpgradeLimitType('share_links');\r\n      setIsUpgradeDialogOpen(true);\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n    navigate(\"/share\");\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const getProductLabel = () => {\r\n    if (!canAddProducts) return \"Add Product (Limit reached)\";\r\n    if (productsRemaining !== Infinity && productsRemaining < 100) {\r\n      return `Add Product (${productsRemaining} left)`;\r\n    }\r\n    return \"Add Product\";\r\n  };\r\n\r\n  const getShareLabel = () => {\r\n    if (!canAddShareLinks) return \"Share Catalog (Limit reached)\";\r\n    if (shareLinksRemaining !== Infinity && shareLinksRemaining < 100) {\r\n      return `Share Catalog (${shareLinksRemaining} left)`;\r\n    }\r\n    return \"Share Catalog\";\r\n  };\r\n\r\n  const actions = [{\r\n    icon: Plus,\r\n    label: getProductLabel(),\r\n    onClick: handleAddProduct,\r\n    gradient: \"from-primary/20 to-primary/5\",\r\n    iconColor: \"text-primary\",\r\n    disabled: !canAddProducts,\r\n    tooltip: !canAddProducts ? \"Product limit reached\" : undefined\r\n  }, {\r\n    icon: Share2,\r\n    label: getShareLabel(),\r\n    onClick: handleShareCatalog,\r\n    gradient: \"from-blue-500/20 to-blue-500/5\",\r\n    iconColor: \"text-blue-500\",\r\n    disabled: !canAddShareLinks,\r\n    tooltip: !canAddShareLinks ? \"Share link limit reached\" : undefined\r\n  }, ...(onAutoCategorize ? [{\r\n    icon: Sparkles,\r\n    label: \"Auto-Categorize\",\r\n    onClick: () => {\r\n      onAutoCategorize();\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-violet-500/20 to-violet-500/5\",\r\n    iconColor: \"text-violet-500\",\r\n    disabled: false,\r\n    tooltip: \"Automatically categorize products\"\r\n  }] : []), {\r\n    icon: ShoppingCart,\r\n    label: \"Purchase Inquiries\",\r\n    onClick: () => {\r\n      navigate(\"/purchase-inquiries\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-purple-500/20 to-purple-500/5\",\r\n    iconColor: \"text-purple-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: Trophy,\r\n    label: \"Rewards\",\r\n    onClick: () => {\r\n      navigate(\"/rewards\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-yellow-500/20 to-yellow-500/5\",\r\n    iconColor: \"text-yellow-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: FileText,\r\n    label: \"Create Invoice\",\r\n    onClick: () => {\r\n      navigate(\"/invoice-generator\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-orange-500/20 to-orange-500/5\",\r\n    iconColor: \"text-orange-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: History,\r\n    label: \"View Invoices\",\r\n    onClick: () => {\r\n      navigate(\"/invoice-history\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-amber-500/20 to-amber-500/5\",\r\n    iconColor: \"text-amber-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: Calculator,\r\n    label: \"Create Estimate\",\r\n    onClick: () => {\r\n      navigate(\"/manufacturing-cost\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-emerald-500/20 to-emerald-500/5\",\r\n    iconColor: \"text-emerald-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: History,\r\n    label: \"View Estimates\",\r\n    onClick: () => {\r\n      navigate(\"/estimate-history\");\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-cyan-500/20 to-cyan-500/5\",\r\n    iconColor: \"text-cyan-500\",\r\n    disabled: false\r\n  }, {\r\n    icon: FileDown,\r\n    label: \"Export PDF\",\r\n    onClick: () => {\r\n      onExportPDF();\r\n      setIsOpen(false);\r\n    },\r\n    gradient: \"from-green-500/20 to-green-500/5\",\r\n    iconColor: \"text-green-500\",\r\n    disabled: false\r\n  }];\r\n\r\n  // Calculate dynamic bottom position based on keyboard\r\n  const bottomPosition = isKeyboardVisible ? `${keyboardHeight + 16}px` : '2rem';\r\n  return (\r\n    <>\r\n      <motion.div className=\"fixed right-8 z-50\" animate={{\r\n    bottom: bottomPosition\r\n  }} transition={{\r\n    duration: 0.3,\r\n    ease: \"easeOut\"\r\n  }}>\r\n      <AnimatePresence>\r\n        {isOpen && <motion.div initial={{\r\n        opacity: 0,\r\n        scale: 0.8,\r\n        y: 20\r\n      }} animate={{\r\n        opacity: 1,\r\n        scale: 1,\r\n        y: 0\r\n      }} exit={{\r\n        opacity: 0,\r\n        scale: 0.8,\r\n        y: 20\r\n      }} transition={{\r\n        duration: 0.2\r\n      }} className=\"absolute bottom-20 right-0 flex flex-col gap-3 mb-2\">\r\n            {actions.map((action, index) => {\r\n              const buttonContent = (\r\n                <motion.button \r\n                  key={action.label} \r\n                  initial={{\r\n                    opacity: 0,\r\n                    x: 20\r\n                  }} \r\n                  animate={{\r\n                    opacity: 1,\r\n                    x: 0\r\n                  }} \r\n                  exit={{\r\n                    opacity: 0,\r\n                    x: 20\r\n                  }} \r\n                  transition={{\r\n                    delay: index * 0.05\r\n                  }} \r\n                  onClick={() => {\r\n                    if (!action.disabled) {\r\n                      action.onClick();\r\n                      setIsOpen(false);\r\n                    }\r\n                  }} \r\n                  disabled={action.disabled}\r\n                  className={`\r\n                    group relative flex items-center gap-3 px-4 py-3 rounded-xl\r\n                    bg-gradient-to-br ${action.gradient} backdrop-blur-sm\r\n                    border border-border/50 shadow-lg hover:shadow-xl\r\n                    transition-all duration-300 hover:scale-105\r\n                    ${action.disabled ? 'opacity-50 cursor-not-allowed hover:scale-100' : ''}\r\n                  `}\r\n                >\r\n                  <div className={`\r\n                    w-10 h-10 rounded-lg bg-background/50 flex items-center justify-center\r\n                    ${action.iconColor} group-hover:scale-110 transition-transform duration-300\r\n                    ${action.disabled ? 'group-hover:scale-100' : ''}\r\n                  `}>\r\n                    <action.icon className=\"w-5 h-5\" />\r\n                  </div>\r\n                  <span className=\"font-medium text-foreground pr-2 whitespace-nowrap\">\r\n                    {action.label}\r\n                  </span>\r\n                </motion.button>\r\n              );\r\n\r\n              return action.tooltip ? (\r\n                <TooltipProvider key={action.label}>\r\n                  <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                      {buttonContent}\r\n                    </TooltipTrigger>\r\n                    <TooltipContent side=\"left\">\r\n                      <p>{action.tooltip}</p>\r\n                    </TooltipContent>\r\n                  </Tooltip>\r\n                </TooltipProvider>\r\n              ) : buttonContent;\r\n            })}\r\n          </motion.div>}\r\n      </AnimatePresence>\r\n\r\n      {/* Main toggle button */}\r\n      <motion.button whileHover={{\r\n      scale: 1.1\r\n    }} whileTap={{\r\n      scale: 0.95\r\n    }} onClick={() => setIsOpen(!isOpen)} className={`\r\n          relative w-16 h-16 rounded-full\r\n          bg-gradient-to-br from-primary to-primary/80\r\n          text-primary-foreground shadow-xl hover:shadow-2xl\r\n          transition-all duration-300\r\n          ${isOpen ? \"rotate-45\" : \"\"}\r\n        `}>\r\n        {/* Pulse animation when closed */}\r\n        {!isOpen && <span className=\"absolute inset-0 rounded-full bg-primary animate-ping opacity-20\" />}\r\n        \r\n        \r\n      </motion.button>\r\n\r\n      {/* Tooltip */}\r\n      <AnimatePresence>\r\n        {!isOpen && <motion.div initial={{\r\n        opacity: 0,\r\n        x: 10\r\n      }} animate={{\r\n        opacity: 1,\r\n        x: 0\r\n      }} exit={{\r\n        opacity: 0,\r\n        x: 10\r\n      }} className=\"absolute right-full mr-4 top-1/2 -translate-y-1/2 whitespace-nowrap\r\n              px-3 py-2 rounded-lg bg-background/95 backdrop-blur-sm\r\n              border border-border/50 shadow-lg text-sm font-medium\r\n              pointer-events-none\">\r\n            Quick Actions\r\n          </motion.div>}\r\n      </AnimatePresence>\r\n    </motion.div>\r\n    \r\n    <UpgradePromptDialog\r\n      open={isUpgradeDialogOpen}\r\n      onOpenChange={setIsUpgradeDialogOpen}\r\n      limitType={upgradeLimitType}\r\n    />\r\n  </>\r\n  );\r\n};","import { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Percent, ArrowRight, ChevronLeft, Eye } from \"lucide-react\";\r\nimport { z } from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface BulkEditDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onUpdate: (updates: Record<string, any>) => Promise<void>;\r\n  selectedCount: number;\r\n  selectedProductIds: string[];\r\n}\r\n\r\ninterface ProductPreview {\r\n  id: string;\r\n  name: string;\r\n  sku: string;\r\n  changes: Array<{\r\n    field: string;\r\n    oldValue: any;\r\n    newValue: any;\r\n  }>;\r\n}\r\n\r\n// Validation schema\r\nconst bulkUpdateSchema = z.object({\r\n  category: z.string().max(100).optional(),\r\n  metal_type: z.string().max(50).optional(),\r\n  delivery_type: z.enum(['immediate', 'scheduled']).optional(),\r\n  dispatches_in_days: z.number().int().min(0).max(365).optional(),\r\n  status: z.string().max(50).optional(),\r\n  stock_quantity: z.number().int().min(0).optional(),\r\n  description: z.string().max(1000).optional(),\r\n  cost_price: z.number().min(0).optional(),\r\n  retail_price: z.number().min(0).optional(),\r\n  weight_grams: z.number().min(0).optional(),\r\n  diamond_color: z.string().max(50).optional(),\r\n  clarity: z.string().max(50).optional(),\r\n  gemstone: z.string().max(100).optional(),\r\n  gemstone_type: z.string().max(100).optional(),\r\n  certification: z.string().max(100).optional(),\r\n  cut: z.string().max(50).optional(),\r\n  polish: z.string().max(50).optional(),\r\n  symmetry: z.string().max(50).optional(),\r\n  purity_fraction_used: z.number().min(0).max(1).optional(),\r\n  pricingAdjustment: z.object({\r\n    type: z.enum(['markup', 'discount']),\r\n    percentage: z.number().min(0).max(100)\r\n  }).optional()\r\n});\r\n\r\nexport function BulkEditDialog({ open, onOpenChange, onUpdate, selectedCount, selectedProductIds }: BulkEditDialogProps) {\r\n  const [updating, setUpdating] = useState(false);\r\n  const [updates, setUpdates] = useState<Record<string, any>>({});\r\n  const [priceAdjustmentType, setPriceAdjustmentType] = useState<'markup' | 'discount'>('markup');\r\n  const [priceAdjustmentPercent, setPriceAdjustmentPercent] = useState(\"\");\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [productPreviews, setProductPreviews] = useState<ProductPreview[]>([]);\r\n  const [loadingPreview, setLoadingPreview] = useState(false);\r\n\r\n  const generatePreview = async () => {\r\n    setLoadingPreview(true);\r\n    try {\r\n      // Validate inputs first\r\n      const validationData: any = { ...updates };\r\n      \r\n      if (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0) {\r\n        validationData.pricingAdjustment = {\r\n          type: priceAdjustmentType,\r\n          percentage: parseFloat(priceAdjustmentPercent)\r\n        };\r\n      }\r\n\r\n      // Validate with zod\r\n      try {\r\n        bulkUpdateSchema.parse(validationData);\r\n      } catch (validationError: any) {\r\n        toast.error(`Validation error: ${validationError.errors[0]?.message || 'Invalid input'}`);\r\n        setLoadingPreview(false);\r\n        return;\r\n      }\r\n\r\n      // Fetch current product data\r\n      const { data: products, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\"id, name, sku, category, metal_type, delivery_type, dispatches_in_days, status, stock_quantity, description, cost_price, retail_price, weight_grams, diamond_color, clarity, cut, polish, symmetry, gemstone, gemstone_type, certification, purity_fraction_used\")\r\n        .in(\"id\", selectedProductIds);\r\n\r\n      if (error) throw error;\r\n      if (!products) {\r\n        toast.error(\"Failed to fetch product data\");\r\n        return;\r\n      }\r\n\r\n      // Calculate changes for each product\r\n      const previews: ProductPreview[] = products.map(product => {\r\n        const changes: Array<{ field: string; oldValue: any; newValue: any }> = [];\r\n\r\n        // Field mapping for display\r\n        const fieldNames: Record<string, string> = {\r\n          category: \"Category\",\r\n          metal_type: \"Metal Type\",\r\n          delivery_type: \"Delivery Type\",\r\n          dispatches_in_days: \"Dispatch Days\",\r\n          status: \"Status\",\r\n          stock_quantity: \"Stock Quantity\",\r\n          description: \"Description\",\r\n          cost_price: \"Cost Price\",\r\n          retail_price: \"Retail Price\",\r\n          weight_grams: \"Weight\",\r\n          diamond_color: \"Diamond Color\",\r\n          clarity: \"Clarity\",\r\n          cut: \"Cut\",\r\n          polish: \"Polish\",\r\n          symmetry: \"Symmetry\",\r\n          gemstone: \"Gemstone\",\r\n          gemstone_type: \"Gemstone Type\",\r\n          certification: \"Certification\",\r\n          purity_fraction_used: \"Purity Fraction\"\r\n        };\r\n\r\n        // Check each field for changes\r\n        Object.entries(updates).forEach(([key, value]) => {\r\n          if (value !== \"\" && value !== null && value !== \"no-change\") {\r\n            const oldValue = product[key as keyof typeof product];\r\n            if (oldValue !== value) {\r\n              changes.push({\r\n                field: fieldNames[key] || key,\r\n                oldValue: oldValue || \"—\",\r\n                newValue: value\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        // Handle pricing adjustments\r\n        if (validationData.pricingAdjustment && validationData.pricingAdjustment.percentage > 0) {\r\n          const multiplier = validationData.pricingAdjustment.type === 'markup'\r\n            ? (1 + validationData.pricingAdjustment.percentage / 100)\r\n            : (1 - validationData.pricingAdjustment.percentage / 100);\r\n\r\n          const newCostPrice = Math.max(0, product.cost_price * multiplier);\r\n          const newRetailPrice = Math.max(0, product.retail_price * multiplier);\r\n\r\n          // Only add if not overridden by fixed prices\r\n          if (!updates.cost_price) {\r\n            changes.push({\r\n              field: \"Cost Price\",\r\n              oldValue: `₹${product.cost_price.toFixed(2)}`,\r\n              newValue: `₹${newCostPrice.toFixed(2)}`\r\n            });\r\n          }\r\n\r\n          if (!updates.retail_price) {\r\n            changes.push({\r\n              field: \"Retail Price\",\r\n              oldValue: `₹${product.retail_price.toFixed(2)}`,\r\n              newValue: `₹${newRetailPrice.toFixed(2)}`\r\n            });\r\n          }\r\n        }\r\n\r\n        return {\r\n          id: product.id,\r\n          name: product.name,\r\n          sku: product.sku || \"N/A\",\r\n          changes\r\n        };\r\n      });\r\n\r\n      setProductPreviews(previews.filter(p => p.changes.length > 0));\r\n      setShowPreview(true);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to generate preview:\", error);\r\n      toast.error(`Failed to generate preview: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setLoadingPreview(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    setUpdating(true);\r\n    try {\r\n      const validationData: any = { ...updates };\r\n      \r\n      if (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0) {\r\n        validationData.pricingAdjustment = {\r\n          type: priceAdjustmentType,\r\n          percentage: parseFloat(priceAdjustmentPercent)\r\n        };\r\n      }\r\n\r\n      await onUpdate(validationData);\r\n      setUpdates({});\r\n      setPriceAdjustmentPercent(\"\");\r\n      setShowPreview(false);\r\n      onOpenChange(false);\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setShowPreview(false);\r\n  };\r\n\r\n  // Reset state when dialog closes\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setShowPreview(false);\r\n      setProductPreviews([]);\r\n      setUpdates({});\r\n      setPriceAdjustmentPercent(\"\");\r\n    }\r\n  }, [open]);\r\n\r\n  const handleFieldChange = (field: string, value: string) => {\r\n    if (value === \"\" || value === \"no-change\") {\r\n      const newUpdates = { ...updates };\r\n      delete newUpdates[field];\r\n      setUpdates(newUpdates);\r\n    } else {\r\n      setUpdates({ ...updates, [field]: value });\r\n    }\r\n  };\r\n\r\n  const hasChanges = Object.keys(updates).length > 0 || (priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            {showPreview && (\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleBack} className=\"mr-2 -ml-2\">\r\n                <ChevronLeft className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n            {showPreview ? \"Preview Changes\" : \"Bulk Edit Products\"}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {showPreview \r\n              ? `Review changes for ${productPreviews.length} product${productPreviews.length !== 1 ? 's' : ''} before applying`\r\n              : `Update ${selectedCount} selected product${selectedCount !== 1 ? 's' : ''}. Leave fields empty to keep existing values.`\r\n            }\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {showPreview ? (\r\n          <div className=\"flex-1 overflow-hidden flex flex-col\">\r\n            {productPreviews.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <p className=\"text-muted-foreground\">No changes detected for any products.</p>\r\n              </div>\r\n            ) : (\r\n              <ScrollArea className=\"flex-1 pr-4\">\r\n                <div className=\"space-y-6 pb-4\">\r\n                  {productPreviews.map((preview, idx) => (\r\n                    <div key={preview.id} className=\"border rounded-lg p-4 bg-muted/30\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-sm\">{preview.name}</h4>\r\n                          <p className=\"text-xs text-muted-foreground\">SKU: {preview.sku}</p>\r\n                        </div>\r\n                        <Badge variant=\"secondary\" className=\"text-xs\">\r\n                          {preview.changes.length} change{preview.changes.length !== 1 ? 's' : ''}\r\n                        </Badge>\r\n                      </div>\r\n                      \r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead className=\"w-[30%]\">Field</TableHead>\r\n                            <TableHead className=\"w-[35%]\">Current Value</TableHead>\r\n                            <TableHead className=\"w-[35%]\">New Value</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {preview.changes.map((change, changeIdx) => (\r\n                            <TableRow key={changeIdx}>\r\n                              <TableCell className=\"font-medium text-sm\">{change.field}</TableCell>\r\n                              <TableCell className=\"text-sm text-muted-foreground\">\r\n                                {typeof change.oldValue === 'number' \r\n                                  ? change.oldValue.toLocaleString()\r\n                                  : change.oldValue}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-sm font-medium flex items-center gap-2\">\r\n                                <ArrowRight className=\"h-3 w-3 text-primary\" />\r\n                                {typeof change.newValue === 'number'\r\n                                  ? change.newValue.toLocaleString()\r\n                                  : change.newValue}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </ScrollArea>\r\n            )}\r\n          </div>\r\n        ) : (\r\n\r\n        <Tabs defaultValue=\"basic\" className=\"w-full\">\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n            <TabsTrigger value=\"jewelry\">Jewelry Details</TabsTrigger>\r\n            <TabsTrigger value=\"pricing\">Pricing</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"basic\" className=\"space-y-4 mt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={100}\r\n                  value={updates.category || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"category\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"metal_type\">Metal Type</Label>\r\n                <Select\r\n                  value={updates.metal_type || \"no-change\"}\r\n                  onValueChange={(value) => handleFieldChange(\"metal_type\", value)}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"No change\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"no-change\">No change</SelectItem>\r\n                    <SelectItem value=\"Gold\">Gold</SelectItem>\r\n                    <SelectItem value=\"Silver\">Silver</SelectItem>\r\n                    <SelectItem value=\"Platinum\">Platinum</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"delivery_type\">Delivery Type</Label>\r\n                <Select\r\n                  value={updates.delivery_type || \"no-change\"}\r\n                  onValueChange={(value) => handleFieldChange(\"delivery_type\", value)}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"No change\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"no-change\">No change</SelectItem>\r\n                    <SelectItem value=\"immediate\">Immediate</SelectItem>\r\n                    <SelectItem value=\"scheduled\">Scheduled</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"dispatches_in_days\">Dispatch Days</Label>\r\n                <Input\r\n                  id=\"dispatches_in_days\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max=\"365\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  value={updates.dispatches_in_days || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"dispatches_in_days\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"status\">Status</Label>\r\n                <Input\r\n                  id=\"status\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.status || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"status\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"stock_quantity\">Stock Quantity</Label>\r\n                <Input\r\n                  id=\"stock_quantity\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  value={updates.stock_quantity || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"stock_quantity\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"description\">Description</Label>\r\n              <Input\r\n                id=\"description\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={1000}\r\n                value={updates.description || \"\"}\r\n                onChange={(e) => handleFieldChange(\"description\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"weight_grams\">Weight (g)</Label>\r\n              <Input\r\n                id=\"weight_grams\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                placeholder=\"Leave empty\"\r\n                value={updates.weight_grams || \"\"}\r\n                onChange={(e) => handleFieldChange(\"weight_grams\", e.target.value)}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"jewelry\" className=\"space-y-4 mt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"diamond_color\">Diamond Color</Label>\r\n                <Input\r\n                  id=\"diamond_color\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.diamond_color || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"diamond_color\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"clarity\">Clarity</Label>\r\n                <Input\r\n                  id=\"clarity\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.clarity || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"clarity\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"cut\">Cut</Label>\r\n                <Input\r\n                  id=\"cut\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.cut || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"cut\", e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"polish\">Polish</Label>\r\n                <Input\r\n                  id=\"polish\"\r\n                  placeholder=\"Leave empty to keep current\"\r\n                  maxLength={50}\r\n                  value={updates.polish || \"\"}\r\n                  onChange={(e) => handleFieldChange(\"polish\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"symmetry\">Symmetry</Label>\r\n              <Input\r\n                id=\"symmetry\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={50}\r\n                value={updates.symmetry || \"\"}\r\n                onChange={(e) => handleFieldChange(\"symmetry\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"gemstone\">Gemstone</Label>\r\n              <Input\r\n                id=\"gemstone\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.gemstone || \"\"}\r\n                onChange={(e) => handleFieldChange(\"gemstone\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"gemstone_type\">Gemstone Type</Label>\r\n              <Input\r\n                id=\"gemstone_type\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.gemstone_type || \"\"}\r\n                onChange={(e) => handleFieldChange(\"gemstone_type\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"certification\">Certification</Label>\r\n              <Input\r\n                id=\"certification\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                maxLength={100}\r\n                value={updates.certification || \"\"}\r\n                onChange={(e) => handleFieldChange(\"certification\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"purity_fraction_used\">Purity Fraction (0-1)</Label>\r\n              <Input\r\n                id=\"purity_fraction_used\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                max=\"1\"\r\n                placeholder=\"Leave empty to keep current\"\r\n                value={updates.purity_fraction_used || \"\"}\r\n                onChange={(e) => handleFieldChange(\"purity_fraction_used\", e.target.value)}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"pricing\" className=\"space-y-4 mt-4\">\r\n            <div className=\"bg-muted/50 p-4 rounded-lg space-y-4\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <Percent className=\"h-5 w-5 text-primary\" />\r\n                <h4 className=\"font-semibold\">Percentage-Based Price Adjustment</h4>\r\n              </div>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Apply a percentage markup or discount to all selected products\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"adjustment_type\">Adjustment Type</Label>\r\n                  <Select\r\n                    value={priceAdjustmentType}\r\n                    onValueChange={(value: 'markup' | 'discount') => setPriceAdjustmentType(value)}\r\n                  >\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"markup\">Markup (Increase Price)</SelectItem>\r\n                      <SelectItem value=\"discount\">Discount (Decrease Price)</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"adjustment_percent\">Percentage (%)</Label>\r\n                  <Input\r\n                    id=\"adjustment_percent\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    step=\"0.1\"\r\n                    placeholder=\"e.g., 10 for 10%\"\r\n                    value={priceAdjustmentPercent}\r\n                    onChange={(e) => setPriceAdjustmentPercent(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {priceAdjustmentPercent && parseFloat(priceAdjustmentPercent) > 0 && (\r\n                <div className=\"bg-background p-3 rounded border border-border\">\r\n                  <p className=\"text-sm font-medium\">\r\n                    {priceAdjustmentType === 'markup' ? '↑' : '↓'} \r\n                    {' '}{priceAdjustmentType === 'markup' ? 'Increase' : 'Decrease'} prices by {priceAdjustmentPercent}%\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    Example: ₹1,000 → ₹{priceAdjustmentType === 'markup' \r\n                      ? (1000 * (1 + parseFloat(priceAdjustmentPercent) / 100)).toFixed(0)\r\n                      : (1000 * (1 - parseFloat(priceAdjustmentPercent) / 100)).toFixed(0)}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h4 className=\"font-semibold mb-3\">Or Set Fixed Prices</h4>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"cost_price\">Cost Price (₹)</Label>\r\n                  <Input\r\n                    id=\"cost_price\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    placeholder=\"Leave empty\"\r\n                    value={updates.cost_price || \"\"}\r\n                    onChange={(e) => handleFieldChange(\"cost_price\", e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"retail_price\">Retail Price (₹)</Label>\r\n                  <Input\r\n                    id=\"retail_price\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    placeholder=\"Leave empty\"\r\n                    value={updates.retail_price || \"\"}\r\n                    onChange={(e) => handleFieldChange(\"retail_price\", e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mt-2\">\r\n                Note: Fixed prices will override percentage adjustments\r\n              </p>\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n        )}\r\n\r\n        <DialogFooter className=\"mt-4\">\r\n          {showPreview ? (\r\n            <>\r\n              <Button variant=\"outline\" onClick={handleBack} disabled={updating}>\r\n                Back to Edit\r\n              </Button>\r\n              <Button \r\n                onClick={handleUpdate} \r\n                disabled={updating || productPreviews.length === 0}\r\n                className=\"bg-primary\"\r\n              >\r\n                {updating && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Confirm & Apply Changes\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={loadingPreview}>\r\n                Cancel\r\n              </Button>\r\n              <Button \r\n                onClick={generatePreview} \r\n                disabled={loadingPreview || !hasChanges}\r\n              >\r\n                {loadingPreview ? (\r\n                  <>\r\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    Loading Preview...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Eye className=\"mr-2 h-4 w-4\" />\r\n                    Preview Changes\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { AlertTriangle } from \"lucide-react\";\r\n\r\ninterface DeleteConfirmationDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: () => void;\r\n  products: Array<{ id: string; name: string; sku?: string }>;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport const DeleteConfirmationDialog = ({\r\n  open,\r\n  onOpenChange,\r\n  onConfirm,\r\n  products,\r\n  isDeleting = false\r\n}: DeleteConfirmationDialogProps) => {\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent className=\"max-w-2xl\">\r\n        <AlertDialogHeader>\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-destructive\" />\r\n            <AlertDialogTitle>Delete Selected Products?</AlertDialogTitle>\r\n          </div>\r\n          <AlertDialogDescription>\r\n            You are about to delete <strong>{products.length} product(s)</strong>. This action cannot be undone.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        \r\n        <div className=\"my-4\">\r\n          <p className=\"text-sm font-medium mb-2\">Products to be deleted:</p>\r\n          <ScrollArea className=\"h-[200px] w-full border rounded-md p-4\">\r\n            <div className=\"space-y-2\">\r\n              {products.map((product, index) => (\r\n                <div \r\n                  key={product.id} \r\n                  className=\"flex items-start gap-2 py-2 border-b last:border-0\"\r\n                >\r\n                  <span className=\"text-xs text-muted-foreground min-w-[20px]\">\r\n                    {index + 1}.\r\n                  </span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium\">{product.name}</p>\r\n                    {product.sku && (\r\n                      <p className=\"text-xs text-muted-foreground\">SKU: {product.sku}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </ScrollArea>\r\n        </div>\r\n\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={onConfirm} \r\n            disabled={isDeleting}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n          >\r\n            {isDeleting ? \"Deleting...\" : `Delete ${products.length} Product${products.length > 1 ? 's' : ''}`}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Breadcrumb = React.forwardRef<\r\n  HTMLElement,\r\n  React.ComponentPropsWithoutRef<\"nav\"> & {\r\n    separator?: React.ReactNode;\r\n  }\r\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />);\r\nBreadcrumb.displayName = \"Breadcrumb\";\r\n\r\nconst BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<\"ol\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <ol\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nBreadcrumbList.displayName = \"BreadcrumbList\";\r\n\r\nconst BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<\"li\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <li ref={ref} className={cn(\"inline-flex items-center gap-1.5\", className)} {...props} />\r\n  ),\r\n);\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\";\r\n\r\nconst BreadcrumbLink = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentPropsWithoutRef<\"a\"> & {\r\n    asChild?: boolean;\r\n  }\r\n>(({ asChild, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\";\r\n\r\n  return <Comp ref={ref} className={cn(\"transition-colors hover:text-foreground\", className)} {...props} />;\r\n});\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\";\r\n\r\nconst BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<\"span\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <span\r\n      ref={ref}\r\n      role=\"link\"\r\n      aria-disabled=\"true\"\r\n      aria-current=\"page\"\r\n      className={cn(\"font-normal text-foreground\", className)}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\";\r\n\r\nconst BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<\"li\">) => (\r\n  <li role=\"presentation\" aria-hidden=\"true\" className={cn(\"[&>svg]:size-3.5\", className)} {...props}>\r\n    {children ?? <ChevronRight />}\r\n  </li>\r\n);\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\";\r\n\r\nconst BreadcrumbEllipsis = ({ className, ...props }: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More</span>\r\n  </span>\r\n);\r\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\";\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbEllipsis,\r\n};\r\n","import { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { ApprovalGuard } from \"@/components/ApprovalGuard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ProductCard } from \"@/components/ProductCard\";\r\nimport { ProductCardSkeleton } from \"@/components/ProductCardSkeleton\";\r\nimport { CatalogFilters, FilterState } from \"@/components/CatalogFilters\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { toast } from \"sonner\";\r\nimport { Plus, LogOut, Share2, FileSpreadsheet, Trash2, Heart, Users, LayoutDashboard, Menu, Building2, Shield, FileDown, Edit, Upload, Video, ShoppingCart, Sparkles } from \"lucide-react\";\r\nimport { AutoCategorizationDialog } from \"@/components/AutoCategorizationDialog\";\r\nimport { analyzeCatalog, CategorySuggestion } from \"@/utils/productCategorization\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useVendorPermissions } from \"@/hooks/useVendorPermissions\";\r\nimport { usePlanLimits } from \"@/hooks/usePlanLimits\";\r\nimport { exportCatalogToPDF } from \"@/utils/pdfExport\";\r\nimport { PlanLimitWarning } from \"@/components/PlanLimitWarning\";\r\nimport { PlanUsageBanner } from \"@/components/PlanUsageBanner\";\r\nimport { UpgradePromptDialog } from \"@/components/UpgradePromptDialog\";\r\nimport { GoldRateDialog } from \"@/components/GoldRateDialog\";\r\nimport { MetalRatesCard } from \"@/components/MetalRatesCard\";\r\nimport { FloatingQRCodes } from \"@/components/FloatingQRCodes\";\r\nimport { QuickActionsMenu } from \"@/components/QuickActionsMenu\";\r\nimport { BulkEditDialog } from \"@/components/BulkEditDialog\";\r\nimport { DeleteConfirmationDialog } from \"@/components/DeleteConfirmationDialog\";\r\nimport { Header } from \"@/components/Header\";\r\nimport { Breadcrumb, BreadcrumbList, BreadcrumbItem, BreadcrumbLink, BreadcrumbSeparator, BreadcrumbPage } from \"@/components/ui/breadcrumb\";\r\nimport { NavLink } from \"@/components/NavLink\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nconst Catalog = () => {\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [initialLoadComplete, setInitialLoadComplete] = useState(false);\r\n  const [usdRate, setUsdRate] = useState(87.67);\r\n  const [goldRate, setGoldRate] = useState(0);\r\n  const [silverRate, setSilverRate] = useState(95);\r\n  const [platinumRate, setPlatinumRate] = useState(3200);\r\n  const [selectedProducts, setSelectedProducts] = useState<Set<string>>(new Set());\r\n  const [vendorProfile, setVendorProfile] = useState<any>(null);\r\n  const [selectedProductType, setSelectedProductType] = useState<string>(\"Jewellery\");\r\n  const [approvedCategories, setApprovedCategories] = useState<string[]>([\"Jewellery\"]);\r\n  const [isUpgradeDialogOpen, setIsUpgradeDialogOpen] = useState(false);\r\n  const [upgradeLimitType, setUpgradeLimitType] = useState<'products' | 'share_links' | undefined>();\r\n  const [bulkEditOpen, setBulkEditOpen] = useState(false);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [autoCategorizationOpen, setAutoCategorizationOpen] = useState(false);\r\n  const [categorySuggestions, setCategorySuggestions] = useState<CategorySuggestion[]>([]);\r\n  \r\n  const [filters, setFilters] = useState<FilterState>({\r\n    category: \"\",\r\n    metalType: \"\",\r\n    minPrice: \"\",\r\n    maxPrice: \"\",\r\n    diamondColor: \"\",\r\n    diamondClarity: \"\",\r\n    searchQuery: \"\",\r\n    deliveryType: \"\",\r\n    minDiamondWeight: \"\",\r\n    maxDiamondWeight: \"\",\r\n    minNetWeight: \"\",\r\n    maxNetWeight: \"\",\r\n    gemstoneType: \"\",\r\n    color: \"\",\r\n    clarity: \"\",\r\n    cut: \"\",\r\n    minCarat: \"\",\r\n    maxCarat: \"\",\r\n    diamondType: \"\",\r\n    shape: \"\",\r\n    polish: \"\",\r\n    symmetry: \"\",\r\n    fluorescence: \"\",\r\n    lab: \"\"\r\n  });\r\n\r\n  const navigate = useNavigate();\r\n  const { isAdmin, loading: roleLoading } = useUserRole();\r\n  const { permissions, loading: permissionsLoading } = useVendorPermissions();\r\n  const { canAddProducts, canAddShareLinks, productsRemaining, shareLinksRemaining } = usePlanLimits();\r\n\r\n  const [displayCount, setDisplayCount] = useState(50); // Reduced for faster initial load\r\n  const LOAD_MORE_COUNT = 50;\r\n\r\n  // Redirect admin to admin dashboard\r\n  useEffect(() => {\r\n    if (!roleLoading && isAdmin) {\r\n      navigate(\"/admin\");\r\n    }\r\n  }, [isAdmin, roleLoading, navigate]);\r\n\r\n  // Optimized parallel initial data fetch\r\n  useEffect(() => {\r\n    const initializeData = async () => {\r\n      // Check cached USD rate first (sync)\r\n      const cachedRate = sessionStorage.getItem('usd_rate');\r\n      const cachedTime = sessionStorage.getItem('usd_rate_time');\r\n      if (cachedRate && cachedTime && Date.now() - parseInt(cachedTime) < 3600000) {\r\n        setUsdRate(parseFloat(cachedRate));\r\n      }\r\n      \r\n      // Parallel fetch for faster load\r\n      await Promise.all([\r\n        fetchVendorProfile(),\r\n        fetchApprovedCategories(),\r\n        !cachedRate ? fetchUSDRate() : Promise.resolve()\r\n      ]);\r\n      \r\n      setInitialLoadComplete(true);\r\n    };\r\n    \r\n    initializeData();\r\n  }, []);\r\n\r\n  // Fetch products when product type changes\r\n  useEffect(() => {\r\n    if (selectedProductType && initialLoadComplete) {\r\n      fetchProducts();\r\n    }\r\n  }, [selectedProductType, initialLoadComplete]);\r\n\r\n  // Reset display count on filter change\r\n  useEffect(() => {\r\n    setDisplayCount(50);\r\n  }, [filters, selectedProductType]);\r\n\r\n  const fetchApprovedCategories = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      \r\n      const { data, error } = await supabase\r\n        .from(\"user_approval_status\")\r\n        .select(\"approved_categories\")\r\n        .eq(\"user_id\", user.id)\r\n        .single();\r\n      \r\n      if (error) throw error;\r\n      const approved = data?.approved_categories || [\"Jewellery\"];\r\n      setApprovedCategories(approved);\r\n      setSelectedProductType(approved[0]);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch approved categories:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchUSDRate = async () => {\r\n    try {\r\n      const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');\r\n      const data = await response.json();\r\n      if (data.rates?.INR) {\r\n        setUsdRate(data.rates.INR);\r\n        sessionStorage.setItem('usd_rate', data.rates.INR.toString());\r\n        sessionStorage.setItem('usd_rate_time', Date.now().toString());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch USD rate:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchVendorProfile = async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n      \r\n      const { data, error } = await supabase\r\n        .from(\"vendor_profiles\")\r\n        .select(\"*\")\r\n        .eq(\"user_id\", user.id)\r\n        .maybeSingle();\r\n      \r\n      if (error && error.code !== 'PGRST116') {\r\n        console.error(\"Error fetching vendor profile:\", error);\r\n      } else if (data) {\r\n        setVendorProfile(data);\r\n        if (data.gold_rate_24k_per_gram) {\r\n          setGoldRate(data.gold_rate_24k_per_gram);\r\n        }\r\n        if (data.silver_rate_per_gram) {\r\n          setSilverRate(data.silver_rate_per_gram);\r\n        }\r\n        if (data.platinum_rate_per_gram) {\r\n          setPlatinumRate(data.platinum_rate_per_gram);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch vendor profile:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      let query = supabase\r\n        .from(\"products\")\r\n        .select(\"id, name, sku, image_url, image_url_2, image_url_3, cost_price, retail_price, stock_quantity, category, metal_type, gemstone, color, diamond_color, clarity, delivery_type, product_type, weight_grams, gemstone_type, carat_weight, cut, diamond_type, shape, carat, polish, symmetry, fluorescence, lab, created_at, purity_fraction_used, net_weight, d_value, mkg, certification_cost, gemstone_cost, gold_per_gram_price, d_rate_1, d_wt_1, d_wt_2, pointer_diamond, diamond_weight\")\r\n        .eq(\"user_id\", user.id)\r\n        .is(\"deleted_at\", null);\r\n\r\n      if (selectedProductType === 'Jewellery') {\r\n        query = query.or(`product_type.eq.${selectedProductType},product_type.is.null`);\r\n      } else {\r\n        query = query.eq(\"product_type\", selectedProductType);\r\n      }\r\n      \r\n      const { data, error } = await query.order(\"created_at\", { ascending: false });\r\n        \r\n      if (error) throw error;\r\n      setProducts(data || []);\r\n    } catch (error: any) {\r\n      console.error(\"Failed to load products:\", error);\r\n      toast.error(\"Failed to load products. Please refresh the page.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [selectedProductType]);\r\n\r\n  const handleUpdateGoldRate = async (newRate: number) => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n    \r\n    const { error: profileError } = await supabase\r\n      .from(\"vendor_profiles\")\r\n      .update({\r\n        gold_rate_24k_per_gram: newRate,\r\n        gold_rate_updated_at: new Date().toISOString()\r\n      })\r\n      .eq(\"user_id\", user.id);\r\n    \r\n    if (profileError) throw profileError;\r\n    \r\n    // Recalculate product prices\r\n    const updatedProducts = products.filter(p => p.net_weight || p.weight_grams).map(product => {\r\n      const purityRaw = product.purity_fraction_used || 18;\r\n      let purity: number;\r\n      if (purityRaw <= 1) {\r\n        purity = purityRaw;\r\n      } else if (purityRaw <= 24) {\r\n        purity = purityRaw / 24;\r\n      } else {\r\n        purity = purityRaw / 100;\r\n      }\r\n      \r\n      const weight = product.net_weight || product.weight_grams || 0;\r\n      const goldValue = weight * purity * newRate;\r\n      const diamondValue = product.d_value || 0;\r\n      const makingCharges = product.mkg || 0;\r\n      const certificationCost = product.certification_cost || 0;\r\n      const gemstoneCost = product.gemstone_cost || 0;\r\n      const totalCost = goldValue + diamondValue + makingCharges + certificationCost + gemstoneCost;\r\n      \r\n      return {\r\n        id: product.id,\r\n        cost_price: Math.round(totalCost * 100) / 100,\r\n        retail_price: Math.round(totalCost * 100) / 100,\r\n        gold_per_gram_price: newRate\r\n      };\r\n    });\r\n\r\n    const updatePromises = updatedProducts.map(update => \r\n      supabase.from(\"products\").update({\r\n        cost_price: update.cost_price,\r\n        retail_price: update.retail_price,\r\n        gold_per_gram_price: update.gold_per_gram_price\r\n      }).eq(\"id\", update.id)\r\n    );\r\n    \r\n    await Promise.all(updatePromises);\r\n    setGoldRate(newRate);\r\n    await fetchProducts();\r\n    toast.success(`Gold rate updated to ₹${newRate.toLocaleString('en-IN')}/g`);\r\n  };\r\n\r\n  // Dynamic filter options from products\r\n  const categories = useMemo(() => {\r\n    const productCategories = products.map(p => p.category).filter(Boolean) as string[];\r\n    return [...new Set(productCategories)].sort();\r\n  }, [products]);\r\n  \r\n  const categoryCounts = useMemo(() => {\r\n    const counts: Record<string, number> = { all: products.length };\r\n    products.forEach(p => {\r\n      if (p.category) {\r\n        const cat = p.category.toUpperCase().trim();\r\n        counts[cat] = (counts[cat] || 0) + 1;\r\n      }\r\n    });\r\n    return counts;\r\n  }, [products]);\r\n  \r\n  const metalTypes = useMemo(() => [...new Set(products.map(p => p.metal_type).filter(Boolean))].sort(), [products]);\r\n  const diamondColors = useMemo(() => [...new Set(products.map(p => p.gemstone?.split(' ')[0]).filter(Boolean))].sort(), [products]);\r\n  const diamondClarities = useMemo(() => [...new Set(products.map(p => p.gemstone?.split(' ')[1]).filter(Boolean))].sort(), [products]);\r\n  const deliveryTypes = useMemo(() => [...new Set(products.map(p => p.delivery_type).filter(Boolean))].sort(), [products]);\r\n\r\n  // Filter products\r\n  const filteredProducts = useMemo(() => {\r\n    const filtered = products.filter(product => {\r\n      if (filters.searchQuery) {\r\n        const query = filters.searchQuery.toLowerCase().trim();\r\n        const searchableFields = [\r\n          product.name, product.category, product.sku, product.description,\r\n          product.metal_type, product.gemstone, product.color, product.clarity,\r\n          product.diamond_weight?.toString(), product.net_weight?.toString(),\r\n          product.retail_price?.toString()\r\n        ].filter(Boolean);\r\n        if (!searchableFields.some(field => field?.toLowerCase().includes(query))) return false;\r\n      }\r\n      \r\n      if (filters.category) {\r\n        const categoryMatch = product.category?.toUpperCase().trim() === filters.category.toUpperCase().trim();\r\n        const nameMatch = product.name?.toUpperCase().trim().includes(filters.category.toUpperCase().trim());\r\n        if (!categoryMatch && !nameMatch) return false;\r\n      }\r\n      \r\n      if (filters.metalType && product.metal_type?.toUpperCase().trim() !== filters.metalType.toUpperCase().trim()) return false;\r\n      if (filters.minPrice && product.retail_price < parseFloat(filters.minPrice)) return false;\r\n      if (filters.maxPrice && product.retail_price > parseFloat(filters.maxPrice)) return false;\r\n      \r\n      if (filters.diamondColor) {\r\n        const color = product.gemstone?.split(' ')[0];\r\n        if (color?.toUpperCase().trim() !== filters.diamondColor.toUpperCase().trim()) return false;\r\n      }\r\n      \r\n      if (filters.diamondClarity) {\r\n        const clarity = product.gemstone?.split(' ')[1];\r\n        if (clarity?.toUpperCase().trim() !== filters.diamondClarity.toUpperCase().trim()) return false;\r\n      }\r\n      \r\n      if (filters.deliveryType && product.delivery_type !== filters.deliveryType) return false;\r\n      \r\n      if (filters.minDiamondWeight) {\r\n        const minDW = parseFloat(filters.minDiamondWeight);\r\n        if (!product.diamond_weight || product.diamond_weight < minDW) return false;\r\n      }\r\n      if (filters.maxDiamondWeight) {\r\n        const maxDW = parseFloat(filters.maxDiamondWeight);\r\n        if (!product.diamond_weight || product.diamond_weight > maxDW) return false;\r\n      }\r\n      \r\n      if (filters.minNetWeight) {\r\n        const minNW = parseFloat(filters.minNetWeight);\r\n        if (!product.net_weight || product.net_weight < minNW) return false;\r\n      }\r\n      if (filters.maxNetWeight) {\r\n        const maxNW = parseFloat(filters.maxNetWeight);\r\n        if (!product.net_weight || product.net_weight > maxNW) return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n    \r\n    // Natural sort by name\r\n    return filtered.sort((a, b) => {\r\n      const matchA = a.name?.match(/^(.+?)\\s*(\\d+)$/);\r\n      const matchB = b.name?.match(/^(.+?)\\s*(\\d+)$/);\r\n      if (matchA && matchB && matchA[1] === matchB[1]) {\r\n        return parseInt(matchA[2], 10) - parseInt(matchB[2], 10);\r\n      }\r\n      return (a.name || '').localeCompare(b.name || '');\r\n    });\r\n  }, [products, filters]);\r\n\r\n  const displayedProducts = useMemo(() => filteredProducts.slice(0, displayCount), [filteredProducts, displayCount]);\r\n  const hasMoreProducts = filteredProducts.length > displayCount;\r\n  const totalINR = filteredProducts.reduce((sum, p) => sum + (p.retail_price || 0), 0);\r\n  const totalUSD = totalINR / usdRate;\r\n\r\n  const loadMoreProducts = () => setDisplayCount(prev => prev + LOAD_MORE_COUNT);\r\n\r\n  const exportToPDF = useCallback(async () => {\r\n    try {\r\n      exportCatalogToPDF(filteredProducts, vendorProfile, usdRate, goldRate, totalINR, totalUSD);\r\n      toast.success(\"Catalog exported to PDF!\");\r\n    } catch (error) {\r\n      toast.error(\"Failed to export catalog to PDF\");\r\n    }\r\n  }, [filteredProducts, vendorProfile, usdRate, goldRate, totalINR, totalUSD]);\r\n\r\n  const getCategoryCount = useCallback((category: string) => {\r\n    if (category === 'Jewellery') {\r\n      return products.filter(p => p.product_type === 'Jewellery' || p.product_type === null).length;\r\n    }\r\n    return products.filter(p => p.product_type === category).length;\r\n  }, [products]);\r\n\r\n  const handleDeleteSelected = useCallback(async () => {\r\n    setIsDeleting(true);\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        toast.error(\"You must be logged in to delete products\");\r\n        return;\r\n      }\r\n      \r\n      const { error } = await supabase\r\n        .from(\"products\")\r\n        .update({ deleted_at: new Date().toISOString() })\r\n        .in(\"id\", Array.from(selectedProducts))\r\n        .eq(\"user_id\", user.id);\r\n      \r\n      if (error) throw error;\r\n      \r\n      toast.success(`${selectedProducts.size} product(s) deleted`);\r\n      setSelectedProducts(new Set());\r\n      setDeleteDialogOpen(false);\r\n      await fetchProducts();\r\n    } catch (error: any) {\r\n      toast.error(`Failed to delete: ${error.message || 'Unknown error'}`);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  }, [selectedProducts, fetchProducts]);\r\n\r\n  const selectedProductsData = useMemo(() => {\r\n    return products.filter(p => selectedProducts.has(p.id)).map(p => ({ id: p.id, name: p.name, sku: p.sku }));\r\n  }, [products, selectedProducts]);\r\n\r\n  const handleBulkUpdate = useCallback(async (updates: Record<string, any>) => {\r\n    if (selectedProducts.size === 0) {\r\n      toast.error(\"No products selected\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n\r\n      const pricingAdjustment = updates.pricingAdjustment;\r\n      delete updates.pricingAdjustment;\r\n\r\n      const formattedUpdates: Record<string, any> = {};\r\n      Object.entries(updates).forEach(([key, value]) => {\r\n        if (value === \"\" || value === null) return;\r\n        if (['cost_price', 'retail_price', 'weight_grams', 'stock_quantity', 'dispatches_in_days'].includes(key)) {\r\n          const numValue = parseFloat(value as string);\r\n          if (!isNaN(numValue) && numValue >= 0) formattedUpdates[key] = numValue;\r\n        } else if (key === 'purity_fraction_used') {\r\n          const numValue = parseFloat(value as string);\r\n          if (!isNaN(numValue) && numValue >= 0) formattedUpdates[key] = numValue > 1 ? numValue / 100 : numValue;\r\n        } else {\r\n          formattedUpdates[key] = value;\r\n        }\r\n      });\r\n\r\n      if (pricingAdjustment && pricingAdjustment.percentage > 0) {\r\n        const { data: currentProducts, error: fetchError } = await supabase\r\n          .from(\"products\")\r\n          .select(\"id, cost_price, retail_price\")\r\n          .in(\"id\", Array.from(selectedProducts))\r\n          .eq(\"user_id\", user.id);\r\n\r\n        if (fetchError) throw fetchError;\r\n\r\n        if (currentProducts) {\r\n          const updatePromises = currentProducts.map(async (product) => {\r\n            const multiplier = pricingAdjustment.type === 'markup' \r\n              ? (1 + pricingAdjustment.percentage / 100)\r\n              : (1 - pricingAdjustment.percentage / 100);\r\n\r\n            return supabase.from(\"products\").update({\r\n              ...formattedUpdates,\r\n              cost_price: formattedUpdates.cost_price || Math.max(0, product.cost_price * multiplier),\r\n              retail_price: formattedUpdates.retail_price || Math.max(0, product.retail_price * multiplier),\r\n            }).eq(\"id\", product.id).eq(\"user_id\", user.id);\r\n          });\r\n\r\n          await Promise.all(updatePromises);\r\n          toast.success(`${selectedProducts.size} product(s) updated`);\r\n        }\r\n      } else {\r\n        if (Object.keys(formattedUpdates).length === 0) {\r\n          toast.error(\"No changes to update\");\r\n          return;\r\n        }\r\n\r\n        const { error } = await supabase\r\n          .from(\"products\")\r\n          .update(formattedUpdates)\r\n          .in(\"id\", Array.from(selectedProducts))\r\n          .eq(\"user_id\", user.id);\r\n        \r\n        if (error) throw error;\r\n        toast.success(`${selectedProducts.size} product(s) updated`);\r\n      }\r\n      \r\n      setSelectedProducts(new Set());\r\n      await fetchProducts();\r\n    } catch (error: any) {\r\n      toast.error(`Failed to update: ${error.message || 'Unknown error'}`);\r\n    }\r\n  }, [selectedProducts, fetchProducts]);\r\n\r\n  const handleAutoCategorizationClick = () => {\r\n    if (!products || products.length === 0) {\r\n      toast.info(\"No products found\");\r\n      return;\r\n    }\r\n    \r\n    const suggestions = analyzeCatalog(products.map(p => ({ id: p.id, name: p.name, sku: p.sku, category: p.category })));\r\n    if (suggestions.length === 0) {\r\n      toast.info(\"All products already have categories\");\r\n      return;\r\n    }\r\n    \r\n    setCategorySuggestions(suggestions);\r\n    setAutoCategorizationOpen(true);\r\n  };\r\n\r\n  const handleApplyCategorization = async (selectedIds: string[]) => {\r\n    try {\r\n      const updatesByCategory = categorySuggestions\r\n        .filter(s => selectedIds.includes(s.productId))\r\n        .reduce((acc, s) => {\r\n          if (!acc[s.suggestedCategory]) acc[s.suggestedCategory] = [];\r\n          acc[s.suggestedCategory].push(s.productId);\r\n          return acc;\r\n        }, {} as Record<string, string[]>);\r\n\r\n      for (const [category, productIds] of Object.entries(updatesByCategory)) {\r\n        const { error } = await supabase.from(\"products\").update({ category }).in(\"id\", productIds);\r\n        if (error) throw error;\r\n      }\r\n\r\n      toast.success(`Categorized ${selectedIds.length} products!`);\r\n      await fetchProducts();\r\n    } catch (error) {\r\n      toast.error(\"Failed to apply categorization\");\r\n      throw error;\r\n    }\r\n  };\r\n  \r\n  const toggleProductSelection = useCallback((productId: string) => {\r\n    setSelectedProducts(prev => {\r\n      const newSelected = new Set(prev);\r\n      newSelected.has(productId) ? newSelected.delete(productId) : newSelected.add(productId);\r\n      return newSelected;\r\n    });\r\n  }, []);\r\n\r\n  const toggleSelectAll = useCallback(() => {\r\n    setSelectedProducts(prev => prev.size === products.length ? new Set() : new Set(products.map(p => p.id)));\r\n  }, [products]);\r\n\r\n  const handleSignOut = useCallback(async () => {\r\n    await supabase.auth.signOut();\r\n    navigate(\"/auth\");\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <ApprovalGuard>\r\n      <GoldRateDialog currentGoldRate={goldRate} onUpdate={handleUpdateGoldRate} onSkip={() => {}} />\r\n      <FloatingQRCodes instagramQrUrl={vendorProfile?.instagram_qr_url} whatsappQrUrl={vendorProfile?.whatsapp_qr_url} />\r\n      <QuickActionsMenu onExportPDF={exportToPDF} onAutoCategorize={handleAutoCategorizationClick} />\r\n\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-muted/10 to-background relative overflow-hidden\">\r\n        <Header />\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none\" />\r\n\r\n        {/* Breadcrumb */}\r\n        <div className=\"relative bg-background/50 backdrop-blur-sm border-b border-border/30 z-10\">\r\n          <div className=\"container mx-auto px-3 md:px-4 py-2 md:py-3\">\r\n            <Breadcrumb>\r\n              <BreadcrumbList className=\"text-sm\">\r\n                <BreadcrumbItem>\r\n                  <BreadcrumbLink asChild>\r\n                    <NavLink to=\"/\">Home</NavLink>\r\n                  </BreadcrumbLink>\r\n                </BreadcrumbItem>\r\n                <BreadcrumbSeparator className=\"text-xs\" />\r\n                <BreadcrumbItem>\r\n                  <BreadcrumbPage className=\"text-sm\">Catalog</BreadcrumbPage>\r\n                </BreadcrumbItem>\r\n              </BreadcrumbList>\r\n            </Breadcrumb>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <header className=\"relative border-b border-border/50 bg-card/95 backdrop-blur-xl shadow-xl z-10\">\r\n          <div className=\"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 max-w-[1800px] relative z-10\">\r\n            {/* Vendor Details */}\r\n            {vendorProfile && (\r\n              <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 lg:gap-6 mb-4 pb-4 border-b border-border/30\">\r\n                <div className=\"flex items-start gap-3 sm:gap-4 flex-1 w-full lg:w-auto\">\r\n                  {vendorProfile.logo_url && (\r\n                    <div className=\"flex-shrink-0\">\r\n                      <img src={vendorProfile.logo_url} alt=\"Logo\" className=\"w-12 h-12 sm:w-16 sm:h-16 object-contain rounded-lg border border-border/30\" />\r\n                    </div>\r\n                  )}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h1 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-foreground truncate\">\r\n                      {vendorProfile.business_name || \"My Catalog\"}\r\n                    </h1>\r\n                    {vendorProfile.brand_tagline && (\r\n                      <p className=\"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2\">{vendorProfile.brand_tagline}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Stats */}\r\n                <div className=\"flex items-center gap-4 sm:gap-6 text-xs sm:text-sm\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"font-bold text-foreground\">{products.length}</div>\r\n                    <div className=\"text-muted-foreground\">Products</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"font-bold text-foreground\">₹{goldRate.toLocaleString('en-IN')}</div>\r\n                    <div className=\"text-muted-foreground\">Gold Rate/g</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"font-bold text-foreground\">₹{totalINR.toLocaleString('en-IN')}</div>\r\n                    <div className=\"text-muted-foreground\">Total Value</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex items-center justify-center gap-2 sm:gap-3\">\r\n              {/* Desktop Menu */}\r\n              <div className=\"hidden lg:flex items-center flex-wrap gap-2 justify-center\">\r\n                {(permissions.can_view_interests || isAdmin) && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/interests\")}>\r\n                    <Heart className=\"h-4 w-4 mr-2\" />Interests\r\n                  </Button>\r\n                )}\r\n                {(permissions.can_view_interests || isAdmin) && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/video-requests\")}>\r\n                    <Video className=\"h-4 w-4 mr-2\" />Video Requests\r\n                  </Button>\r\n                )}\r\n                {(permissions.can_edit_profile || isAdmin) && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/vendor-profile\")}>\r\n                    <Building2 className=\"h-4 w-4 mr-2\" />Profile\r\n                  </Button>\r\n                )}\r\n                {(permissions.can_share_catalog || isAdmin) && (\r\n                  <TooltipProvider>\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <Button \r\n                          variant=\"outline\" \r\n                          size=\"sm\" \r\n                          onClick={() => {\r\n                            if (!canAddShareLinks && !isAdmin) {\r\n                              setUpgradeLimitType('share_links');\r\n                              setIsUpgradeDialogOpen(true);\r\n                              return;\r\n                            }\r\n                            navigate(\"/share\");\r\n                          }}\r\n                          disabled={!canAddShareLinks && !isAdmin}\r\n                        >\r\n                          <Share2 className=\"h-4 w-4 mr-2\" />Share\r\n                          {!isAdmin && shareLinksRemaining !== Infinity && shareLinksRemaining < 100 && (\r\n                            <span className=\"ml-1 text-xs text-muted-foreground\">({shareLinksRemaining} left)</span>\r\n                          )}\r\n                        </Button>\r\n                      </TooltipTrigger>\r\n                      {!canAddShareLinks && !isAdmin && (\r\n                        <TooltipContent><p>Share link limit reached</p></TooltipContent>\r\n                      )}\r\n                    </Tooltip>\r\n                  </TooltipProvider>\r\n                )}\r\n                {isAdmin && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/admin\")}>\r\n                    <LayoutDashboard className=\"h-4 w-4 mr-2\" />Admin\r\n                  </Button>\r\n                )}\r\n                {(permissions.can_add_products || isAdmin) && (\r\n                  <TooltipProvider>\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <Button \r\n                          variant=\"outline\" \r\n                          size=\"sm\" \r\n                          onClick={() => {\r\n                            if (!canAddProducts && !isAdmin) {\r\n                              setUpgradeLimitType('products');\r\n                              setIsUpgradeDialogOpen(true);\r\n                              return;\r\n                            }\r\n                            navigate(\"/add-product\");\r\n                          }}\r\n                          disabled={!canAddProducts && !isAdmin}\r\n                        >\r\n                          <Plus className=\"h-4 w-4 mr-2\" />Add\r\n                          {!isAdmin && productsRemaining !== Infinity && productsRemaining < 100 && (\r\n                            <span className=\"ml-1 text-xs text-muted-foreground\">({productsRemaining} left)</span>\r\n                          )}\r\n                        </Button>\r\n                      </TooltipTrigger>\r\n                      {!canAddProducts && !isAdmin && (\r\n                        <TooltipContent><p>Product limit reached</p></TooltipContent>\r\n                      )}\r\n                    </Tooltip>\r\n                  </TooltipProvider>\r\n                )}\r\n                {(permissions.can_import_data || isAdmin) && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/import\")}>\r\n                    <FileSpreadsheet className=\"h-4 w-4 mr-2\" />Import\r\n                  </Button>\r\n                )}\r\n                <Button variant=\"outline\" size=\"sm\" onClick={exportToPDF}>\r\n                  <FileDown className=\"h-4 w-4 mr-2\" />Export PDF\r\n                </Button>\r\n                {(permissions.can_manage_team || isAdmin) && (\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/team\")}>\r\n                    <Users className=\"h-4 w-4 mr-2\" />Team\r\n                  </Button>\r\n                )}\r\n                {(permissions.can_delete_products || isAdmin) && selectedProducts.size > 0 && (\r\n                  <>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => setBulkEditOpen(true)}>\r\n                      <Edit className=\"h-4 w-4 mr-2\" />Update ({selectedProducts.size})\r\n                    </Button>\r\n                    <Button variant=\"destructive\" size=\"sm\" onClick={() => setDeleteDialogOpen(true)}>\r\n                      <Trash2 className=\"h-4 w-4 mr-2\" />Delete ({selectedProducts.size})\r\n                    </Button>\r\n                  </>\r\n                )}\r\n                <Button variant=\"ghost\" size=\"sm\" onClick={handleSignOut}>\r\n                  <LogOut className=\"h-4 w-4 mr-2\" />Sign Out\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Mobile Menu */}\r\n              <div className=\"lg:hidden w-full\">\r\n                <DropdownMenu>\r\n                  <DropdownMenuTrigger asChild>\r\n                    <Button variant=\"outline\" size=\"default\" className=\"w-full h-11\">\r\n                      <Menu className=\"h-5 w-5 mr-2\" /><span className=\"font-medium\">Menu</span>\r\n                    </Button>\r\n                  </DropdownMenuTrigger>\r\n                  <DropdownMenuContent align=\"center\" className=\"w-[calc(100vw-2rem)] sm:w-80 max-h-[70vh] overflow-y-auto\">\r\n                    {(permissions.can_view_interests || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/interests\")} className=\"py-3\">\r\n                        <Heart className=\"h-5 w-5 mr-3 text-primary\" />View Interests\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {(permissions.can_view_interests || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/video-requests\")} className=\"py-3\">\r\n                        <Video className=\"h-5 w-5 mr-3 text-primary\" />Video Requests\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {(permissions.can_view_interests || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/purchase-inquiries\")} className=\"py-3\">\r\n                        <ShoppingCart className=\"h-5 w-5 mr-3 text-primary\" />Purchase Inquiries\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {(permissions.can_edit_profile || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/vendor-profile\")} className=\"py-3\">\r\n                        <Building2 className=\"h-5 w-5 mr-3 text-primary\" />Vendor Profile\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {(permissions.can_share_catalog || isAdmin) && (\r\n                      <DropdownMenuItem \r\n                        onClick={() => {\r\n                          if (!canAddShareLinks && !isAdmin) {\r\n                            setUpgradeLimitType('share_links');\r\n                            setIsUpgradeDialogOpen(true);\r\n                            return;\r\n                          }\r\n                          navigate(\"/share\");\r\n                        }}\r\n                        disabled={!canAddShareLinks && !isAdmin}\r\n                        className=\"py-3\"\r\n                      >\r\n                        <Share2 className=\"h-5 w-5 mr-3 text-primary\" />Share Catalog\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {isAdmin && (\r\n                      <>\r\n                        <DropdownMenuSeparator />\r\n                        <DropdownMenuItem onClick={() => navigate(\"/admin\")} className=\"py-3\">\r\n                          <LayoutDashboard className=\"h-5 w-5 mr-3 text-primary\" />Admin Dashboard\r\n                        </DropdownMenuItem>\r\n                      </>\r\n                    )}\r\n                    <DropdownMenuSeparator />\r\n                    {(permissions.can_add_products || isAdmin) && (\r\n                      <DropdownMenuItem \r\n                        onClick={() => {\r\n                          if (!canAddProducts && !isAdmin) {\r\n                            setUpgradeLimitType('products');\r\n                            setIsUpgradeDialogOpen(true);\r\n                            return;\r\n                          }\r\n                          navigate(\"/add-product\");\r\n                        }}\r\n                        disabled={!canAddProducts && !isAdmin}\r\n                        className=\"py-3\"\r\n                      >\r\n                        <Plus className=\"h-5 w-5 mr-3 text-primary\" />Add Product\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    {(permissions.can_import_data || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/import\")} className=\"py-3\">\r\n                        <FileSpreadsheet className=\"h-5 w-5 mr-3 text-primary\" />Import Data\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    <DropdownMenuItem onClick={exportToPDF} className=\"py-3\">\r\n                      <FileDown className=\"h-5 w-5 mr-3 text-primary\" />Export PDF\r\n                    </DropdownMenuItem>\r\n                    {(permissions.can_manage_team || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/team\")} className=\"py-3\">\r\n                        <Users className=\"h-5 w-5 mr-3 text-primary\" />Manage Team\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    <DropdownMenuSeparator />\r\n                    {(permissions.can_view_sessions || isAdmin) && (\r\n                      <DropdownMenuItem onClick={() => navigate(\"/active-sessions\")} className=\"py-3\">\r\n                        <Shield className=\"h-5 w-5 mr-3 text-primary\" />Active Sessions\r\n                      </DropdownMenuItem>\r\n                    )}\r\n                    <DropdownMenuItem onClick={handleSignOut} className=\"py-3 text-destructive\">\r\n                      <LogOut className=\"h-5 w-5 mr-3\" />Sign Out\r\n                    </DropdownMenuItem>\r\n                  </DropdownMenuContent>\r\n                </DropdownMenu>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"container mx-auto px-3 sm:px-4 lg:px-6 py-6 sm:py-8 lg:py-10 max-w-[1800px]\">\r\n          <div className=\"mb-6 space-y-4\">\r\n            <PlanLimitWarning />\r\n            <PlanUsageBanner />\r\n            <MetalRatesCard\r\n              goldRate={goldRate}\r\n              silverRate={silverRate}\r\n              platinumRate={platinumRate}\r\n              onRatesUpdated={(rates) => {\r\n                setGoldRate(rates.goldRate);\r\n                setSilverRate(rates.silverRate);\r\n                setPlatinumRate(rates.platinumRate);\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n              {Array.from({ length: 6 }).map((_, i) => <ProductCardSkeleton key={i} />)}\r\n            </div>\r\n          ) : (\r\n            <div className=\"animate-fade-in\">\r\n              {/* Category Selector */}\r\n              {approvedCategories.length > 1 && (\r\n                <div className=\"mb-6 flex gap-2 overflow-x-auto justify-start md:justify-center pb-2 px-2\">\r\n                  {approvedCategories.map(category => (\r\n                    <button\r\n                      key={category}\r\n                      onClick={() => setSelectedProductType(category)}\r\n                      disabled={loading}\r\n                      className={`px-4 py-2 rounded-xl font-medium text-sm transition-all ${\r\n                        selectedProductType === category \r\n                          ? 'bg-primary text-primary-foreground scale-105' \r\n                          : 'bg-card border border-border hover:bg-muted'\r\n                      }`}\r\n                    >\r\n                      {category} ({getCategoryCount(category)})\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              {/* Filters */}\r\n              <CatalogFilters\r\n                filters={filters}\r\n                onFilterChange={setFilters}\r\n                productType={selectedProductType}\r\n                categories={categories}\r\n                metalTypes={metalTypes}\r\n                diamondColors={diamondColors}\r\n                diamondClarities={diamondClarities}\r\n                deliveryTypes={deliveryTypes}\r\n                categoryCounts={categoryCounts}\r\n                gemstoneTypes={[]}\r\n                colors={[]}\r\n                clarities={[]}\r\n                cuts={[]}\r\n                shapes={[]}\r\n                polishes={[]}\r\n                symmetries={[]}\r\n                fluorescences={[]}\r\n                labs={[]}\r\n              />\r\n\r\n              {/* Select All */}\r\n              {(permissions.can_delete_products || isAdmin) && products.length > 0 && (\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <Checkbox\r\n                    checked={selectedProducts.size === products.length && products.length > 0}\r\n                    onCheckedChange={toggleSelectAll}\r\n                    id=\"select-all\"\r\n                  />\r\n                  <label htmlFor=\"select-all\" className=\"text-sm text-muted-foreground cursor-pointer\">\r\n                    Select All ({selectedProducts.size}/{products.length})\r\n                  </label>\r\n                </div>\r\n              )}\r\n\r\n              {/* Products Grid */}\r\n              {displayedProducts.length === 0 ? (\r\n                <div className=\"text-center py-16\">\r\n                  <div className=\"text-6xl mb-4\">💎</div>\r\n                  <h3 className=\"text-xl font-semibold mb-2\">No products found</h3>\r\n                  <p className=\"text-muted-foreground mb-4\">Add your first product to get started</p>\r\n                  {(permissions.can_add_products || isAdmin) && (\r\n                    <Button onClick={() => navigate(\"/add-product\")}>\r\n                      <Plus className=\"h-4 w-4 mr-2\" />Add Product\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-5\">\r\n                    {displayedProducts.map((product) => (\r\n                      <ProductCard\r\n                        key={product.id}\r\n                        product={product}\r\n                        isSelected={selectedProducts.has(product.id)}\r\n                        onToggleSelection={toggleProductSelection}\r\n                        usdRate={usdRate}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Load More */}\r\n                  {hasMoreProducts && (\r\n                    <div className=\"flex justify-center mt-8\">\r\n                      <Button variant=\"outline\" size=\"lg\" onClick={loadMoreProducts}>\r\n                        Load More ({filteredProducts.length - displayCount} remaining)\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Results Summary */}\r\n                  <div className=\"mt-6 text-center text-sm text-muted-foreground\">\r\n                    Showing {displayedProducts.length} of {filteredProducts.length} products\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n\r\n      {/* Dialogs */}\r\n      <UpgradePromptDialog\r\n        open={isUpgradeDialogOpen}\r\n        onOpenChange={setIsUpgradeDialogOpen}\r\n        limitType={upgradeLimitType}\r\n      />\r\n      \r\n      <BulkEditDialog\r\n        open={bulkEditOpen}\r\n        onOpenChange={setBulkEditOpen}\r\n        selectedCount={selectedProducts.size}\r\n        onUpdate={handleBulkUpdate}\r\n        selectedProductIds={Array.from(selectedProducts)}\r\n      />\r\n\r\n      <DeleteConfirmationDialog\r\n        open={deleteDialogOpen}\r\n        onOpenChange={setDeleteDialogOpen}\r\n        onConfirm={handleDeleteSelected}\r\n        isDeleting={isDeleting}\r\n        products={selectedProductsData}\r\n      />\r\n\r\n      <AutoCategorizationDialog\r\n        open={autoCategorizationOpen}\r\n        onOpenChange={setAutoCategorizationOpen}\r\n        suggestions={categorySuggestions}\r\n        onApply={handleApplyCategorization}\r\n      />\r\n    </ApprovalGuard>\r\n  );\r\n};\r\n\r\nexport default Catalog;\r\n"],"names":["ProductCardComponent","product","isSelected","onToggleSelection","usdRate","vendorLogoUrl","images","currentImageIndex","setCurrentImageIndex","useState","isHovering","setIsHovering","nextImage","prev","prevImage","handleMouseEnter","handleMouseLeave","jsxs","Card","jsx","e","Checkbox","checked","OptimizedImage","Fragment","ChevronLeft","ChevronRight","_","idx","Gem","CardHeader","CardContent","CardFooter","Badge","Zap","Calendar","ProductCard","memo","prevProps","nextProps","ProductCardSkeleton","Skeleton","CATEGORY_PATTERNS","suggestCategory","productName","sku","searchText","sortedPatterns","a","b","category","patterns","priority","pattern","confidence","analyzeCatalog","products","suggestions","suggestion","getSuggestionStats","byCategory","acc","s","byConfidence","AutoCategorizationDialog","open","onOpenChange","onApply","selectedIds","setSelectedIds","isApplying","setIsApplying","stats","toggleSelection","id","newSelected","toggleAll","handleApply","getConfidenceBadge","Dialog","DialogContent","DialogHeader","DialogTitle","Sparkles","DialogDescription","TrendingUp","count","ScrollArea","DialogFooter","Button","CheckCircle2","usePlanLimits","limits","setLimits","usage","setUsage","loading","setLoading","useEffect","fetchLimitsAndUsage","user","getCachedUser","permissionsResult","productsResult","shareLinksResult","supabase","error","productUsagePercent","shareLinksUsagePercent","hasUnlimitedProducts","hasUnlimitedShareLinks","exportCatalogToPDF","vendorProfile","goldRate","totalINR","totalUSD","doc","jsPDF","pageWidth","yPos","contactInfo","tableData","index","autoTable","data","finalY","fileName","_a","PlanUsageBanner","productsRemaining","shareLinksRemaining","isProductsUnlimited","isShareLinksUnlimited","isAnyLimitHigh","isAnyLimitExhausted","Alert","AlertCircle","AlertDescription","Progress","UpgradePromptDialog","limitType","navigate","useNavigate","handleUpgrade","getLimitMessage","plans","plan","feature","Check","GoldRateDialog","currentGoldRate","onUpdate","onSkip","setOpen","setGoldRate","updating","setUpdating","today","handleUpdate","newRate","toast","handleSkip","X","motion","Label","Input","MetalRatesCard","silverRate","platinumRate","onRatesUpdated","newGoldRate","setNewGoldRate","newSilverRate","setNewSilverRate","newPlatinumRate","setNewPlatinumRate","gold","silver","platinum","CardTitle","Save","FloatingQRCodes","instagramQrUrl","whatsappQrUrl","isExpanded","setIsExpanded","keyboardHeight","isKeyboardVisible","useKeyboardHeight","bottomPosition","TooltipProvider","AnimatePresence","QrCode","Instagram","MessageCircle","Tooltip","TooltipTrigger","TooltipContent","QuickActionsMenu","onExportPDF","onAutoCategorize","isOpen","setIsOpen","isUpgradeDialogOpen","setIsUpgradeDialogOpen","upgradeLimitType","setUpgradeLimitType","canAddProducts","canAddShareLinks","handleAddProduct","handleShareCatalog","getProductLabel","getShareLabel","actions","Plus","Share2","ShoppingCart","Trophy","FileText","History","Calculator","FileDown","action","buttonContent","bulkUpdateSchema","z","BulkEditDialog","selectedCount","selectedProductIds","updates","setUpdates","priceAdjustmentType","setPriceAdjustmentType","priceAdjustmentPercent","setPriceAdjustmentPercent","showPreview","setShowPreview","productPreviews","setProductPreviews","loadingPreview","setLoadingPreview","generatePreview","validationData","validationError","previews","changes","fieldNames","key","value","oldValue","multiplier","newCostPrice","newRetailPrice","p","handleBack","handleFieldChange","field","newUpdates","hasChanges","preview","Table","TableHeader","TableRow","TableHead","TableBody","change","changeIdx","TableCell","ArrowRight","Tabs","TabsList","TabsTrigger","TabsContent","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Percent","Loader2","Eye","DeleteConfirmationDialog","onConfirm","isDeleting","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertTriangle","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Breadcrumb","React.forwardRef","props","ref","BreadcrumbList","className","cn","BreadcrumbItem","BreadcrumbLink","asChild","Comp","Slot","BreadcrumbPage","BreadcrumbSeparator","children","Catalog","setProducts","initialLoadComplete","setInitialLoadComplete","setUsdRate","setSilverRate","setPlatinumRate","selectedProducts","setSelectedProducts","setVendorProfile","selectedProductType","setSelectedProductType","approvedCategories","setApprovedCategories","bulkEditOpen","setBulkEditOpen","deleteDialogOpen","setDeleteDialogOpen","setIsDeleting","autoCategorizationOpen","setAutoCategorizationOpen","categorySuggestions","setCategorySuggestions","filters","setFilters","isAdmin","roleLoading","useUserRole","permissions","useVendorPermissions","displayCount","setDisplayCount","LOAD_MORE_COUNT","cachedRate","cachedTime","fetchVendorProfile","fetchApprovedCategories","fetchUSDRate","fetchProducts","approved","useCallback","query","handleUpdateGoldRate","profileError","updatePromises","purityRaw","purity","goldValue","diamondValue","makingCharges","certificationCost","gemstoneCost","totalCost","update","categories","useMemo","productCategories","categoryCounts","counts","cat","metalTypes","diamondColors","diamondClarities","deliveryTypes","filteredProducts","_b","_c","categoryMatch","_d","nameMatch","_e","_f","color","_g","clarity","_h","minDW","maxDW","minNW","maxNW","matchA","matchB","displayedProducts","hasMoreProducts","sum","loadMoreProducts","exportToPDF","getCategoryCount","handleDeleteSelected","selectedProductsData","handleBulkUpdate","pricingAdjustment","formattedUpdates","numValue","currentProducts","fetchError","handleAutoCategorizationClick","handleApplyCategorization","updatesByCategory","productIds","toggleProductSelection","productId","toggleSelectAll","handleSignOut","ApprovalGuard","Header","NavLink","Heart","Video","Building2","LayoutDashboard","FileSpreadsheet","Users","Edit","Trash2","LogOut","DropdownMenu","DropdownMenuTrigger","Menu","DropdownMenuContent","DropdownMenuItem","DropdownMenuSeparator","Shield","PlanLimitWarning","rates","i","CatalogFilters"],"mappings":"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"}