import{j as e}from"./query-vendor-CIvqgC9B.js";import{r as a,u as j}from"./react-vendor-BCzWReGx.js";import{l as i,C as g,t as y,x as v,y as N,o as b,B as P}from"./index-DBHw7ps1.js";import{I as m}from"./input-CpEp8mrX.js";import{L as u}from"./label-Di_dI0OZ.js";import{u as r,E as C}from"./ui-vendor-B3Ur81tx.js";import{B as k}from"./BackToHomeButton-Vfa6cTYe.js";import"./supabase-vendor-DJknrin8.js";const q=()=>{const[t,h]=a.useState(""),[l,x]=a.useState(""),[d,c]=a.useState(!1),[p,f]=a.useState(!1),o=j();a.useEffect(()=>{i.auth.getSession().then(({data:{session:s}})=>{s?f(!0):(r.error("Invalid or expired reset link"),o("/auth"))})},[o]);const w=async s=>{if(s.preventDefault(),t!==l){r.error("Passwords do not match");return}if(t.length<6){r.error("Password must be at least 6 characters");return}c(!0);try{const{error:n}=await i.auth.updateUser({password:t});if(n)throw n;r.success("Password updated successfully!"),await i.auth.signOut(),o("/auth")}catch(n){r.error(n.message||"Failed to reset password")}finally{c(!1)}};return p?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(k,{variant:"ghost"})}),e.jsxs(g,{className:"w-full max-w-md",children:[e.jsxs(y,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(C,{className:"h-12 w-12 text-primary"})}),e.jsx(v,{className:"text-3xl font-serif",children:"Reset Password"}),e.jsx(N,{children:"Enter your new password below"})]}),e.jsxs(b,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",children:"New Password"}),e.jsx(m,{id:"password",type:"password",value:t,onChange:s=>h(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(m,{id:"confirmPassword",type:"password",value:l,onChange:s=>x(s.target.value),required:!0,placeholder:"••••••••",minLength:6})]}),e.jsx(P,{type:"submit",className:"w-full",disabled:d,children:d?"Updating...":"Reset Password"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>o("/auth"),className:"text-sm text-primary hover:underline",children:"Back to sign in"})})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse text-primary text-xl",children:"Verifying reset link..."})})};export{q as default};
//# sourceMappingURL=ResetPassword-BkW5mqBK.js.map
